webpackJsonp([5],{759:function(module,exports,__webpack_require__){"use strict";var _toConsumableArray2=__webpack_require__(46);var _toConsumableArray3=_interopRequireDefault(_toConsumableArray2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var page=__webpack_require__(40);var controller=__webpack_require__(655),upgradesController=__webpack_require__(2793),domainManagementController=__webpack_require__(2801),SiftScience=__webpack_require__(2436),config=__webpack_require__(10),paths=__webpack_require__(342);function registerMultiPage(_ref){var paths=_ref.paths;var handlers=_ref.handlers;paths.forEach(function(path){return page.apply(undefined,[path].concat((0,_toConsumableArray3.default)(handlers)))})}function getCommonHandlers(){var _ref2=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref2$noSitePath=_ref2.noSitePath;var noSitePath=_ref2$noSitePath===undefined?paths.domainManagementRoot():_ref2$noSitePath;var _ref2$warnIfJetpack=_ref2.warnIfJetpack;var warnIfJetpack=_ref2$warnIfJetpack===undefined?true:_ref2$warnIfJetpack;var handlers=[controller.siteSelection,controller.navigation];if(noSitePath){handlers.push(upgradesController.redirectIfNoSite(noSitePath))}if(warnIfJetpack){handlers.push(controller.jetPackWarning)}return handlers}module.exports=function(){SiftScience.recordUser();page(paths.domainManagementEmail(),controller.siteSelection,controller.sites);registerMultiPage({paths:[paths.domainManagementEmail(":site",":domain"),paths.domainManagementEmail(":site")],handlers:[].concat((0,_toConsumableArray3.default)(getCommonHandlers({noSitePath:paths.domainManagementEmail()})),[domainManagementController.domainManagementEmail])});registerMultiPage({paths:[paths.domainManagementAddGoogleApps(":site",":domain"),paths.domainManagementAddGoogleApps(":site")],handlers:[].concat((0,_toConsumableArray3.default)(getCommonHandlers()),[domainManagementController.domainManagementAddGoogleApps])});page.apply(undefined,[paths.domainManagementEmailForwarding(":site",":domain")].concat((0,_toConsumableArray3.default)(getCommonHandlers()),[domainManagementController.domainManagementEmailForwarding]));page.apply(undefined,[paths.domainManagementRedirectSettings(":site",":domain")].concat((0,_toConsumableArray3.default)(getCommonHandlers()),[domainManagementController.domainManagementRedirectSettings]));page.apply(undefined,[paths.domainManagementContactsPrivacy(":site",":domain")].concat((0,_toConsumableArray3.default)(getCommonHandlers()),[domainManagementController.domainManagementContactsPrivacy]));page.apply(undefined,[paths.domainManagementEditContactInfo(":site",":domain")].concat((0,_toConsumableArray3.default)(getCommonHandlers()),[domainManagementController.domainManagementEditContactInfo]));page.apply(undefined,[paths.domainManagementDns(":site",":domain")].concat((0,_toConsumableArray3.default)(getCommonHandlers()),[domainManagementController.domainManagementDns]));page.apply(undefined,[paths.domainManagementNameServers(":site",":domain")].concat((0,_toConsumableArray3.default)(getCommonHandlers()),[domainManagementController.domainManagementNameServers]));page.apply(undefined,[paths.domainManagementTransfer(":site",":domain")].concat((0,_toConsumableArray3.default)(getCommonHandlers()),[domainManagementController.domainManagementTransfer]));page(paths.domainManagementRoot(),controller.siteSelection,controller.sites);page.apply(undefined,[paths.domainManagementList(":site")].concat((0,_toConsumableArray3.default)(getCommonHandlers()),[domainManagementController.domainManagementList]));page.apply(undefined,[paths.domainManagementEdit(":site",":domain")].concat((0,_toConsumableArray3.default)(getCommonHandlers()),[domainManagementController.domainManagementEdit]));page.apply(undefined,[paths.domainManagementPrivacyProtection(":site",":domain")].concat((0,_toConsumableArray3.default)(getCommonHandlers({warnIfJetpack:false})),[domainManagementController.domainManagementPrivacyProtection]));page.apply(undefined,[paths.domainManagementPrimaryDomain(":site",":domain")].concat((0,_toConsumableArray3.default)(getCommonHandlers()),[domainManagementController.domainManagementPrimaryDomain]));if(config.isEnabled("upgrades/domain-search")){page("/domains/add",controller.siteSelection,upgradesController.domainsAddHeader,controller.jetPackWarning,controller.sites);page("/domains/add/mapping",controller.siteSelection,upgradesController.domainsAddHeader,controller.jetPackWarning,controller.sites);page("/domains/add/site-redirect",controller.siteSelection,upgradesController.domainsAddRedirectHeader,controller.jetPackWarning,controller.sites);page("/domains/add/:domain",controller.siteSelection,controller.navigation,upgradesController.redirectIfNoSite("/domains/add"),controller.jetPackWarning,upgradesController.domainSearch);page("/domains/add/suggestion/:suggestion/:domain",controller.siteSelection,controller.navigation,upgradesController.redirectIfNoSite("/domains/add"),controller.jetPackWarning,upgradesController.domainSearch);page("/domains/add/:registerDomain/google-apps/:domain",controller.siteSelection,controller.navigation,upgradesController.redirectIfNoSite("/domains/add"),controller.jetPackWarning,upgradesController.googleAppsWithRegistration);page("/domains/add/mapping/:domain",controller.siteSelection,controller.navigation,upgradesController.redirectIfNoSite("/domains/add/mapping"),controller.jetPackWarning,upgradesController.mapDomain);page("/domains/add/site-redirect/:domain",controller.siteSelection,controller.navigation,upgradesController.redirectIfNoSite("/domains/add/site-redirect"),controller.jetPackWarning,upgradesController.siteRedirect)}page("/domains",controller.siteSelection,controller.sites);page("/domains/:site",controller.siteSelection,controller.navigation,controller.jetPackWarning,domainManagementController.domainManagementIndex);if(config.isEnabled("upgrades/checkout")){page("/checkout/thank-you/:site/:receiptId?",controller.siteSelection,upgradesController.checkoutThankYou);page("/checkout/features/:feature/:domain/:plan_name?",controller.siteSelection,upgradesController.checkout);page("/checkout/thank-you/features/:feature/:site/:receiptId?",controller.siteSelection,upgradesController.checkoutThankYou);page("/checkout/:domain/:product?",controller.siteSelection,upgradesController.checkout)}}},1459:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isPlansWordingEnabled=exports.isPlanFeaturesEnabled=undefined;var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _keys=__webpack_require__(44);var _keys2=_interopRequireDefault(_keys);var _invoke2=__webpack_require__(677);var _invoke3=_interopRequireDefault(_invoke2);var _includes2=__webpack_require__(34);var _includes3=_interopRequireDefault(_includes2);var _get2=__webpack_require__(30);var _get3=_interopRequireDefault(_get2);var _find2=__webpack_require__(33);var _find3=_interopRequireDefault(_find2);exports.isFreePlan=isFreePlan;exports.getPlan=getPlan;exports.getValidFeatureKeys=getValidFeatureKeys;exports.isValidFeatureKey=isValidFeatureKey;exports.getFeatureByKey=getFeatureByKey;exports.getFeatureTitle=getFeatureTitle;exports.getSitePlanSlug=getSitePlanSlug;exports.canUpgradeToPlan=canUpgradeToPlan;exports.getUpgradePlanSlugFromPath=getUpgradePlanSlugFromPath;exports.getPlanPath=getPlanPath;exports.planHasFeature=planHasFeature;exports.hasFeature=hasFeature;exports.addCurrentPlanToCartAndRedirect=addCurrentPlanToCartAndRedirect;exports.getCurrentPlan=getCurrentPlan;exports.getCurrentTrialPeriodInDays=getCurrentTrialPeriodInDays;exports.getDayOfTrial=getDayOfTrial;exports.getDaysUntilUserFacingExpiry=getDaysUntilUserFacingExpiry;exports.getDaysUntilExpiry=getDaysUntilExpiry;exports.isInGracePeriod=isInGracePeriod;exports.shouldFetchSitePlans=shouldFetchSitePlans;exports.filterPlansBySiteAndProps=filterPlansBySiteAndProps;exports.plansLink=plansLink;exports.applyTestFiltersToPlansList=applyTestFiltersToPlansList;var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _moment=__webpack_require__(2);var _moment2=_interopRequireDefault(_moment);var _debug=__webpack_require__(4);var _debug2=_interopRequireDefault(_debug);var _config=__webpack_require__(10);var _actions=__webpack_require__(646);var _cartValues=__webpack_require__(184);var _productsValues=__webpack_require__(80);var _constants=__webpack_require__(187);var _assembler=__webpack_require__(360);var _sitesList=__webpack_require__(55);var _sitesList2=_interopRequireDefault(_sitesList);var _abtest=__webpack_require__(248);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var sitesList=(0,_sitesList2.default)();var debug=(0,_debug2.default)("calypso:plans");var isPersonalPlanEnabled=(0,_config.isEnabled)("plans/personal-plan");function isFreePlan(plan){return plan===_constants.PLAN_FREE||plan===_constants.PLAN_JETPACK_FREE}function getPlan(plan){return _constants.plansList[plan]}function getValidFeatureKeys(){return(0,_keys2.default)(_constants.featuresList)}function isValidFeatureKey(feature){return!!_constants.featuresList[feature]}function getFeatureByKey(feature){return _constants.featuresList[feature]}function getFeatureTitle(feature){return(0,_invoke3.default)(_constants.featuresList,[feature,"getTitle"])}function getSitePlanSlug(siteID){var site=void 0;if(siteID){site=sitesList.getSite(siteID)}else{site=sitesList.getSelectedSite()}return(0,_get3.default)(site,"plan.product_slug")}function canUpgradeToPlan(planKey){var site=arguments.length<=1||arguments[1]===undefined?sitesList.getSelectedSite():arguments[1];var plan=(0,_get3.default)(site,["plan","expired"],false)?_constants.PLAN_FREE:(0,_get3.default)(site,["plan","product_slug"],_constants.PLAN_FREE);return(0,_get3.default)(_constants.plansList,[planKey,"availableFor"],function(){return false})(plan)}function getUpgradePlanSlugFromPath(path,siteID){var site=siteID?sitesList.getSite(siteID):sitesList.getSelectedSite();return(0,_find3.default)((0,_keys2.default)(_constants.plansList),function(planKey){return(planKey===path||getPlanPath(planKey)===path)&&canUpgradeToPlan(planKey,site)})}function getPlanPath(plan){return(0,_get3.default)(_constants.plansList,[plan,"getPathSlug"],function(){return undefined})()}function planHasFeature(plan,feature){return(0,_includes3.default)((0,_get3.default)(_constants.featuresList,[feature,"plans"]),plan)}function hasFeature(feature,siteID){return planHasFeature(getSitePlanSlug(siteID),feature)}function addCurrentPlanToCartAndRedirect(sitePlans,selectedSite){(0,_actions.addItem)(_cartValues.cartItems.planItem(getCurrentPlan(sitePlans.data).productSlug));(0,_page2.default)("/checkout/"+selectedSite.slug)}function getCurrentPlan(plans){var currentPlan=(0,_find3.default)(plans,{currentPlan:true});if(currentPlan){debug("current plan: %o",currentPlan);return currentPlan}var site=sitesList.getSelectedSite();var plan=(0,_assembler.createSitePlanObject)(site.plan);debug("current plan: %o",plan);return plan}function getCurrentTrialPeriodInDays(plan){var expiryMoment=plan.expiryMoment;var subscribedDayMoment=plan.subscribedDayMoment;var userFacingExpiryMoment=plan.userFacingExpiryMoment;if(isInGracePeriod(plan)){return expiryMoment.diff(userFacingExpiryMoment,"days")}return userFacingExpiryMoment.diff(subscribedDayMoment,"days")}function getDayOfTrial(plan){var subscribedDayMoment=plan.subscribedDayMoment;return(0,_moment2.default)().startOf("day").diff(subscribedDayMoment,"days")+1}function getDaysUntilUserFacingExpiry(plan){var userFacingExpiryMoment=plan.userFacingExpiryMoment;return userFacingExpiryMoment.diff((0,_moment2.default)().startOf("day"),"days")}function getDaysUntilExpiry(plan){var expiryMoment=plan.expiryMoment;return expiryMoment.diff((0,_moment2.default)().startOf("day"),"days")}function isInGracePeriod(plan){return getDaysUntilUserFacingExpiry(plan)<=0}function shouldFetchSitePlans(sitePlans,selectedSite){return!sitePlans.hasLoadedFromServer&&!sitePlans.isRequesting&&selectedSite}function filterPlansBySiteAndProps(plans,site,hideFreePlan,intervalType,showJetpackFreePlan){var hasPersonalPlan=site&&site.plan.product_slug===_constants.PLAN_PERSONAL;return plans.filter(function(plan){if(site&&site.jetpack){if("monthly"===intervalType){if(showJetpackFreePlan){return(0,_productsValues.isJetpackPlan)(plan)&&(0,_productsValues.isMonthly)(plan)}return(0,_productsValues.isJetpackPlan)(plan)&&!(0,_productsValues.isFreeJetpackPlan)(plan)&&(0,_productsValues.isMonthly)(plan)}if(showJetpackFreePlan){return(0,_productsValues.isJetpackPlan)(plan)&&!(0,_productsValues.isMonthly)(plan)}return(0,_productsValues.isJetpackPlan)(plan)&&!(0,_productsValues.isFreeJetpackPlan)(plan)&&!(0,_productsValues.isMonthly)(plan)}if(hideFreePlan&&_constants.PLAN_FREE===plan.product_slug){return false}if(plan.product_slug===_constants.PLAN_PERSONAL&&!(hasPersonalPlan||isPersonalPlanEnabled)){return false}return!(0,_productsValues.isJetpackPlan)(plan)})}var isPlanFeaturesEnabled=exports.isPlanFeaturesEnabled=function isPlanFeaturesEnabled(){return(0,_config.isEnabled)("manage/plan-features")};var isPlansWordingEnabled=exports.isPlansWordingEnabled=function isPlansWordingEnabled(){return(0,_abtest.abtest)("plansWording")==="targetedWording"};function plansLink(url,site,intervalType){if("monthly"===intervalType){url+="/monthly"}if(site){url+="/"+site.slug}return url}function applyTestFiltersToPlansList(planName){var filteredPlanConstantObj=(0,_extends3.default)({},_constants.plansList[planName]);var filteredPlanFeaturesConstantList=_constants.plansList[planName].getFeatures();var removeDisabledFeatures=function removeDisabledFeatures(){};var updatePlanDescriptions=function updatePlanDescriptions(){if(isPlansWordingEnabled()&&(0,_includes3.default)(_constants.allWpcomPlans,planName)){filteredPlanConstantObj.getDescription=_constants.plansList[planName].getTargetedDescription}};var updatePlanFeatures=function updatePlanFeatures(){};removeDisabledFeatures();updatePlanDescriptions();updatePlanFeatures();filteredPlanConstantObj.getFeatures=function(){return filteredPlanFeaturesConstantList};return filteredPlanConstantObj}},1478:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);var _purchaseButton=__webpack_require__(1704);var _purchaseButton2=_interopRequireDefault(_purchaseButton);var _tipInfo=__webpack_require__(1705);var _tipInfo2=_interopRequireDefault(_tipInfo);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PurchaseDetail=function PurchaseDetail(_ref){var body=_ref.body;var buttonText=_ref.buttonText;var description=_ref.description;var href=_ref.href;var icon=_ref.icon;var id=_ref.id;var info=_ref.info;var isPlaceholder=_ref.isPlaceholder;var isRequired=_ref.isRequired;var isSubmitting=_ref.isSubmitting;var onClick=_ref.onClick;var requiredText=_ref.requiredText;var target=_ref.target;var title=_ref.title;var classes=(0,_classnames2.default)("purchase-detail",{"is-placeholder":isPlaceholder});var buttonElement=void 0;if(buttonText||isPlaceholder){buttonElement=_react2.default.createElement(_purchaseButton2.default,{disabled:isSubmitting,href:href,onClick:onClick,target:target,text:buttonText})}return _react2.default.createElement("div",{className:classes,id:id||null},requiredText&&_react2.default.createElement("div",{className:"purchase-detail__required-notice"},_react2.default.createElement("em",null,requiredText)),_react2.default.createElement("div",{className:"purchase-detail__content"},icon&&_react2.default.createElement("div",{className:"purchase-detail__icon"},_react2.default.createElement(_gridicon2.default,{icon:icon}),isRequired&&_react2.default.createElement(_gridicon2.default,{className:"purchase-detail__notice-icon",icon:"notice"})),_react2.default.createElement("div",{className:"purchase-detail__text"},_react2.default.createElement("h3",{className:"purchase-detail__title"},title),_react2.default.createElement("div",{className:"purchase-detail__description"},description)),body?_react2.default.createElement("div",{className:"purchase-detail__body"},body):_react2.default.createElement("div",{className:"purchase-detail__body"},buttonElement,info&&_react2.default.createElement(_tipInfo2.default,{info:info}))))};PurchaseDetail.propTypes={buttonText:_react.PropTypes.string,description:_react.PropTypes.oneOfType([_react.PropTypes.array,_react.PropTypes.string,_react.PropTypes.object]),href:_react.PropTypes.string,icon:_react.PropTypes.string,isPlaceholder:_react.PropTypes.bool,isRequired:_react.PropTypes.bool,isSubmitting:_react.PropTypes.bool,onClick:_react.PropTypes.func,requiredText:_react.PropTypes.string,target:_react.PropTypes.string,title:_react.PropTypes.string};PurchaseDetail.defaultProps={onClick:function onClick(){}};exports.default=PurchaseDetail;module.exports=exports["default"]},1484:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _omit=__webpack_require__(18);var _omit2=_interopRequireDefault(_omit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FormSelect=_react2.default.createClass({displayName:"FormSelect",getDefaultProps:function getDefaultProps(){return{isError:false}},render:function render(){var classes=(0,_classnames2.default)(this.props.className,"form-select",{"is-error":this.props.isError});return _react2.default.createElement("select",(0,_extends3.default)({},(0,_omit2.default)(this.props,"className"),{className:classes}),this.props.children)}});exports.default=FormSelect;module.exports=exports["default"]},1495:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _isEqual=__webpack_require__(92);var _isEqual2=_interopRequireDefault(_isEqual);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StoreConnection=_react2.default.createClass({displayName:"StoreConnection",propTypes:{component:_react2.default.PropTypes.func,getStateFromStores:_react2.default.PropTypes.func.isRequired,isDataLoading:_react2.default.PropTypes.func,loadingPlaceholder:_react2.default.PropTypes.func,stores:_react2.default.PropTypes.array.isRequired},getInitialState:function getInitialState(){return this.props.getStateFromStores(this.props)},componentDidMount:function componentDidMount(){this.addStoreListeners(this.props.stores)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(!(0,_isEqual2.default)(this.props,nextProps)){this.removeStoreListeners(this.props.stores);this.addStoreListeners(nextProps.stores);this.setState(nextProps.getStateFromStores(nextProps))}},componentWillUnmount:function componentWillUnmount(){this.removeStoreListeners(this.props.stores)},addStoreListeners:function addStoreListeners(stores){stores.forEach(function(store){store.on("change",this.handleStoresChanged)},this)},removeStoreListeners:function removeStoreListeners(stores){stores.forEach(function(store){store.off("change",this.handleStoresChanged)},this)},handleStoresChanged:function handleStoresChanged(){this.setState(this.props.getStateFromStores(this.props))},isDataLoading:function isDataLoading(){if(!this.props.loadingPlaceholder||!this.props.isDataLoading){return false}return this.props.isDataLoading(this.state)},render:function render(){if(this.isDataLoading()){return _react2.default.createElement(this.props.loadingPlaceholder,this.state)}if(this.props.component){return _react2.default.createElement(this.props.component,this.state)}var child=_react2.default.Children.only(this.props.children);return _react2.default.cloneElement(child,this.state)}});exports.default=StoreConnection;module.exports=exports["default"]},1502:function(module,exports,__webpack_require__){"use strict";var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var React=__webpack_require__(1);var Card=__webpack_require__(145),Search=__webpack_require__(651);var SearchCard=React.createClass({displayName:"SearchCard",propTypes:{additionalClasses:React.PropTypes.string,initialValue:React.PropTypes.string,placeholder:React.PropTypes.string,delaySearch:React.PropTypes.bool,onSearch:React.PropTypes.func.isRequired,onSearchChange:React.PropTypes.func,analyticsGroup:React.PropTypes.string,autoFocus:React.PropTypes.bool,disabled:React.PropTypes.bool,dir:React.PropTypes.string},render:function render(){return React.createElement(Card,{className:"search-card"},React.createElement(Search,(0,_extends3.default)({ref:"search"},this.props)))},focus:function focus(){this.refs.search.focus()},clear:function clear(){this.refs.search.clear()}});module.exports=SearchCard},1508:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof2=__webpack_require__(31);var _typeof3=_interopRequireDefault(_typeof2);exports.fetchThemes=fetchThemes;exports.fetchNextPage=fetchNextPage;exports.query=query;exports.incrementThemesPage=incrementThemesPage;exports.fetchCurrentTheme=fetchCurrentTheme;exports.fetchThemeDetails=fetchThemeDetails;exports.receiveThemeDetails=receiveThemeDetails;exports.receiveThemeDetailsFailure=receiveThemeDetailsFailure;exports.receiveServerError=receiveServerError;exports.receiveThemes=receiveThemes;exports.activate=activate;exports.activated=activated;exports.clearActivated=clearActivated;exports.purchase=purchase;exports.setBackPath=setBackPath;var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _conforms=__webpack_require__(1637);var _conforms2=_interopRequireDefault(_conforms);var _defer=__webpack_require__(341);var _defer2=_interopRequireDefault(_defer);var _debug=__webpack_require__(4);var _debug2=_interopRequireDefault(_debug);var _property=__webpack_require__(153);var _property2=_interopRequireDefault(_property);var _actionTypes=__webpack_require__(3);var _selectors=__webpack_require__(1539);var _actions=__webpack_require__(250);var _selectors2=__webpack_require__(1600);var _selectors3=__webpack_require__(1577);var _selectors4=__webpack_require__(1601);var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=(0,_debug2.default)("calypso:themes:actions");function fetchThemes(site){return function(dispatch,getState){var queryParams=(0,_selectors3.getQueryParams)(getState());var startTime=(new Date).getTime();debug("Query params",queryParams);_wp2.default.undocumented().themes(site,queryParams).then(function(themes){var responseTime=(new Date).getTime()-startTime;dispatch(receiveThemes(themes,site,queryParams,responseTime))}).catch(function(error){return receiveServerError(error)})}}function fetchNextPage(site){return function(dispatch){dispatch(incrementThemesPage(site));dispatch(fetchThemes(site))}}function query(params){return{type:_actionTypes.THEMES_QUERY,params:params}}function incrementThemesPage(site){return{type:_actionTypes.THEMES_INCREMENT_PAGE,site:site}}function fetchCurrentTheme(siteId){return function(dispatch){dispatch({type:_actionTypes.THEME_REQUEST_CURRENT,siteId:siteId});_wp2.default.undocumented().activeTheme(siteId).then(function(theme){debug("Received current theme",theme);dispatch({type:_actionTypes.THEME_RECEIVE_CURRENT,siteId:siteId,themeId:theme.id,themeName:theme.name,themeCost:theme.cost})}).catch(function(error){dispatch({type:_actionTypes.THEME_REQUEST_CURRENT_FAILURE,siteId:siteId,error:error})})}}function fetchThemeDetails(id,site){return function(dispatch){_wp2.default.undocumented().themeDetails(id,site).then(function(themeDetails){debug("Received theme details",themeDetails);dispatch(receiveThemeDetails(themeDetails))}).catch(function(error){dispatch(receiveThemeDetailsFailure(id,error))})}}function receiveThemeDetails(theme){return{type:_actionTypes.THEME_DETAILS_RECEIVE,themeId:theme.id,themeName:theme.name,themeAuthor:theme.author,themePrice:theme.price,themeScreenshot:theme.screenshot,themeScreenshots:theme.screenshots,themeDescription:theme.description,themeDescriptionLong:theme.description_long,themeSupportDocumentation:theme.support_documentation||undefined,themeDownload:theme.download_uri||undefined,themeTaxonomies:theme.taxonomies,themeStylesheet:theme.stylesheet,themeDemoUri:theme.demo_uri,themeActive:theme.active,themePurchased:theme.purchased}}function receiveThemeDetailsFailure(id,error){debug("Received error for theme "+id+":",error);return{type:_actionTypes.THEME_DETAILS_RECEIVE_FAILURE,themeId:id,error:error}}function receiveServerError(error){return{type:_actionTypes.THEMES_RECEIVE_SERVER_ERROR,error:error}}var isFirstPageOfSearch=(0,_conforms2.default)({search:function search(a){return undefined!==a},page:function page(a){return a===1}});function receiveThemes(data,site,queryParams,responseTime){return function(dispatch,getState){var themeAction={type:_actionTypes.THEMES_RECEIVE,siteId:site.ID,isJetpack:!!site.jetpack,wasJetpack:(0,_selectors2.isJetpack)(getState()),themes:data.themes,found:data.found,queryParams:queryParams};var trackShowcaseSearch=(0,_actions.recordTracksEvent)("calypso_themeshowcase_search",{search_term:queryParams.search||null,tier:queryParams.tier,response_time_in_ms:responseTime,result_count:data.found,results_first_page:data.themes.map((0,_property2.default)("id"))});var action=isFirstPageOfSearch(queryParams)?(0,_actions.withAnalytics)(trackShowcaseSearch,themeAction):themeAction;dispatch(action)}}function activate(theme,site){var source=arguments.length<=2||arguments[2]===undefined?"unknown":arguments[2];return function(dispatch){dispatch({type:_actionTypes.THEME_ACTIVATE,theme:theme,site:site});_wp2.default.undocumented().activateTheme(theme,site.ID).then(function(){dispatch(activated(theme,site,source))}).catch(function(error){dispatch(receiveServerError(error))})}}function activated(theme,site){var source=arguments.length<=2||arguments[2]===undefined?"unknown":arguments[2];var purchased=arguments.length<=3||arguments[3]===undefined?false:arguments[3];return function(dispatch,getState){var previousTheme=(0,_selectors.getCurrentTheme)(getState(),site.ID);var queryParams=getState().themes.themesList.get("query");if((typeof theme==="undefined"?"undefined":(0,_typeof3.default)(theme))!=="object"){theme=(0,_selectors4.getThemeById)(getState(),theme)}var action={type:_actionTypes.THEME_ACTIVATED,theme:theme,site:site,siteId:site.ID};var trackThemeActivation=(0,_actions.recordTracksEvent)("calypso_themeshowcase_theme_activate",{theme:theme.id,previous_theme:previousTheme.id,source:source,purchased:purchased,search_term:queryParams.get("search")||null});dispatch((0,_actions.withAnalytics)(trackThemeActivation,action))}}function clearActivated(){return{type:_actionTypes.THEME_CLEAR_ACTIVATED}}function purchase(theme,site){var source=arguments.length<=2||arguments[2]===undefined?"unknown":arguments[2];var CartActions=__webpack_require__(646);var themeItem=__webpack_require__(658).themeItem;return function(dispatch){CartActions.addItem(themeItem(theme.id,source));(0,_defer2.default)(function(){(0,_page2.default)("/checkout/"+site.slug);dispatch({type:_actionTypes.THEME_PURCHASE,id:theme.id,site:site})})}}function setBackPath(path){return{type:_actionTypes.THEME_BACK_PATH_SET,path:path}}},1509:function(module,exports){var nativeFloor=Math.floor,nativeRandom=Math.random;function baseRandom(lower,upper){return lower+nativeFloor(nativeRandom()*(upper-lower+1))}module.exports=baseRandom},1511:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _omit=__webpack_require__(18);var _omit2=_interopRequireDefault(_omit);var _formTextInput=__webpack_require__(246);var _formTextInput2=_interopRequireDefault(_formTextInput);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"FormTextInputWithAffixes",propTypes:{noWrap:_react2.default.PropTypes.bool,prefix:_react2.default.PropTypes.string,suffix:_react2.default.PropTypes.string},render:function render(){return _react2.default.createElement("div",{className:(0,_classnames2.default)("form-text-input-with-affixes",{"no-wrap":this.props.noWrap})},this.props.prefix&&_react2.default.createElement("span",{className:"form-text-input-with-affixes__prefix"},this.props.prefix),_react2.default.createElement(_formTextInput2.default,(0,_omit2.default)(this.props,this.constructor.propTypes)),this.props.suffix&&_react2.default.createElement("span",{className:"form-text-input-with-affixes__suffix"},this.props.suffix))}});module.exports=exports["default"]},1512:function(module,exports,__webpack_require__){"use strict";var isEmpty=__webpack_require__(81),filter=__webpack_require__(69),map=__webpack_require__(50),pickBy=__webpack_require__(347),property=__webpack_require__(153),flatten=__webpack_require__(355),mapValues=__webpack_require__(84),debounce=__webpack_require__(343),every=__webpack_require__(255),assign=__webpack_require__(29),uniqueId=__webpack_require__(359),some=__webpack_require__(82),isUndefined=__webpack_require__(681),camelCase=__webpack_require__(194),constant=__webpack_require__(680),update=__webpack_require__(96);function Controller(options){var debounceWait;if(!(this instanceof Controller)){return new Controller(options)}if(options.initialState){this._initialState=options.initialState}else if(options.initialFields){this._initialState=createInitialFormState(options.initialFields)}else{this._initialState=createInitialFormState(createNullFieldValues(options.fieldNames))}this._currentState=this._initialState;this._sanitizerFunction=options.sanitizerFunction;this._validatorFunction=options.validatorFunction;this._loadFunction=options.loadFunction;this._onNewState=options.onNewState;this._onError=options.onError;this._pendingValidation=null;this._onValidationComplete=null;debounceWait=isUndefined(options.debounceWait)?1e3:options.debounceWait;this._debouncedSanitize=debounce(this.sanitize,debounceWait);this._debouncedValidate=debounce(this.validate,debounceWait);this._hideFieldErrorsOnChange=isUndefined(options.hideFieldErrorsOnChange)?false:options.hideFieldErrorsOnChange;if(this._loadFunction){this._loadFieldValues()}}assign(Controller.prototype,{getInitialState:function getInitialState(){return this._initialState},_loadFieldValues:function _loadFieldValues(){this._loadFunction(function(error,fieldValues){if(error){this._onError(error);return}this._setState(initializeFields(this._currentState,fieldValues))}.bind(this))},handleFieldChange:function handleFieldChange(change){var formState=this._currentState,name=camelCase(change.name),value=change.value,hideError=this._hideFieldErrorsOnChange||change.hideError;this._setState(changeFieldValue(formState,name,value,hideError));this._debouncedSanitize();this._debouncedValidate()},handleSubmit:function handleSubmit(onComplete){var isAlreadyValid=!this._pendingValidation&&!needsValidation(this._currentState)&&isEveryFieldInitialized(this._currentState);
if(isAlreadyValid){onComplete(hasErrors(this._currentState));return}this._onValidationComplete=function(){this._setState(showAllErrors(this._currentState));onComplete(hasErrors(this._currentState))}.bind(this);if(!this._pendingValidation){this.sanitize();this.validate()}},_setState:function _setState(newState){this._currentState=newState;this._onNewState(newState)},sanitize:function sanitize(){var fieldValues=getAllFieldValues(this._currentState);if(!this._sanitizerFunction){return}this._sanitizerFunction(fieldValues,function(newFieldValues){this._setState(changeFieldValues(this._currentState,newFieldValues))}.bind(this))},validate:function validate(){var fieldValues=getAllFieldValues(this._currentState),id=uniqueId();this._setState(setFieldsValidating(this._currentState));this._pendingValidation=id;this._validatorFunction(fieldValues,function(error,fieldErrors){if(id!==this._pendingValidation){return}if(error){this._onError(error);return}this._pendingValidation=null;this._setState(setFieldErrors(this._currentState,fieldErrors,this._hideFieldErrorsOnChange));if(this._onValidationComplete){this._onValidationComplete();this._onValidationComplete=null}}.bind(this))},resetFields:function resetFields(fieldValues){this._initialState=createInitialFormState(fieldValues);this._setState(this._initialState)}});function changeFieldValue(formState,name,value,hideFieldErrorsOnChange){var fieldState=getField(formState,name),command={},errors;errors=fieldState.isShowingErrors?fieldState.errors:[];command[name]={$merge:{value:value,errors:errors,isShowingErrors:!hideFieldErrorsOnChange,isPendingValidation:true,isValidating:false}};return update(formState,command)}function changeFieldValues(formState,fieldValues){return updateFields(formState,function(name){return{value:fieldValues[name]}})}function updateFields(formState,callback){return mapValues(formState,function(field,name){return assign({},field,callback(name))})}function initializeFields(formState,fieldValues){return updateFields(formState,function(name){return{value:fieldValues[name]||"",name:name}})}function setFieldsValidating(formState){return assign({},formState,updateFields(formState,function(){return{isValidating:true}}))}function setFieldErrors(formState,fieldErrors,hideFieldErrorsOnChange){return assign({},formState,updateFields(getFieldsValidating(formState),function(name){var newFields={errors:fieldErrors[name]||[],isPendingValidation:false,isValidating:false};if(hideFieldErrorsOnChange){newFields.isShowingErrors=Boolean(fieldErrors[name])}return newFields}))}function showAllErrors(formState){return updateFields(initializeFields(formState,getAllFieldValues(formState)),constant({isShowingErrors:true}))}function hasErrors(formState){return!isEmpty(getErrorMessages(formState))}function needsValidation(formState){return some(formState,function(field){return field.errors===null||!field.isShowingErrors||field.isPendingValidation})}function createNullFieldValues(fieldNames){return fieldNames.reduce(function(fields,name){fields[name]=null;return fields},{})}function createInitialFormState(fieldValues){return mapValues(fieldValues,function(value){return{value:value,errors:null,isShowingErrors:false,isPendingValidation:false,isValidating:false}})}function getField(formState,fieldName){return formState[camelCase(fieldName)]}function getFieldValue(formState,fieldName){return getField(formState,fieldName).value}function getAllFieldValues(formState){return mapValues(formState,"value")}function getFieldErrorMessages(formState,fieldName){if(!isFieldInvalid(formState,fieldName)){return}return getField(formState,fieldName).errors}function getFieldsValidating(formState){return pickBy(formState,property("isValidating"))}function isInitialized(field){return field.value!==null}function isEveryFieldInitialized(formState){return every(formState,isInitialized)}function isFieldInvalid(formState,fieldName){var field=getField(formState,fieldName);return isInitialized(field)&&field.isShowingErrors&&!isEmpty(field.errors)}function isFieldPendingValidation(formState,fieldName){var field=getField(formState,fieldName);return field.isPendingValidation}function isFieldValidating(formState,fieldName){var field=getField(formState,fieldName);return field.isValidating}function getInvalidFields(formState){return filter(formState,function(field,fieldName){return isFieldInvalid(formState,fieldName)})}function getErrorMessages(formState){var invalidFields=getInvalidFields(formState);return flatten(map(invalidFields,"errors"))}function isSubmitButtonDisabled(formState){return!every(formState,isInitialized)}function isFieldDisabled(formState,fieldName){var field=getField(formState,fieldName);return!isInitialized(field)}function isFieldValid(formState,fieldName){return!isFieldInvalid(formState,fieldName)&&!isEmpty(getFieldValue(formState,fieldName))&&!isFieldPendingValidation(formState,fieldName)}function isFieldPossiblyValid(formState,fieldName){return!isEmpty(getFieldValue(formState,fieldName))&&(!isFieldInvalid(formState,fieldName)||isFieldPendingValidation(formState,fieldName))}function showFieldValidationLoading(formState,fieldName){return isFieldValidating(formState,fieldName)&&getFieldValue(formState,fieldName)&&!isFieldValid(formState,fieldName)}module.exports={Controller:Controller,getFieldValue:getFieldValue,setFieldsValidating:setFieldsValidating,setFieldErrors:setFieldErrors,getErrorMessages:getErrorMessages,getInvalidFields:getInvalidFields,getFieldErrorMessages:getFieldErrorMessages,hasErrors:hasErrors,isFieldDisabled:isFieldDisabled,isFieldInvalid:isFieldInvalid,isFieldPendingValidation:isFieldPendingValidation,isFieldValidating:isFieldValidating,getAllFieldValues:getAllFieldValues,isSubmitButtonDisabled:isSubmitButtonDisabled,isFieldValid:isFieldValid,isFieldPossiblyValid:isFieldPossiblyValid,showFieldValidationLoading:showFieldValidationLoading,createInitialFormState:createInitialFormState,createNullFieldValues:createNullFieldValues,initializeFields:initializeFields,changeFieldValue:changeFieldValue}},1529:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var HeaderCake=__webpack_require__(1460);var DomainManagementHeader=React.createClass({displayName:"DomainManagementHeader",render:function render(){return React.createElement(HeaderCake,{className:"domain-management-header",onClick:this.props.onClick},React.createElement("div",{className:"domain-management-header__children"},this.domainName(),React.createElement("span",{className:"domain-management-header__title"},this.props.children)))},domainName:function domainName(){if(!this.props.selectedDomainName){return null}return React.createElement("span",null,this.props.selectedDomainName,": ")}});module.exports=DomainManagementHeader},1538:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default={DOMAINS_WITH_PLANS_ONLY:"calypso_domains_with_plans_only"};module.exports=exports["default"]},1539:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCurrentTheme=getCurrentTheme;exports.isActivating=isActivating;exports.hasActivated=hasActivated;exports.isRequestingCurrentTheme=isRequestingCurrentTheme;function getCurrentTheme(state,siteId){return state.themes.currentTheme.get("currentThemes").get(siteId)}function isActivating(state){return state.themes.currentTheme.get("isActivating")}function hasActivated(state){return state.themes.currentTheme.get("hasActivated")}function isRequestingCurrentTheme(state,siteId){return!!state.themes.currentTheme.get("requesting").get(siteId)}},1546:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.removePurchase=exports.fetchUserPurchases=exports.fetchSitePurchases=exports.clearPurchases=exports.cancelPrivateRegistration=undefined;var _promise=__webpack_require__(51);var _promise2=_interopRequireDefault(_promise);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _olark=__webpack_require__(708);var _olark2=_interopRequireDefault(_olark);var _actionTypes=__webpack_require__(3);var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var wpcom=_wp2.default.undocumented();var PURCHASES_FETCH_ERROR_MESSAGE=_i18nCalypso2.default.translate("There was an error retrieving purchases.");var PURCHASE_REMOVE_ERROR_MESSAGE=_i18nCalypso2.default.translate("There was an error removing the purchase.");var cancelPrivateRegistration=exports.cancelPrivateRegistration=function cancelPrivateRegistration(purchaseId){return function(dispatch){dispatch({type:_actionTypes.PRIVACY_PROTECTION_CANCEL,purchaseId:purchaseId});return new _promise2.default(function(resolve,reject){wpcom.cancelPrivateRegistration(purchaseId,function(error,data){error?reject(error):resolve(data)})}).then(function(data){dispatch({type:_actionTypes.PRIVACY_PROTECTION_CANCEL_COMPLETED,purchase:data.upgrade})}).catch(function(error){dispatch({type:_actionTypes.PRIVACY_PROTECTION_CANCEL_FAILED,purchaseId:purchaseId,error:error.message||_i18nCalypso2.default.translate("There was a problem canceling this private registration. "+"Please try again later or contact support.")})})}};var clearPurchases=exports.clearPurchases=function clearPurchases(){_olark2.default.updateOlarkGroupAndEligibility();return{type:_actionTypes.PURCHASES_REMOVE}};var fetchSitePurchases=exports.fetchSitePurchases=function fetchSitePurchases(siteId){return function(dispatch){dispatch({type:_actionTypes.PURCHASES_SITE_FETCH,siteId:siteId});return new _promise2.default(function(resolve,reject){wpcom.sitePurchases(siteId,function(error,data){error?reject(error):resolve(data)})}).then(function(data){dispatch({type:_actionTypes.PURCHASES_SITE_FETCH_COMPLETED,siteId:siteId,purchases:data})}).catch(function(){dispatch({type:_actionTypes.PURCHASES_SITE_FETCH_FAILED,error:PURCHASES_FETCH_ERROR_MESSAGE})})}};var fetchUserPurchases=exports.fetchUserPurchases=function fetchUserPurchases(userId){return function(dispatch){dispatch({type:_actionTypes.PURCHASES_USER_FETCH});return new _promise2.default(function(resolve,reject){wpcom.me().purchases(function(error,data){error?reject(error):resolve(data)})}).then(function(data){dispatch({type:_actionTypes.PURCHASES_USER_FETCH_COMPLETED,purchases:data,userId:userId})}).catch(function(){dispatch({type:_actionTypes.PURCHASES_USER_FETCH_FAILED,error:PURCHASES_FETCH_ERROR_MESSAGE})})}};var removePurchase=exports.removePurchase=function removePurchase(purchaseId,userId){return function(dispatch){return new _promise2.default(function(resolve,reject){wpcom.me().deletePurchase(purchaseId,function(error,data){error?reject(error):resolve(data)})}).then(function(data){dispatch({type:_actionTypes.PURCHASE_REMOVE_COMPLETED,purchases:data.purchases,userId:userId});_olark2.default.updateOlarkGroupAndEligibility()}).catch(function(error){dispatch({type:_actionTypes.PURCHASE_REMOVE_FAILED,error:error.message||PURCHASE_REMOVE_ERROR_MESSAGE})})}}},1547:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var getStoredCards=exports.getStoredCards=function getStoredCards(state){return state.storedCards.items};var getStoredCardById=exports.getStoredCardById=function getStoredCardById(state,cardId){return getStoredCards(state).filter(function(card){return card.stored_details_id===cardId}).shift()};var hasLoadedStoredCardsFromServer=exports.hasLoadedStoredCardsFromServer=function hasLoadedStoredCardsFromServer(state){return state.storedCards.hasLoadedFromServer};var isDeletingStoredCard=exports.isDeletingStoredCard=function isDeletingStoredCard(state){return state.storedCards.isDeleting};var isFetchingStoredCards=exports.isFetchingStoredCards=function isFetchingStoredCards(state){return state.storedCards.isFetching}},1548:function(module,exports){"use strict";var tester=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-?[a-zA-Z0-9])*(\.[a-zA-Z](-?[a-zA-Z0-9])*)+$/;function validate(email){if(email.length>254)return false;var valid=tester.test(email);if(!valid)return false;var parts=email.split("@");if(parts[0].length>64)return false;var domainParts=parts[1].split(".");if(domainParts.some(function(part){return part.length>63}))return false;return true}exports.validate=validate},1553:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _noop=__webpack_require__(36);var _noop2=_interopRequireDefault(_noop);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var VerticalNavItem=_react2.default.createClass({displayName:"VerticalNavItem",propTypes:{external:_react2.default.PropTypes.bool,isPlaceholder:_react2.default.PropTypes.bool,onClick:_react2.default.PropTypes.func,path:_react2.default.PropTypes.string},getDefaultProps:function getDefaultProps(){return{external:false,isPlaceholder:false,onClick:_noop2.default}},placeholder:function placeholder(){return _react2.default.createElement(_compact2.default,{className:"vertical-nav-item is-placeholder"},_react2.default.createElement("span",null),_react2.default.createElement("span",null))},render:function render(){if(this.props.isPlaceholder){return this.placeholder()}return _react2.default.createElement("a",{href:this.props.path,onClick:this.props.onClick,target:this.props.external?"_blank":null},_react2.default.createElement(_compact2.default,{className:"vertical-nav-item"},this.getIcon(),_react2.default.createElement("span",null,this.props.children)))},getIcon:function getIcon(){if(this.props.external){return _react2.default.createElement("span",{className:"noticon noticon-external"})}return _react2.default.createElement("span",{className:"noticon noticon-collapse"})}});exports.default=VerticalNavItem;module.exports=exports["default"]},1558:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _reactDom=__webpack_require__(43);var _reactDom2=_interopRequireDefault(_reactDom);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _formTextInput=__webpack_require__(246);var _formTextInput2=_interopRequireDefault(_formTextInput);var _formInputValidation=__webpack_require__(1456);var _formInputValidation2=_interopRequireDefault(_formInputValidation);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);var _scrollIntoViewport=__webpack_require__(1659);var _scrollIntoViewport2=_interopRequireDefault(_scrollIntoViewport);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"Input",getDefaultProps:function getDefaultProps(){return{autofocus:false}},componentDidMount:function componentDidMount(){this.setupInputModeHandlers();this.autofocusInput()},setupInputModeHandlers:function setupInputModeHandlers(){var inputElement=_reactDom2.default.findDOMNode(this.refs.input);if(this.props.inputMode==="numeric"){inputElement.addEventListener("touchstart",function(){return inputElement.pattern="\\d*"});["keydown","blur"].forEach(function(eventName){return inputElement.addEventListener(eventName,function(){return inputElement.pattern=".*"})})}},componentDidUpdate:function componentDidUpdate(oldProps){if(oldProps.disabled&&!this.props.disabled){this.autofocusInput()}},focus:function focus(){var node=_reactDom2.default.findDOMNode(this.refs.input);node.focus();(0,_scrollIntoViewport2.default)(node)},autofocusInput:function autofocusInput(){if(this.props.autofocus){this.focus()}},recordFieldClick:function recordFieldClick(){if(this.props.eventFormName){_analytics2.default.ga.recordEvent("Upgrades","Clicked "+this.props.eventFormName+" Field",this.props.name)}},render:function render(){var classes=(0,_classnames2.default)(this.props.additionalClasses,this.props.name,this.props.labelClass,this.props.classes);return _react2.default.createElement("div",{className:classes},_react2.default.createElement(_formLabel2.default,{htmlFor:this.props.name},this.props.label),_react2.default.createElement(_formTextInput2.default,{placeholder:this.props.placeholder?this.props.placeholder:this.props.label,id:this.props.name,value:this.props.value,name:this.props.name,ref:"input",autofocus:this.props.autofocus,disabled:this.props.disabled,maxLength:this.props.maxLength,onChange:this.props.onChange,onClick:this.recordFieldClick,isError:this.props.isError}),this.props.errorMessage&&_react2.default.createElement(_formInputValidation2.default,{text:this.props.errorMessage,isError:true}))}});module.exports=exports["default"]},1563:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _domainProductPrice=__webpack_require__(1647);var _domainProductPrice2=_interopRequireDefault(_domainProductPrice);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DomainSuggestion=_react2.default.createClass({displayName:"DomainSuggestion",propTypes:{buttonContent:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.string,_react2.default.PropTypes.element]).isRequired,buttonClasses:_react2.default.PropTypes.string,extraClasses:_react2.default.PropTypes.string,onButtonClick:_react2.default.PropTypes.func.isRequired,priceRule:_react2.default.PropTypes.string.isRequired,price:_react2.default.PropTypes.string,domain:_react2.default.PropTypes.string},renderButton:function renderButton(){var buttonClasses=(0,_classnames2.default)("button","domain-suggestion__select-button",this.props.buttonClasses);return _react2.default.createElement("button",{ref:"button",className:buttonClasses,onClick:this.props.onButtonClick,"data-e2e-domain":this.props.domain},this.props.buttonContent)},render:function render(){var _props=this.props;var price=_props.price;var isAdded=_props.isAdded;var extraClasses=_props.extraClasses;var children=_props.children;var priceRule=_props.priceRule;var classes=(0,_classnames2.default)("domain-suggestion","card","is-compact",{"is-added":isAdded},extraClasses);return _react2.default.createElement("div",{className:classes},_react2.default.createElement("div",{className:"domain-suggestion__content"},children,_react2.default.createElement(_domainProductPrice2.default,{rule:priceRule,price:price})),_react2.default.createElement("div",{className:"domain-suggestion__action"},this.renderButton()))}});DomainSuggestion.Placeholder=_react2.default.createClass({displayName:"Placeholder",render:function render(){return _react2.default.createElement("div",{className:"domain-suggestion card is-compact is-placeholder"},_react2.default.createElement("div",{className:"domain-suggestion__content"},_react2.default.createElement("h3",null)),_react2.default.createElement("div",{className:"domain-suggestion__action"}))}});exports.default=DomainSuggestion;module.exports=exports["default"]},1564:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FormToggle=function(_PureComponent){(0,_inherits3.default)(FormToggle,_PureComponent);function FormToggle(){(0,_classCallCheck3.default)(this,FormToggle);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(FormToggle).apply(this,arguments));_this.onKeyDown=_this.onKeyDown.bind(_this);_this.onClick=_this.onClick.bind(_this);return _this}(0,_createClass3.default)(FormToggle,[{key:"componentWillMount",value:function componentWillMount(){this.id=this.constructor.idNum++}},{key:"onKeyDown",value:function onKeyDown(event){if(this.props.disabled){return}if(event.key==="Enter"||event.key===" "){event.preventDefault();this.props.onChange()}this.props.onKeyDown(event)}},{key:"onClick",value:function onClick(){if(!this.props.disabled){this.props.onChange()}}},{key:"render",value:function render(){var id=this.props.id||"toggle-"+this.id;var toggleClasses=(0,_classnames2.default)("form-toggle",this.props.className,{"is-toggling":this.props.toggling});return _react2.default.createElement("span",null,_react2.default.createElement("input",{className:toggleClasses,type:"checkbox",checked:this.props.checked,readOnly:true,disabled:this.props.disabled}),_react2.default.createElement("label",{className:"form-toggle__label",htmlFor:id},_react2.default.createElement("span",{className:"form-toggle__switch",disabled:this.props.disabled,id:id,onClick:this.onClick,onKeyDown:this.onKeyDown,role:"checkbox","aria-checked":this.props.checked,"aria-label":this.props["aria-label"],tabIndex:this.props.disabled?-1:0}),this.props.children))}}]);return FormToggle}(_react.PureComponent);FormToggle.propTypes={onChange:_react.PropTypes.func,onKeyDown:_react.PropTypes.func,checked:_react.PropTypes.bool,disabled:_react.PropTypes.bool,id:_react.PropTypes.string,className:_react.PropTypes.string,toggling:_react.PropTypes.bool,"aria-label":_react.PropTypes.string,children:_react.PropTypes.node};FormToggle.defaultProps={checked:false,disabled:false,onKeyDown:function onKeyDown(){},onChange:function onChange(){}};FormToggle.idNum=0;exports.default=FormToggle;module.exports=exports["default"]},1577:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isFetchingNextPage=isFetchingNextPage;exports.isLastPage=isLastPage;exports.getThemesList=getThemesList;exports.getQueryParams=getQueryParams;exports.isFetchError=isFetchError;function isFetchingNextPage(state){return state.themes.themesList.getIn(["queryState","isFetchingNextPage"])}function isLastPage(state){return state.themes.themesList.getIn(["queryState","isLastPage"])}function getThemesList(state){return state.themes.themesList.get("list")}function getQueryParams(state){return state.themes.themesList.get("query").toObject()}function isFetchError(state){return state.themes.themesList.getIn(["queryState","error"])}},1587:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var VerticalNav=_react2.default.createClass({displayName:"VerticalNav",render:function render(){return _react2.default.createElement("div",{className:"vertical-nav"},this.props.children)}});exports.default=VerticalNav;module.exports=exports["default"]},1588:function(module,exports,__webpack_require__){"use strict";var _debug=__webpack_require__(4);var _debug2=_interopRequireDefault(_debug);var _inherits=__webpack_require__(60);var _inherits2=_interopRequireDefault(_inherits);var _store=__webpack_require__(42);var _store2=_interopRequireDefault(_store);var _emitter=__webpack_require__(32);var _emitter2=_interopRequireDefault(_emitter);var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var wpcom=_wp2.default.undocumented();var debug=(0,_debug2.default)("calypso:CountriesList");function CountriesList(key){if(!(this instanceof CountriesList)){return new CountriesList(key)}this.key=key+"CountriesList";this.initialized=false}(0,_emitter2.default)(CountriesList.prototype);CountriesList.prototype.fetch=function(){debug("Fetching "+this.key+" from api");this.isFetching=true;this.requestFromEndpoint(function(error,countriesList){if(error){debug("Unable to fetch "+this.key+" from api",error);return}debug(this.key+" fetched from api successfully:",countriesList);if(!this.initialized){this.initialize(countriesList)}else{this.data=countriesList}this.isFetching=false;this.emit("change");_store2.default.set(this.key,countriesList)}.bind(this))};CountriesList.prototype.get=function(){var data=void 0;if(!this.data){data=_store2.default.get(this.key);if(data){debug("Loaded "+this.key+" from store",data);this.initialize(data)}else{this.data={}}this.fetch()}return this.data};CountriesList.prototype.hasLoadedFromServer=function(){return this.initialized};CountriesList.prototype.initialize=function(data){this.data=data;this.initialized=true};function DomainRegistrationCountriesList(){CountriesList.call(this,"DomainRegistration")}(0,_inherits2.default)(DomainRegistrationCountriesList,CountriesList);DomainRegistrationCountriesList.prototype.requestFromEndpoint=function(fn){return wpcom.getDomainRegistrationSupportedCountries(fn)};function PaymentCountriesList(){CountriesList.call(this,"Payment")}(0,_inherits2.default)(PaymentCountriesList,CountriesList);PaymentCountriesList.prototype.requestFromEndpoint=function(fn){return wpcom.getPaymentSupportedCountries(fn)};function SmsCountriesList(){CountriesList.call(this,"SMS")}(0,_inherits2.default)(SmsCountriesList,CountriesList);SmsCountriesList.prototype.requestFromEndpoint=function(fn){return wpcom.getSmsSupportedCountries(fn)};var domainRegistrationCountriesList=new DomainRegistrationCountriesList;var paymentCountriesList=new PaymentCountriesList;var smsCountriesList=new SmsCountriesList;module.exports={forDomainRegistrations:function forDomainRegistrations(){return domainRegistrationCountriesList},forPayments:function forPayments(){return paymentCountriesList},forSms:function forSms(){return smsCountriesList}}},1596:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDomainsSuggestions=getDomainsSuggestions;exports.isRequestingDomainsSuggestions=isRequestingDomainsSuggestions;exports.getDomainsSuggestionsError=getDomainsSuggestionsError;var _utils=__webpack_require__(713);function getDomainsSuggestions(state,queryObject){var serializedQuery=(0,_utils.getSerializedDomainsSuggestionsQuery)(queryObject);if(serializedQuery){return state.domains.suggestions.items[serializedQuery]}return null}function isRequestingDomainsSuggestions(state,queryObject){var serializedQuery=(0,_utils.getSerializedDomainsSuggestionsQuery)(queryObject);if(serializedQuery){return!!state.domains.suggestions.requesting[serializedQuery]}return false}function getDomainsSuggestionsError(state,queryObject){var serializedQuery=(0,_utils.getSerializedDomainsSuggestionsQuery)(queryObject);if(serializedQuery){return state.domains.suggestions.errors[serializedQuery]||null}return null}},1600:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isJetpack=isJetpack;exports.getParams=getParams;exports.hasSiteChanged=hasSiteChanged;exports.hasParams=hasParams;function isJetpack(state){return!!state.themes.themesLastQuery.get("isJetpack")}function getParams(state){return state.themes.themesLastQuery.get("lastParams")||{}}function hasSiteChanged(state){return state.themes.themesLastQuery.get("previousSiteId")!==state.themes.themesLastQuery.get("currentSiteId")}function hasParams(state){return!!state.themes.themesLastQuery.get("lastParams")}},1601:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getThemes=getThemes;exports.getThemeById=getThemeById;function getThemes(state){return state.themes.themes.get("themes").toJS()}function getThemeById(state,id){var theme=state.themes.themes.getIn(["themes",id]);return theme?theme.toJS():undefined}},1607:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var DomainSuggestion=__webpack_require__(1563);var Gridicon=__webpack_require__(28);var DomainSuggestionFlag=__webpack_require__(1857);var _require=__webpack_require__(658);var shouldBundleDomainWithPlan=_require.shouldBundleDomainWithPlan;var getDomainPriceRule=_require.getDomainPriceRule;var hasDomainInCart=_require.hasDomainInCart;var DomainRegistrationSuggestion=React.createClass({displayName:"DomainRegistrationSuggestion",propTypes:{cart:React.PropTypes.object,suggestion:React.PropTypes.object.isRequired,onButtonClick:React.PropTypes.func.isRequired,domainsWithPlansOnly:React.PropTypes.bool.isRequired,selectedSite:React.PropTypes.object},render:function render(){var suggestion=this.props.suggestion||{},isAdded=hasDomainInCart(this.props.cart,suggestion.domain_name),buttonClasses,buttonContent,domainFlag=null;if(suggestion.domain_name){domainFlag=React.createElement(DomainSuggestionFlag,{domain:suggestion.domain_name})}if(isAdded){buttonClasses="added";buttonContent=React.createElement(Gridicon,{icon:"checkmark"})}else{buttonClasses="add is-primary";buttonContent=shouldBundleDomainWithPlan(this.props.domainsWithPlansOnly,this.props.selectedSite,this.props.cart,suggestion)?this.translate("Upgrade",{context:"Domain mapping suggestion button with plan upgrade"}):this.translate("Select",{context:"Domain mapping suggestion button"})}return React.createElement(DomainSuggestion,{priceRule:getDomainPriceRule(this.props.domainsWithPlansOnly,this.props.selectedSite,this.props.cart,suggestion),price:suggestion.product_slug&&suggestion.cost,domain:suggestion.domain_name,buttonClasses:buttonClasses,buttonContent:buttonContent,cart:this.props.cart,domainsWithPlansOnly:this.props.domainsWithPlansOnly,onButtonClick:this.props.onButtonClick},React.createElement("h3",null,suggestion.domain_name,domainFlag))}});module.exports=DomainRegistrationSuggestion},1615:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.canAccessWordads=canAccessWordads;exports.isWordadsInstantActivationEligible=isWordadsInstantActivationEligible;var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _utils=__webpack_require__(186);var _productsValues=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function canAccessWordads(site){if(site&&_config2.default.isEnabled("manage/ads")){if(isWordadsInstantActivationEligible(site)){return true}return site.options&&site.options.wordads&&(0,_utils.userCan)("manage_options",site)&&(!site.jetpack||_config2.default.isEnabled("manage/ads/jetpack"))}return false}function isWordadsInstantActivationEligible(site){if(((0,_productsValues.isBusiness)(site.plan)||(0,_productsValues.isPremium)(site.plan))&&(0,_utils.userCan)("activate_wordads",site)&&!site.jetpack){return true}return false}},1624:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _purchaseDetail=__webpack_require__(1478);
var _purchaseDetail2=_interopRequireDefault(_purchaseDetail);var _utils=__webpack_require__(186);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CustomDomainPurchaseDetail=function CustomDomainPurchaseDetail(_ref){var selectedSite=_ref.selectedSite;var hasDomainCredit=_ref.hasDomainCredit;var translate=_ref.translate;var renderClaimCustomDomain=function renderClaimCustomDomain(){return _react2.default.createElement(_purchaseDetail2.default,{icon:"globe",title:translate("Select Your Custom Domain"),description:translate("Your plan includes a free custom domain. Replace {{em}}%(siteDomain)s{{/em}} "+"with a custom domain to personalize your site.",{args:{siteDomain:selectedSite.domain},components:{em:_react2.default.createElement("em",null)}}),buttonText:translate("Claim your free domain"),href:"/domains/add/"+selectedSite.slug})};var renderHasCustomDomain=function renderHasCustomDomain(){return _react2.default.createElement(_purchaseDetail2.default,{icon:"globe",title:translate("Custom Domain"),description:translate("Your plan includes the custom domain {{em}}%(siteDomain)s{{/em}}, your own personal corner of the web.",{args:{siteDomain:selectedSite.domain},components:{em:_react2.default.createElement("em",null)}}),buttonText:translate("Manage my domains"),href:"/domains/manage/"+selectedSite.slug})};var renderCustomDomainDetail=function renderCustomDomainDetail(){if((0,_utils.hasCustomDomain)(selectedSite)){return renderHasCustomDomain()}return null};return hasDomainCredit?renderClaimCustomDomain():renderCustomDomainDetail()};CustomDomainPurchaseDetail.propTypes={selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.bool,_react2.default.PropTypes.object]).isRequired,hasDomainCredit:_react2.default.PropTypes.bool};exports.default=(0,_i18nCalypso.localize)(CustomDomainPurchaseDetail);module.exports=exports["default"]},1625:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),Card=__webpack_require__(145),classNames=__webpack_require__(11);module.exports=React.createClass({displayName:"PaymentBox",render:function render(){var cardClass=classNames("payment-box",this.props.classSet),contentClass=classNames("payment-box__content",this.props.contentClassSet);return React.createElement(Card,{className:cardClass},React.createElement("div",{className:"box-padding"},React.createElement("h5",{className:"payment-box__title"},this.props.title),React.createElement("div",{className:contentClass},this.props.children)))}})},1626:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _header=__webpack_require__(1529);var _header2=_interopRequireDefault(_header);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _verticalNav=__webpack_require__(1587);var _verticalNav2=_interopRequireDefault(_verticalNav);var _item=__webpack_require__(1553);var _item2=_interopRequireDefault(_item);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DomainMainPlaceholder=_react2.default.createClass({displayName:"DomainMainPlaceholder",render:function render(){return _react2.default.createElement(_main2.default,{className:"domain-main-placeholder"},_react2.default.createElement(_header2.default,{onClick:this.props.goBack}),_react2.default.createElement(_verticalNav2.default,null,_react2.default.createElement(_compact2.default,{className:"domain-main-placeholder__card"},_react2.default.createElement("p",null),_react2.default.createElement("p",null),_react2.default.createElement("p",null),_react2.default.createElement("p",null)),_react2.default.createElement(_item2.default,{isPlaceholder:true}),_react2.default.createElement(_item2.default,{isPlaceholder:true})))}});exports.default=DomainMainPlaceholder;module.exports=exports["default"]},1636:function(module,exports,__webpack_require__){var keys=__webpack_require__(94);function baseConforms(source){var props=keys(source),length=props.length;return function(object){if(object==null){return!length}var index=length;while(index--){var key=props[index],predicate=source[key],value=object[key];if(value===undefined&&!(key in Object(object))||!predicate(value)){return false}}return true}}module.exports=baseConforms},1637:function(module,exports,__webpack_require__){var baseClone=__webpack_require__(126),baseConforms=__webpack_require__(1636);function conforms(source){return baseConforms(baseClone(source,true))}module.exports=conforms},1647:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _reactRedux=__webpack_require__(21);var _premiumPopover=__webpack_require__(1873);var _premiumPopover2=_interopRequireDefault(_premiumPopover);var _selectors=__webpack_require__(121);var _constants=__webpack_require__(1538);var _abtest=__webpack_require__(248);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DomainProductPrice=_react2.default.createClass({displayName:"DomainProductPrice",propTypes:{isLoading:_react2.default.PropTypes.bool,price:_react2.default.PropTypes.string,freeWithPlan:_react2.default.PropTypes.bool,requiresPlan:_react2.default.PropTypes.bool,domainsWithPlansOnly:_react2.default.PropTypes.bool.isRequired},renderFreeWithPlan:function renderFreeWithPlan(){return _react2.default.createElement("div",{className:(0,_classnames2.default)("domain-product-price","is-free-domain",{"no-price":this.props.domainsWithPlansOnly})},!this.props.domainsWithPlansOnly&&this.renderFreeWithPlanPrice(),_react2.default.createElement("span",{className:"domain-product-price__free-text",ref:"subMessage"},this.translate("Free with your plan")))},renderFreeWithPlanPrice:function renderFreeWithPlanPrice(){return _react2.default.createElement("span",{className:"domain-product-price__price"},this.translate("%(cost)s {{small}}/year{{/small}}",{args:{cost:this.props.price},components:{small:_react2.default.createElement("small",null)}}))},renderFree:function renderFree(){return _react2.default.createElement("div",{className:"domain-product-price"},_react2.default.createElement("span",{className:"domain-product-price__price"},this.translate("Free")))},renderIncludedInPremium:function renderIncludedInPremium(){return _react2.default.createElement("div",{className:"domain-product-price is-with-plans-only"},_react2.default.createElement("small",{className:"domain-product-price__premium-text",ref:"subMessage"},_react2.default.createElement(_premiumPopover2.default,{position:"bottom left",textLabel:this.translate("Included in WordPress.com Premium")})))},renderPrice:function renderPrice(){return _react2.default.createElement("div",{className:"domain-product-price"},_react2.default.createElement("span",{className:"domain-product-price__price"},this.translate("%(cost)s {{small}}/year{{/small}}",{args:{cost:this.props.price},components:{small:_react2.default.createElement("small",null)}})))},render:function render(){if(this.props.isLoading){return _react2.default.createElement("div",{className:"domain-product-price is-placeholder"},this.translate("Loading…"))}var showPopover=(0,_abtest.abtest)("domainSuggestionPopover")==="showPopover";switch(this.props.rule){case"FREE_DOMAIN":return showPopover&&this.renderFree();case"FREE_WITH_PLAN":return this.renderFreeWithPlan();case"INCLUDED_IN_PREMIUM":return showPopover&&this.renderIncludedInPremium();case"PRICE":default:return this.renderPrice()}}});exports.default=(0,_reactRedux.connect)(function(state){return{domainsWithPlansOnly:(0,_selectors.getCurrentUser)(state)?(0,_selectors.currentUserHasFlag)(state,_constants.DOMAINS_WITH_PLANS_ONLY):true}})(DomainProductPrice);module.exports=exports["default"]},1648:function(module,exports,__webpack_require__){"use strict";var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _keys=__webpack_require__(44);var _keys2=_interopRequireDefault(_keys);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ReactDom=__webpack_require__(43),React=__webpack_require__(1),Clipboard=__webpack_require__(1750),omit=__webpack_require__(18),noop=__webpack_require__(36),classNames=__webpack_require__(11);var Button=__webpack_require__(68);module.exports=React.createClass({displayName:"ClipboardButton",propTypes:{className:React.PropTypes.string,text:React.PropTypes.string,onCopy:React.PropTypes.func},getDefaultProps:function getDefaultProps(){return{onCopy:noop}},componentDidMount:function componentDidMount(){var _this=this;var button=ReactDom.findDOMNode(this.refs.button);this.clipboard=new Clipboard(button,{text:function text(){return _this.props.text}});this.clipboard.on("success",this.props.onCopy);this.clipboard.on("error",this.displayPrompt)},componentWillUnmount:function componentWillUnmount(){this.clipboard.destroy();delete this.clipboard},displayPrompt:function displayPrompt(){window.prompt(this.translate("Highlight and copy the following text to your clipboard:"),this.props.text)},render:function render(){var classes=classNames("clipboard-button",this.props.className);return React.createElement(Button,(0,_extends3.default)({ref:"button"},omit(this.props,(0,_keys2.default)(this.constructor.propTypes)),{className:classes}))}})},1659:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function recursivelyWalkAndSum(node,valueProp,nextNodeProp){var value=arguments.length<=3||arguments[3]===undefined?0:arguments[3];value+=node[valueProp];if(!node[nextNodeProp]){return value}return recursivelyWalkAndSum(node[nextNodeProp],valueProp,value)}function isInViewportRange(elementStart,elementEnd){var viewportStart=window.scrollY,viewportEnd=document.documentElement.clientHeight+window.scrollY;return elementStart>viewportStart&&elementEnd<viewportEnd}function scrollIntoViewport(element){var elementStartY=recursivelyWalkAndSum(element,"offsetTop","offsetParent"),elementEndY=elementStartY+element.offsetHeight;!isInViewportRange(elementStartY,elementEndY)&&window.scrollTo(0,elementStartY)}exports.default=scrollIntoViewport;module.exports=exports["default"]},1667:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CartAd=function CartAd(_ref){var children=_ref.children;return _react2.default.createElement("div",{className:"cart__cart-ad"},children)};CartAd.displayName="CartAd";exports.default=CartAd;module.exports=exports["default"]},1668:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _isEmpty=__webpack_require__(81);var _isEmpty2=_interopRequireDefault(_isEmpty);var _reactDom=__webpack_require__(43);var _reactDom2=_interopRequireDefault(_reactDom);var _dataObserve=__webpack_require__(146);var _dataObserve2=_interopRequireDefault(_dataObserve);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _formInputValidation=__webpack_require__(1456);var _formInputValidation2=_interopRequireDefault(_formInputValidation);var _scrollIntoViewport=__webpack_require__(1659);var _scrollIntoViewport2=_interopRequireDefault(_scrollIntoViewport);var _formSelect=__webpack_require__(1484);var _formSelect2=_interopRequireDefault(_formSelect);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"CountrySelect",mixins:[(0,_dataObserve2.default)("countriesList")],recordCountrySelectClick:function recordCountrySelectClick(){if(this.props.eventFormName){_analytics2.default.ga.recordEvent("Upgrades","Clicked "+this.props.eventFormName+" Country Select")}},focus:function focus(){var node=_reactDom2.default.findDOMNode(this.refs.input);node.focus();(0,_scrollIntoViewport2.default)(node)},render:function render(){var classes=(0,_classnames2.default)(this.props.additionalClasses,"country");var countriesList=this.props.countriesList.get();var options=[];var value=this.props.value;value=value||"";if((0,_isEmpty2.default)(countriesList)){options.push({key:"loading",label:this.translate("Loading…"),disabled:"disabled"})}else{options=options.concat([{key:"select-country",label:this.translate("Select Country")},{key:"divider1",label:"",disabled:"disabled"}]);options=options.concat(countriesList.map(function(country){if((0,_isEmpty2.default)(country.code)){return{key:"divider2",label:"",disabled:"disabled"}}return{key:country.code,label:country.name,value:country.code}}))}return _react2.default.createElement("div",{className:classes},_react2.default.createElement("div",null,_react2.default.createElement(_formLabel2.default,{htmlFor:this.props.name},this.props.label),_react2.default.createElement(_formSelect2.default,{name:this.props.name,value:value,disabled:this.props.disabled,ref:"input",onChange:this.props.onChange,onClick:this.recordCountrySelectClick,isError:this.props.isError},options.map(function(option){return _react2.default.createElement("option",{key:option.key,value:option.value,disabled:option.disabled},option.label)}))),this.props.errorMessage&&_react2.default.createElement(_formInputValidation2.default,{text:this.props.errorMessage,isError:true}))}});module.exports=exports["default"]},1669:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _formButtonsBar=__webpack_require__(654);var _formButtonsBar2=_interopRequireDefault(_formButtonsBar);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DomainManagementFormFooter=_react2.default.createClass({displayName:"DomainManagementFormFooter",render:function render(){return _react2.default.createElement(_formButtonsBar2.default,{className:"domain-management-form-footer"},this.props.children)}});exports.default=DomainManagementFormFooter;module.exports=exports["default"]},1670:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _dispatcher=__webpack_require__(38);var _dispatcher2=_interopRequireDefault(_dispatcher);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _path=__webpack_require__(364);var _sectionNav=__webpack_require__(1473);var _sectionNav2=_interopRequireDefault(_sectionNav);var _tabs=__webpack_require__(1471);var _tabs2=_interopRequireDefault(_tabs);var _item=__webpack_require__(1470);var _item2=_interopRequireDefault(_item);var _viewport=__webpack_require__(93);var _viewport2=_interopRequireDefault(_viewport);var _constants=__webpack_require__(64);var _popoverCart=__webpack_require__(1964);var _popoverCart2=_interopRequireDefault(_popoverCart);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PlansNavigation=_react2.default.createClass({displayName:"PlansNavigation",propTypes:{cart:_react2.default.PropTypes.object,path:_react2.default.PropTypes.string.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired,sitePlans:_react2.default.PropTypes.object.isRequired},getInitialState:function getInitialState(){return{cartVisible:false,cartShowKeepSearching:false}},componentWillMount:function componentWillMount(){this.dispatchToken=_dispatcher2.default.register(function(payload){if(payload.action.type===_constants.action.CART_POPUP_OPEN){this.setState({cartVisible:true,cartShowKeepSearching:payload.action.options.showKeepSearching})}else if(payload.action.type===_constants.action.CART_POPUP_CLOSE){this.setState({cartVisible:false})}}.bind(this))},componentWillUnmount:function componentWillUnmount(){_dispatcher2.default.unregister(this.dispatchToken)},render:function render(){var site=this.props.selectedSite;var isJetpack=site&&site.jetpack;var path=(0,_path.sectionify)(this.props.path);var hasPlan=site&&site.plan&&site.plan.product_slug!=="free_plan";var sectionTitle=path.split("?")[0].replace(/\//g," ");return _react2.default.createElement(_sectionNav2.default,{hasPinnedItems:_viewport2.default.isMobile(),selectedText:sectionTitle,onMobileNavPanelOpen:this.onMobileNavPanelOpen},_react2.default.createElement(_tabs2.default,{label:"Section",selectedText:sectionTitle},hasPlan&&_react2.default.createElement(_item2.default,{path:"/plans/my-plan/"+site.slug,key:"myPlan",selected:path==="/plans/my-plan"},this.translate("My Plan")),_react2.default.createElement(_item2.default,{path:"/plans/"+site.slug,key:"plans",selected:path==="/plans"||path==="/plans/monthly"},this.translate("Plans")),!isJetpack&&_react2.default.createElement(_item2.default,{path:"/domains/manage/"+site.slug,key:"domains",selected:path==="/domains/manage"||path==="/domains/add"},this.translate("Domains")),!isJetpack&&_react2.default.createElement(_item2.default,{path:"/domains/manage/email/"+site.slug,key:"googleApps",selected:path==="/domains/manage/email"},this.translate("Google Apps"))),this.cartToggleButton())},toggleCartVisibility:function toggleCartVisibility(event){if(event){event.preventDefault()}this.setState({cartVisible:!this.state.cartVisible})},onMobileNavPanelOpen:function onMobileNavPanelOpen(){this.setState({cartVisible:false})},onKeepSearchingClick:function onKeepSearchingClick(){this.setState({cartVisible:false})},cartToggleButton:function cartToggleButton(){if(!_config2.default.isEnabled("upgrades/checkout")||!this.props.cart){return null}return _react2.default.createElement(_popoverCart2.default,{sitePlans:this.props.sitePlans,cart:this.props.cart,selectedSite:this.props.selectedSite,onToggle:this.toggleCartVisibility,pinned:_viewport2.default.isMobile(),visible:this.state.cartVisible,showKeepSearching:this.state.cartShowKeepSearching,onKeepSearchingClick:this.onKeepSearchingClick,path:this.props.path})}});exports.default=PlansNavigation;module.exports=exports["default"]},1676:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.deleteStoredCard=exports.fetchStoredCards=undefined;var _promise=__webpack_require__(51);var _promise2=_interopRequireDefault(_promise);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _actionTypes=__webpack_require__(3);var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var wpcom=_wp2.default.undocumented();var fetchStoredCards=exports.fetchStoredCards=function fetchStoredCards(){return function(dispatch){dispatch({type:_actionTypes.STORED_CARDS_FETCH});return new _promise2.default(function(resolve,reject){wpcom.getStoredCards(function(error,data){error?reject(error):resolve(data)})}).then(function(data){dispatch({type:_actionTypes.STORED_CARDS_FETCH_COMPLETED,list:data})}).catch(function(error){dispatch({type:_actionTypes.STORED_CARDS_FETCH_FAILED,error:error.message||_i18nCalypso2.default.translate("There was a problem retrieving stored cards.")})})}};var deleteStoredCard=exports.deleteStoredCard=function deleteStoredCard(card){return function(dispatch){dispatch({type:_actionTypes.STORED_CARDS_DELETE});return new _promise2.default(function(resolve,reject){wpcom.me().storedCardDelete(card,function(error,data){error?reject(error):resolve(data)})}).then(function(){dispatch({type:_actionTypes.STORED_CARDS_DELETE_COMPLETED,card:card})}).catch(function(error){dispatch({type:_actionTypes.STORED_CARDS_DELETE_FAILED,error:error.message||_i18nCalypso2.default.translate("There was a problem deleting the stored card.")})})}}},1686:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _omit=__webpack_require__(18);var _omit2=_interopRequireDefault(_omit);var _clipboardButton=__webpack_require__(1648);var _clipboardButton2=_interopRequireDefault(_clipboardButton);var _formTextInput=__webpack_require__(246);var _formTextInput2=_interopRequireDefault(_formTextInput);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"ClipboardButtonInput",propTypes:{value:_react.PropTypes.string,disabled:_react.PropTypes.bool,className:_react.PropTypes.string},getInitialState:function getInitialState(){return{isCopied:false,disabled:false}},getDefaultProps:function getDefaultProps(){return{value:""}},componentWillUnmount:function componentWillUnmount(){clearTimeout(this.confirmationTimeout);delete this.confirmationTimeout},showConfirmation:function showConfirmation(){var _this=this;this.setState({isCopied:true});this.confirmationTimeout=setTimeout(function(){_this.setState({isCopied:false})},4e3)},render:function render(){var _props=this.props;var value=_props.value;var className=_props.className;var disabled=_props.disabled;var classes=(0,_classnames2.default)("clipboard-button-input",className);return _react2.default.createElement("span",{className:classes},_react2.default.createElement(_formTextInput2.default,(0,_extends3.default)({},(0,_omit2.default)(this.props,"className"),{type:"text",selectOnFocus:true,readOnly:true})),_react2.default.createElement(_clipboardButton2.default,{text:value,onCopy:this.showConfirmation,disabled:disabled,compact:true},this.state.isCopied?this.translate("Copied!"):this.translate("Copy",{context:"verb"})))}});module.exports=exports["default"]},1687:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var StoreConnection=__webpack_require__(1495),CartStore=__webpack_require__(663);var stores=[CartStore];function getStateFromStores(){return{cart:CartStore.get()}}var CartData=React.createClass({displayName:"CartData",render:function render(){return React.createElement(StoreConnection,{stores:stores,getStateFromStores:getStateFromStores},this.props.children)}});module.exports=CartData},1688:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var StoreConnection=__webpack_require__(1495),CartStore=__webpack_require__(663),TransactionStore=__webpack_require__(1725);var stores=[TransactionStore,CartStore];function getStateFromStores(){return{transaction:TransactionStore.get(),cart:CartStore.get()}}var CheckoutData=React.createClass({displayName:"CheckoutData",render:function render(){return React.createElement(StoreConnection,{stores:stores,getStateFromStores:getStateFromStores},this.props.children)}});module.exports=CheckoutData},1690:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _reactRedux=__webpack_require__(21);var _selectors=__webpack_require__(1596);var _actions=__webpack_require__(1738);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getQueryObject(props){var query=props.query;var vendor=props.vendor;var quantity=props.quantity;var includeSubdomain=props.includeSubdomain;return{query:query,vendor:vendor,quantity:quantity,include_wordpressdotcom:includeSubdomain}}var QueryDomainsSuggestions=function(_Component){(0,_inherits3.default)(QueryDomainsSuggestions,_Component);function QueryDomainsSuggestions(props){(0,_classCallCheck3.default)(this,QueryDomainsSuggestions);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(QueryDomainsSuggestions).call(this,props));_this.requestDomainsSuggestions=_this.requestDomainsSuggestions.bind(_this);return _this}(0,_createClass3.default)(QueryDomainsSuggestions,[{key:"requestDomainsSuggestions",value:function requestDomainsSuggestions(){var props=arguments.length<=0||arguments[0]===undefined?this.props:arguments[0];if(!props.requestingDomainsSuggestions){props.requestDomainsSuggestions(getQueryObject(props))}}},{key:"componentWillMount",value:function componentWillMount(){this.requestDomainsSuggestions()}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(nextProps.requestingDomainsSuggestions||this.props.query===nextProps.query&&this.props.vendor===nextProps.vendor&&this.props.quantity===nextProps.quantity&&this.props.includeSubdomain===nextProps.includeSubdomain){return}this.requestDomainsSuggestions(nextProps)}},{key:"render",value:function render(){return null}}]);return QueryDomainsSuggestions}(_react.Component);QueryDomainsSuggestions.propTypes={query:_react.PropTypes.string.isRequired,vendor:_react.PropTypes.string.isRequired,quantity:_react.PropTypes.number,includeSubdomain:_react.PropTypes.bool,requestingDomainsSuggestions:_react.PropTypes.bool,requestDomainsSuggestions:_react.PropTypes.func};QueryDomainsSuggestions.defaultProps={requestDomainsSuggestions:function requestDomainsSuggestions(){},includeSubdomain:false,quantity:5};exports.default=(0,_reactRedux.connect)(function(state,ownProps){return{requestingDomainsSuggestions:(0,_selectors.isRequestingDomainsSuggestions)(state,getQueryObject(ownProps))}},{requestDomainsSuggestions:_actions.requestDomainsSuggestions})(QueryDomainsSuggestions);module.exports=exports["default"]},1693:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _reactRedux=__webpack_require__(21);var _selectors=__webpack_require__(1741);var _actions=__webpack_require__(1740);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var QuerySiteVouchers=function(_Component){(0,_inherits3.default)(QuerySiteVouchers,_Component);function QuerySiteVouchers(props){(0,_classCallCheck3.default)(this,QuerySiteVouchers);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(QuerySiteVouchers).call(this,props));_this.requestVouchers=_this.requestVouchers.bind(_this);return _this}(0,_createClass3.default)(QuerySiteVouchers,[{key:"componentWillMount",value:function componentWillMount(){this.requestVouchers()}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(nextProps.requestingSiteVouchers||!nextProps.siteId||this.props.siteId===nextProps.siteId){return}this.requestVouchers(nextProps)}},{key:"requestVouchers",value:function requestVouchers(){var props=arguments.length<=0||arguments[0]===undefined?this.props:arguments[0];if(!props.requestingSiteVouchers&&props.siteId){props.requestVouchers(props.siteId)}}},{key:"render",value:function render(){return null}}]);return QuerySiteVouchers}(_react.Component);QuerySiteVouchers.propTypes={siteId:_react.PropTypes.number,requestingVouchers:_react.PropTypes.bool,requestVouchers:_react.PropTypes.func};QuerySiteVouchers.defaultProps={requestVouchers:function requestVouchers(){}};exports.default=(0,_reactRedux.connect)(function(state,ownProps){return{requestingSiteVouchers:(0,_selectors.isRequestingSiteVouchers)(state,ownProps.siteId)}},{requestVouchers:_actions.requestSiteVouchers})(QuerySiteVouchers);module.exports=exports["default"]},1694:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _reactRedux=__webpack_require__(21);var _selectors=__webpack_require__(1547);var _actions=__webpack_require__(1676);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var QueryStoredCards=function(_Component){(0,_inherits3.default)(QueryStoredCards,_Component);function QueryStoredCards(){(0,_classCallCheck3.default)(this,QueryStoredCards);return(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(QueryStoredCards).apply(this,arguments))}(0,_createClass3.default)(QueryStoredCards,[{key:"componentWillMount",value:function componentWillMount(){if(!this.props.isRequesting){this.props.fetchStoredCards()}}},{key:"render",value:function render(){return null}}]);return QueryStoredCards}(_react.Component);QueryStoredCards.propTypes={fetchStoredCards:_react.PropTypes.func.isRequired,isRequesting:_react.PropTypes.bool.isRequired};exports.default=(0,_reactRedux.connect)(function(state){return{isRequesting:(0,_selectors.isFetchingStoredCards)(state)}},{fetchStoredCards:_actions.fetchStoredCards})(QueryStoredCards);module.exports=exports["default"]},1695:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var DomainSuggestion=__webpack_require__(1563);var _require=__webpack_require__(658);var shouldBundleDomainWithPlan=_require.shouldBundleDomainWithPlan;var getDomainPriceRule=_require.getDomainPriceRule;var DomainMappingSuggestion=React.createClass({displayName:"DomainMappingSuggestion",propTypes:{cart:React.PropTypes.object,products:React.PropTypes.object.isRequired,onButtonClick:React.PropTypes.func.isRequired,domainsWithPlansOnly:React.PropTypes.bool.isRequired,selectedSite:React.PropTypes.oneOfType([React.PropTypes.object,React.PropTypes.bool])},render:function render(){var suggestion={product_slug:this.props.products.domain_map.product_slug,cost:this.props.products.domain_map.cost_display},buttonContent=shouldBundleDomainWithPlan(this.props.domainsWithPlansOnly,this.props.selectedSite,this.props.cart,suggestion)?this.translate("Upgrade",{
context:"Domain mapping suggestion button with plan upgrade"}):this.translate("Map it",{context:"Domain mapping suggestion button"});return React.createElement(DomainSuggestion,{priceRule:getDomainPriceRule(this.props.domainsWithPlansOnly,this.props.selectedSite,this.props.cart,suggestion),price:this.props.products.domain_map&&this.props.products.domain_map.cost_display,extraClasses:"is-visible domain-mapping-suggestion",buttonClasses:"map",domainsWithPlansOnly:this.props.domainsWithPlansOnly,buttonContent:buttonContent,cart:this.props.cart,onButtonClick:this.props.onButtonClick},React.createElement("div",{className:"domain-mapping-suggestion__domain-description"},React.createElement("h3",null,this.translate("Already own a domain?",{context:"Upgrades: Register domain header",comment:"Asks if you want to own a new domain (not if you want to map an existing domain)."})),React.createElement("p",null,this.translate("Map this domain to use it as your site's address.",{context:"Upgrades: Register domain description",comment:"Explains how you could use a new domain name for your site's address."}))))}});module.exports=DomainMappingSuggestion},1704:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PurchaseButton=function PurchaseButton(_ref){var _ref$className=_ref.className;var className=_ref$className===undefined?false:_ref$className;var href=_ref.href;var disabled=_ref.disabled;var _ref$onClick=_ref.onClick;var onClick=_ref$onClick===undefined?function(){}:_ref$onClick;var target=_ref.target;var text=_ref.text;var _ref$primary=_ref.primary;var primary=_ref$primary===undefined?true:_ref$primary;return _react2.default.createElement(_button2.default,{className:(className?className+" ":"")+"purchase-detail__button",disabled:disabled,href:href,onClick:onClick,target:target,primary:primary},text)};PurchaseButton.propTypes={className:_react.PropTypes.string,href:_react.PropTypes.string,disabled:_react.PropTypes.bool,onClick:_react.PropTypes.func,target:_react.PropTypes.string,text:_react.PropTypes.string,primary:_react.PropTypes.bool};exports.default=PurchaseButton;module.exports=exports["default"]},1705:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TipInfo=function TipInfo(_ref){var _ref$info=_ref.info;var info=_ref$info===undefined?"":_ref$info;var _ref$className=_ref.className;var className=_ref$className===undefined?"":_ref$className;className+=" purchase-detail__info form-setting-explanation";return _react2.default.createElement("div",{className:className},_react2.default.createElement("span",{className:"purchase-detail__info-icon-container"},_react2.default.createElement(_gridicon2.default,{size:12,icon:"info-outline"})),info)};TipInfo.propTypes={info:_react.PropTypes.string,className:_react.PropTypes.string};exports.default=TipInfo;module.exports=exports["default"]},1725:function(module,exports,__webpack_require__){"use strict";var cloneDeep=__webpack_require__(160),merge=__webpack_require__(56),assign=__webpack_require__(29),update=__webpack_require__(96);var UpgradesActionTypes=__webpack_require__(64).action,cartItems=__webpack_require__(184).cartItems,CartStore=__webpack_require__(663),Emitter=__webpack_require__(32),Dispatcher=__webpack_require__(38),transactionStepTypes=__webpack_require__(696),hasDomainDetails=__webpack_require__(363).hasDomainDetails;var _transaction=createInitialTransaction();var TransactionStore={get:function get(){return _transaction}};Emitter(TransactionStore);function replaceData(newData){_transaction=cloneDeep(newData);TransactionStore.emit("change")}function createInitialTransaction(){return{errors:{},newCardFormFields:{},step:{name:transactionStepTypes.BEFORE_SUBMIT},domainDetails:null}}function reset(){replaceData(createInitialTransaction())}function setDomainDetails(domainDetails){replaceData(merge(_transaction,{domainDetails:domainDetails}))}function setPayment(payment){replaceData(assign({},_transaction,{payment:payment}))}function setStep(step){replaceData(assign({},_transaction,{step:step,errors:step.error?step.error.message:{}}))}function setNewCreditCardDetails(options){if(!_transaction.payment.newCardDetails){return}var newTransaction=update(_transaction,{payment:{newCardDetails:{$merge:options.rawDetails}},newCardFormFields:{$merge:options.maskedDetails}});replaceData(newTransaction)}TransactionStore.dispatchToken=Dispatcher.register(function(payload){var action=payload.action;switch(action.type){case UpgradesActionTypes.TRANSACTION_DOMAIN_DETAILS_SET:setDomainDetails(action.domainDetails);break;case UpgradesActionTypes.TRANSACTION_PAYMENT_SET:setPayment(action.payment);break;case UpgradesActionTypes.TRANSACTION_NEW_CREDIT_CARD_DETAILS_SET:setNewCreditCardDetails({rawDetails:action.rawDetails,maskedDetails:action.maskedDetails});break;case UpgradesActionTypes.TRANSACTION_STEP_SET:setStep(action.step);break;case UpgradesActionTypes.TRANSACTION_RESET:reset();break;case UpgradesActionTypes.CART_ITEM_REMOVE:Dispatcher.waitFor([CartStore.dispatchToken]);if(!cartItems.hasDomainRegistration(CartStore.get())&&hasDomainDetails(TransactionStore.get())){setDomainDetails(null)}break}});module.exports=TransactionStore},1731:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var analytics=__webpack_require__(16),support=__webpack_require__(339),Gridicon=__webpack_require__(28);module.exports=React.createClass({displayName:"TermsOfService",recordTermsAndConditionsClick:function recordTermsAndConditionsClick(){analytics.ga.recordEvent("Upgrades","Clicked Terms and Conditions Link")},renderTerms:function renderTerms(){var message=this.translate("By checking out, you agree to our {{link}}fascinating terms and conditions{{/link}}.",{components:{link:React.createElement("a",{href:"//wordpress.com/tos/",target:"_blank"})}});if(this.props.hasRenewableSubscription){message=this.translate("By checking out, you agree to our {{tosLink}}Terms of Service{{/tosLink}} and authorize your payment method to be charged on a recurring basis until you cancel, which you can do at any time. You understand {{autoRenewalSupportPage}}how your subscription works{{/autoRenewalSupportPage}} and {{managePurchasesSupportPage}}how to cancel{{/managePurchasesSupportPage}}.",{components:{tosLink:React.createElement("a",{href:"//wordpress.com/tos/",target:"_blank"}),autoRenewalSupportPage:React.createElement("a",{href:support.AUTO_RENEWAL,target:"_blank"}),managePurchasesSupportPage:React.createElement("a",{href:support.MANAGE_PURCHASES,target:"_blank"})}})}return message},render:function render(){return React.createElement("div",{className:"checkout-terms",onClick:this.recordTermsAndConditionsClick},React.createElement(Gridicon,{icon:"info-outline",size:18}),React.createElement("p",null,this.renderTerms()))}})},1732:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),map=__webpack_require__(50);module.exports=React.createClass({displayName:"ValidationErrorList",propTypes:{messages:React.PropTypes.array.isRequired},render:function render(){return React.createElement("div",null,React.createElement("p",null,this.translate("Please correct the issue below and try again.","Please correct the issues listed below and try again.",{count:this.props.messages.length})),React.createElement("ul",null,map(this.props.messages,function(message,index){return React.createElement("li",{key:index},message)})))}})},1738:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.receiveDomainsSuggestions=receiveDomainsSuggestions;exports.requestDomainsSuggestions=requestDomainsSuggestions;var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);var _actionTypes=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function receiveDomainsSuggestions(suggestions,queryObject){return{type:_actionTypes.DOMAINS_SUGGESTIONS_RECEIVE,queryObject:queryObject,suggestions:suggestions}}function requestDomainsSuggestions(queryObject){return function(dispatch){dispatch({type:_actionTypes.DOMAINS_SUGGESTIONS_REQUEST,queryObject:queryObject});return _wp2.default.domains().suggestions(queryObject).then(function(suggestions){dispatch(receiveDomainsSuggestions(suggestions,queryObject));dispatch({type:_actionTypes.DOMAINS_SUGGESTIONS_REQUEST_SUCCESS,queryObject:queryObject})}).catch(function(error){dispatch({type:_actionTypes.DOMAINS_SUGGESTIONS_REQUEST_FAILURE,queryObject:queryObject,error:error})})}}},1740:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.vouchersAssignRequestFailureAction=exports.vouchersAssignRequestSuccessAction=exports.vouchersAssignRequestAction=exports.vouchersAssignReceiveAction=exports.vouchersRequestFailureAction=exports.vouchersRequestSuccessAction=exports.vouchersRequestAction=exports.vouchersReceiveAction=undefined;exports.requestSiteVouchers=requestSiteVouchers;exports.assignSiteVoucher=assignSiteVoucher;var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);var _httpEnvelopeNormalizer=__webpack_require__(1907);var _actionTypes=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var wpcom=(0,_httpEnvelopeNormalizer.injectHandler)(_wp2.default);var vouchersReceiveAction=exports.vouchersReceiveAction=function vouchersReceiveAction(siteId,vouchers){return{type:_actionTypes.SITE_VOUCHERS_RECEIVE,siteId:siteId,vouchers:vouchers}};var vouchersRequestAction=exports.vouchersRequestAction=function vouchersRequestAction(siteId){return{type:_actionTypes.SITE_VOUCHERS_REQUEST,siteId:siteId}};var vouchersRequestSuccessAction=exports.vouchersRequestSuccessAction=function vouchersRequestSuccessAction(siteId){return{type:_actionTypes.SITE_VOUCHERS_REQUEST_SUCCESS,siteId:siteId}};var vouchersRequestFailureAction=exports.vouchersRequestFailureAction=function vouchersRequestFailureAction(siteId,error){return{type:_actionTypes.SITE_VOUCHERS_REQUEST_FAILURE,siteId:siteId,error:error}};var vouchersAssignReceiveAction=exports.vouchersAssignReceiveAction=function vouchersAssignReceiveAction(siteId,serviceType,voucher){return{type:_actionTypes.SITE_VOUCHERS_ASSIGN_RECEIVE,siteId:siteId,serviceType:serviceType,voucher:voucher}};var vouchersAssignRequestAction=exports.vouchersAssignRequestAction=function vouchersAssignRequestAction(siteId,serviceType){return{type:_actionTypes.SITE_VOUCHERS_ASSIGN_REQUEST,siteId:siteId,serviceType:serviceType}};var vouchersAssignRequestSuccessAction=exports.vouchersAssignRequestSuccessAction=function vouchersAssignRequestSuccessAction(siteId,serviceType){return{type:_actionTypes.SITE_VOUCHERS_ASSIGN_REQUEST_SUCCESS,siteId:siteId,serviceType:serviceType}};var vouchersAssignRequestFailureAction=exports.vouchersAssignRequestFailureAction=function vouchersAssignRequestFailureAction(siteId,serviceType,error){return{type:_actionTypes.SITE_VOUCHERS_ASSIGN_REQUEST_FAILURE,siteId:siteId,serviceType:serviceType,error:error}};function requestSiteVouchers(siteId){return function(dispatch){dispatch(vouchersRequestAction(siteId));return wpcom.site(siteId).creditVouchers().list().then(function(data){var _data$vouchers=data.vouchers;var vouchers=_data$vouchers===undefined?[]:_data$vouchers;dispatch(vouchersRequestSuccessAction(siteId));dispatch(vouchersReceiveAction(siteId,vouchers))}).catch(function(error){var message=error instanceof Error?error.message:error;dispatch(vouchersRequestFailureAction(siteId,message))})}}function assignSiteVoucher(siteId,serviceType){return function(dispatch){dispatch(vouchersAssignRequestAction(siteId,serviceType));return wpcom.site(siteId).creditVouchers().assign(serviceType).then(function(data){var _data$voucher=data.voucher;var voucher=_data$voucher===undefined?{}:_data$voucher;dispatch(vouchersAssignRequestSuccessAction(siteId,serviceType));dispatch(vouchersAssignReceiveAction(siteId,serviceType,voucher))}).catch(function(error){var message=error instanceof Error?error.message:error;dispatch(vouchersAssignRequestFailureAction(siteId,serviceType,message))})}}},1741:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isAssigningSiteVoucher=exports.isRequestingSiteVouchers=exports.getGoogleAdCredits=exports.getVouchersBySiteIdAndServiceType=exports.getVouchersBySite=exports.getVouchersBySiteId=undefined;var _serviceTypes=__webpack_require__(1742);var getVouchersBySiteId=exports.getVouchersBySiteId=function getVouchersBySiteId(state,siteId){if(!siteId){return[]}return state.sites.vouchers.items[siteId]||[]};var getVouchersBySite=exports.getVouchersBySite=function getVouchersBySite(state,site){if(!site){return[]}return getVouchersBySiteId(state,site.ID)};var getVouchersBySiteIdAndServiceType=exports.getVouchersBySiteIdAndServiceType=function getVouchersBySiteIdAndServiceType(state,siteId,serviceType){return getVouchersBySiteId(state,siteId)[serviceType]||[]};var getGoogleAdCredits=exports.getGoogleAdCredits=function getGoogleAdCredits(state,site){var vouchers=getVouchersBySite(state,site);return vouchers[_serviceTypes.GOOGLE_CREDITS]||[]};var isRequestingSiteVouchers=exports.isRequestingSiteVouchers=function isRequestingSiteVouchers(state,siteId){return state.sites.vouchers.requesting[siteId]||false};var isAssigningSiteVoucher=exports.isAssigningSiteVoucher=function isAssigningSiteVoucher(state,siteId,serviceType){var requesting=state.sites.vouchers.requesting[siteId];return requesting?requesting[serviceType]:false}},1742:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var GOOGLE_CREDITS=exports.GOOGLE_CREDITS="google-credits"},1749:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _select=__webpack_require__(1791);var _select2=_interopRequireDefault(_select);var ClipboardAction=function(){function ClipboardAction(options){_classCallCheck(this,ClipboardAction);this.resolveOptions(options);this.initSelection()}ClipboardAction.prototype.resolveOptions=function resolveOptions(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this.action=options.action;this.emitter=options.emitter;this.target=options.target;this.text=options.text;this.trigger=options.trigger;this.selectedText=""};ClipboardAction.prototype.initSelection=function initSelection(){if(this.text&&this.target){throw new Error('Multiple attributes declared, use either "target" or "text"')}else if(this.text){this.selectFake()}else if(this.target){this.selectTarget()}else{throw new Error('Missing required attributes, use either "target" or "text"')}};ClipboardAction.prototype.selectFake=function selectFake(){var _this=this;this.removeFake();this.fakeHandler=document.body.addEventListener("click",function(){return _this.removeFake()});this.fakeElem=document.createElement("textarea");this.fakeElem.style.position="absolute";this.fakeElem.style.left="-9999px";this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px";this.fakeElem.setAttribute("readonly","");this.fakeElem.value=this.text;document.body.appendChild(this.fakeElem);this.selectedText=_select2["default"](this.fakeElem);this.copyText()};ClipboardAction.prototype.removeFake=function removeFake(){if(this.fakeHandler){document.body.removeEventListener("click");this.fakeHandler=null}if(this.fakeElem){document.body.removeChild(this.fakeElem);this.fakeElem=null}};ClipboardAction.prototype.selectTarget=function selectTarget(){this.selectedText=_select2["default"](this.target);this.copyText()};ClipboardAction.prototype.copyText=function copyText(){var succeeded=undefined;try{succeeded=document.execCommand(this.action)}catch(err){succeeded=false}this.handleResult(succeeded)};ClipboardAction.prototype.handleResult=function handleResult(succeeded){if(succeeded){this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}else{this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}};ClipboardAction.prototype.clearSelection=function clearSelection(){if(this.target){this.target.blur()}window.getSelection().removeAllRanges()};ClipboardAction.prototype.destroy=function destroy(){this.removeFake()};_createClass(ClipboardAction,[{key:"action",set:function set(){var action=arguments.length<=0||arguments[0]===undefined?"copy":arguments[0];this._action=action;if(this._action!=="copy"&&this._action!=="cut"){throw new Error('Invalid "action" value, use either "copy" or "cut"')}},get:function get(){return this._action}},{key:"target",set:function set(target){if(target!==undefined){if(target&&typeof target==="object"&&target.nodeType===1){this._target=target}else{throw new Error('Invalid "target" value, use a valid Element')}}},get:function get(){return this._target}}]);return ClipboardAction}();exports["default"]=ClipboardAction;module.exports=exports["default"]},1750:function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _clipboardAction=__webpack_require__(1749);var _clipboardAction2=_interopRequireDefault(_clipboardAction);var _tinyEmitter=__webpack_require__(1792);var _tinyEmitter2=_interopRequireDefault(_tinyEmitter);var _goodListener=__webpack_require__(1757);var _goodListener2=_interopRequireDefault(_goodListener);var Clipboard=function(_Emitter){_inherits(Clipboard,_Emitter);function Clipboard(trigger,options){_classCallCheck(this,Clipboard);_Emitter.call(this);this.resolveOptions(options);this.listenClick(trigger)}Clipboard.prototype.resolveOptions=function resolveOptions(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this.action=typeof options.action==="function"?options.action:this.defaultAction;this.target=typeof options.target==="function"?options.target:this.defaultTarget;this.text=typeof options.text==="function"?options.text:this.defaultText};Clipboard.prototype.listenClick=function listenClick(trigger){var _this=this;this.listener=_goodListener2["default"](trigger,"click",function(e){return _this.onClick(e)})};Clipboard.prototype.onClick=function onClick(e){if(this.clipboardAction){this.clipboardAction=null}this.clipboardAction=new _clipboardAction2["default"]({action:this.action(e.target),target:this.target(e.target),text:this.text(e.target),trigger:e.target,emitter:this})};Clipboard.prototype.defaultAction=function defaultAction(trigger){return getAttributeValue("action",trigger)};Clipboard.prototype.defaultTarget=function defaultTarget(trigger){var selector=getAttributeValue("target",trigger);if(selector){return document.querySelector(selector)}};Clipboard.prototype.defaultText=function defaultText(trigger){return getAttributeValue("text",trigger)};Clipboard.prototype.destroy=function destroy(){this.listener.destroy();if(this.clipboardAction){this.clipboardAction.destroy();this.clipboardAction=null}};return Clipboard}(_tinyEmitter2["default"]);function getAttributeValue(suffix,element){var attribute="data-clipboard-"+suffix;if(!element.hasAttribute(attribute)){return}return element.getAttribute(attribute)}exports["default"]=Clipboard;module.exports=exports["default"]},1751:function(module,exports,__webpack_require__){var matches=__webpack_require__(1762);module.exports=function(element,selector,checkYoSelf){var parent=checkYoSelf?element:element.parentNode;while(parent&&parent!==document){if(matches(parent,selector))return parent;parent=parent.parentNode}}},1752:function(module,exports,__webpack_require__){var closest=__webpack_require__(1751);function delegate(element,selector,type,callback,useCapture){var listenerFn=listener.apply(this,arguments);element.addEventListener(type,listenerFn,useCapture);return{destroy:function(){element.removeEventListener(type,listenerFn,useCapture)}}}function listener(element,selector,type,callback){return function(e){e.delegateTarget=closest(e.target,selector,true);if(e.delegateTarget){callback.call(element,e)}}}module.exports=delegate},1756:function(module,exports){exports.node=function(value){return value!==undefined&&value instanceof HTMLElement&&value.nodeType===1};exports.nodeList=function(value){var type=Object.prototype.toString.call(value);return value!==undefined&&(type==="[object NodeList]"||type==="[object HTMLCollection]")&&"length"in value&&(value.length===0||exports.node(value[0]))};exports.string=function(value){return typeof value==="string"||value instanceof String};exports.fn=function(value){var type=Object.prototype.toString.call(value);return type==="[object Function]"}},1757:function(module,exports,__webpack_require__){var is=__webpack_require__(1756);var delegate=__webpack_require__(1752);function listen(target,type,callback){if(!target&&!type&&!callback){throw new Error("Missing required arguments")}if(!is.string(type)){throw new TypeError("Second argument must be a String")}if(!is.fn(callback)){throw new TypeError("Third argument must be a Function")}if(is.node(target)){return listenNode(target,type,callback)}else if(is.nodeList(target)){return listenNodeList(target,type,callback)}else if(is.string(target)){return listenSelector(target,type,callback)}else{throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}}function listenNode(node,type,callback){node.addEventListener(type,callback);return{destroy:function(){node.removeEventListener(type,callback)}}}function listenNodeList(nodeList,type,callback){Array.prototype.forEach.call(nodeList,function(node){node.addEventListener(type,callback)});return{destroy:function(){Array.prototype.forEach.call(nodeList,function(node){node.removeEventListener(type,callback)})}}}function listenSelector(selector,type,callback){return delegate(document.body,selector,type,callback)}module.exports=listen},1759:function(module,exports,__webpack_require__){var baseSlice=__webpack_require__(196);function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}module.exports=baseWhile},1761:function(module,exports,__webpack_require__){var baseRandom=__webpack_require__(1509),isArrayLike=__webpack_require__(97),values=__webpack_require__(188);function sample(collection){var array=isArrayLike(collection)?collection:values(collection),length=array.length;return length>0?array[baseRandom(0,length-1)]:undefined}module.exports=sample},1762:function(module,exports){var proto=Element.prototype;var vendor=proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match;function match(el,selector){if(vendor)return vendor.call(el,selector);var nodes=el.parentNode.querySelectorAll(selector);for(var i=0;i<nodes.length;++i){if(nodes[i]==el)return true}return false}},1791:function(module,exports){function select(element){var selectedText;if(element.nodeName==="INPUT"||element.nodeName==="TEXTAREA"){element.focus();element.setSelectionRange(0,element.value.length);selectedText=element.value}else{if(element.hasAttribute("contenteditable")){element.focus()}var selection=window.getSelection();var range=document.createRange();range.selectNodeContents(element);selection.removeAllRanges();selection.addRange(range);selectedText=selection.toString()}return selectedText}module.exports=select},1792:function(module,exports){function E(){}E.prototype={on:function(name,callback,ctx){var e=this.e||(this.e={});(e[name]||(e[name]=[])).push({fn:callback,ctx:ctx});return this},once:function(name,callback,ctx){var self=this;function listener(){self.off(name,listener);callback.apply(ctx,arguments)}listener._=callback;return this.on(name,listener,ctx)},emit:function(name){var data=[].slice.call(arguments,1);var evtArr=((this.e||(this.e={}))[name]||[]).slice();var i=0;var len=evtArr.length;for(i;i<len;i++){evtArr[i].fn.apply(evtArr[i].ctx,data)}return this},off:function(name,callback){var e=this.e||(this.e={});var evts=e[name];var liveEvents=[];if(evts&&callback){for(var i=0,len=evts.length;i<len;i++){if(evts[i].fn!==callback&&evts[i].fn._!==callback)liveEvents.push(evts[i])}}liveEvents.length?e[name]=liveEvents:delete e[name];return this}};module.exports=E},1801:function(module,exports,__webpack_require__){"use strict";var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _keys=__webpack_require__(44);var _keys2=_interopRequireDefault(_keys);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var some=__webpack_require__(82),mapValues=__webpack_require__(84),includes=__webpack_require__(34),isEmpty=__webpack_require__(81),flatten=__webpack_require__(355),compact=__webpack_require__(161),values=__webpack_require__(188),property=__webpack_require__(153),i18n=__webpack_require__(13),emailValidator=__webpack_require__(1548);function filter(_ref){var users=_ref.users;var fields=_ref.fields;return users.filter(function(user,index){var isFirst=index===0,hasInput=some((0,_keys2.default)(fields),function(name){return user[name].value});return isFirst||hasInput})}function validate(_ref2){var users=_ref2.users;var fields=_ref2.fields;var domainSuffix=_ref2.domainSuffix;var errors;users=filter({users:users,fields:fields});users=users.map(function(user){return mapValues(user,function(field,key){var error=null;if(isEmpty(field.value)){error=i18n.translate("This field is required.")}else if(includes(["firstName","lastName"],key)){if(field.value.length>60){error=i18n.translate("This field can't be longer than 60 characters.")}}else if("email"===key){if(/[^[0-9a-z_'.-]/i.test(field.value)){error=i18n.translate("Only number, letters, dashes, underscores, apostrophes and periods are allowed.")}else if(!emailValidator.validate(field.value+"@"+domainSuffix)){error=i18n.translate("Please provide a valid email address.")}}return(0,_assign2.default)({},field,{error:error})})});errors=compact(flatten(users.map(function(user){return values(user).map(property("error"))})));return{errors:errors,users:users}}module.exports={validate:validate,filter:filter}},1821:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var CartItems=__webpack_require__(1961),CartCoupon=__webpack_require__(1958),CartTotal=__webpack_require__(1962);var CartBody=React.createClass({displayName:"CartBody",propTypes:{collapse:React.PropTypes.bool},getDefaultProps:function getDefaultProps(){return{collapse:false,showCoupon:false}},render:function render(){if(!this.props.cart.hasLoadedFromServer){return React.createElement("div",{className:"cart-body"},this.translate("Loading…",{context:"Upgrades: Loading cart"}))}return React.createElement("div",{className:"cart-body"},React.createElement(CartItems,{collapse:this.props.collapse,cart:this.props.cart,selectedSite:this.props.selectedSite}),React.createElement(CartTotal,{cart:this.props.cart}),this.optionalCoupon())},optionalCoupon:function optionalCoupon(){if(!this.props.showCoupon){return}return React.createElement(CartCoupon,{cart:this.props.cart})}});module.exports=CartBody},1822:function(module,exports,__webpack_require__){"use strict";var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var React=__webpack_require__(1),isEmpty=__webpack_require__(81);var notices=__webpack_require__(71),getNewMessages=__webpack_require__(184).getNewMessages,CartStore=__webpack_require__(663);module.exports={componentDidMount:function componentDidMount(){CartStore.on("change",this.displayCartMessages)},componentWillUnmount:function componentWillUnmount(){CartStore.off("change",this.displayCartMessages)},getChargebackErrorMessage:function getChargebackErrorMessage(){return this.translate("{{strong}}Warning:{{/strong}} One or more transactions linked to this site were refunded due to a contested charge. This may have happened because of a chargeback by the credit card holder or a PayPal investigation. Each contested charge carries a fine. To resolve the issue and re-enable posting, please {{a}}pay for the chargeback fine{{/a}}.",{components:{strong:React.createElement("strong",null),a:React.createElement("a",{href:"/checkout/"+this.props.selectedSite.slug})}})},getBlockedPurchaseErrorMessage:function getBlockedPurchaseErrorMessage(){return this.translate("Purchases are currently disabled. Please {{a}}contact us{{/a}} to re-enable purchases.",{components:{a:React.createElement("a",{href:"https://wordpress.com/error-report/?url=payment@"+this.props.selectedSite.slug,target:"_blank"})}})},getPrettyErrorMessages:function getPrettyErrorMessages(messages){if(!messages){return[]}return messages.map(function(error){if(error.code==="chargeback"){return(0,_assign2.default)(error,{message:this.getChargebackErrorMessage()})}else if(error.code==="blocked"){return(0,_assign2.default)(error,{message:this.getBlockedPurchaseErrorMessage()})}else{return error}},this)},displayCartMessages:function displayCartMessages(){var newCart=this.props.cart,previousCart=this.state?this.state.previousCart:null,messages=getNewMessages(previousCart,newCart);messages.errors=this.getPrettyErrorMessages(messages.errors);this.setState({previousCart:newCart});if(!isEmpty(messages.errors)){notices.error(messages.errors.map(function(error){return React.createElement("p",{key:error.code},error.message)},this))}else if(!isEmpty(messages.success)){notices.success(messages.success.map(function(success){return React.createElement("p",{key:success.code},success.message)},this))}}}},1823:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});
var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _cartAd=__webpack_require__(1667);var _cartAd2=_interopRequireDefault(_cartAd);var _cartValues=__webpack_require__(184);var _productsValues=__webpack_require__(80);var _actions=__webpack_require__(646);var upgradesActions=_interopRequireWildcard(_actions);var _constants=__webpack_require__(187);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CartPlanAd=_react2.default.createClass({displayName:"CartPlanAd",addToCartAndRedirect:function addToCartAndRedirect(event){event.preventDefault();upgradesActions.addItem(_cartValues.cartItems.premiumPlan(_constants.PLAN_PREMIUM,{isFreeTrial:false}));(0,_page2.default)("/checkout/"+this.props.selectedSite.slug)},shouldDisplayAd:function shouldDisplayAd(){var _props=this.props;var cart=_props.cart;var selectedSite=_props.selectedSite;return cart.hasLoadedFromServer&&!_cartValues.cartItems.hasDomainCredit(cart)&&_cartValues.cartItems.getDomainRegistrations(cart).length===1&&selectedSite.plan&&!(0,_productsValues.isPlan)(selectedSite.plan)},render:function render(){if(!this.shouldDisplayAd()){return null}return _react2.default.createElement(_cartAd2.default,null,this.translate("Get this domain for free when you upgrade to {{strong}}WordPress.com Premium{{/strong}}!",{components:{strong:_react2.default.createElement("strong",null)}})," ",_react2.default.createElement("a",{href:"",onClick:this.addToCartAndRedirect},this.translate("Upgrade Now")))}});exports.default=CartPlanAd;module.exports=exports["default"]},1824:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var cartValues=__webpack_require__(184),cartItems=cartValues.cartItems,hasFreeTrial=cartItems.hasFreeTrial,isPaidForFullyInCredits=cartValues.isPaidForFullyInCredits,SubscriptionText=__webpack_require__(2186),transactionStepTypes=__webpack_require__(696);var PayButton=React.createClass({displayName:"PayButton",buttonState:function buttonState(){var state;switch(this.props.transactionStep.name){case transactionStepTypes.BEFORE_SUBMIT:state=this.beforeSubmit();break;case transactionStepTypes.INPUT_VALIDATION:if(this.props.transactionStep.error){state=this.beforeSubmit()}else{state=this.sending()}break;case transactionStepTypes.SUBMITTING_PAYMENT_KEY_REQUEST:case transactionStepTypes.RECEIVED_PAYMENT_KEY_RESPONSE:state=this.sending();break;case transactionStepTypes.SUBMITTING_WPCOM_REQUEST:state=this.completing();break;case transactionStepTypes.RECEIVED_WPCOM_RESPONSE:if(this.props.transactionStep.error||!this.props.transactionStep.data.success){state=this.beforeSubmit()}else{state=this.completed()}break;default:throw new Error("Unknown transaction step: "+this.props.transactionStep.name)}return state},beforeSubmitText:function beforeSubmitText(){var cart=this.props.cart;if(this.props.beforeSubmitText){return this.props.beforeSubmitText}if(cartItems.hasOnlyFreeTrial(cart)){return this.translate("Start %(days)s Day Free Trial",{args:{days:"14"},context:"Pay button for free trials on /checkout"})}if(cart.total_cost_display){if(isPaidForFullyInCredits(cart)){if(cartItems.hasRenewalItem(this.props.cart)){return this.translate("Purchase %(price)s subscription with Credits",{args:{price:cart.total_cost_display},context:"Renew button on /checkout"})}return this.translate("Pay %(price)s with Credits",{args:{price:cart.total_cost_display},context:"Pay button on /checkout"})}if(cartItems.hasRenewalItem(this.props.cart)){return this.translate("Renew subscription - %(price)s",{args:{price:cart.total_cost_display},context:"Renew button on /checkout"})}return this.translate("Pay %(price)s",{args:{price:cart.total_cost_display},context:"Pay button on /checkout"})}return this.translate("Pay now",{context:"Pay button on /checkout"})},beforeSubmit:function beforeSubmit(){return{disabled:false,text:this.beforeSubmitText()}},sending:function sending(){return{disabled:true,text:this.translate("Sending your purchase",{context:"Loading state on /checkout"})}},completing:function completing(){var text;if(hasFreeTrial(this.props.cart)){text=this.translate("Starting your free trial…",{context:"Loading state on /checkout"})}else{text=this.translate("Completing your purchase",{context:"Loading state on /checkout"})}return{disabled:true,text:text}},completed:function completed(){return{disabled:true,text:this.translate("Purchase complete",{context:"Loading state on /checkout"})}},render:function render(){var buttonState=this.buttonState();return React.createElement("span",{className:"pay-button"},React.createElement("button",{type:"submit",className:"button is-primary button-pay pay-button__button",disabled:buttonState.disabled},buttonState.text),React.createElement(SubscriptionText,{cart:this.props.cart}))}});module.exports=PayButton},1825:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _primaryFlag=__webpack_require__(2189);var _primaryFlag2=_interopRequireDefault(_primaryFlag);var _primaryDomainButton=__webpack_require__(2817);var _primaryDomainButton2=_interopRequireDefault(_primaryDomainButton);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Header=_react2.default.createClass({displayName:"Header",propTypes:{domain:_react2.default.PropTypes.object.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired,settingPrimaryDomain:_react2.default.PropTypes.bool.isRequired},render:function render(){var domain=this.props.domain;if(!domain){return null}return _react2.default.createElement(_sectionHeader2.default,{label:domain.name},_react2.default.createElement(_primaryFlag2.default,{domain:domain}),_react2.default.createElement(_primaryDomainButton2.default,{domain:domain,selectedSite:this.props.selectedSite,settingPrimaryDomain:this.props.settingPrimaryDomain}))}});exports.default=Header;module.exports=exports["default"]},1826:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var Property=React.createClass({displayName:"Property",render:function render(){return React.createElement("div",{className:"domain-details-card__property"},React.createElement("strong",null,this.props.label,":"),React.createElement("span",null,this.props.children))}});module.exports=Property},1856:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),classNames=__webpack_require__(11),page=__webpack_require__(40),times=__webpack_require__(653),includes=__webpack_require__(34),Notice=__webpack_require__(79);var DomainRegistrationSuggestion=__webpack_require__(1607);var DomainMappingSuggestion=__webpack_require__(1695);var DomainSuggestion=__webpack_require__(1563);var cartItems=__webpack_require__(184).cartItems;var upgradesActions=__webpack_require__(646);var _require=__webpack_require__(658);var isNextDomainFree=_require.isNextDomainFree;var DomainSearchResults=React.createClass({displayName:"DomainSearchResults",propTypes:{domainsWithPlansOnly:React.PropTypes.bool.isRequired,lastDomainError:React.PropTypes.object,lastDomainSearched:React.PropTypes.string,cart:React.PropTypes.object,products:React.PropTypes.object.isRequired,selectedSite:React.PropTypes.object,availableDomain:React.PropTypes.object,suggestions:React.PropTypes.array,placeholderQuantity:React.PropTypes.number.isRequired,buttonLabel:React.PropTypes.string,mappingSuggestionLabel:React.PropTypes.string,offerMappingOption:React.PropTypes.bool,onClickResult:React.PropTypes.func.isRequired,onAddMapping:React.PropTypes.func,onClickMapping:React.PropTypes.func},isDomainUnavailable:function isDomainUnavailable(){return this.props.lastDomainError&&includes(["not_available","not_available_but_mappable"],this.props.lastDomainError.code)},domainAvailability:function domainAvailability(){var availableDomain=this.props.availableDomain,availabilityElementClasses=classNames({"domain-search-results__domain-is-available":availableDomain,"domain-search-results__domain-not-available":!availableDomain}),lastDomainSearched=this.props.lastDomainSearched,availabilityElement,domainSuggestionElement,mappingOffer;if(availableDomain){availabilityElement=React.createElement(Notice,{className:"domain-search-results__domain-availability-copy",status:"is-success",showDismiss:false},this.translate("%(domain)s is available!",{args:{domain:lastDomainSearched}}));domainSuggestionElement=React.createElement(DomainRegistrationSuggestion,{suggestion:availableDomain,key:availableDomain.domain_name,domainsWithPlansOnly:this.props.domainsWithPlansOnly,buttonContent:this.props.buttonContent,selectedSite:this.props.selectedSite,cart:this.props.cart,onButtonClick:this.props.onClickResult.bind(null,availableDomain)})}else if(this.props.suggestions&&this.props.suggestions.length!==0&&this.isDomainUnavailable()){if(this.props.products.domain_map&&this.props.lastDomainError.code==="not_available_but_mappable"){var components={a:React.createElement("a",{href:"#",onClick:this.addMappingAndRedirect}),small:React.createElement("small",null)};if(this.props.domainsWithPlansOnly){mappingOffer=this.translate("{{small}}If you purchased %(domain)s elsewhere, you can {{a}}map it{{/a}}"+" with WordPress.com Premium.{{/small}}",{args:{domain:lastDomainSearched},components:components})}else{if(isNextDomainFree(this.props.cart)){mappingOffer=this.translate("{{small}}If you purchased %(domain)s elsewhere, you can {{a}}map it{{/a}} for free.{{/small}}",{args:{domain:lastDomainSearched},components:components})}else{mappingOffer=this.translate("{{small}}If you purchased %(domain)s elsewhere, you can {{a}}map it{{/a}} for %(cost)s.{{/small}}",{args:{domain:lastDomainSearched,cost:this.props.products.domain_map.cost_display},components:components})}}}var domainUnavailableMessage=this.translate("%(domain)s is taken.",{args:{domain:lastDomainSearched}});if(this.props.offerMappingOption){availabilityElement=React.createElement(Notice,{className:"domain-search-results__domain-availability-copy",status:"is-warning",showDismiss:false},domainUnavailableMessage," ",mappingOffer)}}return React.createElement("div",{className:"domain-search-results__domain-availability"},React.createElement("div",{className:availabilityElementClasses},availabilityElement,domainSuggestionElement))},addMappingAndRedirect:function addMappingAndRedirect(event){event.preventDefault();if(this.props.onAddMapping){return this.props.onAddMapping(this.props.lastDomainSearched)}upgradesActions.addItem(cartItems.domainMapping({domain:this.props.lastDomainSearched}));page("/checkout/"+this.props.selectedSite.slug)},onClickResult:function onClickResult(suggestion){this.props.onClickResult(suggestion)},placeholders:function placeholders(){return times(this.props.placeholderQuantity,function(n){return React.createElement(DomainSuggestion.Placeholder,{key:"suggestion-"+n})})},suggestions:function suggestions(){var suggestionElements,mappingOffer;if(this.props.suggestions.length){suggestionElements=this.props.suggestions.map(function(suggestion){return React.createElement(DomainRegistrationSuggestion,{suggestion:suggestion,key:suggestion.domain_name,cart:this.props.cart,selectedSite:this.props.selectedSite,domainsWithPlansOnly:this.props.domainsWithPlansOnly,onButtonClick:this.props.onClickResult.bind(null,suggestion)})},this);if(this.props.offerMappingOption){mappingOffer=React.createElement(DomainMappingSuggestion,{onButtonClick:this.props.onClickMapping,products:this.props.products,selectedSite:this.props.selectedSite,domainsWithPlansOnly:this.props.domainsWithPlansOnly,cart:this.props.cart})}}else{suggestionElements=this.placeholders()}return React.createElement("div",{className:"domain-search-results__domain-suggestions"},suggestionElements,mappingOffer)},render:function render(){return React.createElement("div",{className:"domain-search-results"},this.domainAvailability(),this.suggestions())}});module.exports=DomainSearchResults},1857:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _endsWith=__webpack_require__(354);var _endsWith2=_interopRequireDefault(_endsWith);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DomainSuggestionFlag=_react2.default.createClass({displayName:"DomainSuggestionFlag",propTypes:{domain:_react2.default.PropTypes.string.isRequired},render:function render(){var _this=this;var newTLDs=["wales"];if(newTLDs.some(function(tld){return(0,_endsWith2.default)(_this.props.domain,tld)})){return _react2.default.createElement(_notice2.default,{isCompact:true,status:"is-success"},this.translate("New",{context:"Domain suggestion flag"}))}return null}});exports.default=DomainSuggestionFlag;module.exports=exports["default"]},1858:function(module,exports,__webpack_require__){"use strict";var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_react2.default.createClass({displayName:"ExampleDomainSuggestions",propTypes:{mapDomainUrl:_react2.default.PropTypes.string.isRequired},handleClickMappingLink:function handleClickMappingLink(){_analytics2.default.tracks.recordEvent("calypso_example_domain_suggestions_mapping_link_click")},render:function render(){return _react2.default.createElement("div",{className:"example-domain-suggestions"},_react2.default.createElement("p",{className:"example-domain-suggestions__explanation"},this.translate("A domain name is what people type into their browser to visit your site.")),_react2.default.createElement("p",{className:"example-domain-suggestions__mapping-information"},_react2.default.createElement("a",{onClick:this.handleClickMappingLink,href:this.props.mapDomainUrl},this.translate("Already own a domain?"))),_react2.default.createElement("div",{className:"example-domain-suggestions__browser"},_react2.default.createElement("svg",{width:"295",height:"102",viewBox:"0 0 295 102",xmlns:"http://www.w3.org/2000/svg"},_react2.default.createElement("title",null,"Example Browser"),_react2.default.createElement("g",{fill:"none","fill-rule":"evenodd"},_react2.default.createElement("path",{fill:"#E9EFF3",d:"M0 49h295v53H0z"}),_react2.default.createElement("path",{d:"M295 50V0H8.005C3.585 0 0 3.576 0 8.006V50h295z",fill:"#C8D7E1"}),_react2.default.createElement("rect",{fill:"#E9EFF3",opacity:".8",x:"10",y:"10",width:"30",height:"30",rx:"4"}),_react2.default.createElement("rect",{fill:"#E9EFF3",opacity:".8",x:"50",y:"10",width:"30",height:"30",rx:"4"}),_react2.default.createElement("path",{d:"M295 10H94c-2.21 0-4 1.79-4 4v22c0 2.213 1.79 4 4 4h201V10z",fill:"#F3F6F8"}),_react2.default.createElement("path",{d:"M102.26 30h1.26v-4.673c0-1.333.776-2.226 2.19-2.226 1.193 0 1.823.696 1.823 2.095V30h1.26v-5.112c0-1.853-1.055-2.923-2.725-2.923-1.208 0-2.036.513-2.43 1.385h-.118v-4.38h-1.26V30zm9.36-9.94v2.044h-1.274v1.055h1.274v4.79c0 1.508.652 2.11 2.278 2.11.25 0 .49-.03.74-.075v-1.062c-.235.022-.36.03-.586.03-.82 0-1.172-.396-1.172-1.326V23.16h1.758v-1.056h-1.758V20.06h-1.26zm5.45 0v2.044h-1.275v1.055h1.274v4.79c0 1.508.65 2.11 2.277 2.11.25 0 .49-.03.74-.075v-1.062c-.234.022-.36.03-.586.03-.82 0-1.17-.396-1.17-1.326V23.16h1.757v-1.056h-1.758V20.06h-1.26zm8.766 1.905c-1.076 0-2.02.55-2.526 1.458h-.118v-1.32h-1.2v10.534h1.26v-3.824h.116c.432.835 1.34 1.326 2.468 1.326 2.007 0 3.318-1.62 3.318-4.088 0-2.483-1.303-4.087-3.318-4.087zm-.3 7.04c-1.42 0-2.322-1.144-2.322-2.953 0-1.816.9-2.95 2.33-2.95 1.442 0 2.307 1.105 2.307 2.95 0 1.846-.864 2.952-2.314 2.952zm6.636 1.068c.527 0 .952-.432.952-.952 0-.526-.425-.95-.952-.95-.52 0-.952.424-.952.95 0 .52.432.953.952.953zm0-5.632c.527 0 .952-.43.952-.95 0-.53-.425-.953-.952-.953-.52 0-.952.424-.952.952 0 .52.432.95.952.95zm3.765 7.94l3.237-12.95h-1.113l-3.222 12.95h1.1zm5.214 0l3.24-12.95h-1.115l-3.222 12.95h1.098z",fill:"#87A6BC"}),_react2.default.createElement("path",{d:"M150.336 23.08c1.252 0 2.087.92 2.117 2.32h-4.35c.094-1.4.973-2.32 2.233-2.32zm2.08 4.877c-.33.695-1.018 1.07-2.036 1.07-1.34 0-2.212-.99-2.278-2.55v-.06h5.676v-.482c0-2.454-1.296-3.97-3.427-3.97-2.167 0-3.56 1.612-3.56 4.095 0 2.497 1.37 4.08 3.56 4.08 1.73 0 2.945-.828 3.326-2.183h-1.26zm6.138-.938L160.42 30h1.496l-2.718-4 2.68-3.896h-1.427l-1.852 2.938h-.118l-1.875-2.938h-1.5l2.73 3.948L155.134 30h1.43l1.874-2.98h.117zm7.514 2.013c-.915 0-1.596-.47-1.596-1.274 0-.792.527-1.21 1.728-1.29l2.124-.14v.726c0 1.128-.96 1.977-2.256 1.977zm-.234 1.106c1.055 0 1.92-.462 2.432-1.305h.117V30h1.2v-5.405c0-1.64-1.076-2.63-3.002-2.63-1.684 0-2.93.835-3.097 2.102h1.274c.176-.622.835-.98 1.78-.98 1.18 0 1.787.534 1.787 1.508v.718l-2.278.14c-1.838.11-2.878.922-2.878 2.335 0 1.443 1.135 2.35 2.666 2.35zm6.08-.14h1.26v-4.893c0-1.113.797-2.006 1.83-2.006.996 0 1.648.6 1.648 1.54V30h1.26v-5.076c0-1.003.732-1.823 1.83-1.823 1.114 0 1.663.572 1.663 1.736V30h1.26v-5.457c0-1.655-.9-2.578-2.512-2.578-1.09 0-1.992.55-2.417 1.385h-.117c-.368-.82-1.115-1.385-2.184-1.385-1.055 0-1.846.506-2.205 1.385h-.116v-1.246h-1.2V30zm16.896-8.035c-1.077 0-2.02.55-2.527 1.458h-.117v-1.32h-1.2v10.534h1.26v-3.824h.116c.432.835 1.34 1.326 2.468 1.326 2.007 0 3.318-1.62 3.318-4.088 0-2.483-1.304-4.087-3.318-4.087zm-.3 7.04c-1.42 0-2.322-1.144-2.322-2.953 0-1.816.9-2.95 2.33-2.95 1.442 0 2.306 1.105 2.306 2.95 0 1.846-.864 2.952-2.314 2.952zm5.67.995h1.258V18.97h-1.26V30zm6.854-6.92c1.253 0 2.088.92 2.117 2.32h-4.35c.096-1.4.974-2.32 2.234-2.32zm2.08 4.877c-.33.695-1.018 1.07-2.036 1.07-1.34 0-2.212-.99-2.278-2.55v-.06h5.677v-.482c0-2.454-1.297-3.97-3.428-3.97-2.17 0-3.56 1.612-3.56 4.095 0 2.497 1.37 4.08 3.56 4.08 1.727 0 2.943-.828 3.324-2.183h-1.26zm4.38 2.116c.527 0 .952-.432.952-.952 0-.526-.425-.95-.952-.95-.52 0-.952.424-.952.95 0 .52.432.953.952.953zm9.946-5.552c-.22-1.405-1.39-2.555-3.31-2.555-2.212 0-3.618 1.597-3.618 4.058 0 2.512 1.413 4.116 3.625 4.116 1.897 0 3.076-1.07 3.303-2.52h-1.274c-.234.893-.974 1.384-2.036 1.384-1.406 0-2.315-1.157-2.315-2.98 0-1.788.894-2.923 2.315-2.923 1.135 0 1.83.638 2.036 1.42h1.274zm5.105 4.484c-1.494 0-2.336-1.084-2.336-2.952 0-1.875.84-2.95 2.335-2.95s2.337 1.075 2.337 2.95c0 1.868-.842 2.952-2.337 2.952zm0 1.135c2.25 0 3.64-1.554 3.64-4.088 0-2.54-1.39-4.087-3.64-4.087-2.248 0-3.64 1.546-3.64 4.087 0 2.534 1.392 4.087 3.64 4.087zm5.618-.14h1.26v-4.893c0-1.113.798-2.006 1.83-2.006.997 0 1.65.6 1.65 1.54V30h1.26v-5.076c0-1.003.73-1.823 1.83-1.823 1.113 0 1.662.572 1.662 1.736V30h1.26v-5.457c0-1.655-.9-2.578-2.512-2.578-1.09 0-1.992.55-2.417 1.385h-.117c-.368-.82-1.115-1.385-2.184-1.385-1.055 0-1.846.506-2.205 1.385h-.116v-1.246h-1.2V30z",fill:"#3D596D"})))))}})},1859:function(module,exports,__webpack_require__){"use strict";var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var React=__webpack_require__(1);var endsWith=__webpack_require__(354);var _require=__webpack_require__(21);var connect=_require.connect;var cartItems=__webpack_require__(184).cartItems;var Notice=__webpack_require__(79);var _require2=__webpack_require__(152);var getFixedDomainSearch=_require2.getFixedDomainSearch;var canMap=_require2.canMap;var canRegister=_require2.canRegister;var DomainRegistrationSuggestion=__webpack_require__(1607);var DomainProductPrice=__webpack_require__(1647);var analyticsMixin=__webpack_require__(649);var _require3=__webpack_require__(121);var getCurrentUser=_require3.getCurrentUser;var support=__webpack_require__(339);var MapDomainStep=React.createClass({displayName:"MapDomainStep",mixins:[analyticsMixin("mapDomain")],propTypes:{products:React.PropTypes.object.isRequired,cart:React.PropTypes.object,selectedSite:React.PropTypes.oneOfType([React.PropTypes.object,React.PropTypes.bool]),initialQuery:React.PropTypes.string,analyticsSection:React.PropTypes.string.isRequired,domainsWithPlansOnly:React.PropTypes.bool.isRequired,onRegisterDomain:React.PropTypes.func.isRequired,onMapDomain:React.PropTypes.func.isRequired},getInitialState:function getInitialState(){return{searchQuery:this.props.initialQuery}},componentWillMount:function componentWillMount(){if(this.props.initialState){this.setState((0,_assign2.default)({},this.props.initialState,this.getInitialState()))}},componentWillUnmount:function componentWillUnmount(){this.save()},notice:function notice(){if(this.state.notice){return React.createElement(Notice,{text:this.state.notice,status:"is-"+this.state.noticeSeverity,showDismiss:false})}},save:function save(){if(this.props.onSave){this.props.onSave(this.state)}},render:function render(){var suggestion={cost:this.props.products.domain_map.cost_display,product_slug:this.props.products.domain_map.product_slug},price=this.props.products.domain_map?this.props.products.domain_map.cost_display:null;return React.createElement("div",{className:"map-domain-step"},this.notice(),React.createElement("form",{className:"map-domain-step__form card",onSubmit:this.handleFormSubmit},React.createElement("div",{className:"map-domain-step__domain-description"},React.createElement("p",null,this.translate("Map this domain to use it as your site's address.",{context:"Upgrades: Description in domain registration",comment:"Explains how you could use a new domain name for your site's address."}))),React.createElement(DomainProductPrice,{rule:cartItems.getDomainPriceRule(this.props.domainsWithPlansOnly,this.props.selectedSite,this.props.cart,suggestion),price:price}),React.createElement("fieldset",null,React.createElement("input",{className:"map-domain-step__external-domain",type:"text",value:this.state.searchQuery,placeholder:this.translate("Enter a domain",{textOnly:true}),onBlur:this.save,onChange:this.setSearchQuery,onClick:this.recordInputFocus,autoFocus:true}),React.createElement("button",{className:"map-domain-step__go button is-primary",onClick:this.recordGoButtonClick},this.translate("Add",{context:"Upgrades: Label for mapping an existing domain"}))),this.domainRegistrationUpsell()))},domainRegistrationUpsell:function domainRegistrationUpsell(){var suggestion=this.state.suggestion;if(!suggestion){return}return React.createElement("div",{className:"domain-search-results__domain-availability is-mapping-suggestion"},React.createElement("div",{className:"domain-search-results__domain-availability-copy notice is-success"},this.translate("%(domain)s is available!",{args:{domain:suggestion.domain_name}})),React.createElement(DomainRegistrationSuggestion,{suggestion:suggestion,selectedSite:this.props.selectedSite,domainsWithPlansOnly:this.props.domainsWithPlansOnly,key:suggestion.domain_name,cart:this.props.cart,onButtonClick:this.registerSuggestedDomain}))},registerSuggestedDomain:function registerSuggestedDomain(event){event.preventDefault();this.recordEvent("addDomainButtonClick",this.state.suggestion.domain_name,this.props.analyticsSection);return this.props.onRegisterDomain(this.state.suggestion)},recordInputFocus:function recordInputFocus(){this.recordEvent("inputFocus",this.state.searchQuery)},recordGoButtonClick:function recordGoButtonClick(){this.recordEvent("goButtonClick",this.state.searchQuery,this.props.analyticsSection)},setSearchQuery:function setSearchQuery(event){this.setState({searchQuery:event.target.value})},handleFormSubmit:function handleFormSubmit(event){var _this=this;var domain=getFixedDomainSearch(this.state.searchQuery);event.preventDefault();this.recordEvent("formSubmit",this.state.searchQuery);this.setState({suggestion:null,notice:null});if(endsWith(domain,".blog")){return this.handleValidationErrorMessage(domain,{code:"dotblog_domain"})}canMap(domain,function(error){if(error){_this.handleValidationErrorMessage(domain,error);return}return _this.props.onMapDomain(domain)});canRegister(domain,function(error,result){if(error){return}result.domain_name=domain;_this.setState({suggestion:result})})},handleValidationErrorMessage:function handleValidationErrorMessage(domain,error){var message=void 0,severity="error";switch(error.code){case"dotblog_domain":message=this.translate(".blog domains are not available yet. {{a}}Sign up{{/a}} to get updates on the launch.",{components:{a:React.createElement("a",{target:"_blank",href:"https://dotblog.wordpress.com/\n\t\t\t\t\t\t\t\t?email="+(this.props.currentUser&&encodeURIComponent(this.props.currentUser.email)||"")+"\n\t\t\t\t\t\t\t\t&domain="+domain})}});severity="info";break;case"not_mappable":message=this.translate("Sorry but %(domain)s has not been registered yet therefore cannot be mapped.",{args:{domain:domain}});break;case"invalid_domain":message=this.translate("Sorry but %(domain)s does not appear to be a valid domain name.",{args:{domain:domain}});break;case"mapped_domain":message=this.translate("Sorry but %(domain)s is already mapped to a WordPress.com blog.",{args:{domain:domain}});break;case"restricted_domain":message=this.translate("Sorry but WordPress.com domains cannot be mapped to a WordPress.com blog.");break;case"blacklisted_domain":if(domain.toLowerCase().indexOf("wordpress")>-1){message=this.translate("Due to {{a1}}trademark policy{{/a1}}, we are not able to allow domains containing {{strong}}WordPress{{/strong}} to be registered or mapped here. Please {{a2}}contact support{{/a2}} if you have any questions.",{components:{strong:React.createElement("strong",null),a1:React.createElement("a",{target:"_blank",href:"http://wordpressfoundation.org/trademark-policy/"}),a2:React.createElement("a",{href:support.CALYPSO_CONTACT})}})}else{message=this.translate("Sorry but %(domain)s cannot be mapped to a WordPress.com blog.",{args:{domain:domain}})}break;case"forbidden_domain":message=this.translate("Sorry but you do not have the correct permissions to map %(domain)s.",{args:{domain:domain}});break;case"invalid_tld":message=this.translate("Sorry but %(domain)s does not end with a valid domain extension.",{args:{domain:domain}});break;case"empty_query":message=this.translate("Please enter a domain name or keyword.");break;default:throw new Error("Unrecognized error code: "+error.code)}if(message){this.setState({notice:message,noticeSeverity:severity})}}});module.exports=connect(function(state){return{currentUser:getCurrentUser(state)}})(MapDomainStep)},1860:function(module,exports,__webpack_require__){"use strict";var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _async=__webpack_require__(688);var _async2=_interopRequireDefault(_async);var _flatten=__webpack_require__(355);var _flatten2=_interopRequireDefault(_flatten);var _reject=__webpack_require__(149);var _reject2=_interopRequireDefault(_reject);var _find=__webpack_require__(33);var _find2=_interopRequireDefault(_find);var _uniqBy=__webpack_require__(706);var _uniqBy2=_interopRequireDefault(_uniqBy);var _times=__webpack_require__(653);var _times2=_interopRequireDefault(_times);var _compact=__webpack_require__(161);var _compact2=_interopRequireDefault(_compact);var _noop=__webpack_require__(36);var _noop2=_interopRequireDefault(_noop);var _startsWith=__webpack_require__(73);var _startsWith2=_interopRequireDefault(_startsWith);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _qs=__webpack_require__(193);var _qs2=_interopRequireDefault(_qs);var _endsWith=__webpack_require__(354);var _endsWith2=_interopRequireDefault(_endsWith);var _reactRedux=__webpack_require__(21);var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);var _domains=__webpack_require__(152);var _searchCard=__webpack_require__(1502);var _searchCard2=_interopRequireDefault(_searchCard);var _domainRegistrationSuggestion=__webpack_require__(1607);var _domainRegistrationSuggestion2=_interopRequireDefault(_domainRegistrationSuggestion);var _domainMappingSuggestion=__webpack_require__(1695);var _domainMappingSuggestion2=_interopRequireDefault(_domainMappingSuggestion);var _domainSuggestion=__webpack_require__(1563);var _domainSuggestion2=_interopRequireDefault(_domainSuggestion);var _domainSearchResults=__webpack_require__(1856);var _domainSearchResults2=_interopRequireDefault(_domainSearchResults);var _exampleDomainSuggestions=__webpack_require__(1858);var _exampleDomainSuggestions2=_interopRequireDefault(_exampleDomainSuggestions);var _analytics=__webpack_require__(649);var _analytics2=_interopRequireDefault(_analytics);var _selectors=__webpack_require__(121);var _abtest=__webpack_require__(248);var _queryDomainsSuggestions=__webpack_require__(1690);var _queryDomainsSuggestions2=_interopRequireDefault(_queryDomainsSuggestions);var _selectors2=__webpack_require__(1596);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var domains=_wp2.default.domains();var SUGGESTION_QUANTITY=10;var INITIAL_SUGGESTION_QUANTITY=2;var analytics=(0,_analytics2.default)("registerDomain"),searchVendor=(0,_abtest.abtest)("domainSuggestionVendor");var searchQueue=[],searchStackTimer=null,lastSearchTimestamp=null,searchCount=0;function getQueryObject(props){if(!props.selectedSite||!props.selectedSite.domain){return null}return{query:props.selectedSite.domain.split(".")[0],quantity:SUGGESTION_QUANTITY,vendor:searchVendor,includeSubdomain:props.includeWordPressDotCom}}function processSearchStatQueue(){var queue=searchQueue.slice();window.clearTimeout(searchStackTimer);searchStackTimer=null;searchQueue=[];outerLoop:for(var i=0;i<queue.length;i++){for(var k=i+1;k<queue.length;k++){if((0,_startsWith2.default)(queue[k].query,queue[i].query)){continue outerLoop}}reportSearchStats(queue[i])}}function reportSearchStats(_ref){var query=_ref.query;var section=_ref.section;var timestamp=_ref.timestamp;var timeDiffFromLastSearchInSeconds=0;if(lastSearchTimestamp){timeDiffFromLastSearchInSeconds=Math.floor((timestamp-lastSearchTimestamp)/1e3)}lastSearchTimestamp=timestamp;searchCount++;analytics.recordEvent("searchFormSubmit",query,section,timeDiffFromLastSearchInSeconds,searchCount,searchVendor)}function enqueueSearchStatReport(search){searchQueue.push((0,_assign2.default)({},search,{timestamp:Date.now()}));if(searchStackTimer){window.clearTimeout(searchStackTimer)}searchStackTimer=window.setTimeout(processSearchStatQueue,1e4)}var RegisterDomainStep=_react2.default.createClass({displayName:"RegisterDomainStep",mixins:[analytics],propTypes:{cart:_react2.default.PropTypes.object,onDomainsAvailabilityChange:_react2.default.PropTypes.func,products:_react2.default.PropTypes.object.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]),basePath:_react2.default.PropTypes.string.isRequired,suggestion:_react2.default.PropTypes.string,domainsWithPlansOnly:_react2.default.PropTypes.bool,isSignupStep:_react2.default.PropTypes.bool},getDefaultProps:function getDefaultProps(){return{onDomainsAvailabilityChange:_noop2.default,analyticsSection:"domains"}},getInitialState:function getInitialState(){
var suggestion=this.props.suggestion?(0,_domains.getFixedDomainSearch)(this.props.suggestion):"";return{clickedExampleSuggestion:false,lastQuery:suggestion,searchResults:null,lastDomainSearched:null,lastDomainError:null,loadingResults:Boolean(suggestion),notice:null}},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(this.props.defaultSuggestionsError===nextProps.defaultSuggestionsError||!this.props.defaultSuggestionsError&&!nextProps.defaultSuggestionsError){return}var error=nextProps.defaultSuggestionsError;if(!error){return nextProps.onDomainsAvailabilityChange(true)}if(error&&error.statusCode===503){return nextProps.onDomainsAvailabilityChange(false)}if(error&&error.error){var domainError=new Error;domainError.code=error.error;var queryObject=getQueryObject(nextProps);if(queryObject){this.showValidationErrorMessage(queryObject.query,domainError)}}},componentWillMount:function componentWillMount(){searchCount=0;lastSearchTimestamp=null;if(this.props.initialState){this.setState(this.props.initialState)}},componentDidMount:function componentDidMount(){if(this.state.lastQuery){this.onSearch(this.state.lastQuery)}this.recordEvent("searchFormView",this.props.analyticsSection)},componentDidUpdate:function componentDidUpdate(prevProps){if(this.props.selectedSite&&this.props.selectedSite.domain!==prevProps.selectedSite.domain){this.setState(this.getInitialState());this.focusSearchCard()}},componentWillUnmount:function componentWillUnmount(){processSearchStatQueue()},focusSearchCard:function focusSearchCard(){this.refs.searchCard.focus()},isLoadingSuggestions:function isLoadingSuggestions(){return!this.props.defaultSuggestions&&!this.props.defaultSuggestionsError},render:function render(){return _react2.default.createElement("div",{className:"register-domain-step"},this.searchForm(),this.notices(),this.content(),this.queryDomainsSuggestions())},queryDomainsSuggestions:function queryDomainsSuggestions(){var queryObject=getQueryObject(this.props);if(!queryObject){return null}var query=queryObject.query;var quantity=queryObject.quantity;var vendor=queryObject.vendor;var includeSubdomain=queryObject.includeSubdomain;return _react2.default.createElement(_queryDomainsSuggestions2.default,{query:query,quantity:quantity,vendor:vendor,includeSubdomain:includeSubdomain})},notices:function notices(){if(this.state.notice){return _react2.default.createElement(_notice2.default,{text:this.state.notice,status:"is-"+this.state.noticeSeverity,showDismiss:false})}},handleClickExampleSuggestion:function handleClickExampleSuggestion(){this.focusSearchCard();this.setState({clickedExampleSuggestion:true})},content:function content(){if(Array.isArray(this.state.searchResults)||this.state.loadingResults){return this.allSearchResults()}if(this.props.showExampleSuggestions){return _react2.default.createElement(_exampleDomainSuggestions2.default,{onClickExampleSuggestion:this.handleClickExampleSuggestion,mapDomainUrl:this.getMapDomainUrl(),path:this.props.path,domainsWithPlansOnly:this.props.domainsWithPlansOnly,products:this.props.products})}return this.initialSuggestions()},searchForm:function searchForm(){return _react2.default.createElement("div",{className:"register-domain-step__search"},_react2.default.createElement(_searchCard2.default,{ref:"searchCard",additionalClasses:this.state.clickedExampleSuggestion?"is-refocused":undefined,initialValue:this.state.lastQuery,onSearch:this.onSearch,onSearchChange:this.onSearchChange,onBlur:this.save,placeholder:this.translate("Enter a domain or keyword",{textOnly:true}),autoFocus:true,delaySearch:true,delayTimeout:1e3,dir:"ltr"}))},save:function save(){if(this.props.onSave){this.props.onSave(this.state)}},onSearchChange:function onSearchChange(searchQuery){this.setState({lastQuery:searchQuery,lastDomainSearched:null,loadingResults:Boolean((0,_domains.getFixedDomainSearch)(searchQuery)),notice:null,searchResults:null})},onSearch:function onSearch(searchQuery){var _this=this;var domain=(0,_domains.getFixedDomainSearch)(searchQuery);this.setState({lastQuery:searchQuery},this.save);if(!domain||!this.state.loadingResults){return}enqueueSearchStatReport({query:searchQuery,section:this.props.analyticsSection});this.setState({lastDomainSearched:domain,searchResults:[],lastDomainError:null});_async2.default.parallel([function(callback){if((0,_endsWith2.default)(domain,".blog")){var error={code:"dotblog_domain"};_this.showValidationErrorMessage(domain,error);return callback()}if(!domain.match(/.{3,}\..{2,}/)){return callback()}var timestamp=Date.now();if(_this.props.isSignupStep&&domain.match(/\.wordpress\.com$/)){return callback()}(0,_domains.canRegister)(domain,function(error,result){var timeDiff=Date.now()-timestamp;if(error){_this.showValidationErrorMessage(domain,error);_this.setState({lastDomainError:error})}else{_this.setState({notice:null});if(result){result.domain_name=domain}}var analyticsResult=error&&error.code||"available";_this.recordEvent("domainAvailabilityReceive",domain,analyticsResult,timeDiff,_this.props.analyticsSection);_this.props.onDomainsAvailabilityChange(true);callback(null,result)})},function(callback){var query={query:domain,quantity:SUGGESTION_QUANTITY,include_wordpressdotcom:_this.props.includeWordPressDotCom,vendor:(0,_abtest.abtest)("domainSuggestionVendor")},timestamp=Date.now();domains.suggestions(query).then(function(domainSuggestions){_this.props.onDomainsAvailabilityChange(true);var timeDiff=Date.now()-timestamp,analyticsResults=domainSuggestions.map(function(suggestion){return suggestion.domain_name});_this.recordEvent("searchResultsReceive",domain,analyticsResults,timeDiff,domainSuggestions.length,_this.props.analyticsSection);callback(null,domainSuggestions)}).catch(function(error){var timeDiff=Date.now()-timestamp;if(error&&error.statusCode===503){_this.props.onDomainsAvailabilityChange(false)}else if(error&&error.error){error.code=error.error;_this.showValidationErrorMessage(domain,error)}var analyticsResults=[error.code||error.error||"ERROR"+(error.statusCode||"")];_this.recordEvent("searchResultsReceive",domain,analyticsResults,timeDiff,-1,_this.props.analyticsSection);callback(error,null)})}],function(error,result){if(!_this.state.loadingResults||domain!==_this.state.lastDomainSearched||!_this.isMounted()){return}var suggestions=(0,_uniqBy2.default)((0,_flatten2.default)((0,_compact2.default)(result)),function(suggestion){return suggestion.domain_name});_this.setState({searchResults:suggestions,loadingResults:false},_this.save)})},initialSuggestions:function initialSuggestions(){var domainRegistrationSuggestions=void 0,domainMappingSuggestion=void 0,suggestions=void 0;if(this.isLoadingSuggestions()){domainRegistrationSuggestions=(0,_times2.default)(INITIAL_SUGGESTION_QUANTITY+1,function(n){return _react2.default.createElement(_domainSuggestion2.default.Placeholder,{key:"suggestion-"+n})})}else{suggestions=this.props.defaultSuggestions?this.props.defaultSuggestions.slice(0,INITIAL_SUGGESTION_QUANTITY):[];domainRegistrationSuggestions=suggestions.map(function(suggestion){return _react2.default.createElement(_domainRegistrationSuggestion2.default,{suggestion:suggestion,key:suggestion.domain_name,cart:this.props.cart,selectedSite:this.props.selectedSite,domainsWithPlansOnly:this.props.domainsWithPlansOnly,onButtonClick:this.addRemoveDomainToCart.bind(null,suggestion)})},this);domainMappingSuggestion=_react2.default.createElement(_domainMappingSuggestion2.default,{onButtonClick:this.goToMapDomainStep,selectedSite:this.props.selectedSite,domainsWithPlansOnly:this.props.domainsWithPlansOnly,cart:this.props.cart,products:this.props.products})}return _react2.default.createElement("div",{key:"initial-suggestions",className:"register-domain-step__domain-suggestions"},domainRegistrationSuggestions,domainMappingSuggestion)},allSearchResults:function allSearchResults(){var _this2=this;var lastDomainSearched=this.state.lastDomainSearched,isSearchedDomain=function isSearchedDomain(suggestion){return suggestion.domain_name===lastDomainSearched},availableDomain=(0,_find2.default)(this.state.searchResults,isSearchedDomain);var suggestions=(0,_reject2.default)(this.state.searchResults,isSearchedDomain),onAddMapping=void 0;if(this.props.onAddMapping){onAddMapping=function onAddMapping(domain){return _this2.props.onAddMapping(domain,_this2.state)}}if(suggestions.length===0&&!this.state.loadingResults){if(this.props.showExampleSuggestions){return _react2.default.createElement(_exampleDomainSuggestions2.default,{mapDomainUrl:this.getMapDomainUrl(),path:this.props.path,domainsWithPlansOnly:this.props.domainsWithPlansOnly,products:this.props.products})}suggestions=this.props.defaultSuggestions}return _react2.default.createElement(_domainSearchResults2.default,{key:"domain-search-results",availableDomain:availableDomain,domainsWithPlansOnly:this.props.domainsWithPlansOnly,lastDomainSearched:lastDomainSearched,lastDomainError:this.state.lastDomainError,onAddMapping:onAddMapping,onClickResult:this.addRemoveDomainToCart,onClickMapping:this.goToMapDomainStep,suggestions:suggestions,products:this.props.products,selectedSite:this.props.selectedSite,offerMappingOption:this.props.offerMappingOption,placeholderQuantity:SUGGESTION_QUANTITY,cart:this.props.cart})},getMapDomainUrl:function getMapDomainUrl(){var mapDomainUrl=void 0;if(this.props.mapDomainUrl){mapDomainUrl=this.props.mapDomainUrl}else{var query=_qs2.default.stringify({initialQuery:this.state.lastQuery.trim()});mapDomainUrl=this.props.basePath+"/mapping";if(this.props.selectedSite){mapDomainUrl+="/"+this.props.selectedSite.slug+"?"+query}}return mapDomainUrl},goToMapDomainStep:function goToMapDomainStep(event){event.preventDefault();this.recordEvent("mapDomainButtonClick",this.props.analyticsSection);(0,_page2.default)(this.getMapDomainUrl())},addRemoveDomainToCart:function addRemoveDomainToCart(suggestion,event){event.preventDefault();if(this.props.onAddDomain){return this.props.onAddDomain(suggestion)}},showValidationErrorMessage:function showValidationErrorMessage(domain,error){var message=void 0,severity="error";switch(error.code){case"dotblog_domain":message=this.translate(".blog domains are not available yet. {{a}}Sign up{{/a}} to get updates on the launch.",{components:{a:_react2.default.createElement("a",{target:"_blank",href:"https://dotblog.wordpress.com/\n\t\t\t\t\t\t\t\t\t?email="+(this.props.currentUser&&encodeURIComponent(this.props.currentUser.email)||"")+"\n\t\t\t\t\t\t\t\t\t&domain="+domain})}});severity="info";break;case"not_registrable":var tldIndex=domain.lastIndexOf(".");if(tldIndex!==-1){message=this.translate("To use a domain ending with {{strong}}%(tld)s{{/strong}} on your site, "+"you can register it elsewhere first and then add it here. {{a}}Learn more{{/a}}.",{args:{tld:domain.substring(tldIndex)},components:{strong:_react2.default.createElement("strong",null),a:_react2.default.createElement("a",{target:"_blank",href:_support2.default.MAP_EXISTING_DOMAIN})}});severity="info"}break;case"not_available":case"not_available_but_mappable":case"domain_registration_unavailable":message=null;break;case"mappable_but_blacklisted_domain":if(domain.toLowerCase().indexOf("wordpress")>-1){message=this.translate("Due to {{a1}}trademark policy{{/a1}}, "+"we are not able to allow domains containing {{strong}}WordPress{{/strong}} to be registered or mapped here. "+"Please {{a2}}contact support{{/a2}} if you have any questions.",{components:{strong:_react2.default.createElement("strong",null),a1:_react2.default.createElement("a",{target:"_blank",href:"http://wordpressfoundation.org/trademark-policy/"}),a2:_react2.default.createElement("a",{href:_support2.default.CALYPSO_CONTACT})}})}else{message=this.translate("Domain cannot be mapped to a WordPress.com blog because of blacklisted term.")}break;case"mappable_but_forbidden_subdomain":message=this.translate("Subdomains starting with 'www.' cannot be mapped to a WordPress.com blog");break;case"mappable_but_mapped_domain":message=this.translate("This domain is already mapped to a WordPress.com site.");break;case"mappable_but_restricted_domain":message=this.translate("You cannot map another WordPress.com subdomain - try creating a new site or one of the custom domains below.");break;case"empty_query":message=this.translate("Please enter a domain name or keyword.");break;case"empty_results":message=this.translate("We couldn't find any available domains for: %(domain)s",{args:{domain:domain}});break;case"invalid_query":message=this.translate("Sorry but %(domain)s does not appear to be a valid domain name.",{args:{domain:domain}});break;case"server_error":message=this.translate("Sorry but there was a problem processing your request. Please try again in a few minutes.");break;case"mappable_but_recently_mapped":message=this.translate("This domain cannot currently be mapped.");break;default:throw new Error("Unrecognized error code: "+error.code)}if(message){this.setState({notice:message,noticeSeverity:severity})}}});module.exports=(0,_reactRedux.connect)(function(state,props){var queryObject=getQueryObject(props);return{currentUser:(0,_selectors.getCurrentUser)(state),defaultSuggestions:(0,_selectors2.getDomainsSuggestions)(state,queryObject),defaultSuggestionsError:(0,_selectors2.getDomainsSuggestionsError)(state,queryObject)}})(RegisterDomainStep)},1870:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _sample=__webpack_require__(1761);var _sample2=_interopRequireDefault(_sample);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _gravatar=__webpack_require__(647);var _gravatar2=_interopRequireDefault(_gravatar);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var HappinessSupport=_react2.default.createClass({displayName:"HappinessSupport",propTypes:{isJetpack:_react2.default.PropTypes.bool,isPlaceholder:_react2.default.PropTypes.bool},getInitialState:function getInitialState(){return{user:(0,_sample2.default)([{display_name:"Erica",avatar_URL:"//gravatar.com/avatar/066a6509253d682f4e0d05b048b08b2c"},{display_name:"Paolo",avatar_URL:"//gravatar.com/avatar/3cb9afe63d364690c0e188fb16473277"}])}},renderContactButton:function renderContactButton(){var url=_support2.default.CALYPSO_CONTACT,target="";if(this.props.isJetpack){url=_support2.default.JETPACK_CONTACT_SUPPORT;target="_blank"}return _react2.default.createElement(_button2.default,{href:url,target:target},this.translate("Ask a question"))},renderGravatar:function renderGravatar(){return _react2.default.createElement("div",{className:"happiness-support__gravatar"},_react2.default.createElement(_gravatar2.default,{user:this.state.user,size:80}),_react2.default.createElement("em",{className:"happiness-support__gravatar-name"},this.state.user.display_name))},renderSupportButton:function renderSupportButton(){var url=_support2.default.SUPPORT_ROOT;if(this.props.isJetpack){url=_support2.default.JETPACK_SUPPORT}return _react2.default.createElement(_button2.default,{href:url,target:"_blank"},this.translate("Search our support site"))},render:function render(){var classes={"happiness-support":true,"is-placeholder":this.props.isPlaceholder};return _react2.default.createElement("div",{className:(0,_classnames2.default)(classes)},this.renderGravatar(),_react2.default.createElement("h3",{className:"happiness-support__heading"},this.translate("Enjoy priority support from our Happiness Engineers")),_react2.default.createElement("p",{className:"happiness-support__text"},this.translate("{{strong}}Need help?{{/strong}} A Happiness Engineer can answer questions about your site, your account or how to do just about anything.",{components:{strong:_react2.default.createElement("strong",null)}})),_react2.default.createElement("div",{className:"happiness-support__buttons"},this.renderContactButton(),this.renderSupportButton()))}});exports.default=HappinessSupport;module.exports=exports["default"]},1872:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _isUndefined=__webpack_require__(681);var _isUndefined2=_interopRequireDefault(_isUndefined);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _get=__webpack_require__(30);var _get2=_interopRequireDefault(_get);var _productsValues=__webpack_require__(80);var _wpcomPlanPrice=__webpack_require__(1937);var _wpcomPlanPrice2=_interopRequireDefault(_wpcomPlanPrice);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PlanPrice=_react2.default.createClass({displayName:"PlanPrice",getFormattedPrice:function getFormattedPrice(plan){var rawPrice=void 0,formattedPrice=void 0,months=void 0;if(plan){rawPrice=(0,_isUndefined2.default)(plan.rawPrice)?plan.raw_price:plan.rawPrice;formattedPrice=(0,_isUndefined2.default)(plan.formattedPrice)?plan.formatted_price:plan.formattedPrice;if(rawPrice===0){return this.translate("Free",{context:"Zero cost product price"})}months=(0,_productsValues.isJetpackMonthlyPlan)(plan)?1:12;var getCurrencySymbol=function getCurrencySymbol(price){return/(\D+)\d+/.exec(price)[1]};var currencyDigits=function currencyDigits(currencySymbol){return(0,_get2.default)({"¥":0},currencySymbol,2)};var currencySymbol=getCurrencySymbol(formattedPrice);var monthlyPrice=(rawPrice/months).toFixed(currencyDigits(currencySymbol));return""+currencySymbol+monthlyPrice}return this.translate("Loading")},getPrice:function getPrice(){var standardPrice=this.getFormattedPrice(this.props.plan),discountedPrice=this.getFormattedPrice(this.props.sitePlan);if(this.props.sitePlan&&this.props.sitePlan.rawDiscount>0){return _react2.default.createElement("span",null,_react2.default.createElement("span",{className:"plan-price__discounted"},standardPrice)," ",discountedPrice)}return _react2.default.createElement("span",null,standardPrice)},render:function render(){var periodLabel=void 0;var _props=this.props;var plan=_props.plan;var details=_props.sitePlan;var hasDiscount=details&&details.rawDiscount>0;if(this.props.isPlaceholder){return _react2.default.createElement("div",{className:"plan-price is-placeholder"})}if(!plan){periodLabel=""}else if(plan.raw_price>0){if((0,_productsValues.isJetpackMonthlyPlan)(plan)){periodLabel=this.translate("per month, billed monthly")}else{periodLabel=this.translate("per month, billed yearly")}}else{periodLabel=hasDiscount?this.translate("due today when you upgrade"):plan.bill_period_label}return _react2.default.createElement(_wpcomPlanPrice2.default,{getPrice:this.getPrice,hasDiscount:hasDiscount,periodLabel:periodLabel})}});exports.default=PlanPrice;module.exports=exports["default"]},1873:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _omit=__webpack_require__(18);var _omit2=_interopRequireDefault(_omit);var _find=__webpack_require__(33);var _find2=_interopRequireDefault(_find);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _reactRedux=__webpack_require__(21);var _popover=__webpack_require__(345);var _popover2=_interopRequireDefault(_popover);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);var _planPrice=__webpack_require__(1872);var _planPrice2=_interopRequireDefault(_planPrice);var _actions=__webpack_require__(671);var _plans=__webpack_require__(1459);var _selectors=__webpack_require__(352);var _sitesList=__webpack_require__(55);var _sitesList2=_interopRequireDefault(_sitesList);var _plansList=__webpack_require__(1895);var _plansList2=_interopRequireDefault(_plansList);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var plansList=(0,_plansList2.default)();var sitesList=(0,_sitesList2.default)();var exclusiveViewLock=null;var PremiumPopover=_react2.default.createClass({displayName:"PremiumPopover",propTypes:{className:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.string,_react2.default.PropTypes.object,_react2.default.PropTypes.array]),onClose:_react2.default.PropTypes.func,isVisible:_react2.default.PropTypes.bool,position:_react2.default.PropTypes.string.isRequired,textLabel:_react2.default.PropTypes.string},getInitialState:function getInitialState(){return{visibleByClick:false,visibleByHover:false}},componentDidMount:function componentDidMount(){this.props.fetchSitePlans(this.props.sitePlans,this.props.selectedSite);this.props.fetchPlans()},componentWillReceiveProps:function componentWillReceiveProps(nextProps){this.props.fetchSitePlans(nextProps.sitePlans,nextProps.selectedSite)},isVisible:function isVisible(){return(this.props.isVisible||this.state.visibleByClick||this.state.visibleByHover)&&(!exclusiveViewLock||exclusiveViewLock===this)},priceMessage:function priceMessage(price){return this.translate("%(cost)s {{small}}/year{{/small}}",{args:{cost:price},components:{small:_react2.default.createElement("small",null)}})},getSitePlan:function getSitePlan(){return(0,_find2.default)(this.props.sitePlans.data||[],function(plan){return plan.product_slug==="value_bundle"})},componentWillUnmount:function componentWillUnmount(){if(exclusiveViewLock===this){exclusiveViewLock=null}},handleClick:function handleClick(){exclusiveViewLock=this;this.setState({visibleByClick:true})},handleMouseEnter:function handleMouseEnter(){this.setState({visibleByHover:true})},handleMouseLeave:function handleMouseLeave(){this.setState({visibleByHover:false})},onClose:function onClose(event){if(exclusiveViewLock===this){exclusiveViewLock=null}this.setState({visibleByClick:false,visibleByHover:false});if(this.props.onClose){return this.props.onClose(event)}},render:function render(){var premiumPlan=(0,_find2.default)(this.props.plans,function(plan){return plan.product_slug==="value_bundle"});var popoverClasses=(0,_classnames2.default)(this.props.className,"premium-popover popover");var context=this.refs&&this.refs["popover-premium-reference"];return _react2.default.createElement("div",null,_react2.default.createElement("span",{onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,ref:"popover-premium-reference",onMouseLeave:this.handleMouseLeave},this.props.textLabel),_react2.default.createElement(_popover2.default,(0,_extends3.default)({id:"popover__premium"},(0,_omit2.default)(this.props,["children","className","textLabel"]),{onClose:this.onClose,context:context,isVisible:this.isVisible(),className:popoverClasses}),_react2.default.createElement("div",{className:"premium-popover__content"},_react2.default.createElement("div",{className:"premium-popover__header"},_react2.default.createElement("h3",null,this.translate("Premium",{context:"Premium Plan"})),premiumPlan?_react2.default.createElement(_planPrice2.default,{plan:premiumPlan,sitePlan:this.getSitePlan()}):_react2.default.createElement("h5",null,"Loading")),_react2.default.createElement("ul",{className:"premium-popover__items"},[this.translate("A custom domain"),this.translate("Advanced design customization"),this.translate("13GB of space for file and media"),this.translate("Video Uploads"),this.translate("No Ads"),this.translate("Email and live chat support")].map(function(message,i){return _react2.default.createElement("li",{key:i},_react2.default.createElement(_gridicon2.default,{icon:"checkmark",size:18})," ",message)})))))}});exports.default=(0,_reactRedux.connect)(function(state){return{sitePlans:(0,_selectors.getPlansBySite)(state,sitesList.getSelectedSite()),plans:plansList.get()}},function(dispatch){return{fetchSitePlans:function fetchSitePlans(sitePlans,site){if((0,_plans.shouldFetchSitePlans)(sitePlans,site)){dispatch((0,_actions.fetchSitePlans)(site.ID))}},fetchPlans:function fetchPlans(){plansList.fetch()}}})(PremiumPopover);module.exports=exports["default"]},1876:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _defineProperty2=__webpack_require__(7);var _defineProperty3=_interopRequireDefault(_defineProperty2);var _assign=__webpack_require__(29);var _assign2=_interopRequireDefault(_assign);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _countrySelect=__webpack_require__(1668);var _countrySelect2=_interopRequireDefault(_countrySelect);var _creditCardNumberInput=__webpack_require__(1877);var _creditCardNumberInput2=_interopRequireDefault(_creditCardNumberInput);var _input=__webpack_require__(1558);var _input2=_interopRequireDefault(_input);var _creditCardDetails=__webpack_require__(695);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CreditCardForm=_react2.default.createClass({displayName:"CreditCardForm",propTypes:{card:_react2.default.PropTypes.object.isRequired,countriesList:_react2.default.PropTypes.object.isRequired,eventFormName:_react2.default.PropTypes.string.isRequired,isFieldInvalid:_react2.default.PropTypes.func.isRequired,onFieldChange:_react2.default.PropTypes.func.isRequired},field:function field(fieldName,componentClass,props){return _react2.default.createElement(componentClass,(0,_assign2.default)({},props,{additionalClasses:"credit-card-form__field",eventFormName:this.props.eventFormName,isError:this.props.isFieldInvalid(fieldName),name:fieldName,onBlur:this.handleFieldChange,onChange:this.handleFieldChange,value:this.getFieldValue(fieldName)}))},getFieldValue:function getFieldValue(fieldName){return this.props.card[fieldName]},handleFieldChange:function handleFieldChange(event){var _event$target=event.target;var fieldName=_event$target.name;var nextValue=_event$target.value;var previousValue=this.getFieldValue(fieldName);var rawDetails=(0,_defineProperty3.default)({},fieldName,(0,_creditCardDetails.unmaskField)(fieldName,previousValue,nextValue));var maskedDetails=(0,_defineProperty3.default)({},fieldName,(0,_creditCardDetails.maskField)(fieldName,previousValue,nextValue));this.props.onFieldChange(rawDetails,maskedDetails)},render:function render(){return _react2.default.createElement("div",{className:"credit-card-form"},this.field("name",_input2.default,{labelClass:"credit-card-form__label",autofocus:true,label:this.translate("Name on Card",{context:"Card holder name label on credit card form"})}),this.field("number",_creditCardNumberInput2.default,{inputMode:"numeric",labelClass:"credit-card-form__label",label:this.translate("Card Number",{context:"Card number label on credit card form"})}),_react2.default.createElement("div",{className:"credit-card-form__extras"},this.field("expiration-date",_input2.default,{inputMode:"numeric",labelClass:"credit-card-form__label",label:this.translate("MM/YY",{context:"Expiry label on credit card form"})}),this.field("cvv",_input2.default,{inputMode:"numeric",labelClass:"credit-card-form__label",label:this.translate("CVV",{context:"3 digit security number on credit card form"})}),this.field("country",_countrySelect2.default,{label:this.translate("Country"),countriesList:this.props.countriesList}),this.field("postal-code",_input2.default,{labelClass:"credit-card-form__label",label:this.translate("Postal Code",{context:"Postal code on credit card form"})})))}});exports.default=CreditCardForm;module.exports=exports["default"]},1877:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _creditCardDetails=__webpack_require__(695);var _input=__webpack_require__(1558);var _input2=_interopRequireDefault(_input);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CreditCardNumberInput=_react2.default.createClass({displayName:"CreditCardNumberInput",render:function render(){return _react2.default.createElement("div",{className:"credit-card-number-input"},_react2.default.createElement(_input2.default,(0,_extends3.default)({},this.props,{classes:(0,_creditCardDetails.getCreditCardType)(this.props.value)})))}});exports.default=CreditCardNumberInput;module.exports=exports["default"]},1878:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactAddonsCssTransitionGroup=__webpack_require__(672);var _reactAddonsCssTransitionGroup2=_interopRequireDefault(_reactAddonsCssTransitionGroup);var _cartValues=__webpack_require__(184);var _users=__webpack_require__(1880);var _users2=_interopRequireDefault(_users);var _productDetails=__webpack_require__(1879);var _productDetails2=_interopRequireDefault(_productDetails);var _analytics=__webpack_require__(649);var _analytics2=_interopRequireDefault(_analytics);var _abtest=__webpack_require__(248);var _googleAppsUsers=__webpack_require__(1801);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GoogleAppsDialog=_react2.default.createClass({displayName:"GoogleAppsDialog",mixins:[(0,_analytics2.default)("googleApps")],propTypes:{domain:_react2.default.PropTypes.string.isRequired,productsList:_react2.default.PropTypes.object.isRequired,onAddGoogleApps:_react2.default.PropTypes.func.isRequired,onClickSkip:_react2.default.PropTypes.func.isRequired,onGoBack:_react2.default.PropTypes.func,analyticsSection:_react2.default.PropTypes.string,initialGoogleAppsCartItem:_react2.default.PropTypes.object},getInitialState:function getInitialState(){return{isAddingEmail:false,users:null,validationErrors:null}},componentWillMount:function componentWillMount(){if(this.props.initialState){this.setState(this.props.initialState)}},removeValidationErrors:function removeValidationErrors(){this.setState({validationErrors:null})},render:function render(){var gapps=this.props.productsList&&this.props.productsList.get().gapps;var price=gapps&&gapps.cost_display;price=price&&price.replace(/(\d+\.?\d+)/,function(value){var number=Math.round(parseFloat(value)/10*100)/100;return number%1===0?number:number.toFixed(2)});return _react2.default.createElement("form",{className:"google-apps-dialog card",onSubmit:this.handleFormSubmit},this.header(),_react2.default.createElement(_productDetails2.default,{price:price}),_react2.default.createElement(_reactAddonsCssTransitionGroup2.default,{transitionName:"google-apps-dialog__users",transitionEnterTimeout:200,transitionLeaveTimeout:200},this.state.isAddingEmail&&this.renderGoogleAppsUsers()),this.footer())},renderGoogleAppsUsers:function renderGoogleAppsUsers(){return _react2.default.createElement(_users2.default,{analyticsSection:this.props.analyticsSection,fields:this.state.users,domain:this.props.domain,onChange:this.setUsers,onBlur:this.save})},setUsers:function setUsers(users){this.setState({users:users})},save:function save(){if(this.props.onSave){this.props.onSave(this.state)}},header:function header(){return _react2.default.createElement("header",{className:"google-apps-dialog__header"},_react2.default.createElement("h2",{className:"google-apps-dialog__title"},this.translate("Add Professional Email to %(domain)s",{args:{domain:this.props.domain}})),_react2.default.createElement("h5",{className:"google-apps-dialog__no-setup-required"},this.translate("No setup or software required, easy to manage from your dashboard")))},maybeShowKeepSearching:function maybeShowKeepSearching(){if((0,_abtest.abtest)("multiDomainRegistrationV1")==="singlePurchaseFlow"){return null;
}return _react2.default.createElement("button",{className:"google-apps-dialog__keepsearching-button button",href:"#",onClick:this.handleFormKeepSearching},this.translate("Keep Searching"))},checkoutButtonOrLink:function checkoutButtonOrLink(){if((0,_abtest.abtest)("multiDomainRegistrationV1")==="singlePurchaseFlow"){return _react2.default.createElement("a",{className:"google-apps-dialog__cancel-link",href:"#",onClick:this.handleFormCheckout},this.translate("No thanks, I don't need email or will use another provider."))}return _react2.default.createElement("button",{className:"google-apps-dialog__checkout-button button",href:"#",onClick:this.handleFormCheckout},this.translate("Checkout"))},footer:function footer(){var continueButtonHandler=this.state.isAddingEmail?this.handleFormSubmit:this.handleAddEmail,continueButtonText=this.state.isAddingEmail?this.translate("Continue »"):this.translate("Add Email »");return _react2.default.createElement("footer",{className:"google-apps-dialog__footer"},this.maybeShowKeepSearching(),this.checkoutButtonOrLink(),_react2.default.createElement("button",{className:"google-apps-dialog__continue-button button is-primary",type:"submit",onClick:continueButtonHandler},continueButtonText))},handleAddEmail:function handleAddEmail(event){event.preventDefault();this.recordEvent("addEmailButtonClick",this.props.analyticsSection);this.setState({isAddingEmail:true})},handleFormSubmit:function handleFormSubmit(event){event.preventDefault();this.recordEvent("formSubmit",this.props.analyticsSection);if(!this.validateForm()){return}this.props.onAddGoogleApps(this.getGoogleAppsCartItem())},handleFormCheckout:function handleFormCheckout(event){event.preventDefault();this.recordEvent("cancelButtonClick",this.props.analyticsSection);this.props.onClickSkip()},handleFormKeepSearching:function handleFormKeepSearching(event){event.preventDefault();this.recordEvent("keepSearchingButtonClick");this.props.onGoBack()},getFields:function getFields(){return{firstName:this.translate("First Name"),lastName:this.translate("Last Name"),email:this.translate("Email Address")}},validateForm:function validateForm(){var validation=(0,_googleAppsUsers.validate)({users:this.state.users,fields:this.getFields(),domainSuffix:this.props.domain});if(validation.errors.length>0){this.setState({validationErrors:validation.errors});this.setUsers(validation.users);return false}return true},getGoogleAppsCartItem:function getGoogleAppsCartItem(){var _this=this;var users=(0,_googleAppsUsers.filter)({users:this.state.users,fields:this.getFields()});users=users.map(function(user){return{email:user.email.value+"@"+_this.props.domain,firstname:user.firstName.value.trim(),lastname:user.lastName.value.trim()}});return _cartValues.cartItems.googleApps({domain:this.props.domain,users:users})}});exports.default=GoogleAppsDialog;module.exports=exports["default"]},1879:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var GoogleAppsProductDetails=React.createClass({displayName:"GoogleAppsProductDetails",propTypes:{price:React.PropTypes.string.isRequired},render:function render(){return React.createElement("div",{className:"google-apps-dialog__product-details"},React.createElement("h3",{className:"google-apps-dialog__product-name"},React.createElement("span",{className:"google-apps-dialog__product-logo"},"Google "),"Apps for Work"),React.createElement("h5",{className:"google-apps-dialog__file-storage"},this.translate("30GB Online File Storage")),React.createElement("h5",{className:"google-apps-dialog__professional-email"},this.translate("Professional Email Address")),React.createElement("h4",{className:"google-apps-dialog__price-per-user"},this.translate("%(price)s per user / month ",{args:{price:this.props.price}})),React.createElement("h5",{className:"google-apps-dialog__billing-period"},this.translate("Billed yearly — get 2 months free!")))}});module.exports=GoogleAppsProductDetails},1880:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _clone=__webpack_require__(251);var _clone2=_interopRequireDefault(_clone);var _formFieldset=__webpack_require__(338);var _formFieldset2=_interopRequireDefault(_formFieldset);var _formTextInput=__webpack_require__(246);var _formTextInput2=_interopRequireDefault(_formTextInput);var _formTextInputWithAffixes=__webpack_require__(1511);var _formTextInputWithAffixes2=_interopRequireDefault(_formTextInputWithAffixes);var _formInputValidation=__webpack_require__(1456);var _formInputValidation2=_interopRequireDefault(_formInputValidation);var _analytics=__webpack_require__(649);var _analytics2=_interopRequireDefault(_analytics);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GoogleAppsUsers=_react2.default.createClass({displayName:"GoogleAppsUsers",mixins:[(0,_analytics2.default)("googleApps")],componentWillMount:function componentWillMount(){this.props.onChange(this.props.fields?this.props.fields:this.getInitialFields())},getInitialFields:function getInitialFields(){return[this.getNewUserFields()]},getNewUserFields:function getNewUserFields(){return{email:{value:"",error:null},firstName:{value:"",error:null},lastName:{value:"",error:null}}},render:function render(){var fields=this.props.fields||this.getInitialFields(),allUserInputs=fields.map(this.inputsForUser);return _react2.default.createElement("div",{className:"google-apps-dialog__users",key:"google-apps-dialog__users"},_react2.default.createElement("h4",null,this.translate("New Google Apps User:")),allUserInputs,_react2.default.createElement("button",{className:"google-apps-dialog__add-another-user-button",onClick:this.addUser},this.translate("Add Another User")))},fieldClasses:function fieldClasses(fieldName){return"google-apps-dialog__user-field google-apps-dialog__user-"+fieldName},inputsForUser:function inputsForUser(user,index){var contactText=this.translate("contact",{context:"part of e-mail address",comment:"As it would be part of an e-mail address contact@example.com"});return _react2.default.createElement("div",{className:"google-apps-dialog__user-fields",key:"google-apps-dialog-user-"+index},_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formTextInputWithAffixes2.default,{className:this.fieldClasses("email"),placeholder:this.translate("e.g. %(example)s",{args:{example:contactText}}),name:"email",value:user.email.value,suffix:"@"+this.props.domain,isError:user.email.error,onChange:this.updateField.bind(this,index),onBlur:this.props.onBlur,onClick:this.recordInputFocus.bind(this,index,"Email")}),user.email.error?_react2.default.createElement(_formInputValidation2.default,{text:user.email.error,isError:true}):null),_react2.default.createElement(_formFieldset2.default,{className:this.fieldClasses("first-name")},_react2.default.createElement(_formTextInput2.default,{placeholder:this.translate("First Name"),name:"firstName",value:user.firstName.value,maxLength:60,isError:user.firstName.error,onChange:this.updateField.bind(this,index),onBlur:this.props.onBlur,onClick:this.recordInputFocus.bind(this,index,"First Name")}),user.firstName.error?_react2.default.createElement(_formInputValidation2.default,{text:user.firstName.error,isError:true}):null),_react2.default.createElement(_formFieldset2.default,{className:this.fieldClasses("last-name")},_react2.default.createElement(_formTextInput2.default,{placeholder:this.translate("Last Name"),name:"lastName",value:user.lastName.value,maxLength:60,isError:user.lastName.error,onChange:this.updateField.bind(this,index),onBlur:this.props.onBlur,onClick:this.recordInputFocus.bind(this,index,"Last Name")}),user.lastName.error?_react2.default.createElement(_formInputValidation2.default,{text:user.lastName.error,isError:true}):null))},recordInputFocus:function recordInputFocus(index,fieldName){var field=this.props.fields[index],inputValue=field?field.value:"";this.recordEvent("inputFocus",index,fieldName,inputValue)},addUser:function addUser(event){event.preventDefault();this.recordEvent("addUserClick",this.props.analyticsSection);var updatedFields=this.props.fields.concat([this.getNewUserFields()]);this.props.onChange(updatedFields)},updateField:function updateField(index,event){event.preventDefault();var newValue=event.target.value,fieldName=event.target.name,updatedFields=(0,_clone2.default)(this.props.fields);updatedFields[index]=(0,_clone2.default)(updatedFields[index]);updatedFields[index][fieldName]=(0,_clone2.default)(updatedFields[index][fieldName]);updatedFields[index][fieldName].value=newValue;this.props.onChange(updatedFields)}});exports.default=GoogleAppsUsers;module.exports=exports["default"]},1881:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var cartItems=__webpack_require__(184).cartItems,GoogleAppsDialog=__webpack_require__(1878),HeaderCake=__webpack_require__(1460),observe=__webpack_require__(146);var GoogleApps=React.createClass({displayName:"GoogleApps",mixins:[observe("sites")],propTypes:{sites:React.PropTypes.object,cart:React.PropTypes.object,domain:React.PropTypes.string.isRequired,onGoBack:React.PropTypes.func.isRequired,productsList:React.PropTypes.object.isRequired,onAddGoogleApps:React.PropTypes.func.isRequired,onClickSkip:React.PropTypes.func.isRequired,onSave:React.PropTypes.func,initialState:React.PropTypes.object,analyticsSection:React.PropTypes.string,initialGoogleAppsCartItem:React.PropTypes.object},getDefaultProps:function getDefaultProps(){return{analyticsSection:"domains"}},componentDidMount:function componentDidMount(){this.checkDomainInCart()},componentDidUpdate:function componentDidUpdate(){this.checkDomainInCart()},checkDomainInCart:function checkDomainInCart(){if(!this.props.cart||!this.props.cart.hasLoadedFromServer){return}if(!cartItems.hasDomainInCart(this.props.cart,this.props.domain)){this.props.onGoBack()}},render:function render(){var selectedSite=this.props.sites?this.props.sites.getSelectedSite():null;return React.createElement("div",null,React.createElement(HeaderCake,{onClick:this.props.onGoBack},this.translate("Register %(domain)s",{args:{domain:this.props.domain}})),React.createElement(GoogleAppsDialog,{domain:this.props.domain,productsList:this.props.productsList,onClickSkip:this.props.onClickSkip,onGoBack:this.props.onGoBack,onAddGoogleApps:this.props.onAddGoogleApps,selectedSite:selectedSite,analyticsSection:this.props.analyticsSection,onSave:this.props.onSave,initialState:this.props.initialState,initialGoogleAppsCartItem:this.props.initialGoogleAppsCartItem}))}});module.exports=GoogleApps},1895:function(module,exports,__webpack_require__){"use strict";var _debug=__webpack_require__(4);var _debug2=_interopRequireDefault(_debug);var _store=__webpack_require__(42);var _store2=_interopRequireDefault(_store);var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);var _emitter=__webpack_require__(32);var _emitter2=_interopRequireDefault(_emitter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=(0,_debug2.default)("calypso:plans-list");function PlansList(){if(!(this instanceof PlansList)){return new PlansList}this.initialized=false}(0,_emitter2.default)(PlansList.prototype);PlansList.prototype.get=function(){var data=void 0;if(!this.data){debug("First time loading PlansList, check store");data=_store2.default.get("PlansList");if(data){this.initialize(data)}else{this.data=[]}this.fetch()}return this.data};PlansList.prototype.fetch=function(){debug("getting PlansList from api");_wp2.default.plans().list({apiVersion:"1.2"},function(error,plans){if(error){debug("error fetching PlansList from api",error);return}debug("PlansList fetched from api:",plans);if(!this.initialized){this.initialize(plans)}else{this.update(plans)}this.emit("change");_store2.default.set("PlansList",plans)}.bind(this))};PlansList.prototype.initialize=function(plans){this.data=plans;this.initialized=true};PlansList.prototype.update=function(plans){this.data=plans};PlansList.prototype.getPlanBySlug=function(slug){if(!this.data){return null}var filteredPlans=this.data.filter(function(plan){if(plan&&plan.product_slug===slug){return plan}});return filteredPlans[0]};var _plans=void 0;module.exports=function(){if(!_plans){_plans=new PlansList}return _plans}},1907:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);exports.requestHandler=requestHandler;exports.injectHandler=injectHandler;function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function requestHandler(handler){return function(params,fn){handler(params,function(err,response){var _ref=response||{};var code=_ref.code;var message=_ref.message;var _ref$data=_ref.data;var data=_ref$data===undefined?{}:_ref$data;var status=data.status;if(code&&typeof code==="string"&&message&&typeof message==="string"&&status&&typeof status==="number"){return fn(new Error(message))}return fn(err,response)})}}function injectHandler(wpcom){var request=wpcom.request.bind(wpcom);return(0,_assign2.default)(wpcom,{request:requestHandler(request)})}},1937:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WpcomPlanPrice=function WpcomPlanPrice(_ref){var getPrice=_ref.getPrice;var hasDiscount=_ref.hasDiscount;var periodLabel=_ref.periodLabel;return _react2.default.createElement("div",{className:hasDiscount?"wpcom-plan-price wpcom-plan-price__discount":"wpcom-plan-price"},_react2.default.createElement("span",null,getPrice()),_react2.default.createElement("small",{className:"wpcom-plan-price__billing-period"},periodLabel))};WpcomPlanPrice.propTypes={getPrice:_react2.default.PropTypes.func.isRequired,hasDiscount:_react2.default.PropTypes.bool,periodLabel:_react2.default.PropTypes.string.isRequired};exports.default=WpcomPlanPrice;module.exports=exports["default"]},1957:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CartButtons=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _identity=__webpack_require__(110);var _identity2=_interopRequireDefault(_identity);var _isFunction=__webpack_require__(85);var _isFunction2=_interopRequireDefault(_isFunction);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _i18nCalypso=__webpack_require__(13);var _analytics=__webpack_require__(649);var _analytics2=_interopRequireDefault(_analytics);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CartButtons=exports.CartButtons=_react2.default.createClass({displayName:"CartButtons",mixins:[(0,_analytics2.default)("popupCart")],propTypes:{selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired,translate:_react2.default.PropTypes.func.isRequired},getDefaultProps:function getDefaultProps(){return{showKeepSearching:false,translate:_identity2.default}},render:function render(){return _react2.default.createElement("div",{className:"cart-buttons"},_react2.default.createElement("button",{className:"cart-checkout-button button is-primary",onClick:this.goToCheckout},this.props.translate("Checkout",{context:"Cart button"})),this.optionalKeepSearching())},optionalKeepSearching:function optionalKeepSearching(){if(!this.props.showKeepSearching){return}return _react2.default.createElement("button",{className:"cart-keep-searching-button button",onClick:this.onKeepSearchingClick},this.props.translate("Keep Searching"))},onKeepSearchingClick:function onKeepSearchingClick(event){event.preventDefault();this.recordEvent("keepSearchButtonClick");if((0,_isFunction2.default)(this.props.onKeepSearchingClick)){this.props.onKeepSearchingClick(event)}},goToCheckout:function goToCheckout(event){event.preventDefault();this.recordEvent("checkoutButtonClick");(0,_page2.default)("/checkout/"+this.props.selectedSite.slug)}});exports.default=(0,_i18nCalypso.localize)(CartButtons)},1958:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var analytics=__webpack_require__(16),upgradesActions=__webpack_require__(646);module.exports=React.createClass({displayName:"CartCoupon",getInitialState:function getInitialState(){var coupon=this.props.cart.coupon,cartHadCouponBeforeMount=Boolean(this.props.cart.coupon);return{isCouponFormShowing:cartHadCouponBeforeMount,hasSubmittedCoupon:cartHadCouponBeforeMount,couponInputValue:coupon,userChangedCoupon:false}},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(!this.state.userChangedCoupon){this.setState({couponInputValue:nextProps.cart.coupon})}},toggleCouponDetails:function toggleCouponDetails(event){event.preventDefault();this.setState({isCouponFormShowing:!this.state.isCouponFormShowing});if(this.state.isCouponFormShowing){analytics.ga.recordEvent("Upgrades","Clicked Hide Coupon Code Link")}else{analytics.ga.recordEvent("Upgrades","Clicked Show Coupon Code Link")}},applyCoupon:function applyCoupon(event){event.preventDefault();this.setState({userChangedCoupon:false,hasSubmittedCoupon:true});upgradesActions.applyCoupon(this.state.couponInputValue)},handleCouponInput:function handleCouponInput(event){this.setState({userChangedCoupon:true,couponInputValue:event.target.value})},getToggleLink:function getToggleLink(){if(this.props.cart.total_cost===0){return}if(this.state.hasSubmittedCoupon){return}return React.createElement("a",{href:"",onClick:this.toggleCouponDetails},this.translate("Have a coupon code?"))},getCouponForm:function getCouponForm(){if(!this.state.isCouponFormShowing){return}if(this.state.hasSubmittedCoupon){return}return React.createElement("form",{onSubmit:this.applyCoupon},React.createElement("input",{type:"text",placeholder:this.translate("Enter Coupon Code",{textOnly:true}),onChange:this.handleCouponInput,value:this.state.couponInputValue}),React.createElement("button",{type:"submit",className:"button"},this.translate("Apply")))},render:function render(){return React.createElement("div",{className:"cart-coupon"},this.getToggleLink(),this.getCouponForm())}})},1959:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),page=__webpack_require__(40),startsWith=__webpack_require__(73);var CartEmpty=React.createClass({displayName:"CartEmpty",render:function render(){return React.createElement("div",null,React.createElement("div",{className:"cart-empty"},this.translate("There are no items in your cart.")),React.createElement("div",{className:"cart-buttons"},React.createElement("button",{className:"cart-checkout-button button is-primary",onClick:this.handleClick},this.shouldShowPlanButton()?this.translate("Add a Plan"):this.translate("Add a Domain"))))},shouldShowPlanButton:function shouldShowPlanButton(){if(this.props.selectedSite.jetpack){return true}return startsWith(this.props.path,"/domains")},handleClick:function handleClick(event){event.preventDefault();page((this.shouldShowPlanButton()?"/plans/":"/domains/add/")+this.props.selectedSite.slug)}});module.exports=CartEmpty},1960:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);var _cartValues=__webpack_require__(184);var _productsValues=__webpack_require__(80);var _selectors=__webpack_require__(121);var _constants=__webpack_require__(1538);var _actions=__webpack_require__(646);var upgradesActions=_interopRequireWildcard(_actions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getIncludedDomain=_cartValues.cartItems.getIncludedDomain;var CartItem=_react2.default.createClass({displayName:"CartItem",removeFromCart:function removeFromCart(event){event.preventDefault();_analytics2.default.ga.recordEvent("Upgrades","Clicked Remove From Cart Icon","Product ID",this.props.cartItem.product_id);upgradesActions.removeItem(this.props.cartItem,this.props.domainsWithPlansOnly)},price:function price(){var cost,cart=this.props.cart,cartItem=this.props.cartItem;if(typeof cartItem.cost==="undefined"){return this.translate("Loading price")}if(cartItem.free_trial){return this.getFreeTrialPrice()}if(_cartValues.cartItems.hasDomainCredit(cart)&&(0,_productsValues.isDomainProduct)(cartItem)&&cartItem.cost===0){return this.getDomainPlanPrice()}cost=cartItem.cost*cartItem.volume;return this.translate("%(cost)s %(currency)s",{args:{cost:cost,currency:cartItem.currency}})},monthlyPrice:function monthlyPrice(){var _props$cartItem=this.props.cartItem;var cost=_props$cartItem.cost;var currency=_props$cartItem.currency;if(typeof cost==="undefined"){return null}if(!(0,_productsValues.isPlan)(this.props.cartItem)){return null}if(cost<=0){return null}if((0,_productsValues.isMonthly)(this.props.cartItem)){return null}return this.translate("(%(monthlyPrice)f %(currency)s x 12 months)",{args:{monthlyPrice:+(cost/12).toFixed(currency==="JPY"?0:2),currency:currency}})},getDomainPlanPrice:function getDomainPlanPrice(){return _react2.default.createElement("em",null,this.translate("Free with your plan"))},getFreeTrialPrice:function getFreeTrialPrice(){var freeTrialText;freeTrialText=this.translate("Free %(days)s Day Trial",{args:{days:"14"}});return _react2.default.createElement("span",null,freeTrialText)},getProductInfo:function getProductInfo(){var domain=this.props.cartItem.meta||this.props.selectedSite.domain,info=null;if((0,_productsValues.isGoogleApps)(this.props.cartItem)&&this.props.cartItem.extra.google_apps_users){info=this.props.cartItem.extra.google_apps_users.map(function(user){return _react2.default.createElement("div",null,user.email)})}else if((0,_productsValues.isCredits)(this.props.cartItem)){info=null}else if(getIncludedDomain(this.props.cartItem)){info=getIncludedDomain(this.props.cartItem)}else if((0,_productsValues.isTheme)(this.props.cartItem)){info=this.props.selectedSite.domain}else{info=domain}return info},render:function render(){var name=this.getProductName();if(this.props.cartItem.bill_period&&this.props.cartItem.bill_period!==-1){if((0,_productsValues.isMonthly)(this.props.cartItem)){name+=" - "+this.translate("monthly subscription")}else{name+=" - "+this.translate("annual subscription")}}return _react2.default.createElement("li",{className:"cart-item"},_react2.default.createElement("div",{className:"primary-details"},_react2.default.createElement("span",{className:"product-name"},name||this.translate("Loading…")),_react2.default.createElement("span",{className:"product-domain"},this.getProductInfo())),_react2.default.createElement("div",{className:"secondary-details"},_react2.default.createElement("span",{className:"product-price"},this.price()),_react2.default.createElement("span",{className:"product-monthly-price"},this.monthlyPrice()),this.removeButton()))},getProductName:function getProductName(){var cartItem=this.props.cartItem,options={count:cartItem.volume,args:{volume:cartItem.volume,productName:cartItem.product_name}};if(!cartItem.volume){return cartItem.product_name}else if(cartItem.volume===1){switch(cartItem.product_slug){case"gapps":return this.translate("%(productName)s (1 User)",{args:{productName:cartItem.product_name}});default:return cartItem.product_name}}else{switch(cartItem.product_slug){case"gapps":return this.translate("%(productName)s (%(volume)s User)","%(productName)s (%(volume)s Users)",options);default:return this.translate("%(productName)s (%(volume)s Item)","%(productName)s (%(volume)s Items)",options)}}},removeButton:function removeButton(){if((0,_cartValues.canRemoveFromCart)(this.props.cart,this.props.cartItem)){return _react2.default.createElement("button",{className:"remove-item noticon noticon-close",onClick:this.removeFromCart})}}});exports.default=(0,_reactRedux.connect)(function(state){return{domainsWithPlansOnly:(0,_selectors.currentUserHasFlag)(state,_constants.DOMAINS_WITH_PLANS_ONLY)}})(CartItem);module.exports=exports["default"]},1961:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var CartItem=__webpack_require__(1960),cartItems=__webpack_require__(184).cartItems;var COLLAPSED_ITEMS_COUNT=2;var CartItems=React.createClass({displayName:"CartItems",propTypes:{collapse:React.PropTypes.bool.isRequired},getInitialState:function getInitialState(){return{isCollapsed:this.props.collapse}},handleExpand:function handleExpand(event){event.preventDefault();setTimeout(this.setState.bind(this,{isCollapsed:false}),0)},collapseItems:function collapseItems(items){var collapsedItemsCount=items.length-COLLAPSED_ITEMS_COUNT,collapsedItems=items.slice(0,COLLAPSED_ITEMS_COUNT);collapsedItems.push(React.createElement("li",{key:"items-expander"},React.createElement("a",{className:"cart-items__expander",href:"#",onClick:this.handleExpand},this.translate("+ %(count)d more item","+ %(count)d more items",{count:collapsedItemsCount,args:{count:collapsedItemsCount}}))));return collapsedItems},render:function render(){var cart=this.props.cart,items;if(!cartItems.getAll(cart)){return}items=cartItems.getAllSorted(cart).map(function(cartItem){return React.createElement(CartItem,{cart:cart,cartItem:cartItem,selectedSite:this.props.selectedSite,key:cartItem.product_id+"-"+cartItem.meta})},this);if(this.state.isCollapsed&&items.length>COLLAPSED_ITEMS_COUNT+1){items=this.collapseItems(items)}return React.createElement("ul",{className:"cart-items"},items)}});module.exports=CartItems},1962:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var cartItems=__webpack_require__(184).cartItems;var CartTotal=React.createClass({displayName:"CartTotal",render:function render(){var cart=this.props.cart;if(cart.hasPendingServerUpdates){return React.createElement("div",{className:"cart-total"},this.translate("Recalculating…",{context:"Upgrades: Updating cart cost in checkout"}))}if(!cart.total_cost_display){return React.createElement("div",{className:"cart-total"})}return React.createElement("div",{className:"cart-total"},React.createElement("span",{className:"cart-total-label"},this.totalLabel()),React.createElement("span",{className:"cart-total-amount"},cart.total_cost_display))},totalLabel:function totalLabel(){var cart=this.props.cart;if(cartItems.hasOnlyFreeTrial(cart)){return this.translate("Total Due Now:",{context:"Upgrades: Total cart cost in checkout when buying a free trial"})}else{return this.translate("Total:",{context:"Upgrades: Total cart cost in checkout when buying a full price upgrade"})}}});module.exports=CartTotal},1963:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _cartAd=__webpack_require__(1667);var _cartAd2=_interopRequireDefault(_cartAd);var _cartValues=__webpack_require__(184);var _plans=__webpack_require__(1459);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CartTrialAd=_react2.default.createClass({displayName:"CartTrialAd",propTypes:{cart:_react2.default.PropTypes.object.isRequired,sitePlans:_react2.default.PropTypes.object.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired},addPlanAndRedirect:function addPlanAndRedirect(event){event.preventDefault();(0,_plans.addCurrentPlanToCartAndRedirect)(this.props.sitePlans,this.props.selectedSite)},render:function render(){var _props=this.props;var cart=_props.cart;var sitePlans=_props.sitePlans;var isDataLoading=!sitePlans.hasLoadedFromServer||!cart.hasLoadedFromServer;var currentPlan=(0,_plans.getCurrentPlan)(sitePlans.data);if(isDataLoading||!currentPlan.freeTrial||_cartValues.cartItems.getDomainRegistrations(cart).length!==1||_cartValues.cartItems.hasPlan(cart)){return null}return _react2.default.createElement(_cartAd2.default,null,_i18nCalypso2.default.translate("You are currently on day %(days)d of your {{strong}}%(planName)s trial{{/strong}}.",{components:{strong:_react2.default.createElement("strong",null)},args:{days:(0,_plans.getDayOfTrial)(currentPlan),planName:currentPlan.productName}})," ",_i18nCalypso2.default.translate("Get this domain for free when you upgrade.")," ",_react2.default.createElement("a",{href:"#",onClick:this.addPlanAndRedirect},_i18nCalypso2.default.translate("Upgrade Now")))}});exports.default=CartTrialAd;module.exports=exports["default"]},1964:function(module,exports,__webpack_require__){"use strict";var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reject=__webpack_require__(149);var _reject2=_interopRequireDefault(_reject);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _cartBody=__webpack_require__(1821);var _cartBody2=_interopRequireDefault(_cartBody);var _cartMessagesMixin=__webpack_require__(1822);var _cartMessagesMixin2=_interopRequireDefault(_cartMessagesMixin);var _cartButtons=__webpack_require__(1957);var _cartButtons2=_interopRequireDefault(_cartButtons);var _popover=__webpack_require__(345);var _popover2=_interopRequireDefault(_popover);var _cartEmpty=__webpack_require__(1959);var _cartEmpty2=_interopRequireDefault(_cartEmpty);var _cartPlanAd=__webpack_require__(1823);var _cartPlanAd2=_interopRequireDefault(_cartPlanAd);var _cartTrialAd=__webpack_require__(1963);var _cartTrialAd2=_interopRequireDefault(_cartTrialAd);var _productsValues=__webpack_require__(80);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PopoverCart=_react2.default.createClass({displayName:"PopoverCart",propTypes:{cart:_react2.default.PropTypes.object.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired,sitePlans:_react2.default.PropTypes.object.isRequired,onToggle:_react2.default.PropTypes.func.isRequired,closeSectionNavMobilePanel:_react2.default.PropTypes.func,visible:_react2.default.PropTypes.bool.isRequired,pinned:_react2.default.PropTypes.bool.isRequired,showKeepSearching:_react2.default.PropTypes.bool.isRequired,onKeepSearchingClick:_react2.default.PropTypes.func.isRequired},itemCount:function itemCount(){if(!this.props.cart.hasLoadedFromServer){return}return(0,_reject2.default)(this.props.cart.products,_productsValues.isCredits).length},mixins:[_cartMessagesMixin2.default],render:function render(){var countBadge,classes=(0,_classnames2.default)({"popover-cart":true,pinned:this.props.pinned});if(this.itemCount()){countBadge=_react2.default.createElement("div",{className:"popover-cart__count-badge"},this.itemCount())}return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:classes},_react2.default.createElement("button",{className:"cart-toggle-button",ref:"toggleButton",onClick:this.onToggle},_react2.default.createElement("div",{className:"popover-cart__label"
},this.translate("Cart")),_react2.default.createElement(_gridicon2.default,{icon:"cart",size:24}),countBadge)),this.cartContent())},cartContent:function cartContent(){if(!this.props.pinned){return _react2.default.createElement(_popover2.default,{className:"popover-cart__popover popover",isVisible:this.props.visible,position:"bottom left",onClose:this.onClose,context:this.refs.toggleButton},this.cartBody())}if(this.props.visible){return _react2.default.createElement("div",{className:"popover-cart__mobile-cart"},_react2.default.createElement("div",{className:"top-arrow"}),this.cartBody())}},onToggle:function onToggle(event){this.props.closeSectionNavMobilePanel();this.props.onToggle(event)},cartBody:function cartBody(){var cartEmpty=this.props.cart.hasLoadedFromServer&&!this.props.cart.products.length;if(cartEmpty){return _react2.default.createElement(_cartEmpty2.default,{selectedSite:this.props.selectedSite,path:this.props.path})}return _react2.default.createElement("div",null,_react2.default.createElement(_cartTrialAd2.default,{cart:this.props.cart,selectedSite:this.props.selectedSite,sitePlans:this.props.sitePlans}),_react2.default.createElement(_cartPlanAd2.default,{cart:this.props.cart,selectedSite:this.props.selectedSite}),_react2.default.createElement(_cartBody2.default,{collapse:true,cart:this.props.cart,selectedSite:this.props.selectedSite}),_react2.default.createElement(_cartButtons2.default,{selectedSite:this.props.selectedSite,showKeepSearching:this.props.showKeepSearching,onKeepSearchingClick:this.props.onKeepSearchingClick}))},onClose:function onClose(){if(!this.isMounted()){return}if(this.props.pinned){return}this.onToggle()}});module.exports=PopoverCart},1965:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _find=__webpack_require__(33);var _find2=_interopRequireDefault(_find);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _customDomainPurchaseDetail=__webpack_require__(1624);var _customDomainPurchaseDetail2=_interopRequireDefault(_customDomainPurchaseDetail);var _productsValues=__webpack_require__(80);var _purchaseDetail=__webpack_require__(1478);var _purchaseDetail2=_interopRequireDefault(_purchaseDetail);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BusinessPlanDetails=function BusinessPlanDetails(_ref){var selectedSite=_ref.selectedSite;var sitePlans=_ref.sitePlans;var selectedFeature=_ref.selectedFeature;var plan=(0,_find2.default)(sitePlans.data,_productsValues.isBusiness);return _react2.default.createElement("div",null,_react2.default.createElement(_customDomainPurchaseDetail2.default,{selectedSite:selectedSite,hasDomainCredit:plan&&plan.hasDomainCredit}),!selectedFeature&&_react2.default.createElement(_purchaseDetail2.default,{icon:"customize",title:_i18nCalypso2.default.translate("Find a new theme"),description:_i18nCalypso2.default.translate("All our premium themes are now available at no extra cost. Try them out now."),buttonText:_i18nCalypso2.default.translate("Browse premium themes"),href:"/design/"+selectedSite.slug}),_react2.default.createElement(_purchaseDetail2.default,{icon:"stats-alt",title:_i18nCalypso2.default.translate("Stats from Google Analytics"),description:_i18nCalypso2.default.translate("Connect to Google Analytics for the perfect complement to WordPress.com stats."),buttonText:_i18nCalypso2.default.translate("Connect Google Analytics"),href:"/settings/analytics/"+selectedSite.slug}))};BusinessPlanDetails.propTypes={selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.bool,_react2.default.PropTypes.object]).isRequired,selectedFeature:_react2.default.PropTypes.object,sitePlans:_react2.default.PropTypes.object.isRequired};exports.default=BusinessPlanDetails;module.exports=exports["default"]},1966:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _debounce=__webpack_require__(343);var _debounce2=_interopRequireDefault(_debounce);var _i18nCalypso=__webpack_require__(13);var _clipboardButtonInput=__webpack_require__(1686);var _clipboardButtonInput2=_interopRequireDefault(_clipboardButtonInput);var _purchaseDetail=__webpack_require__(1478);var _purchaseDetail2=_interopRequireDefault(_purchaseDetail);var _purchaseButton=__webpack_require__(1704);var _purchaseButton2=_interopRequireDefault(_purchaseButton);var _tipInfo=__webpack_require__(1705);var _tipInfo2=_interopRequireDefault(_tipInfo);var _dialog=__webpack_require__(148);var _dialog2=_interopRequireDefault(_dialog);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);var _termsAndConditions=__webpack_require__(1967);var _termsAndConditions2=_interopRequireDefault(_termsAndConditions);var _querySiteVouchers=__webpack_require__(1693);var _querySiteVouchers2=_interopRequireDefault(_querySiteVouchers);var _actions=__webpack_require__(1740);var _serviceTypes=__webpack_require__(1742);var _selectors=__webpack_require__(1741);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var INITIAL_STEP="INITIAL_STEP";var TERMS_AND_CONDITIONS="TERMS_AND_CONDITIONS";var CODE_REDEEMED="CODE_REDEEMED";var GoogleVoucherDetails=function(_Component){(0,_inherits3.default)(GoogleVoucherDetails,_Component);function GoogleVoucherDetails(){(0,_classCallCheck3.default)(this,GoogleVoucherDetails);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(GoogleVoucherDetails).call(this));_this.onGenerateCode=_this.onGenerateCode.bind(_this);_this.onDialogCancel=_this.onDialogCancel.bind(_this);_this.onAcceptTermsAndConditions=_this.onAcceptTermsAndConditions.bind(_this);_this.onSetupGoogleAdWordsLink=_this.onSetupGoogleAdWordsLink.bind(_this);_this.changeStep=(0,_debounce2.default)(_this.changeStep,300);_this.state={step:INITIAL_STEP};return _this}(0,_createClass3.default)(GoogleVoucherDetails,[{key:"componentWillMount",value:function componentWillMount(){var voucher=this.getVoucher();if(voucher&&voucher.status==="assigned"){this.setState({step:CODE_REDEEMED})}}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(!nextProps.googleAdCredits){return null}if(this.props.googleAdCredits===nextProps.googleAdCredits){return null}if(nextProps.googleAdCredits.length>0){this.setState({step:CODE_REDEEMED})}}},{key:"onGenerateCode",value:function onGenerateCode(){_analytics2.default.ga.recordEvent("calypso_plans_google_voucher_generate_click","Cliked Generate Code Button");this.changeStep()}},{key:"onDialogCancel",value:function onDialogCancel(){this.setState({step:INITIAL_STEP})}},{key:"onAcceptTermsAndConditions",value:function onAcceptTermsAndConditions(){_analytics2.default.ga.recordEvent("calypso_plans_google_voucher_toc_accept_click","Cliked Agree Button");this.props.assignVoucher(this.props.selectedSite.ID,_serviceTypes.GOOGLE_CREDITS);this.setState({step:CODE_REDEEMED})}},{key:"onSetupGoogleAdWordsLink",value:function onSetupGoogleAdWordsLink(){_analytics2.default.ga.recordEvent("calypso_plans_google_voucher_setup_click","Cliked Setup Goole AdWords Button")}},{key:"changeStep",value:function changeStep(){var newStep=this.state.step===INITIAL_STEP?TERMS_AND_CONDITIONS:CODE_REDEEMED;this.setState({step:newStep})}},{key:"getVoucher",value:function getVoucher(){var props=arguments.length<=0||arguments[0]===undefined?this.props:arguments[0];var googleAdCredits=props.googleAdCredits;return googleAdCredits.length>0?googleAdCredits[0]:{}}},{key:"renderInitialStep",value:function renderInitialStep(){return _react2.default.createElement("div",null,_react2.default.createElement(_purchaseButton2.default,{onClick:this.onGenerateCode,text:this.props.translate("Generate Code")}),_react2.default.createElement(_tipInfo2.default,{info:this.props.translate("Offer valid in US and Canada after spending the first $25 on Google AdWords.")}))}},{key:"renderTermsAndConditions",value:function renderTermsAndConditions(){return _react2.default.createElement(_dialog2.default,{isVisible:true,onClose:this.onDialogCancel,additionalClassNames:"google-voucher-dialog"},_react2.default.createElement("div",{className:"google-voucher-dialog__header"},_react2.default.createElement("img",{src:"/calypso/images/google-vouchers/google-voucher.svg",className:"google-voucher-dialog__header__image"}),_react2.default.createElement("div",{className:"google-voucher-dialog__header__text"},_react2.default.createElement("h1",null,this.props.translate("Terms of Service")),_react2.default.createElement("p",null,this.props.translate("Google AdWords credit")))),_react2.default.createElement("div",{className:"google-voucher-dialog__body"},(0,_termsAndConditions2.default)()),_react2.default.createElement("div",{className:"google-voucher-dialog__footer"},_react2.default.createElement(_purchaseButton2.default,{className:"google-vouchers-dialog__cancel-button",primary:false,onClick:this.onDialogCancel,text:this.props.translate("Cancel")}),_react2.default.createElement(_purchaseButton2.default,{className:"google-vouchers-dialog__agree-button",onClick:this.onAcceptTermsAndConditions,text:this.props.translate("Agree")})))}},{key:"renderCodeRedeemed",value:function renderCodeRedeemed(){var _getVoucher=this.getVoucher();var code=_getVoucher.code;return _react2.default.createElement("div",{className:"google-voucher"},_react2.default.createElement(_clipboardButtonInput2.default,{value:code,disabled:!code}),_react2.default.createElement("div",{className:"google-voucher-code"},_react2.default.createElement("p",{className:"form-setting-explanation"},this.props.translate("Copy this unique, one-time use code to your clipboard and setup your Google AdWords account. {{a}}View help guide{{/a}}",{components:{a:_react2.default.createElement("a",{className:"google-voucher-code__help-link",href:"https://en.support.wordpress.com/google-adwords-credit/",target:"_blank"})}})),_react2.default.createElement(_purchaseButton2.default,{className:"google-voucher-code__setup-google-adwords",href:"https://www.google.com/adwords/",target:"_blank",onClick:this.onSetupGoogleAdWordsLink,text:this.props.translate("Setup Google AdWords")})),_react2.default.createElement(_tipInfo2.default,{className:"google-voucher-advice",info:this.props.translate("Offer valid in US and Canada after spending the first $25 on Google AdWords.")}))}},{key:"render",value:function render(){var _props=this.props;var selectedSite=_props.selectedSite;var translate=_props.translate;var step=this.state.step;var body=void 0;switch(step){case INITIAL_STEP:body=this.renderInitialStep();break;case TERMS_AND_CONDITIONS:body=this.renderTermsAndConditions();break;case CODE_REDEEMED:body=this.renderCodeRedeemed();break}return _react2.default.createElement("div",null,_react2.default.createElement(_querySiteVouchers2.default,{siteId:selectedSite.ID}),_react2.default.createElement(_purchaseDetail2.default,{id:"google-credits",icon:"tag",title:translate("Google AdWords credit"),description:translate("Use your {{strong}}$100{{/strong}} in credit with Google to bring the right traffic to your most important Posts and Pages.",{components:{strong:_react2.default.createElement("strong",null)}}),body:body}))}}]);return GoogleVoucherDetails}(_react.Component);GoogleVoucherDetails.propTypes={selectedSite:_react.PropTypes.oneOfType([_react.PropTypes.bool,_react.PropTypes.object]).isRequired,googleAdCredits:_react.PropTypes.array};exports.default=(0,_reactRedux.connect)(function(state,props){var site=props.selectedSite;return{vouchers:(0,_selectors.getVouchersBySite)(state,site),googleAdCredits:(0,_selectors.getGoogleAdCredits)(state,site)}},{assignVoucher:_actions.assignSiteVoucher})((0,_i18nCalypso.localize)(GoogleVoucherDetails));module.exports=exports["default"]},1967:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var googleTermsAndConditions=function googleTermsAndConditions(){return _react2.default.createElement("div",null,_react2.default.createElement("h3",null,_i18nCalypso2.default.translate("Terms and conditions for this offer:")),_react2.default.createElement("p",null,_i18nCalypso2.default.translate("In the below terms, “AdWords” may mean AdWords or AdWords Express, as appropriate.")),_react2.default.createElement("ol",null,_react2.default.createElement("li",{className:"google-voucher__terms-and-conditions"},_i18nCalypso2.default.translate("Offer available to customers with a billing address in the United States only. One promotional code per advertiser.")),_react2.default.createElement("li",{className:"google-voucher__terms-and-conditions"},_i18nCalypso2.default.translate("To activate this offer: Enter the promotional code in your account before December 31 2016. In order to participate in this offer, you must enter the code within 14 days of your first ad impression being served from your first AdWords account.")),_react2.default.createElement("li",{className:"google-voucher__terms-and-conditions"},_i18nCalypso2.default.translate("To earn the credit: After entering the code, your advertising campaigns must accrue costs of at least $25, excluding any taxes, within 30 days. Making a payment of $25 is not sufficient. The tracking of advertising costs towards $25 begins after you’ve entered the code.")),_react2.default.createElement("li",{className:"google-voucher__terms-and-conditions"},_i18nCalypso2.default.translate("Once 2 and 3 are completed, the credit will typically be applied within 5 days to the Billing Summary of your account.")),_react2.default.createElement("li",{className:"google-voucher__terms-and-conditions"},_i18nCalypso2.default.translate("Credits apply to future advertising costs only. Credits cannot be applied to costs accrued before the code was entered.")),_react2.default.createElement("li",{className:"google-voucher__terms-and-conditions"},_i18nCalypso2.default.translate("You won’t receive a notification once your credit is used up and any additional advertising costs will be charged to your form of payment. If you don’t want to continue advertising, you can pause or delete your campaigns at any time.")),_react2.default.createElement("li",{className:"google-voucher__terms-and-conditions"},_i18nCalypso2.default.translate("Your account must be successfully billed by AdWords and remain in good standing in order to qualify for the promotional credit.")),_react2.default.createElement("li",{className:"google-voucher__terms-and-conditions"},_i18nCalypso2.default.translate("Full terms and conditions can be found here "),_react2.default.createElement("a",{href:"http://www.google.com/adwords/coupons/terms.html",target:"_blank"},"http://www.google.com/adwords/coupons/terms.html"),".")))};exports.default=googleTermsAndConditions;module.exports=exports["default"]},1968:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _find=__webpack_require__(33);var _find2=_interopRequireDefault(_find);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _productsValues=__webpack_require__(80);var _customDomainPurchaseDetail=__webpack_require__(1624);var _customDomainPurchaseDetail2=_interopRequireDefault(_customDomainPurchaseDetail);var _purchaseDetail=__webpack_require__(1478);var _purchaseDetail2=_interopRequireDefault(_purchaseDetail);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PersonalPlanDetails=function PersonalPlanDetails(_ref){var translate=_ref.translate;var selectedSite=_ref.selectedSite;var sitePlans=_ref.sitePlans;var plan=(0,_find2.default)(sitePlans.data,_productsValues.isPersonal);return _react2.default.createElement("div",null,_react2.default.createElement(_customDomainPurchaseDetail2.default,{selectedSite:selectedSite,hasDomainCredit:plan&&plan.hasDomainCredit}),_react2.default.createElement(_purchaseDetail2.default,{icon:"speaker",title:translate("Advertising Removed"),description:translate("With your plan, all WordPress.com advertising has been removed from your site. "+"You can upgrade to a Business plan to also remove the WordPress.com footer credit.")}))};PersonalPlanDetails.propTypes={selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.bool,_react2.default.PropTypes.object]).isRequired,sitePlans:_react2.default.PropTypes.object.isRequired};exports.default=(0,_i18nCalypso.localize)(PersonalPlanDetails);module.exports=exports["default"]},1969:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _find=__webpack_require__(33);var _find2=_interopRequireDefault(_find);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _customDomainPurchaseDetail=__webpack_require__(1624);var _customDomainPurchaseDetail2=_interopRequireDefault(_customDomainPurchaseDetail);var _googleVoucher=__webpack_require__(1966);var _googleVoucher2=_interopRequireDefault(_googleVoucher);var _utils=__webpack_require__(1615);var _productsValues=__webpack_require__(80);var _paths=__webpack_require__(356);var _paths2=_interopRequireDefault(_paths);var _purchaseDetail=__webpack_require__(1478);var _purchaseDetail2=_interopRequireDefault(_purchaseDetail);var _querySiteVouchers=__webpack_require__(1693);var _querySiteVouchers2=_interopRequireDefault(_querySiteVouchers);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PremiumPlanDetails=function PremiumPlanDetails(_ref){var selectedSite=_ref.selectedSite;var sitePlans=_ref.sitePlans;var selectedFeature=_ref.selectedFeature;var adminUrl=selectedSite.URL+"/wp-admin/";var customizerInAdmin=adminUrl+"customize.php?return="+encodeURIComponent(window.location.href);var customizeLink=_config2.default.isEnabled("manage/customize")?"/customize/"+selectedSite.slug:customizerInAdmin;var plan=(0,_find2.default)(sitePlans.data,_productsValues.isPremium),isPremiumPlan=(0,_productsValues.isPremium)(selectedSite.plan);return _react2.default.createElement("div",null,_react2.default.createElement(_customDomainPurchaseDetail2.default,{selectedSite:selectedSite,hasDomainCredit:plan&&plan.hasDomainCredit}),_react2.default.createElement(_purchaseDetail2.default,{icon:"speaker",title:_i18nCalypso2.default.translate("Advertising Removed"),description:isPremiumPlan?_i18nCalypso2.default.translate("With your plan, all WordPress.com advertising has been removed from your site."+" You can upgrade to a Business plan to also remove the WordPress.com footer credit."):_i18nCalypso2.default.translate("With your plan, all WordPress.com advertising has been removed from your site.")}),_react2.default.createElement(_querySiteVouchers2.default,{siteId:selectedSite.ID}),_react2.default.createElement("div",null,_react2.default.createElement(_googleVoucher2.default,{selectedSite:selectedSite})),!selectedFeature&&_react2.default.createElement(_purchaseDetail2.default,{icon:"customize",title:_i18nCalypso2.default.translate("Customize your theme"),description:_i18nCalypso2.default.translate("You now have direct control over your site's fonts and colors in the customizer. "+"Change your site's entire look in a few clicks."),buttonText:_i18nCalypso2.default.translate("Start customizing"),href:customizeLink,target:_config2.default.isEnabled("manage/customize")?undefined:"_blank"}),_react2.default.createElement(_purchaseDetail2.default,{icon:"image-multiple",title:_i18nCalypso2.default.translate("Video and audio posts"),description:_i18nCalypso2.default.translate("Enrich your posts with video and audio, uploaded directly on your site. "+"No ads or limits. The Premium plan also adds 10GB of file storage."),buttonText:_i18nCalypso2.default.translate("Start a new post"),href:_paths2.default.newPost(selectedSite)}),(0,_utils.isWordadsInstantActivationEligible)(selectedSite)&&_react2.default.createElement(_purchaseDetail2.default,{icon:"speaker",title:_i18nCalypso2.default.translate("Easily monetize your site"),description:_i18nCalypso2.default.translate("Take advantage of WordAds instant activation on your upgraded site. "+"WordAds lets you earn money by displaying promotional content."),buttonText:_i18nCalypso2.default.translate("Start Earning"),href:"/ads/settings/"+selectedSite.slug}))};PremiumPlanDetails.propTypes={selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.bool,_react2.default.PropTypes.object]).isRequired,selectedFeature:_react2.default.PropTypes.object,sitePlans:_react2.default.PropTypes.object.isRequired};exports.default=PremiumPlanDetails;module.exports=exports["default"]},1970:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);module.exports=React.createClass({displayName:"StoredCard",render:function render(){var card=this.props.card,expirationDate=this.moment(card.expiry).format("MM/YY"),cardClasses="stored-card "+card.card_type.toLowerCase();return React.createElement("div",{className:cardClasses},React.createElement("span",{className:"stored-card__number"},card.card_type," ****",card.card),React.createElement("span",{className:"stored-card__name"},card.name),React.createElement("span",{className:"stored-card__expiration-date"},this.translate("Expires %(date)s",{args:{date:expirationDate},context:"date is of the form MM/YY"})))}})},1971:function(module,exports,__webpack_require__){"use strict";var _paths=__webpack_require__(652);var _paths2=_interopRequireDefault(_paths);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var React=__webpack_require__(1);var SubscriptionSettings=React.createClass({displayName:"SubscriptionSettings",propTypes:{onClick:React.PropTypes.func.isRequired},render:function render(){return React.createElement("a",{className:"domain-details-card__subscription-settings-button button",href:_paths2.default.list(),onClick:this.props.onClick},this.translate("Payment Settings"))}});module.exports=SubscriptionSettings},2020:function(module,exports,__webpack_require__){var createCompounder=__webpack_require__(386);var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()});module.exports=kebabCase},2085:function(module,exports,__webpack_require__){"use strict";var _mapValues=__webpack_require__(84);var _mapValues2=_interopRequireDefault(_mapValues);var _emailValidator=__webpack_require__(1548);var _emailValidator2=_interopRequireDefault(_emailValidator);var _productsValues=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function emailForwardingPlanLimit(plan){return(0,_productsValues.isBusiness)(plan)?100:5}function validateAllFields(fieldValues){return(0,_mapValues2.default)(fieldValues,function(value,fieldName){var isValid=validateField({value:value,name:fieldName});return isValid?[]:["Invalid"]})}function validateField(_ref){var name=_ref.name;var value=_ref.value;switch(name){case"mailbox":return/^[a-z0-9._+-]{1,64}$/i.test(value)&&!/(^\.)|(\.{2,})|(\.$)/.test(value);case"destination":return _emailValidator2.default.validate(value);default:return true}}module.exports={emailForwardingPlanLimit:emailForwardingPlanLimit,validateAllFields:validateAllFields}},2086:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.remove=exports.change=exports.isWpcomDefaults=exports.WPCOM_DEFAULTS=undefined;var _defineProperty2=__webpack_require__(7);var _defineProperty3=_interopRequireDefault(_defineProperty2);var _reactAddonsUpdate=__webpack_require__(96);var _reactAddonsUpdate2=_interopRequireDefault(_reactAddonsUpdate);var _reject=__webpack_require__(149);var _reject2=_interopRequireDefault(_reject);var _every=__webpack_require__(255);var _every2=_interopRequireDefault(_every);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WPCOM_DEFAULTS=["ns1.wordpress.com","ns2.wordpress.com"];function isWpcomDefaults(nameservers){if(nameservers.length===0){return false}return(0,_every2.default)(nameservers,function(nameserver){return/^ns[1-4]\.wordpress\.com$/i.test(nameserver)})}function change(nameservers,index,changed){return(0,_reactAddonsUpdate2.default)(nameservers,(0,_defineProperty3.default)({},index,{$set:changed}))}function remove(nameservers,removedIndex){return(0,_reject2.default)(nameservers,function(_,index){return index===removedIndex})}exports.WPCOM_DEFAULTS=WPCOM_DEFAULTS;exports.isWpcomDefaults=isWpcomDefaults;exports.change=change;exports.remove=remove},2133:function(module,exports,__webpack_require__){"use strict";var debug=__webpack_require__(4)("calypso:StatesList"),inherits=__webpack_require__(60),isEmpty=__webpack_require__(81),store=__webpack_require__(42);var Emitter=__webpack_require__(32),wpcom=__webpack_require__(22).undocumented();function StatesList(key){if(!(this instanceof StatesList)){return new StatesList(key)}this.key=key+"StatesList";this.initialized=false}Emitter(StatesList.prototype);StatesList.prototype.fetchForCountry=function(countryCode){if(!this.isFetching&&!isEmpty(countryCode)){debug("Fetching "+this.key+" for "+countryCode+" from api");this.isFetching=true;this.requestFromEndpoint(countryCode,function(error,data){var statesList;if(error){debug("Unable to fetch "+this.key+" for "+countryCode+" from api",error);return}statesList=data;debug(this.key+" for "+countryCode+" fetched from api successfully:",statesList);if(!this.initialized){var statesLists={};statesLists[countryCode]=statesList;this.initialize(statesLists)}else{this.data[countryCode]=statesList}this.isFetching=false;this.emit("change");store.set(this.key,this.data)}.bind(this))}};StatesList.prototype.getByCountry=function(countryCode){var data;if(!this.data){data=store.get(this.key);if(data){debug("Loaded "+this.key+" from store",data);this.initialize(data)}else{this.data={}}this.fetchForCountry(countryCode)}else if(!(countryCode in this.data)){this.fetchForCountry(countryCode)}if(countryCode in this.data){return this.data[countryCode]}else{return null}};StatesList.prototype.hasLoadedFromServer=function(){return this.initialized};StatesList.prototype.initialize=function(data){this.data=data;this.initialized=true};function DomainRegistrationStatesList(){StatesList.call(this,"DomainRegistration")}inherits(DomainRegistrationStatesList,StatesList);DomainRegistrationStatesList.prototype.requestFromEndpoint=function(countryCode,fn){return wpcom.getDomainRegistrationSupportedStates(countryCode,fn)};var domainRegistrationStatesList=new DomainRegistrationStatesList;module.exports={forDomainRegistrations:function forDomainRegistrations(){return domainRegistrationStatesList}}},2184:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);var _purchaseDetail=__webpack_require__(1478);var _purchaseDetail2=_interopRequireDefault(_purchaseDetail);var _user=__webpack_require__(37);var _user2=_interopRequireDefault(_user);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var user=(0,_user2.default)();var GoogleAppsDetails=function GoogleAppsDetails(){return _react2.default.createElement(_purchaseDetail2.default,{icon:"cog",title:_i18nCalypso2.default.translate("Finish setting up your Google Apps account"),description:_i18nCalypso2.default.translate("We emailed you at %(email)s with login information for your new Google Apps account. If you can’t find it, try a global search for “Google Apps”.",{args:{email:user.get().email}}),buttonText:_i18nCalypso2.default.translate("Learn more about Google Apps"),href:_support2.default.GOOGLE_APPS_LEARNING_CENTER,target:"_blank",requiredText:_i18nCalypso2.default.translate("Almost done! One step remaining…"),isRequired:true})};exports.default=GoogleAppsDetails;module.exports=exports["default"]},2185:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getDomainManagementUrl(_ref,domain){var slug=_ref.slug;return domain?_paths2.default.domainManagementEdit(slug,domain):_paths2.default.domainManagementList(slug)}exports.default={getDomainManagementUrl:getDomainManagementUrl};module.exports=exports["default"]},2186:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _cartValues=__webpack_require__(184);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SubscriptionText=_react2.default.createClass({displayName:"SubscriptionText",render:function render(){if(_cartValues.cartItems.hasRenewalItem(this.props.cart)){return _react2.default.createElement("span",{className:"subscription-text"},this.translate("renews annually",{context:"Informative text for renewals in /checkout"}))}return null}});exports.default=SubscriptionText;module.exports=exports["default"]},2187:function(module,exports,__webpack_require__){"use strict";var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var React=__webpack_require__(1),classNames=__webpack_require__(11),isEmpty=__webpack_require__(81),ReactDom=__webpack_require__(43),observe=__webpack_require__(146);var analytics=__webpack_require__(16),FormLabel=__webpack_require__(645),FormSelect=__webpack_require__(1484),FormInputValidation=__webpack_require__(1456),scrollIntoViewport=__webpack_require__(1659),Input=__webpack_require__(1558);module.exports=React.createClass({displayName:"StateSelect",mixins:[observe("statesList")],recordStateSelectClick:function recordStateSelectClick(){if(this.props.eventFormName){analytics.ga.recordEvent("Upgrades","Clicked "+this.props.eventFormName+" State Select")}},focus:function focus(){var node=ReactDom.findDOMNode(this.refs.input);if(node){node.focus();scrollIntoViewport(node)}else{this.refs.state.focus()}},render:function render(){var classes=classNames(this.props.additionalClasses,"state"),statesList=this.props.statesList.getByCountry(this.props.countryCode);var options=[];if(isEmpty(statesList)){return React.createElement(Input,(0,
_extends3.default)({ref:"state"},this.props))}options.push({key:"",label:this.translate("Select State"),disabled:"disabled"});options=options.concat(statesList.map(function(state){if(!state.code){return{key:"--",label:"",disabled:"disabled"}}return{key:state.code,label:state.name}}));return React.createElement("div",{className:classes},React.createElement("div",null,React.createElement(FormLabel,{htmlFor:this.props.name},this.props.label),React.createElement(FormSelect,{ref:"input",name:this.props.name,value:this.props.value,disabled:this.props.disabled,onChange:this.props.onChange,onClick:this.recordStateSelectClick,isError:this.props.isError},options.map(function(option){return React.createElement("option",{key:option.key,value:option.key,disabled:option.disabled},option.label)}))),this.props.errorMessage&&React.createElement(FormInputValidation,{text:this.props.errorMessage,isError:true}))}})},2188:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NonOwnerCard=function NonOwnerCard(_ref){var selectedDomainName=_ref.selectedDomainName;var translate=_ref.translate;return _react2.default.createElement(_notice2.default,{status:"is-warning",showDismiss:false,text:translate("These settings can be changed by the user who registered the domain {{strong}}%(domain)s{{/strong}}.",{components:{strong:_react2.default.createElement("strong",null)},args:{domain:selectedDomainName}})})};exports.default=(0,_i18nCalypso.localize)(NonOwnerCard);module.exports=exports["default"]},2189:function(module,exports,__webpack_require__){"use strict";var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DomainPrimaryFlag=_react2.default.createClass({displayName:"DomainPrimaryFlag",propTypes:{domain:_react2.default.PropTypes.object.isRequired},render:function render(){if(this.props.domain.isPrimary){return _react2.default.createElement(_notice2.default,{isCompact:true,status:"is-success"},this.translate("Primary Domain"))}return null}});module.exports=DomainPrimaryFlag},2190:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _icannVerification=__webpack_require__(2797);var _icannVerification2=_interopRequireDefault(_icannVerification);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var IcannVerificationCard=_react2.default.createClass({displayName:"IcannVerificationCard",propTypes:{handleSubmit:_react2.default.PropTypes.func.isRequired,submitting:_react2.default.PropTypes.bool.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired},getExplanation:function getExplanation(){if(this.props.explanationContext==="name-servers"){return this.translate("You must verify your email address through the ICANN "+"verification email before you are able to update the name "+"servers for your domain.")}return this.translate("Urgent. Please verify your address through the verification email as soon as possible, or your domain may be suspended.")},render:function render(){return _react2.default.createElement("div",{className:"icann-verification is-compact card"},_react2.default.createElement("div",{className:"icann-verification__explanation"},this.getExplanation()),_react2.default.createElement(_icannVerification2.default.Button,{submitting:this.props.submitting,onClick:this.props.handleSubmit}),_react2.default.createElement("div",{className:"icann-verification__explanation"},this.translate("Use this button to resend the verification email. It contains a link to verify your address. "+"{{learnMoreLink}}Learn more{{/learnMoreLink}}.",{components:{learnMoreLink:_react2.default.createElement("a",{href:_support2.default.EMAIL_VALIDATION_AND_VERIFICATION,target:"_blank"})}})))}});IcannVerificationCard=_icannVerification2.default.createContainer(IcannVerificationCard);exports.default=IcannVerificationCard;module.exports=exports["default"]},2191:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _externalLink=__webpack_require__(353);var _externalLink2=_interopRequireDefault(_externalLink);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GoogleAppsUserItem=_react2.default.createClass({displayName:"GoogleAppsUserItem",propTypes:{user:_react2.default.PropTypes.object.isRequired,onClick:_react2.default.PropTypes.func},shouldComponentUpdate:function shouldComponentUpdate(nextProps){return this.props.user!==nextProps.user||this.props.onClick!==nextProps.onClick},getLoginLink:function getLoginLink(){var _props$user=this.props.user;var email=_props$user.email;var domain=_props$user.domain;return"https://accounts.google.com/AccountChooser?Email="+email+"&service=CPanel&continue=https://admin.google.com/a/"+domain},render:function render(){return _react2.default.createElement("li",null,_react2.default.createElement("span",{className:"google-apps-user-item__email"},this.props.user.email),_react2.default.createElement(_externalLink2.default,{icon:true,className:"google-apps-user-item__manage-link",href:this.getLoginLink(),onClick:this.props.onClick,target:"_blank"},this.translate("Manage",{context:"Google Apps user item"})))}});exports.default=GoogleAppsUserItem;module.exports=exports["default"]},2192:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PRIMARY_DOMAIN_REVERT_FAIL=exports.PRIMARY_DOMAIN_REVERT_SUCCESS=exports.PRIMARY_DOMAIN_CHANGE_FAIL=exports.PRIMARY_DOMAIN_CHANGE_SUCCESS=undefined;var _symbol=__webpack_require__(772);var _symbol2=_interopRequireDefault(_symbol);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PRIMARY_DOMAIN_CHANGE_SUCCESS=exports.PRIMARY_DOMAIN_CHANGE_SUCCESS=(0,_symbol2.default)(),PRIMARY_DOMAIN_CHANGE_FAIL=exports.PRIMARY_DOMAIN_CHANGE_FAIL=(0,_symbol2.default)(),PRIMARY_DOMAIN_REVERT_SUCCESS=exports.PRIMARY_DOMAIN_REVERT_SUCCESS=(0,_symbol2.default)(),PRIMARY_DOMAIN_REVERT_FAIL=exports.PRIMARY_DOMAIN_REVERT_FAIL=(0,_symbol2.default)()},2193:function(module,exports,__webpack_require__){"use strict";var page=__webpack_require__(40),React=__webpack_require__(1);var cartItems=__webpack_require__(184).cartItems,config=__webpack_require__(10),upgradesActions=__webpack_require__(646);var AddButton=React.createClass({displayName:"AddButton",propTypes:{selectedDomainName:React.PropTypes.string.isRequired,selectedSite:React.PropTypes.oneOfType([React.PropTypes.object,React.PropTypes.bool]).isRequired},render:function render(){if(!config.isEnabled("upgrades/checkout")){return null}return React.createElement("button",{type:"button",className:"button is-primary",onClick:this.addPrivacyProtection},this.translate("Add Privacy Protection"))},addPrivacyProtection:function addPrivacyProtection(){upgradesActions.addItem(cartItems.domainPrivacyProtection({domain:this.props.selectedDomainName}));page("/checkout/"+this.props.selectedSite.slug)}});module.exports=AddButton},2194:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.displayRequestTransferCodeResponseNotice=exports.displayResponseError=undefined;var _keys=__webpack_require__(44);var _keys2=_interopRequireDefault(_keys);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _notices=__webpack_require__(71);var _notices2=_interopRequireDefault(_notices);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var displayResponseError=exports.displayResponseError=function displayResponseError(responseError){var errorMessages={unlock_domain_and_disable_private_reg_failed:(0,_i18nCalypso.translate)("The domain could not be unlocked. "+"Additionally, Privacy Protection could not be disabled. "+"The transfer will most likely fail due to these errors."),unlock_domain_failed:(0,_i18nCalypso.translate)("The domain could not be unlocked. "+"The transfer will most likely fail due to this error."),disable_private_reg_failed:(0,_i18nCalypso.translate)("Privacy Protection could not be disabled. "+"The transfer will most likely fail due to this error.")};if(responseError.error&&(0,_keys2.default)(errorMessages).indexOf(responseError.error)!==-1){_notices2.default.error((0,_i18nCalypso.translate)("An error occurred while trying to send the Domain Transfer code: {{strong}}%s{{/strong}} "+"Please {{a}}Contact Support{{/a}}.",{args:errorMessages[responseError.error],components:{strong:_react2.default.createElement("strong",null),a:_react2.default.createElement("a",{href:_support2.default.CALYPSO_CONTACT,target:"_blank"})}}))}else{_notices2.default.error((0,_i18nCalypso.translate)("An error occurred while trying to send the Domain Transfer code. "+"Please try again or {{a}}Contact Support{{/a}} if you continue "+"to have trouble.",{components:{a:_react2.default.createElement("a",{href:_support2.default.CALYPSO_CONTACT,target:"_blank"})}}))}};var displayRequestTransferCodeResponseNotice=exports.displayRequestTransferCodeResponseNotice=function displayRequestTransferCodeResponseNotice(responseError,domainStatus){if(responseError){displayResponseError(responseError);return}if(domainStatus.manualTransferRequired){_notices2.default.success((0,_i18nCalypso.translate)("The registry for your domain requires a special process for transfers. "+"Our Happiness Engineers have been notified about your transfer request and will be in touch "+"shortly to help you complete the process."))}else{_notices2.default.success((0,_i18nCalypso.translate)("We have sent the transfer authorization code to the domain registrant's email address. "+"If you don't receive the email shortly, please check your spam folder."))}}},2221:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _promise=__webpack_require__(51);var _promise2=_interopRequireDefault(_promise);exports.fetchReceipt=fetchReceipt;exports.fetchReceiptCompleted=fetchReceiptCompleted;var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _assembler=__webpack_require__(3052);var _actionTypes=__webpack_require__(3);var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function fetchReceipt(receiptId){return function(dispatch){dispatch({type:_actionTypes.RECEIPT_FETCH,receiptId:receiptId});return new _promise2.default(function(resolve,reject){_wp2.default.undocumented().me().getReceipt(receiptId,function(error,data){if(error){var errorMessage=error.message||_i18nCalypso2.default.translate("There was a problem retrieving your receipt.");dispatch({type:_actionTypes.RECEIPT_FETCH_FAILED,receiptId:receiptId,error:errorMessage});reject(errorMessage)}else{dispatch(fetchReceiptCompleted(receiptId,data));resolve()}})})}}function fetchReceiptCompleted(receiptId,data){return{type:_actionTypes.RECEIPT_FETCH_COMPLETED,receiptId:receiptId,receipt:(0,_assembler.createReceiptObject)(data)}}},2266:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var StoreConnection=__webpack_require__(1495),DnsStore=__webpack_require__(747),DomainsStore=__webpack_require__(195),observe=__webpack_require__(146),upgradesActions=__webpack_require__(646);var stores=[DomainsStore,DnsStore];function getStateFromStores(props){var domains=void 0;if(props.selectedSite){domains=DomainsStore.getBySite(props.selectedSite.ID)}return{domains:domains,dns:DnsStore.getByDomainName(props.selectedDomainName),selectedDomainName:props.selectedDomainName,selectedSite:props.selectedSite}}module.exports=React.createClass({displayName:"DnsData",propTypes:{component:React.PropTypes.func.isRequired,selectedDomainName:React.PropTypes.string.isRequired,sites:React.PropTypes.object.isRequired},mixins:[observe("sites")],componentWillMount:function componentWillMount(){this.loadDns()},componentWillUpdate:function componentWillUpdate(){this.loadDns()},loadDns:function loadDns(){upgradesActions.fetchDns(this.props.selectedDomainName)},render:function render(){return React.createElement(StoreConnection,{component:this.props.component,stores:stores,getStateFromStores:getStateFromStores,selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.sites.getSelectedSite()})}})},2267:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _store=__webpack_require__(748);var _store2=_interopRequireDefault(_store);var _storeConnection=__webpack_require__(1495);var _storeConnection2=_interopRequireDefault(_storeConnection);var _dataObserve=__webpack_require__(146);var _dataObserve2=_interopRequireDefault(_dataObserve);var _actions=__webpack_require__(646);var upgradesActions=_interopRequireWildcard(_actions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getStateFromStores(props){return{emailForwarding:_store2.default.getByDomainName(props.selectedDomainName),selectedDomainName:props.selectedDomainName,selectedSite:props.selectedSite}}var EmailForwardingData=_react2.default.createClass({displayName:"EmailForwardingData",propTypes:{component:_react2.default.PropTypes.func.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,sites:_react2.default.PropTypes.object.isRequired},mixins:[(0,_dataObserve2.default)("sites")],componentWillMount:function componentWillMount(){this.loadEmailForwarding()},componentWillUpdate:function componentWillUpdate(){this.loadEmailForwarding()},loadEmailForwarding:function loadEmailForwarding(){upgradesActions.fetchEmailForwarding(this.props.selectedDomainName)},render:function render(){return _react2.default.createElement(_storeConnection2.default,{component:this.props.component,stores:[_store2.default],getStateFromStores:getStateFromStores,selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.sites.getSelectedSite()})}});exports.default=EmailForwardingData;module.exports=exports["default"]},2268:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _storeConnection=__webpack_require__(1495);var _storeConnection2=_interopRequireDefault(_storeConnection);var _store=__webpack_require__(195);var _store2=_interopRequireDefault(_store);var _store3=__webpack_require__(663);var _store4=_interopRequireDefault(_store3);var _dataObserve=__webpack_require__(146);var _dataObserve2=_interopRequireDefault(_dataObserve);var _actions=__webpack_require__(646);var _user=__webpack_require__(37);var _user2=_interopRequireDefault(_user);var _actions2=__webpack_require__(3044);var _selectors=__webpack_require__(3045);var _plans=__webpack_require__(1459);var _actions3=__webpack_require__(671);var _selectors2=__webpack_require__(352);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var user=(0,_user2.default)();var stores=[_store2.default,_store4.default];function getStateFromStores(props){return{domains:_store2.default.getBySite(props.selectedSite.ID)||{},cart:_store4.default.get(),context:props.context,products:props.products,selectedDomainName:props.selectedDomainName,selectedSite:props.selectedSite,sitePlans:props.sitePlans,user:user.get(),googleAppsUsers:props.googleAppsUsers,googleAppsUsersLoaded:props.googleAppsUsersLoaded}}var EmailData=_react2.default.createClass({displayName:"EmailData",propTypes:{component:_react2.default.PropTypes.func.isRequired,context:_react2.default.PropTypes.object.isRequired,productsList:_react2.default.PropTypes.object.isRequired,selectedDomainName:_react2.default.PropTypes.string,sitePlans:_react2.default.PropTypes.object.isRequired,sites:_react2.default.PropTypes.object.isRequired,googleAppsUsers:_react2.default.PropTypes.array.isRequired,googleAppsUsersLoaded:_react2.default.PropTypes.bool.isRequired},mixins:[(0,_dataObserve2.default)("productsList")],componentWillMount:function componentWillMount(){this.loadDomainsAndSitePlans();this.props.fetchGoogleAppsUsers()},componentWillUpdate:function componentWillUpdate(){this.loadDomainsAndSitePlans()},loadDomainsAndSitePlans:function loadDomainsAndSitePlans(){var selectedSite=this.props.sites.getSelectedSite();if(this.prevSelectedSite!==selectedSite){(0,_actions.fetchDomains)(selectedSite.ID);this.props.fetchSitePlans(this.props.sitePlans,this.props.sites.getSelectedSite());this.prevSelectedSite=selectedSite}},render:function render(){return _react2.default.createElement(_storeConnection2.default,{domains:this.props.domains,googleAppsUsers:this.props.googleAppsUsers,googleAppsUsersLoaded:this.props.googleAppsUsersLoaded,component:this.props.component,stores:stores,getStateFromStores:getStateFromStores,products:this.props.productsList.get(),selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.sites.getSelectedSite(),sitePlans:this.props.sitePlans,context:this.props.context})}});exports.default=(0,_reactRedux.connect)(function(state,_ref){var selectedDomainName=_ref.selectedDomainName;var sites=_ref.sites;var googleAppsUsers=selectedDomainName?(0,_selectors.getByDomain)(state,selectedDomainName):(0,_selectors.getBySite)(state,sites.getSelectedSite().ID);return{googleAppsUsers:googleAppsUsers,googleAppsUsersLoaded:(0,_selectors.isLoaded)(state),sitePlans:(0,_selectors2.getPlansBySite)(state,sites.getSelectedSite())}},function(dispatch,_ref2){var selectedDomainName=_ref2.selectedDomainName;var sites=_ref2.sites;var googleAppsUsersFetcher=selectedDomainName?function(){return(0,_actions2.fetchByDomain)(selectedDomainName)}:function(){return(0,_actions2.fetchBySiteId)(sites.getSelectedSite().ID)};return{fetchGoogleAppsUsers:function fetchGoogleAppsUsers(){return dispatch(googleAppsUsersFetcher())},fetchSitePlans:function fetchSitePlans(sitePlans,site){if((0,_plans.shouldFetchSitePlans)(sitePlans,site)){dispatch((0,_actions3.fetchSitePlans)(site.ID))}}}})(EmailData);module.exports=exports["default"]},2269:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _reactRedux=__webpack_require__(21);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _storeConnection=__webpack_require__(1495);var _storeConnection2=_interopRequireDefault(_storeConnection);var _store=__webpack_require__(195);var _store2=_interopRequireDefault(_store);var _store3=__webpack_require__(663);var _store4=_interopRequireDefault(_store3);var _dataObserve=__webpack_require__(146);var _dataObserve2=_interopRequireDefault(_dataObserve);var _actions=__webpack_require__(646);var upgradesActions=_interopRequireWildcard(_actions);var _querySitePlans=__webpack_require__(707);var _querySitePlans2=_interopRequireDefault(_querySitePlans);var _selectors=__webpack_require__(352);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var stores=[_store2.default,_store4.default];function getStateFromStores(props){return{cart:_store4.default.get(),context:props.context,domains:props.selectedSite?_store2.default.getBySite(props.selectedSite.ID):null,products:props.products,selectedDomainName:props.selectedDomainName,selectedSite:props.selectedSite,sitePlans:props.sitePlans}}var DomainManagementData=_react2.default.createClass({displayName:"DomainManagementData",propTypes:{context:_react2.default.PropTypes.object.isRequired,productsList:_react2.default.PropTypes.object.isRequired,selectedDomainName:_react2.default.PropTypes.string,sites:_react2.default.PropTypes.object.isRequired,sitePlans:_react2.default.PropTypes.object.isRequired},mixins:[(0,_dataObserve2.default)("productsList")],componentWillMount:function componentWillMount(){if(this.props.sites.getSelectedSite()){upgradesActions.fetchDomains(this.props.sites.getSelectedSite().ID)}this.prevSelectedSite=this.props.sites.getSelectedSite()},componentWillUpdate:function componentWillUpdate(){if(this.prevSelectedSite!==this.props.sites.getSelectedSite()){upgradesActions.fetchDomains(this.props.sites.getSelectedSite().ID)}this.prevSelectedSite=this.props.sites.getSelectedSite()},render:function render(){var selectedSite=this.props.sites.getSelectedSite();return _react2.default.createElement("div",null,_react2.default.createElement(_storeConnection2.default,{component:this.props.component,stores:stores,getStateFromStores:getStateFromStores,products:this.props.productsList.get(),selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.sites.getSelectedSite(),sitePlans:this.props.sitePlans,context:this.props.context}),selectedSite&&_react2.default.createElement(_querySitePlans2.default,{siteId:selectedSite.ID}))}});exports.default=(0,_reactRedux.connect)(function(state,props){return{sitePlans:(0,_selectors.getPlansBySite)(state,props.sites.getSelectedSite())}})(DomainManagementData);module.exports=exports["default"]},2270:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _store=__webpack_require__(195);var _store2=_interopRequireDefault(_store);var _store3=__webpack_require__(749);var _store4=_interopRequireDefault(_store3);var _dataObserve=__webpack_require__(146);var _dataObserve2=_interopRequireDefault(_dataObserve);var _storeConnection=__webpack_require__(1495);var _storeConnection2=_interopRequireDefault(_storeConnection);var _actions=__webpack_require__(646);var upgradesActions=_interopRequireWildcard(_actions);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var stores=[_store2.default,_store4.default];function getStateFromStores(props){var domains=void 0;if(props.selectedSite){domains=_store2.default.getBySite(props.selectedSite.ID)}return{domains:domains,nameservers:_store4.default.getByDomainName(props.selectedDomainName),selectedDomainName:props.selectedDomainName,selectedSite:props.selectedSite}}var NameserversData=_react2.default.createClass({displayName:"NameserversData",propTypes:{component:_react2.default.PropTypes.func.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,sites:_react2.default.PropTypes.object.isRequired},mixins:[(0,_dataObserve2.default)("sites")],componentWillMount:function componentWillMount(){this.loadDomains();this.loadNameservers()},componentWillUpdate:function componentWillUpdate(){this.loadDomains();this.loadNameservers()},loadDomains:function loadDomains(){var selectedSite=this.props.sites.getSelectedSite();if(this.prevSelectedSite!==selectedSite){upgradesActions.fetchDomains(selectedSite.ID);this.prevSelectedSite=selectedSite}},loadNameservers:function loadNameservers(){upgradesActions.fetchNameservers(this.props.selectedDomainName)},render:function render(){return _react2.default.createElement(_storeConnection2.default,{component:this.props.component,stores:stores,getStateFromStores:getStateFromStores,selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.sites.getSelectedSite()})}});exports.default=NameserversData;module.exports=exports["default"]},2271:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _storeConnection=__webpack_require__(1495);var _storeConnection2=_interopRequireDefault(_storeConnection);var _store=__webpack_require__(195);var _store2=_interopRequireDefault(_store);var _dataObserve=__webpack_require__(146);var _dataObserve2=_interopRequireDefault(_dataObserve);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var stores=[_store2.default];function getStateFromStores(props){var domains=void 0;if(props.selectedSite){domains=_store2.default.getBySite(props.selectedSite.ID)}return{domains:domains,selectedDomainName:props.selectedDomainName,selectedSite:props.selectedSite}}exports.default=_react2.default.createClass({displayName:"PrimaryDomainData",propTypes:{component:_react2.default.PropTypes.func.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,sites:_react2.default.PropTypes.object.isRequired},mixins:[(0,_dataObserve2.default)("sites")],render:function render(){return _react2.default.createElement(_storeConnection2.default,{component:this.props.component,stores:stores,getStateFromStores:getStateFromStores,selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.sites.getSelectedSite()})}});module.exports=exports["default"]},2272:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var StoreConnection=__webpack_require__(1495),SiteRedirectStore=__webpack_require__(2378),observe=__webpack_require__(146);var stores=[SiteRedirectStore];function getStateFromStores(props){return{location:SiteRedirectStore.getBySite(props.selectedSite.domain),selectedDomainName:props.selectedDomainName,selectedSite:props.selectedSite}}module.exports=React.createClass({displayName:"SiteRedirectData",propTypes:{component:React.PropTypes.func.isRequired,selectedDomainName:React.PropTypes.string.isRequired,sites:React.PropTypes.object.isRequired},mixins:[observe("sites")],render:function render(){return React.createElement(StoreConnection,{component:this.props.component,stores:stores,getStateFromStores:getStateFromStores,selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.sites.getSelectedSite()})}})},2273:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _store=__webpack_require__(195);var _store2=_interopRequireDefault(_store);var _storeConnection=__webpack_require__(1495);var _storeConnection2=_interopRequireDefault(_storeConnection);var _store3=__webpack_require__(750);var _store4=_interopRequireDefault(_store3);var _actions=__webpack_require__(646);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var stores=[_store2.default,_store4.default];function getStateFromStores(props){var domains=void 0;if(props.selectedSite){domains=_store2.default.getBySite(props.selectedSite.ID)}return{domains:domains,selectedDomainName:props.selectedDomainName,selectedSite:props.selectedSite,wapiDomainInfo:_store4.default.getByDomainName(props.selectedDomainName)}}var TransferData=_react2.default.createClass({displayName:"TransferData",propTypes:{component:_react2.default.PropTypes.func.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,sites:_react2.default.PropTypes.object.isRequired},componentWillMount:function componentWillMount(){this.loadDomains();this.loadWapiDomainInfo()},componentWillUpdate:function componentWillUpdate(){this.loadDomains();this.loadWapiDomainInfo()},loadDomains:function loadDomains(){var selectedSite=this.props.sites.getSelectedSite();if(this.prevSelectedSite!==selectedSite){(0,_actions.fetchDomains)(selectedSite.ID);this.prevSelectedSite=selectedSite}},loadWapiDomainInfo:function loadWapiDomainInfo(){(0,_actions.fetchWapiDomainInfo)(this.props.selectedDomainName)},render:function render(){return _react2.default.createElement(_storeConnection2.default,{component:this.props.component,stores:stores,getStateFromStores:getStateFromStores,selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.sites.getSelectedSite()})}});exports.default=TransferData;module.exports=exports["default"]},2274:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var StoreConnection=__webpack_require__(1495),DomainsStore=__webpack_require__(195),WhoisStore=__webpack_require__(751),observe=__webpack_require__(146),upgradesActions=__webpack_require__(646);var stores=[DomainsStore,WhoisStore];function getStateFromStores(props){var domains=void 0;if(props.selectedSite){domains=DomainsStore.getBySite(props.selectedSite.ID)}return{domains:domains,whois:WhoisStore.getByDomainName(props.selectedDomainName),products:props.products,selectedDomainName:props.selectedDomainName,selectedSite:props.selectedSite,context:props.context}}module.exports=React.createClass({displayName:"WhoisData",propTypes:{component:React.PropTypes.func.isRequired,context:React.PropTypes.object.isRequired,productsList:React.PropTypes.object.isRequired,selectedDomainName:React.PropTypes.string.isRequired,sites:React.PropTypes.object.isRequired},mixins:[observe("productsList")],componentWillMount:function componentWillMount(){this.loadDomains();this.loadWhois()},componentWillUpdate:function componentWillUpdate(){this.loadDomains();this.loadWhois()},loadDomains:function loadDomains(){var selectedSite=this.props.sites.getSelectedSite();if(this.prevSelectedSite!==selectedSite){upgradesActions.fetchDomains(selectedSite.ID);this.prevSelectedSite=selectedSite}},loadWhois:function loadWhois(){upgradesActions.fetchWhois(this.props.selectedDomainName)},render:function render(){return React.createElement(StoreConnection,{component:this.props.component,stores:stores,getStateFromStores:getStateFromStores,products:this.props.productsList.get(),selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.sites.getSelectedSite(),context:this.props.context})}})},2375:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getExitCheckoutUrl=getExitCheckoutUrl;var _cartValues=__webpack_require__(184);var _paths=__webpack_require__(652);function getExitCheckoutUrl(cart,siteSlug){var url="/plans/";if(_cartValues.cartItems.hasRenewalItem(cart)){var renewalItem=_cartValues.cartItems.getRenewalItems(cart)[0];return(0,_paths.managePurchase)(renewalItem.extra.purchaseDomain,renewalItem.extra.purchaseId)}if(_cartValues.cartItems.hasDomainRegistration(cart)){url="/domains/add/"}else if(_cartValues.cartItems.hasDomainMapping(cart)){url="/domains/add/mapping/"}else if(_cartValues.cartItems.hasProduct(cart,"offsite_redirect")){url="/domains/add/site-redirect/"}else if(_cartValues.cartItems.hasProduct(cart,"premium_theme")){url="/design/"}return url+siteSlug;
}},2377:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.reducer=exports.getInitialStateForSite=undefined;var _defineProperty2=__webpack_require__(7);var _defineProperty3=_interopRequireDefault(_defineProperty2);var _reactAddonsUpdate=__webpack_require__(96);var _reactAddonsUpdate2=_interopRequireDefault(_reactAddonsUpdate);var _constants=__webpack_require__(64);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function updateStateForSite(state,siteId,data){var command=state[siteId]?"$merge":"$set";return(0,_reactAddonsUpdate2.default)(state,(0,_defineProperty3.default)({},siteId,(0,_defineProperty3.default)({},command,data)))}function getInitialStateForSite(){return{isFetching:false,isUpdating:false,notice:null,value:null}}function reducer(state,payload){var action=payload.action;switch(action.type){case _constants.action.SITE_REDIRECT_NOTICE_CLOSE:state=updateStateForSite(state,action.siteId,{notice:null});break;case _constants.action.SITE_REDIRECT_FETCH:state=updateStateForSite(state,action.siteId,{isFetching:true});break;case _constants.action.SITE_REDIRECT_FETCH_COMPLETED:state=updateStateForSite(state,action.siteId,{isFetching:false,notice:null,value:action.location});break;case _constants.action.SITE_REDIRECT_FETCH_FAILED:state=updateStateForSite(state,action.siteId,{isFetching:false,notice:{error:true,text:action.error}});break;case _constants.action.SITE_REDIRECT_UPDATE:state=updateStateForSite(state,action.siteId,{isUpdating:true});break;case _constants.action.SITE_REDIRECT_UPDATE_COMPLETED:state=updateStateForSite(state,action.siteId,{isUpdating:false,notice:{success:true,text:action.success},value:action.location});break;case _constants.action.SITE_REDIRECT_UPDATE_FAILED:state=updateStateForSite(state,action.siteId,{isUpdating:false,notice:{error:true,text:action.error}});break}return state}exports.getInitialStateForSite=getInitialStateForSite;exports.reducer=reducer},2378:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _store=__webpack_require__(86);var _reducer=__webpack_require__(2377);var SiteRedirectStore=(0,_store.createReducerStore)(_reducer.reducer);SiteRedirectStore.getBySite=function(siteId){var state=this.get();if(!state[siteId]){return(0,_reducer.getInitialStateForSite)()}return state[siteId]};exports.default=SiteRedirectStore;module.exports=exports["default"]},2436:function(module,exports,__webpack_require__){"use strict";var debug=__webpack_require__(4)("calypso:siftscience");var loadScript=__webpack_require__(198),user=__webpack_require__(37),config=__webpack_require__(10);var SIFTSCIENCE_URL="https://cdn.siftscience.com/s.js",hasLoaded=false;if(!window._sift){window._sift=[]}module.exports={recordUser:function recordUser(){if(!hasLoaded){window._sift.push(["_setAccount",config("siftscience_key")]);window._sift.push(["_setUserId",user().get().ID]);window._sift.push(["_trackPageview"]);hasLoaded=true;loadScript.loadScript(SIFTSCIENCE_URL,function(error){if(error){debug("Error loading siftscience")}else{debug("siftscience loaded successfully")}})}}}},2449:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof2=__webpack_require__(31);var _typeof3=_interopRequireDefault(_typeof2);exports.displayError=displayError;exports.displaySubmitting=displaySubmitting;exports.clear=clear;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _flatten=__webpack_require__(355);var _flatten2=_interopRequireDefault(_flatten);var _values=__webpack_require__(188);var _values2=_interopRequireDefault(_values);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _notices=__webpack_require__(71);var _notices2=_interopRequireDefault(_notices);var _validationErrorList=__webpack_require__(1732);var _validationErrorList2=_interopRequireDefault(_validationErrorList);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getErrorFromApi(errorMessage){if(errorMessage){var errorArray=errorMessage.split(/<a href="(.+)">(.+)<\/a>/);if(errorArray.length===4){var errorText1=errorArray[0],errorUrl=errorArray[1],errorLinkText=errorArray[2],errorText2=errorArray[3];return _react2.default.createElement("span",null,errorText1," ",_react2.default.createElement("a",{href:errorUrl},errorLinkText)," ",errorText2)}return errorMessage}return _i18nCalypso2.default.translate("There was a problem completing the checkout. Please try again.")}function displayError(error){if((0,_typeof3.default)(error.message)==="object"){_notices2.default.error(_react2.default.createElement(_validationErrorList2.default,{messages:(0,_flatten2.default)((0,_values2.default)(error.message))}))}else{_notices2.default.error(getErrorFromApi(error.message))}}function displaySubmitting(_ref){var isFreeCart=_ref.isFreeCart;_notices2.default.info(isFreeCart?_i18nCalypso2.default.translate("Submitting"):_i18nCalypso2.default.translate("Submitting payment"))}function clear(){_notices2.default.clearNotices("notices")}},2765:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _reactRedux=__webpack_require__(21);var _find=__webpack_require__(33);var _find2=_interopRequireDefault(_find);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _cartAd=__webpack_require__(1667);var _cartAd2=_interopRequireDefault(_cartAd);var _cartValues=__webpack_require__(184);var _actions=__webpack_require__(671);var _selectors=__webpack_require__(352);var _productsValues=__webpack_require__(80);var _plans=__webpack_require__(1459);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CartPlanDiscountAd=_react2.default.createClass({displayName:"CartPlanDiscountAd",propTypes:{cart:_react2.default.PropTypes.object,sitePlans:_react2.default.PropTypes.object},componentDidMount:function componentDidMount(){this.props.fetchSitePlans(this.props.sitePlans,this.props.selectedSite)},render:function render(){var _props=this.props;var cart=_props.cart;var sitePlans=_props.sitePlans;var plan=void 0;if(!sitePlans.hasLoadedFromServer||!cart.hasLoadedFromServer||!_cartValues.cartItems.hasPlan(cart)){return null}if(_cartValues.cartItems.getAll(cart).some(_productsValues.isPersonal)){plan=(0,_find2.default)(sitePlans.data,_productsValues.isPersonal)}if(_cartValues.cartItems.getAll(cart).some(_productsValues.isPremium)){plan=(0,_find2.default)(sitePlans.data,_productsValues.isPremium)}if(_cartValues.cartItems.getAll(cart).some(_productsValues.isBusiness)){plan=(0,_find2.default)(sitePlans.data,_productsValues.isBusiness)}if(plan.rawDiscount===0){return null}return _react2.default.createElement(_cartAd2.default,null,_react2.default.createElement("strong",null,_i18nCalypso2.default.translate("You're saving %(discount)s!",{args:{discount:plan.formattedDiscount}}))," ",plan.discountReason)}});exports.default=(0,_reactRedux.connect)(function(state,_ref){var selectedSite=_ref.selectedSite;return{sitePlans:(0,_selectors.getPlansBySite)(state,selectedSite)}},function(dispatch){return{fetchSitePlans:function fetchSitePlans(sitePlans,site){if((0,_plans.shouldFetchSitePlans)(sitePlans,site)){dispatch((0,_actions.fetchSitePlans)(site.ID))}}}})(CartPlanDiscountAd);module.exports=exports["default"]},2766:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var CartSummaryBar=React.createClass({displayName:"CartSummaryBar",render:function render(){var itemCount=this.props.itemCount,text;text=this.translate("Cart");if(this.props.showItemCount&&itemCount){text=this.translate("Cart - %(count)d item","Cart - %(count)d items",{count:itemCount,args:{count:itemCount}})}return React.createElement("div",{className:"cart-summary-bar "+this.props.additionalClasses,onClick:this.toggleVisibility},text)},toggleVisibility:function toggleVisibility(event){event.preventDefault();if(this.props.onClick){this.props.onClick(event)}}});module.exports=CartSummaryBar},2767:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var CartBody=__webpack_require__(1821),CartMessagesMixin=__webpack_require__(1822),CartSummaryBar=__webpack_require__(2766),CartPlanAd=__webpack_require__(1823),CartPlanDiscountAd=__webpack_require__(2765),Sidebar=__webpack_require__(675),observe=__webpack_require__(146);var SecondaryCart=React.createClass({displayName:"SecondaryCart",mixins:[CartMessagesMixin,observe("sites")],render:function render(){var _props=this.props;var cart=_props.cart;var selectedSite=_props.selectedSite;return React.createElement(Sidebar,{className:"secondary-cart"},React.createElement(CartSummaryBar,{additionalClasses:"cart-header"}),React.createElement(CartPlanAd,{selectedSite:selectedSite,cart:cart}),React.createElement(CartBody,{cart:cart,selectedSite:selectedSite,showCoupon:true}),React.createElement(CartPlanDiscountAd,{cart:cart,selectedSite:selectedSite}))}});module.exports=SecondaryCart},2768:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _paths=__webpack_require__(356);var _paths2=_interopRequireDefault(_paths);var _purchaseDetail=__webpack_require__(1478);var _purchaseDetail2=_interopRequireDefault(_purchaseDetail);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ChargebackDetails=function ChargebackDetails(_ref){var selectedSite=_ref.selectedSite;return _react2.default.createElement(_purchaseDetail2.default,{icon:"create",title:_i18nCalypso2.default.translate("Get back to posting"),description:_i18nCalypso2.default.translate("You can now use the full features of your site, without limits."),buttonText:_i18nCalypso2.default.translate("Write a Post"),href:_paths2.default.newPost(selectedSite)})};ChargebackDetails.propTypes={selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.bool,_react2.default.PropTypes.object]).isRequired};exports.default=ChargebackDetails;module.exports=exports["default"]},2769:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _purchaseDetail=__webpack_require__(1478);var _purchaseDetail2=_interopRequireDefault(_purchaseDetail);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DomainMappingDetails=function DomainMappingDetails(_ref){var domain=_ref.domain;var registrarSupportUrl=_ref.registrarSupportUrl;var registrarSupportLink=registrarSupportUrl?_react2.default.createElement("a",{target:"_blank",href:registrarSupportUrl}):_react2.default.createElement("span",null);var description=_react2.default.createElement("div",null,_react2.default.createElement("p",null,_i18nCalypso2.default.translate("The domain {{em}}%(domain)s{{/em}} still has to be configured to work with WordPress.com.",{args:{domain:domain},components:{em:_react2.default.createElement("em",null)}})),_react2.default.createElement("p",null,_i18nCalypso2.default.translate("You will need to log into {{registrarSupportLink}}your registrar's site{{/registrarSupportLink}} "+'and change the "Name Servers" to:',{components:{registrarSupportLink:registrarSupportLink}})),_react2.default.createElement("ul",{className:"checkout-thank-you__domain-mapping-details-nameservers"},_react2.default.createElement("li",null,"ns1.wordpress.com"),_react2.default.createElement("li",null,"ns2.wordpress.com"),_react2.default.createElement("li",null,"ns3.wordpress.com")),_react2.default.createElement("p",null,_i18nCalypso2.default.translate("Once you make the change, just wait a few hours and the domain should start loading your site automatically.")));return _react2.default.createElement("div",{className:"checkout-thank-you__domain-mapping-details"},_react2.default.createElement(_purchaseDetail2.default,{icon:"cog",title:_i18nCalypso2.default.translate("Finish setting up your domain"),description:description,buttonText:_i18nCalypso2.default.translate("Learn more"),href:_support2.default.MAP_EXISTING_DOMAIN,target:"_blank",requiredText:_i18nCalypso2.default.translate("Almost done! One step remaining…"),isRequired:true}))};exports.default=DomainMappingDetails;module.exports=exports["default"]},2770:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _utils=__webpack_require__(2185);var _googleAppsDetails=__webpack_require__(2184);var _googleAppsDetails2=_interopRequireDefault(_googleAppsDetails);var _productsValues=__webpack_require__(80);var _purchaseDetail=__webpack_require__(1478);var _purchaseDetail2=_interopRequireDefault(_purchaseDetail);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DomainRegistrationDetails=function DomainRegistrationDetails(_ref){var selectedSite=_ref.selectedSite;var domain=_ref.domain;var purchases=_ref.purchases;var googleAppsWasPurchased=purchases.some(_productsValues.isGoogleApps),domainContactEmailVerified=purchases.some(function(purchase){return purchase.isEmailVerified}),hasOtherPrimaryDomain=selectedSite.options&&selectedSite.options.is_mapped_domain&&selectedSite.domain!==domain;return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:"checkout-thank-you__domain-registration-details-compact"},!domainContactEmailVerified&&_react2.default.createElement(_purchaseDetail2.default,{icon:"mail",title:_i18nCalypso2.default.translate("Verify your email address"),description:_i18nCalypso2.default.translate("We sent you an email with a request to verify your new domain. Unverified domains may be suspended."),buttonText:_i18nCalypso2.default.translate("Learn more about verifying your domain"),href:_support2.default.EMAIL_VALIDATION_AND_VERIFICATION,target:"_blank",requiredText:_i18nCalypso2.default.translate("Important! Your action is required."),isRequired:true}),googleAppsWasPurchased&&_react2.default.createElement(_googleAppsDetails2.default,{isRequired:true})),_react2.default.createElement(_purchaseDetail2.default,{icon:"time",title:_i18nCalypso2.default.translate("When will it be ready?",{comment:'"it" refers to a domain'}),description:_i18nCalypso2.default.translate("Your domain should start working immediately, but may be unreliable during the first 72 hours."),buttonText:_i18nCalypso2.default.translate("Learn more about your domain"),href:_support2.default.REGISTER_DOMAIN,target:"_blank"}),hasOtherPrimaryDomain&&_react2.default.createElement(_purchaseDetail2.default,{icon:"globe",title:_i18nCalypso2.default.translate("Your primary domain"),description:_i18nCalypso2.default.translate("Your existing domain, {{em}}%(domain)s{{/em}}, is the domain visitors see when they visit your site. "+"All other custom domains redirect to the primary domain.",{args:{domain:selectedSite.domain},components:{em:_react2.default.createElement("em",null)}}),buttonText:_i18nCalypso2.default.translate("Change primary domain"),href:(0,_utils.getDomainManagementUrl)(selectedSite,domain)}))};DomainRegistrationDetails.propTypes={domain:_react2.default.PropTypes.string.isRequired,purchases:_react2.default.PropTypes.array.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.bool,_react2.default.PropTypes.object]).isRequired};exports.default=DomainRegistrationDetails;module.exports=exports["default"]},2771:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _productsValues=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FeaturesHeader=function FeaturesHeader(_ref){var isDataLoaded=_ref.isDataLoaded;var isGenericReceipt=_ref.isGenericReceipt;var purchases=_ref.purchases;var classes=(0,_classnames2.default)("checkout-thank-you__features-header",{"is-placeholder":!isDataLoaded});if(!isDataLoaded){return _react2.default.createElement("div",{className:classes})}if(isGenericReceipt){return _react2.default.createElement("div",null)}var shouldHideFeaturesHeading=purchases.some(_productsValues.isGoogleApps)||purchases.some(_productsValues.isDomainRegistration)||purchases.some(_productsValues.isDomainMapping)||purchases.some(_productsValues.isGuidedTransfer);if(shouldHideFeaturesHeading){return _react2.default.createElement("div",null)}return _react2.default.createElement("div",{className:classes},_i18nCalypso2.default.translate("What now?"))};FeaturesHeader.propTypes={isDataLoaded:_react2.default.PropTypes.bool.isRequired,isGenericReceipt:_react2.default.PropTypes.bool,purchases:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.bool,_react2.default.PropTypes.array])};exports.default=FeaturesHeader;module.exports=exports["default"]},2772:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);var _purchaseDetail=__webpack_require__(1478);var _purchaseDetail2=_interopRequireDefault(_purchaseDetail);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GuidedTransferDetails=function GuidedTransferDetails(_ref){var translate=_ref.translate;return _react2.default.createElement(_purchaseDetail2.default,{icon:"time",title:translate("When will it be ready?"),description:translate("A Guided Transfer occurs over a 24 hour period. A Happiness Engineer "+"will work with you to set up a day (during the work week) to perform "+"the transfer."),buttonText:translate("Learn more about Guided Transfers"),href:_support2.default.GUIDED_TRANSFER,target:"_blank"})};exports.default=(0,_i18nCalypso.localize)(GuidedTransferDetails);module.exports=exports["default"]},2773:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _productsValues=__webpack_require__(80);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CheckoutThankYouHeader=_react2.default.createClass({displayName:"CheckoutThankYouHeader",propTypes:{isDataLoaded:_react2.default.PropTypes.bool.isRequired,primaryPurchase:_react2.default.PropTypes.object},getHeading:function getHeading(){if(!this.props.isDataLoaded){return this.translate("Loading…")}if(this.props.primaryPurchase&&(0,_productsValues.isChargeback)(this.props.primaryPurchase)){return this.translate("Thank you!")}return this.translate("Thank you for your purchase!")},getText:function getText(){if(!this.props.isDataLoaded||!this.props.primaryPurchase){return this.translate("You will receive an email confirmation shortly.")}if((0,_productsValues.isPlan)(this.props.primaryPurchase)){return this.translate("Your site is now on the {{strong}}%(productName)s{{/strong}} plan. "+"It's doing somersaults in excitement!",{args:{productName:this.props.primaryPurchase.productName},components:{strong:_react2.default.createElement("strong",null)}})}if((0,_productsValues.isDomainRegistration)(this.props.primaryPurchase)){return this.translate("Your new domain {{strong}}%(domainName)s{{/strong}} is "+"being set up. Your site is doing somersaults in excitement!",{args:{domainName:this.props.primaryPurchase.meta},components:{strong:_react2.default.createElement("strong",null)}})}if((0,_productsValues.isDomainMapping)(this.props.primaryPurchase)){return this.translate("Your domain {{strong}}%(domainName)s{{/strong}} was added to your site. "+"But it isn't working yet – follow the instructions below to complete the set up.",{args:{domainName:this.props.primaryPurchase.meta},components:{strong:_react2.default.createElement("strong",null)}})}if((0,_productsValues.isGoogleApps)(this.props.primaryPurchase)){return this.translate("Your domain {{strong}}%(domainName)s{{/strong}} is now set up to use Google Apps. "+"It's doing somersaults in excitement!",{args:{domainName:this.props.primaryPurchase.meta},components:{strong:_react2.default.createElement("strong",null)}})}if((0,_productsValues.isGuidedTransfer)(this.props.primaryPurchase)){if(typeof this.props.primaryPurchase.meta==="string"){return this.translate("The guided transfer for {{strong}}%(siteName)s{{/strong}} "+"will begin very soon. We will be in touch with you via email.",{args:{siteName:this.props.primaryPurchase.meta},components:{strong:_react2.default.createElement("strong",null)}})}return this.translate("The guided transfer for your site will "+"begin very soon. We will be in touch with you via email.",{components:{strong:_react2.default.createElement("strong",null)}})}if((0,_productsValues.isSiteRedirect)(this.props.primaryPurchase)){return this.translate("Your site is now redirecting to {{strong}}%(domainName)s{{/strong}}. "+"It's doing somersaults in excitement!",{args:{domainName:this.props.primaryPurchase.meta},components:{strong:_react2.default.createElement("strong",null)}})}if((0,_productsValues.isChargeback)(this.props.primaryPurchase)){return this.translate("Your chargeback fee is paid. Your site is doing somersaults in excitement!")}return this.translate("You will receive an email confirmation shortly for your purchase of {{strong}}%(productName)s{{/strong}}. What's next?",{args:{productName:this.props.primaryPurchase.productName},components:{strong:_react2.default.createElement("strong",null)}})},render:function render(){var classes={"checkout-thank-you__header":true,"is-placeholder":!this.props.isDataLoaded};return _react2.default.createElement("div",{className:(0,_classnames2.default)(classes)},_react2.default.createElement("div",{className:"checkout-thank-you__header-content"},_react2.default.createElement("span",{className:"checkout-thank-you__header-icon"},_react2.default.createElement(_gridicon2.default,{icon:"trophy",size:72})),_react2.default.createElement("div",{className:"checkout-thank-you__header-copy"},_react2.default.createElement("h1",{className:"checkout-thank-you__header-heading"},this.getHeading()),_react2.default.createElement("h2",{className:"checkout-thank-you__header-text"},this.getText()))))}});exports.default=CheckoutThankYouHeader;module.exports=exports["default"]},2774:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray2=__webpack_require__(262);var _slicedToArray3=_interopRequireDefault(_slicedToArray2);var _toConsumableArray2=__webpack_require__(46);var _toConsumableArray3=_interopRequireDefault(_toConsumableArray2);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _reactRedux=__webpack_require__(21);var _find=__webpack_require__(33);var _find2=_interopRequireDefault(_find);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _actions=__webpack_require__(1508);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _chargebackDetails=__webpack_require__(2768);var _chargebackDetails2=_interopRequireDefault(_chargebackDetails);var _featuresHeader=__webpack_require__(2771);var _featuresHeader2=_interopRequireDefault(_featuresHeader);var _header=__webpack_require__(2773);var _header2=_interopRequireDefault(_header);var _domainMappingDetails=__webpack_require__(2769);var _domainMappingDetails2=_interopRequireDefault(_domainMappingDetails);var _domainRegistrationDetails=__webpack_require__(2770);var _domainRegistrationDetails2=_interopRequireDefault(_domainRegistrationDetails);var _actions2=__webpack_require__(2221);var _actions3=__webpack_require__(671);var _selectors=__webpack_require__(352);var _selectors2=__webpack_require__(3053);var _googleAppsDetails=__webpack_require__(2184);var _googleAppsDetails2=_interopRequireDefault(_googleAppsDetails);var _guidedTransferDetails=__webpack_require__(2772);var _guidedTransferDetails2=_interopRequireDefault(_guidedTransferDetails);var _happinessSupport=__webpack_require__(1870);var _happinessSupport2=_interopRequireDefault(_happinessSupport);var _headerCake=__webpack_require__(1460);var _headerCake2=_interopRequireDefault(_headerCake);var _productsValues=__webpack_require__(80);var _jetpackPlanDetails=__webpack_require__(2775);var _jetpackPlanDetails2=_interopRequireDefault(_jetpackPlanDetails);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _personalPlanDetails=__webpack_require__(1968);var _personalPlanDetails2=_interopRequireDefault(_personalPlanDetails);var _premiumPlanDetails=__webpack_require__(1969);var _premiumPlanDetails2=_interopRequireDefault(_premiumPlanDetails);var _businessPlanDetails=__webpack_require__(1965);var _businessPlanDetails2=_interopRequireDefault(_businessPlanDetails);var _purchaseDetail=__webpack_require__(1478);var _purchaseDetail2=_interopRequireDefault(_purchaseDetail);var _plans=__webpack_require__(1459);var _siteRedirectDetails=__webpack_require__(2776);var _siteRedirectDetails2=_interopRequireDefault(_siteRedirectDetails);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getPurchases(props){return props.receipt.data.purchases}function findPurchaseAndDomain(purchases,predicate){var purchase=(0,_find2.default)(purchases,predicate);return[purchase,purchase.meta]}var CheckoutThankYou=_react2.default.createClass({displayName:"CheckoutThankYou",propTypes:{productsList:_react2.default.PropTypes.object.isRequired,receiptId:_react2.default.PropTypes.number,selectedFeature:_react2.default.PropTypes.string,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.bool,_react2.default.PropTypes.object]).isRequired},componentDidMount:function componentDidMount(){this.redirectIfThemePurchased();if(this.props.receipt.hasLoadedFromServer&&this.hasPlanOrDomainProduct()){this.props.refreshSitePlans(this.props.selectedSite)}else if((0,_plans.shouldFetchSitePlans)(this.props.sitePlans,this.props.selectedSite)){this.props.fetchSitePlans(this.props.selectedSite)}if(this.props.receiptId&&!this.props.receipt.hasLoadedFromServer&&!this.props.receipt.isRequesting){this.props.fetchReceipt(this.props.receiptId)}_analytics2.default.tracks.recordEvent("calypso_checkout_thank_you_view");window.scrollTo(0,0)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){this.redirectIfThemePurchased();if(!this.props.receipt.hasLoadedFromServer&&nextProps.receipt.hasLoadedFromServer&&this.hasPlanOrDomainProduct(nextProps)){this.props.refreshSitePlans(this.props.selectedSite.ID)}},hasPlanOrDomainProduct:function hasPlanOrDomainProduct(){var props=arguments.length<=0||arguments[0]===undefined?this.props:arguments[0];return getPurchases(props).some(function(purchase){return(0,_productsValues.isPlan)(purchase)||(0,_productsValues.isDomainProduct)(purchase)})},isDataLoaded:function isDataLoaded(){if(this.isGenericReceipt()){return true}return this.props.sitePlans.hasLoadedFromServer&&this.props.receipt.hasLoadedFromServer},isGenericReceipt:function isGenericReceipt(){return!this.props.receiptId},redirectIfThemePurchased:function redirectIfThemePurchased(){if(this.props.receipt.hasLoadedFromServer&&getPurchases(this.props).every(_productsValues.isTheme)){this.props.activatedTheme(getPurchases(this.props)[0].meta,this.props.selectedSite);_page2.default.redirect("/design/"+this.props.selectedSite.slug)}},goBack:function goBack(){if(this.isDataLoaded()&&!this.isGenericReceipt()){var purchases=getPurchases(this.props);var site=this.props.selectedSite.slug;if(purchases.some(_productsValues.isPlan)){(0,_page2.default)("/plans/my-plan/"+site)}else if(purchases.some(_productsValues.isDomainProduct)||purchases.some(_productsValues.isDomainRedemption||purchases.some(_productsValues.isSiteRedirect))){(0,_page2.default)(_paths2.default.domainManagementList(this.props.selectedSite.slug))}else if(purchases.some(_productsValues.isGoogleApps)){var purchase=(0,_find2.default)(purchases,_productsValues.isGoogleApps);(0,_page2.default)(_paths2.default.domainManagementEmail(this.props.selectedSite.slug,purchase.meta))}}else{(0,_page2.default)("/stats/insights/"+this.props.selectedSite.slug)}},render:function render(){var classes=(0,_classnames2.default)("checkout-thank-you",{"is-placeholder":!this.isDataLoaded()});var purchases=null,wasJetpackPlanPurchased=false;if(this.isDataLoaded()&&!this.isGenericReceipt()){purchases=getPurchases(this.props);wasJetpackPlanPurchased=purchases.some(_productsValues.isJetpackPlan)}return _react2.default.createElement(_main2.default,{className:classes},_react2.default.createElement(_headerCake2.default,{onClick:this.goBack,isCompact:true,backText:this.translate("Back to my site")}),_react2.default.createElement(_card2.default,{className:"checkout-thank-you__content"},this.productRelatedMessages()),_react2.default.createElement(_card2.default,{className:"checkout-thank-you__footer"},_react2.default.createElement(_happinessSupport2.default,{isJetpack:wasJetpackPlanPurchased,isPlaceholder:!this.isDataLoaded()&&!this.isGenericReceipt()})))},getComponentAndPrimaryPurchaseAndDomain:function getComponentAndPrimaryPurchaseAndDomain(){if(this.isDataLoaded()&&!this.isGenericReceipt()){var purchases=getPurchases(this.props);if(purchases.some(_productsValues.isJetpackPlan)){return[_jetpackPlanDetails2.default,(0,_find2.default)(purchases,_productsValues.isJetpackPlan)]}else if(purchases.some(_productsValues.isPersonal)){return[_personalPlanDetails2.default,(0,_find2.default)(purchases,_productsValues.isPersonal)]}else if(purchases.some(_productsValues.isPremium)){return[_premiumPlanDetails2.default,(0,_find2.default)(purchases,_productsValues.isPremium)]}else if(purchases.some(_productsValues.isBusiness)){return[_businessPlanDetails2.default,(0,_find2.default)(purchases,_productsValues.isBusiness)]}else if(purchases.some(_productsValues.isDomainRegistration)){return[_domainRegistrationDetails2.default].concat((0,_toConsumableArray3.default)(findPurchaseAndDomain(purchases,_productsValues.isDomainRegistration)))}else if(purchases.some(_productsValues.isGoogleApps)){return[_googleAppsDetails2.default].concat((0,_toConsumableArray3.default)(findPurchaseAndDomain(purchases,_productsValues.isGoogleApps)));
}else if(purchases.some(_productsValues.isDomainMapping)){return[_domainMappingDetails2.default].concat((0,_toConsumableArray3.default)(findPurchaseAndDomain(purchases,_productsValues.isDomainMapping)))}else if(purchases.some(_productsValues.isSiteRedirect)){return[_siteRedirectDetails2.default].concat((0,_toConsumableArray3.default)(findPurchaseAndDomain(purchases,_productsValues.isSiteRedirect)))}else if(purchases.some(_productsValues.isChargeback)){return[_chargebackDetails2.default,(0,_find2.default)(purchases,_productsValues.isChargeback)]}else if(purchases.some(_productsValues.isGuidedTransfer)){return[_guidedTransferDetails2.default,(0,_find2.default)(purchases,_productsValues.isGuidedTransfer)]}}return[]},productRelatedMessages:function productRelatedMessages(){var _props=this.props;var selectedSite=_props.selectedSite;var sitePlans=_props.sitePlans;var _getComponentAndPrima=this.getComponentAndPrimaryPurchaseAndDomain();var _getComponentAndPrima2=(0,_slicedToArray3.default)(_getComponentAndPrima,3);var ComponentClass=_getComponentAndPrima2[0];var primaryPurchase=_getComponentAndPrima2[1];var domain=_getComponentAndPrima2[2];if(!this.isDataLoaded()){return _react2.default.createElement("div",null,_react2.default.createElement(_header2.default,{isDataLoaded:false,selectedSite:selectedSite}),_react2.default.createElement(_featuresHeader2.default,{isDataLoaded:false}),_react2.default.createElement("div",{className:"checkout-thank-you__purchase-details-list"},_react2.default.createElement(_purchaseDetail2.default,{isPlaceholder:true}),_react2.default.createElement(_purchaseDetail2.default,{isPlaceholder:true}),_react2.default.createElement(_purchaseDetail2.default,{isPlaceholder:true})))}var purchases=void 0;if(!this.isGenericReceipt()){purchases=getPurchases(this.props)}return _react2.default.createElement("div",null,_react2.default.createElement(_header2.default,{isDataLoaded:this.isDataLoaded(),primaryPurchase:primaryPurchase,selectedSite:selectedSite}),_react2.default.createElement(_featuresHeader2.default,{isDataLoaded:this.isDataLoaded(),isGenericReceipt:this.isGenericReceipt(),purchases:purchases}),ComponentClass&&_react2.default.createElement("div",{className:"checkout-thank-you__purchase-details-list"},_react2.default.createElement(ComponentClass,{domain:domain,purchases:purchases,registrarSupportUrl:this.isGenericReceipt()?null:primaryPurchase.registrarSupportUrl,selectedSite:selectedSite,selectedFeature:(0,_plans.getFeatureByKey)(this.props.selectedFeature),sitePlans:sitePlans})))}});exports.default=(0,_reactRedux.connect)(function(state,props){return{receipt:(0,_selectors2.getReceiptById)(state,props.receiptId),sitePlans:(0,_selectors.getPlansBySite)(state,props.selectedSite)}},function(dispatch){return{activatedTheme:function activatedTheme(meta,site){dispatch((0,_actions.activated)(meta,site,"calypstore",true))},fetchReceipt:function fetchReceipt(receiptId){dispatch((0,_actions2.fetchReceipt)(receiptId))},fetchSitePlans:function fetchSitePlans(site){dispatch((0,_actions3.fetchSitePlans)(site.ID))},refreshSitePlans:function refreshSitePlans(site){dispatch((0,_actions3.refreshSitePlans)(site.ID))}}})(CheckoutThankYou);module.exports=exports["default"]},2775:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _purchaseDetail=__webpack_require__(1478);var _purchaseDetail2=_interopRequireDefault(_purchaseDetail);var _user=__webpack_require__(37);var _user2=_interopRequireDefault(_user);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);var _utils=__webpack_require__(186);var _utils2=_interopRequireDefault(_utils);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var config=__webpack_require__(10);var user=(0,_user2.default)();var JetpackPlanDetails=function JetpackPlanDetails(_ref){var selectedSite=_ref.selectedSite;var props={icon:"cog",title:_i18nCalypso2.default.translate("Set up your VaultPress and Akismet accounts"),description:_i18nCalypso2.default.translate("We emailed you at %(email)s with information for setting up Akismet and VaultPress on your site. "+"Follow the instructions in the email to get started.",{args:{email:user.get().email}})};if(config.isEnabled("manage/plugins/setup")){var trackManualInstall=function trackManualInstall(eventName){return function(){_analytics2.default.tracks.recordEvent(eventName)}};var reasons=_utils2.default.getSiteFileModDisableReason(selectedSite,"modifyFiles");if(reasons&&reasons.length>0){_analytics2.default.tracks.recordEvent("calypso_plans_autoconfig_halt_filemod",{error:reasons[0]})}else if(!selectedSite.hasMinimumJetpackVersion){_analytics2.default.tracks.recordEvent("calypso_plans_autoconfig_halt_jpversion",{jetpack_version:selectedSite.options.jetpack_version})}else if(selectedSite.is_multisite&&!selectedSite.isMainNetworkSite()){_analytics2.default.tracks.recordEvent("calypso_plans_autoconfig_halt_multisite")}else if(selectedSite.options.is_multi_network){_analytics2.default.tracks.recordEvent("calypso_plans_autoconfig_halt_multinetwork")}props.title=null;if(!selectedSite.canUpdateFiles){props.description=_i18nCalypso2.default.translate("You can now install Akismet and VaultPress, which will automatically protect your site from spam and data loss. "+"If you have any questions along the way, we're here to help!");props.buttonText=_i18nCalypso2.default.translate("Installation Instructions");props.href="https://en.support.wordpress.com/setting-up-premium-services/";props.onClick=trackManualInstall("calypso_plans_autoconfig_click_manual_install")}else{props.description=_i18nCalypso2.default.translate("We are about to install Akismet and VaultPress for your site, which will automatically protect your site from spam "+"and data loss. If you have any questions along the way, we're here to help! You can also perform a manual "+"installation by following {{a}}these instructions{{/a}}.",{components:{a:_react2.default.createElement("a",{target:"_blank",href:"https://en.support.wordpress.com/setting-up-premium-services/",onClick:trackManualInstall("calypso_plans_autoconfig_click_opt_out")})}});props.buttonText=_i18nCalypso2.default.translate("Set up your plan");props.href="/plugins/setup/"+selectedSite.slug}}return _react2.default.createElement(_purchaseDetail2.default,props)};exports.default=JetpackPlanDetails;module.exports=exports["default"]},2776:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _utils=__webpack_require__(2185);var _purchaseDetail=__webpack_require__(1478);var _purchaseDetail2=_interopRequireDefault(_purchaseDetail);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SiteRedirectDetails=function SiteRedirectDetails(_ref){var selectedSite=_ref.selectedSite;var domain=_ref.domain;return _react2.default.createElement("div",null,_react2.default.createElement(_purchaseDetail2.default,{icon:"external",title:_i18nCalypso2.default.translate("Test the redirect"),description:_i18nCalypso2.default.translate("Visitors to your site will be automatically redirected to {{em}}%(url)s{{/em}}.",{args:{url:domain},components:{em:_react2.default.createElement("em",null)}}),buttonText:_i18nCalypso2.default.translate("Try it now"),href:""+selectedSite.options.unmapped_url,target:"_blank"}),_react2.default.createElement(_purchaseDetail2.default,{icon:"cog",title:_i18nCalypso2.default.translate("Change redirect settings"),description:_i18nCalypso2.default.translate("Disable the redirect by choosing a different primary domain, or change the target address."),buttonText:_i18nCalypso2.default.translate("Manage redirect"),href:(0,_utils.getDomainManagementUrl)(selectedSite,domain)}))};SiteRedirectDetails.propTypes={domain:_react2.default.PropTypes.string.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.bool,_react2.default.PropTypes.object]).isRequired};exports.default=SiteRedirectDetails;module.exports=exports["default"]},2777:function(module,exports,__webpack_require__){"use strict";var _plans=__webpack_require__(1459);var _cartItems=__webpack_require__(658);var _adTracking=__webpack_require__(382);var connect=__webpack_require__(21).connect,forEach=__webpack_require__(123),isEmpty=__webpack_require__(81),isEqual=__webpack_require__(92),page=__webpack_require__(40),React=__webpack_require__(1);var analytics=__webpack_require__(16),cartItems=__webpack_require__(184).cartItems,clearSitePlans=__webpack_require__(671).clearSitePlans,clearPurchases=__webpack_require__(1546).clearPurchases,DomainDetailsForm=__webpack_require__(2781),fetchReceiptCompleted=__webpack_require__(2221).fetchReceiptCompleted,getExitCheckoutUrl=__webpack_require__(2375).getExitCheckoutUrl,getStoredCards=__webpack_require__(1547).getStoredCards,hasDomainDetails=__webpack_require__(363).hasDomainDetails,notices=__webpack_require__(71),observe=__webpack_require__(146),purchasePaths=__webpack_require__(652),QueryStoredCards=__webpack_require__(1694),SecurePaymentForm=__webpack_require__(2789),supportPaths=__webpack_require__(339),themeItem=__webpack_require__(658).themeItem,transactionStepTypes=__webpack_require__(696),upgradesActions=__webpack_require__(646);var Checkout=React.createClass({displayName:"Checkout",mixins:[observe("sites","productsList")],propTypes:{cards:React.PropTypes.array.isRequired,selectedFeature:React.PropTypes.string},getInitialState:function getInitialState(){return{previousCart:null}},componentWillMount:function componentWillMount(){upgradesActions.resetTransaction()},componentDidMount:function componentDidMount(){if(this.redirectIfEmptyCart()){return}if(this.props.cart.hasLoadedFromServer&&this.props.product){this.addProductToCart()}window.scrollTo(0,0)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(!this.props.cart.hasLoadedFromServer&&nextProps.cart.hasLoadedFromServer&&this.props.product){this.addProductToCart()}if(this.props.cart.hasPendingServerUpdates&&!nextProps.cart.hasPendingServerUpdates){this.trackPageView(nextProps)}},componentDidUpdate:function componentDidUpdate(){var previousCart,nextCart;if(!this.props.cart.hasLoadedFromServer){return false}previousCart=this.state.previousCart;nextCart=this.props.cart;if(!isEqual(previousCart,nextCart)){this.redirectIfEmptyCart();this.setState({previousCart:nextCart})}},trackPageView:function trackPageView(props){props=props||this.props;analytics.tracks.recordEvent("calypso_checkout_page_view",{saved_cards:props.cards.length,is_renewal:cartItems.hasRenewalItem(props.cart)});(0,_adTracking.recordViewCheckout)(props.cart)},addProductToCart:function addProductToCart(){var planSlug=(0,_plans.getUpgradePlanSlugFromPath)(this.props.product),cartItem,cartMeta;if(planSlug){cartItem=(0,_cartItems.planItem)(planSlug)}if(this.props.product.indexOf("theme")===0){cartMeta=this.props.product.split(":")[1];cartItem=themeItem(cartMeta)}if(cartItem){upgradesActions.addItem(cartItem)}},redirectIfEmptyCart:function redirectIfEmptyCart(){var redirectTo="/plans/";if(!this.state.previousCart&&this.props.product){return false}if(!this.props.cart.hasLoadedFromServer||!isEmpty(cartItems.getAll(this.props.cart))){return false}if(this.props.transaction.step.name===transactionStepTypes.SUBMITTING_WPCOM_REQUEST){return false}if(this.state.previousCart){redirectTo=getExitCheckoutUrl(this.state.previousCart,this.props.sites.getSelectedSite().slug)}page.redirect(redirectTo);return true},getPurchasesFromReceipt:function getPurchasesFromReceipt(){var purchases=this.props.transaction.step.data.purchases,flatPurchases=[];forEach(purchases,function(sitePurchases){flatPurchases=flatPurchases.concat(sitePurchases)});return flatPurchases},getCheckoutCompleteRedirectPath:function getCheckoutCompleteRedirectPath(){var renewalItem,receiptId=":receiptId";this.props.clearPurchases();if(cartItems.hasRenewalItem(this.props.cart)){renewalItem=cartItems.getRenewalItems(this.props.cart)[0];notices.success(this.translate("%(productName)s has been renewed and will now auto renew in the future. {{a}}Learn more{{/a}}",{args:{productName:renewalItem.product_name},components:{a:React.createElement("a",{href:supportPaths.AUTO_RENEWAL,target:"_blank"})}}),{persistent:true});return purchasePaths.managePurchase(renewalItem.extra.purchaseDomain,renewalItem.extra.purchaseId)}else if(cartItems.hasFreeTrial(this.props.cart)){this.props.clearSitePlans(this.props.sites.getSelectedSite().ID);return"/plans/"+this.props.sites.getSelectedSite().slug+"/thank-you"}if(this.props.transaction.step.data&&this.props.transaction.step.data.receipt_id){receiptId=this.props.transaction.step.data.receipt_id;this.props.fetchReceiptCompleted(receiptId,{receiptId:receiptId,purchases:this.getPurchasesFromReceipt()})}return this.props.selectedFeature&&(0,_plans.isValidFeatureKey)(this.props.selectedFeature)?"/checkout/thank-you/features/"+this.props.selectedFeature+"/"+this.props.sites.getSelectedSite().slug+"/"+receiptId:"/checkout/thank-you/"+this.props.sites.getSelectedSite().slug+"/"+receiptId},content:function content(){var selectedSite=this.props.sites.getSelectedSite();if(!this.isLoading()&&this.needsDomainDetails()){return React.createElement(DomainDetailsForm,{cart:this.props.cart,productsList:this.props.productsList})}else if(this.isLoading()||this.props.cart.hasPendingServerUpdates){return React.createElement(SecurePaymentForm.Placeholder,null)}return React.createElement(SecurePaymentForm,{cart:this.props.cart,transaction:this.props.transaction,cards:this.props.cards,products:this.props.productsList.get(),selectedSite:selectedSite,redirectTo:this.getCheckoutCompleteRedirectPath})},isLoading:function isLoading(){var isLoadingCart=!this.props.cart.hasLoadedFromServer,isLoadingProducts=!this.props.productsList.hasLoadedFromServer();return isLoadingCart||isLoadingProducts},needsDomainDetails:function needsDomainDetails(){var cart=this.props.cart,transaction=this.props.transaction;if(cart&&cartItems.hasOnlyRenewalItems(cart)){return false}return cart&&cartItems.hasDomainRegistration(cart)&&!hasDomainDetails(transaction)},render:function render(){return React.createElement("div",{className:"main main-column",role:"main"},React.createElement("div",{className:"checkout"},React.createElement(QueryStoredCards,null),this.content()))}});module.exports=connect(function(state){return{cards:getStoredCards(state)}},{clearPurchases:clearPurchases,clearSitePlans:clearSitePlans,fetchReceiptCompleted:fetchReceiptCompleted})(Checkout)},2778:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),classNames=__webpack_require__(11);var PayButton=__webpack_require__(1824),CreditCardSelector=__webpack_require__(2779),TermsOfService=__webpack_require__(1731),PaymentBox=__webpack_require__(1625),analytics=__webpack_require__(16),cartValues=__webpack_require__(184);var CreditCardPaymentBox=React.createClass({displayName:"CreditCardPaymentBox",getInitialState:function getInitialState(){return{previousCart:null}},handleToggle:function handleToggle(event){event.preventDefault();analytics.ga.recordEvent("Upgrades","Clicked Or Use Paypal Link");analytics.tracks.recordEvent("calypso_checkout_switch_to_paypal");this.props.onToggle("paypal")},content:function content(){var cart=this.props.cart;return React.createElement("form",{onSubmit:this.props.onSubmit},React.createElement(CreditCardSelector,{cards:this.props.cards,countriesList:this.props.countriesList,initialCard:this.props.initialCard,transaction:this.props.transaction}),React.createElement(TermsOfService,{hasRenewableSubscription:cartValues.cartItems.hasRenewableSubscription(cart)}),React.createElement("div",{className:"payment-box-actions"},React.createElement(PayButton,{cart:this.props.cart,transactionStep:this.props.transactionStep}),cartValues.isPayPalExpressEnabled(cart)?React.createElement("a",{className:"credit-card-payment-box__switch-link",href:"",onClick:this.handleToggle},this.translate("or use PayPal")):null))},render:function render(){var classSet=classNames({"credit-card-payment-box":true,selected:this.props.selected===true});return React.createElement(PaymentBox,{classSet:classSet,title:this.translate("Secure Payment")},this.content())}});module.exports=CreditCardPaymentBox},2779:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),filter=__webpack_require__(69),classNames=__webpack_require__(11);var analytics=__webpack_require__(16),StoredCard=__webpack_require__(1970),NewCardForm=__webpack_require__(2784),storeTransactions=__webpack_require__(363),upgradesActions=__webpack_require__(646);var CreditCardSelector=React.createClass({displayName:"CreditCardSelector",getInitialState:function getInitialState(){if(this.props.initialCard){return{section:this.props.initialCard.stored_details_id}}else{return{section:"new-card"}}},render:function render(){return React.createElement("div",{className:"payment-box-sections"},this.storedCards(),this.newCardForm())},storedCards:function storedCards(){return this.props.cards.map(function(card){var storedCard=React.createElement(StoredCard,{card:card});return this.section(card.stored_details_id,storedCard)},this)},newCardForm:function newCardForm(){var cardForm=React.createElement(NewCardForm,{countriesList:this.props.countriesList,transaction:this.props.transaction,hasStoredCards:this.props.cards.length>0});return this.section("new-card",cardForm)},section:function section(name,content){var classes=classNames("payment-box-section",{selected:this.state.section===name,"no-stored-cards":name==="new-card"&&this.props.cards.length===0});return React.createElement("div",{className:classes,onClick:this.handleClickedSection.bind(this,name),key:name},React.createElement("div",{className:"payment-box-section-inner"},content))},handleClickedSection:function handleClickedSection(section){var newPayment;if(section===this.state.section){return}if("new-card"===section){analytics.ga.recordEvent("Upgrades","Clicked Use a New Credit/Debit Card Link");newPayment=storeTransactions.newCardPayment(this.props.transaction.newCardFormFields)}else{newPayment=storeTransactions.storedCardPayment(this.getStoredCardDetails(section))}upgradesActions.setPayment(newPayment);this.setState({section:section})},getStoredCardDetails:function getStoredCardDetails(section){return filter(this.props.cards,{stored_details_id:section})[0]}});module.exports=CreditCardSelector},2780:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),classNames=__webpack_require__(11);var PayButton=__webpack_require__(1824),PaymentBox=__webpack_require__(1625),TermsOfService=__webpack_require__(1731);var CreditsPaymentBox=React.createClass({displayName:"CreditsPaymentBox",content:function content(){var cart=this.props.cart;return React.createElement("form",{onSubmit:this.props.onSubmit},React.createElement("div",{className:"payment-box-section"},React.createElement("h6",null,this.translate("WordPress.com Credits")),React.createElement("span",null,this.translate("You have {{strong}}%(credits)s %(currency)s in Credits{{/strong}} available.",{args:{credits:cart.credits,currency:cart.currency},components:{strong:React.createElement("strong",null)}}))),React.createElement(TermsOfService,null),React.createElement("div",{className:"payment-box-actions"},React.createElement(PayButton,{cart:this.props.cart,transactionStep:this.props.transactionStep})))},render:function render(){var classSet=classNames({"credits-payment-box":true,selected:this.props.selected===true});return React.createElement(PaymentBox,{classSet:classSet,title:this.translate("Secure Payment")},this.content())}});module.exports=CreditsPaymentBox},2781:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _map=__webpack_require__(50);var _map2=_interopRequireDefault(_map);var _camelCase=__webpack_require__(194);var _camelCase2=_interopRequireDefault(_camelCase);var _kebabCase=__webpack_require__(2020);var _kebabCase2=_interopRequireDefault(_kebabCase);var _head=__webpack_require__(661);var _head2=_interopRequireDefault(_head);var _form=__webpack_require__(2792);var _privacyProtection=__webpack_require__(2788);var _privacyProtection2=_interopRequireDefault(_privacyProtection);var _paymentBox=__webpack_require__(1625);var _paymentBox2=_interopRequireDefault(_paymentBox);var _cartValues=__webpack_require__(184);var _countriesList=__webpack_require__(1588);var _statesList=__webpack_require__(2133);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);var _formState=__webpack_require__(1512);var _formState2=_interopRequireDefault(_formState);var _actions=__webpack_require__(646);var _formButton=__webpack_require__(337);var _formButton2=_interopRequireDefault(_formButton);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var wpcom=__webpack_require__(22).undocumented(),countriesList=(0,_countriesList.forDomainRegistrations)(),statesList=(0,_statesList.forDomainRegistrations)();exports.default=_react2.default.createClass({displayName:"DomainDetailsForm",fieldNames:["firstName","lastName","organization","email","phone","address1","address2","city","state","postalCode","countryCode","fax"],getInitialState:function getInitialState(){return{form:null,isDialogVisible:false,submissionCount:0}},componentWillMount:function componentWillMount(){this.formStateController=_formState2.default.Controller({fieldNames:this.fieldNames,loadFunction:wpcom.getDomainContactInformation.bind(wpcom),sanitizerFunction:this.sanitize,validatorFunction:this.validate,onNewState:this.setFormState,onError:this.handleFormControllerError});this.setState({form:this.formStateController.getInitialState()})},componentDidMount:function componentDidMount(){_analytics2.default.pageView.record("/checkout/domain-contact-information","Checkout > Domain Contact Information")},sanitize:function sanitize(fieldValues,onComplete){var sanitizedFieldValues=(0,_assign2.default)({},fieldValues);this.fieldNames.forEach(function(fieldName){if(typeof fieldValues[fieldName]==="string"){sanitizedFieldValues[fieldName]=fieldValues[fieldName].trim();if(fieldName==="postalCode"){sanitizedFieldValues[fieldName]=sanitizedFieldValues[fieldName].toUpperCase()}}});onComplete(sanitizedFieldValues)},validate:function validate(fieldValues,onComplete){var domainNames=(0,_map2.default)(_cartValues.cartItems.getDomainRegistrations(this.props.cart),"meta");wpcom.validateDomainContactInformation(fieldValues,domainNames,function(error,data){var messages=data&&data.messages||{};onComplete(error,messages)})},setFormState:function setFormState(form){if(!this.isMounted()){return}if(!this.needsFax()){delete form.fax}this.setState({form:form})},handleFormControllerError:function handleFormControllerError(error){throw error},handleChangeEvent:function handleChangeEvent(event){if(event.target.name==="country-code"){this.formStateController.handleFieldChange({name:"state",value:"",hideError:true})}this.formStateController.handleFieldChange({name:event.target.name,value:event.target.value})},getNumberOfDomainRegistrations:function getNumberOfDomainRegistrations(){return _cartValues.cartItems.getDomainRegistrations(this.props.cart).length},getFieldProps:function getFieldProps(name){return{name:name,ref:name,additionalClasses:"checkout-field",value:_formState2.default.getFieldValue(this.state.form,name),isError:_formState2.default.isFieldInvalid(this.state.form,name),disabled:_formState2.default.isFieldDisabled(this.state.form,name),onChange:this.handleChangeEvent,errorMessage:(_formState2.default.getFieldErrorMessages(this.state.form,(0,_camelCase2.default)(name))||[]).join("\n"),eventFormName:"Checkout Form"}},needsFax:function needsFax(){return _formState2.default.getFieldValue(this.state.form,"countryCode")==="NL"&&_cartValues.cartItems.hasNlTld(this.props.cart)},allDomainRegistrationsHavePrivacy:function allDomainRegistrationsHavePrivacy(){return _cartValues.cartItems.getDomainRegistrationsWithoutPrivacy(this.props.cart).length===0},renderSubmitButton:function renderSubmitButton(){return _react2.default.createElement(_formButton2.default,{className:"checkout__domain-details-form-submit-button",onClick:this.handleSubmitButtonClick},this.translate("Continue to Checkout"))},renderPrivacySection:function renderPrivacySection(){return _react2.default.createElement(_privacyProtection2.default,{cart:this.props.cart,countriesList:countriesList,disabled:_formState2.default.isSubmitButtonDisabled(this.state.form),fields:this.state.form,isChecked:this.allDomainRegistrationsHavePrivacy(),onCheckboxChange:this.handleCheckboxChange,onDialogClose:this.closeDialog,onDialogOpen:this.openDialog,onDialogSelect:this.handlePrivacyDialogSelect,isDialogVisible:this.state.isDialogVisible,productsList:this.props.productsList})},fields:function fields(){var _this=this;var countryCode=_formState2.default.getFieldValue(this.state.form,"countryCode"),fieldProps=function fieldProps(name){return _this.getFieldProps(name)},textOnly=true;return _react2.default.createElement("div",null,_react2.default.createElement(_form.Input,(0,_extends3.default)({autofocus:true,label:this.translate("First Name",{textOnly:textOnly})},fieldProps("first-name"))),_react2.default.createElement(_form.Input,(0,_extends3.default)({label:this.translate("Last Name",{textOnly:textOnly})},fieldProps("last-name"))),_react2.default.createElement(_form.HiddenInput,(0,_extends3.default)({label:this.translate("Organization"),text:this.translate("Registering this domain for a company? + Add Organization Name","Registering these domains for a company? + Add Organization Name",{context:"Domain contact information page",comment:"Count specifies the number of domain registrations",count:this.getNumberOfDomainRegistrations(),textOnly:true})},fieldProps("organization"))),_react2.default.createElement(_form.Input,(0,_extends3.default)({label:this.translate("Email",{textOnly:textOnly})},fieldProps("email"))),_react2.default.createElement(_form.Input,(0,_extends3.default)({label:this.translate("Phone",{textOnly:textOnly}),placeholder:this.translate("e.g. +1.555.867.5309",{context:"Domain contact info phone placeholder",comment:"Please use the phone number format most common for your language, but it must begin with just the country code in the format '+1' - no parenthesis, leading zeros, etc."})},fieldProps("phone"))),_react2.default.createElement(_form.CountrySelect,(0,_extends3.default)({label:this.translate("Country",{textOnly:textOnly}),countriesList:countriesList},fieldProps("country-code"))),this.needsFax()&&_react2.default.createElement(_form.Input,(0,_extends3.default)({label:this.translate("Fax",{textOnly:textOnly})},fieldProps("fax"))),_react2.default.createElement(_form.Input,(0,_extends3.default)({label:this.translate("Address",{textOnly:textOnly}),maxLength:40},fieldProps("address-1"))),_react2.default.createElement(_form.HiddenInput,(0,_extends3.default)({label:this.translate("Address Line 2",{textOnly:textOnly}),text:this.translate("+ Add Address Line 2",{textOnly:textOnly}),maxLength:40},fieldProps("address-2"))),_react2.default.createElement(_form.Input,(0,_extends3.default)({label:this.translate("City",{textOnly:textOnly})},fieldProps("city"))),_react2.default.createElement(_form.StateSelect,(0,_extends3.default)({label:this.translate("State",{textOnly:true}),countryCode:countryCode,statesList:statesList},fieldProps("state"))),_react2.default.createElement(_form.Input,(0,_extends3.default)({label:this.translate("Postal Code",{textOnly:textOnly})},fieldProps("postal-code"))),this.renderSubmitButton())},handleCheckboxChange:function handleCheckboxChange(){this.setPrivacyProtectionSubscriptions(!this.allDomainRegistrationsHavePrivacy())},closeDialog:function closeDialog(){this.setState({isDialogVisible:false})},openDialog:function openDialog(){this.setState({isDialogVisible:true})},content:function content(){return _react2.default.createElement("form",null,this.fields())},focusFirstError:function focusFirstError(){this.refs[(0,_kebabCase2.default)((0,_head2.default)((0,_map2.default)(_formState2.default.getInvalidFields(this.state.form),"name")))].focus()},handleSubmitButtonClick:function handleSubmitButtonClick(event){var _this2=this;event.preventDefault();this.formStateController.handleSubmit(function(hasErrors){_this2.recordSubmit();if(hasErrors){_this2.focusFirstError();return}if(!_this2.allDomainRegistrationsHavePrivacy()){_this2.openDialog();return}_this2.finish()})},recordSubmit:function recordSubmit(){var errors=_formState2.default.getErrorMessages(this.state.form);_analytics2.default.tracks.recordEvent("calypso_contact_information_form_submit",{errors:errors,errors_count:errors&&errors.length||0,submission_count:this.state.submissionCount+1});this.setState({submissionCount:this.state.submissionCount+1})},handlePrivacyDialogSelect:function handlePrivacyDialogSelect(options){var _this3=this;this.formStateController.handleSubmit(function(hasErrors){_this3.recordSubmit();if(hasErrors||options.skipFinish){_this3.setPrivacyProtectionSubscriptions(options.addPrivacy!==false);_this3.closeDialog();return}_this3.finish(options)})},finish:function finish(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this.setPrivacyProtectionSubscriptions(options.addPrivacy!==false);(0,_actions.setDomainDetails)(_formState2.default.getAllFieldValues(this.state.form))},setPrivacyProtectionSubscriptions:function setPrivacyProtectionSubscriptions(enable){if(enable){(0,_actions.addPrivacyToAllDomains)()}else{(0,_actions.removePrivacyFromAllDomains)()}},render:function render(){var classSet=(0,_classnames2.default)({"domain-details":true,selected:true});return _react2.default.createElement("div",null,this.renderPrivacySection(),_react2.default.createElement(_paymentBox2.default,{classSet:classSet,title:this.translate("Domain Contact Information",{context:"Domain contact information page",textOnly:true})},this.content()))}});module.exports=exports["default"]},2782:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),classNames=__webpack_require__(11);var PayButton=__webpack_require__(1824),PaymentBox=__webpack_require__(1625),TermsOfService=__webpack_require__(1731);var FreeCartPaymentBox=React.createClass({displayName:"FreeCartPaymentBox",propTypes:{products:React.PropTypes.object.isRequired},content:function content(){var cart=this.props.cart;return React.createElement("form",{onSubmit:this.props.onSubmit},React.createElement("div",{className:"payment-box-section"},React.createElement("h6",null,cart.has_bundle_credit?this.translate("You have a free domain credit!"):this.translate("Woohoo! You don't owe us anything!")),React.createElement("span",null,cart.has_bundle_credit?this.translate("You get one free domain with your subscription to %(productName)s. Time to celebrate!",{args:{productName:this.getProductName()}}):this.translate("Just complete checkout to add these upgrades to your site."))),React.createElement(TermsOfService,null),React.createElement("div",{className:"payment-box-actions"
},React.createElement(PayButton,{cart:cart,transactionStep:this.props.transactionStep,beforeSubmitText:this.translate("Complete Checkout")})))},getProductName:function getProductName(){var cart=this.props.cart,product;if(cart.has_bundle_credit&&this.props.selectedSite.plan){product=this.props.products[this.props.selectedSite.plan.product_slug]}if(product){return product.product_name}else{return""}},render:function render(){var classSet=classNames({"credits-payment-box":true,selected:this.props.selected});return React.createElement(PaymentBox,{classSet:classSet,title:this.translate("Secure Payment")},this.content())}});module.exports=FreeCartPaymentBox},2783:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),classNames=__webpack_require__(11),find=__webpack_require__(33);var isPlan=__webpack_require__(80).isPlan,PayButton=__webpack_require__(1824),PaymentBox=__webpack_require__(1625),TermsOfService=__webpack_require__(1731);var FreeTrialConfirmationBox=React.createClass({displayName:"FreeTrialConfirmationBox",content:function content(){return React.createElement("form",{onSubmit:this.props.onSubmit},React.createElement("div",{className:"payment-box-section"},React.createElement("h6",null,this.translate("Get started with %(productName)s",{args:{productName:this.getProductName()}})),React.createElement("span",null,this.translate("Enjoy your free trial with no strings attached: your site will simply revert to the free plan when the period is over."))),React.createElement(TermsOfService,null),React.createElement("div",{className:"payment-box-actions"},React.createElement(PayButton,{cart:this.props.cart,transactionStep:this.props.transactionStep})))},getProductName:function getProductName(){var planProduct=find(this.props.cart.products,isPlan);return planProduct&&planProduct.product_name||""},render:function render(){var classSet=classNames({"credits-payment-box":true,selected:this.props.selected===true});return React.createElement(PaymentBox,{classSet:classSet},this.content())}});module.exports=FreeTrialConfirmationBox},2784:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),isEmpty=__webpack_require__(81),classNames=__webpack_require__(11);var CreditCardForm=__webpack_require__(1876),upgradesActions=__webpack_require__(646);module.exports=React.createClass({displayName:"NewCardForm",propTypes:{countriesList:React.PropTypes.object.isRequired,hasStoredCards:React.PropTypes.bool.isRequired,transaction:React.PropTypes.object.isRequired},isFieldInvalid:function isFieldInvalid(fieldName){return!isEmpty(this.props.transaction.errors[fieldName])},render:function render(){var classes=classNames("all-fields-required",{"has-saved-cards":this.props.hasStoredCards});return React.createElement("div",{className:"new-card"},React.createElement("button",{type:"button",className:"new-card-toggle"},this.translate("+ Use a New Credit/Debit Card")),React.createElement("div",{className:"new-card-fields"},this.props.hasStoredCards?React.createElement("h6",{className:"new-card-header"},this.translate("Use New Credit/Debit Card"),":"):null,React.createElement("span",{className:classes},this.translate("All fields required")),React.createElement(CreditCardForm,{card:this.props.transaction.newCardFormFields,countriesList:this.props.countriesList,eventFormName:"Checkout Form",isFieldInvalid:this.isFieldInvalid,onFieldChange:this.handleFieldChange})))},handleFieldChange:function handleFieldChange(rawDetails,maskedDetails){upgradesActions.setNewCreditCardDetails({rawDetails:rawDetails,maskedDetails:maskedDetails})}})},2785:function(module,exports,__webpack_require__){"use strict";var assign=__webpack_require__(29),classNames=__webpack_require__(11),React=__webpack_require__(1);var analytics=__webpack_require__(16),cartValues=__webpack_require__(184),CountrySelect=__webpack_require__(1668),Input=__webpack_require__(1558),notices=__webpack_require__(71),PaymentBox=__webpack_require__(1625),SubscriptionText=__webpack_require__(2186),TermsOfService=__webpack_require__(1731),wpcom=__webpack_require__(22).undocumented();module.exports=React.createClass({displayName:"PaypalPaymentBox",getInitialState:function getInitialState(){return{country:null,formDisabled:false}},handleToggle:function handleToggle(event){event.preventDefault();analytics.ga.recordEvent("Upgrades","Clicked Or Use Credit Card Link");analytics.tracks.recordEvent("calypso_checkout_switch_to_card");this.props.onToggle("credit-card")},handleChange:function handleChange(event){var data={};data[event.target.name]=event.target.value;this.setState(data)},setSubmitState:function setSubmitState(submitState){if(submitState.error){notices.error(submitState.error)}if(submitState.info){notices.info(submitState.info)}this.setState({formDisabled:submitState.disabled})},getLocationOrigin:function getLocationOrigin(l){return l.protocol+"//"+l.hostname+(l.port?":"+l.port:"")},redirectToPayPal:function redirectToPayPal(event){var cart,transaction,dataForApi,origin=this.getLocationOrigin(window.location);event.preventDefault();cart=this.props.cart;transaction=this.props.transaction;this.setSubmitState({info:this.translate("Sending details to PayPal"),disabled:true});dataForApi=assign({},this.state,{successUrl:origin+this.props.redirectTo(),cancelUrl:origin+"/checkout/"+this.props.selectedSite.slug,cart:cart,domainDetails:transaction.domainDetails});wpcom.paypalExpressUrl(dataForApi,function(error,paypalExpressURL){var errorMessage;if(error){if(error.message){errorMessage=error.message}else{errorMessage=this.translate("Please specify a country and postal code.")}this.setSubmitState({error:errorMessage,disabled:false})}if(paypalExpressURL){this.setSubmitState({info:this.translate("Redirecting you to PayPal"),disabled:true});analytics.ga.recordEvent("Upgrades","Clicked Checkout With Paypal Button");analytics.tracks.recordEvent("calypso_checkout_with_paypal");window.location=paypalExpressURL}}.bind(this))},renderButtonText:function renderButtonText(){if(cartValues.cartItems.hasRenewalItem(this.props.cart)){return this.translate("Purchase %(price)s subscription with PayPal",{args:{price:this.props.cart.total_cost_display},context:"Pay button on /checkout"})}return this.translate("Pay %(price)s with PayPal",{args:{price:this.props.cart.total_cost_display},context:"Pay button on /checkout"})},content:function content(){return React.createElement("form",{onSubmit:this.redirectToPayPal},React.createElement("div",{className:"payment-box-section"},React.createElement(CountrySelect,{additionalClasses:"checkout-field",name:"country",label:this.translate("Country",{textOnly:true}),countriesList:this.props.countriesList,value:this.state.country,onChange:this.handleChange,disabled:this.state.formDisabled,eventFormName:"Checkout Form"}),React.createElement(Input,{additionalClasses:"checkout-field",name:"postal-code",label:this.translate("Postal Code",{textOnly:true}),onChange:this.handleChange,disabled:this.state.formDisabled,eventFormName:"Checkout Form"})),React.createElement(TermsOfService,{hasRenewableSubscription:cartValues.cartItems.hasRenewableSubscription(this.props.cart)}),React.createElement("div",{className:"payment-box-actions"},React.createElement("div",{className:"pay-button"},React.createElement("button",{type:"submit",className:"button is-primary button-pay",disabled:this.state.formDisabled},this.renderButtonText()),React.createElement(SubscriptionText,{cart:this.props.cart})),cartValues.isCreditCardPaymentsEnabled(this.props.cart)&&React.createElement("a",{href:"",className:"credit-card-payment-box__switch-link",onClick:this.handleToggle},this.translate("or use a credit card",{context:"Upgrades: PayPal checkout screen",comment:"Checkout with PayPal -- or use a credit card"}))))},render:function render(){var classSet=classNames({"paypal-payment-box":true,selected:this.props.selected===true});return React.createElement(PaymentBox,{classSet:classSet,title:this.translate("Secure Payment with PayPal")},this.content())}})},2786:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var Dialog=__webpack_require__(148),PrivacyProtectionExample=__webpack_require__(2787);module.exports=React.createClass({displayName:"PrivacyProtectionDialog",getDefaultProps:function getDefaultProps(){return{isVisible:false}},getProtectedFields:function getProtectedFields(){return{firstName:{},lastName:{},organization:{value:"Domains By Proxy, LLC"},email:{value:this.props.domain+"@domainsbyproxy.com"},phone:{value:"+1.4806242599"},address1:{value:"14747 N Northsight Blvd"},address2:{value:"Suite 111, PMB 309"},city:{value:"Scottsdale"},state:{value:"AZ"},postalCode:{value:"85260"},countryCode:{value:"US"}}},render:function render(){var privacyPrice=this.translate("%(cost)s per domain / year",{args:{cost:this.props.cost}});if(this.props.isFree){privacyPrice=React.createElement("span",{className:"privacy-free-text"},this.translate("Free with your plan"))}return React.createElement(Dialog,{additionalClassNames:"privacy-protection-dialog",isVisible:this.props.isVisible,onClose:this.props.onClose},React.createElement("header",null,React.createElement("h1",null,this.translate("Why do I need Privacy Protection?")),React.createElement("p",null,this.translate("Domains are required to have publicly accessible contact information."),React.createElement("span",{className:"line-break"},this.translate("With Privacy Protection, we show our partner's contact information instead of your own, helping to:")))),React.createElement("ul",{className:"privacy-features"},React.createElement("li",null,React.createElement("h2",null,this.translate("Protect your identity online"))),React.createElement("li",null,React.createElement("h2",null,this.translate("Hide your email from spammers")))),React.createElement("ul",{className:"privacy-comparison"},React.createElement("li",{className:"with-privacy"},React.createElement("h3",null,this.translate("With Privacy Protection")),React.createElement("div",{className:"privacy-price"},privacyPrice),React.createElement(PrivacyProtectionExample,{countriesList:this.props.countriesList,fields:this.getProtectedFields()}),React.createElement("button",{className:"button is-primary",disabled:this.props.disabled,onClick:this.props.onSelect.bind(null,{addPrivacy:true})},this.translate("Add Privacy Protection"))),React.createElement("li",{className:"without-privacy"},React.createElement("h3",null,this.translate("Without Privacy Protection")),React.createElement("div",{className:"privacy-price"},this.translate("No additional cost")),React.createElement(PrivacyProtectionExample,{countriesList:this.props.countriesList,fields:this.props.fields}),React.createElement("button",{className:"button",disabled:this.props.disabled,onClick:this.props.onSelect.bind(null,{addPrivacy:false})},this.translate("Publish My Information")))))}})},2787:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _find=__webpack_require__(33);var _find2=_interopRequireDefault(_find);var _i18nCalypso=__webpack_require__(13);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PrivacyProtectionExample=function PrivacyProtectionExample(_ref){var translate=_ref.translate;var fields=_ref.fields;var countriesList=_ref.countriesList;var firstName=fields.firstName.value;var lastName=fields.lastName.value;var organization=fields.organization.value;var email=fields.email.value;var address1=fields.address1.value;var address2=fields.address2.value;var city=fields.city.value;var state=fields.state.value;var postalCode=fields.postalCode.value;var countryCode=fields.countryCode.value;var phone=fields.phone.value;var country=countryCode&&(0,_find2.default)(countriesList.get(),{code:countryCode});var lines=[];var addressLine="";if(firstName||lastName){lines.push(firstName+" "+lastName)}else if(!organization){lines.push(translate("Your Name"))}if(organization){lines.push(organization)}if(email){lines.push(email)}else{lines.push(translate("Your Email"))}if(address1||address2){if(address1){lines.push(address1)}if(address2){lines.push(address2)}}else{lines.push(translate("Your Address"))}if(city){addressLine+=city}else{addressLine+=translate("Your City")}if(state||postalCode){addressLine+=", ";if(state){addressLine+=state}addressLine+=" ";if(postalCode){addressLine+=postalCode}}lines.push(addressLine);if(country){lines.push(country.name)}else{lines.push(translate("Your Country"))}if(phone){lines.push(phone)}else{lines.push(translate("Your Phone Number"))}return _react2.default.createElement("p",null,lines.map(function(line,index){return _react2.default.createElement("span",{key:"privacy-protection-example-line-"+index},line)})," ")};exports.default=(0,_i18nCalypso.localize)(PrivacyProtectionExample);module.exports=exports["default"]},2788:function(module,exports,__webpack_require__){"use strict";var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var React=__webpack_require__(1),classnames=__webpack_require__(11);var cartItems=__webpack_require__(184).cartItems,PrivacyProtectionDialog=__webpack_require__(2786),Card=__webpack_require__(145),Gridicon=__webpack_require__(28);module.exports=React.createClass({displayName:"PrivacyProtection",handleDialogSelect:function handleDialogSelect(options,event){event.preventDefault();this.props.onDialogSelect((0,_assign2.default)(options,this.state));this.setState({skipFinish:false})},handleDialogOpen:function handleDialogOpen(){this.setState({skipFinish:true});this.props.onDialogOpen()},handleDialogClose:function handleDialogClose(){this.props.onDialogClose()},getDomainRegistrations:function getDomainRegistrations(){return cartItems.getDomainRegistrations(this.props.cart)},getFirstDomainToRegister:function getFirstDomainToRegister(){var domainRegistration=this.getDomainRegistrations().shift();return domainRegistration.meta},hasDomainPartOfPlan:function hasDomainPartOfPlan(){var cart=this.props.cart;return cart.has_bundle_credit||cartItems.hasPlan(cart)},getNumberOfDomainRegistrations:function getNumberOfDomainRegistrations(){return this.getDomainRegistrations().length},getPrivacyProtectionCost:function getPrivacyProtectionCost(){var products=this.props.productsList.get();return products.private_whois.cost_display},render:function render(){var numberOfDomainRegistrations=this.getNumberOfDomainRegistrations(),hasOneFreePrivacy=this.hasDomainPartOfPlan()&&numberOfDomainRegistrations===1,privacyText=this.translate("Privacy Protection hides your personal information in your domain's public records, to protect your identity and prevent spam."),freeWithPlan=hasOneFreePrivacy&&React.createElement("span",{className:"checkout__privacy-protection-free-text"},this.translate("Free with your plan"));return React.createElement("div",null,React.createElement(Card,{className:"checkout__privacy-protection-checkbox"},React.createElement("input",{type:"checkbox",id:"privacyProtectionCheckbox",onChange:this.props.onCheckboxChange,checked:this.props.isChecked}),React.createElement("div",{className:"checkout__privacy-protection-checkbox__description"},React.createElement("label",{htmlFor:"privacyProtectionCheckbox"},React.createElement("strong",{className:"checkout__privacy-protection-checkbox-heading"},this.translate("Please keep my information private.",{textOnly:true}))),React.createElement("p",{className:"checkout__privacy-protection-price-text"},React.createElement("span",{className:classnames({"free-with-plan":hasOneFreePrivacy})},this.translate("%(cost)s per year","%(cost)s per domain per year",{args:{cost:this.getPrivacyProtectionCost()},count:numberOfDomainRegistrations})),freeWithPlan),React.createElement("p",{className:"checkout__privacy-protection-checkbox-text"},privacyText),React.createElement("a",{href:"",onClick:this.handleDialogOpen},"Learn more about Privacy Protection.")),React.createElement("div",null,React.createElement(Gridicon,{icon:"lock",size:48}))),React.createElement(PrivacyProtectionDialog,{disabled:this.props.disabled,domain:this.getFirstDomainToRegister(),cost:this.getPrivacyProtectionCost(),countriesList:this.props.countriesList,fields:this.props.fields,isVisible:this.props.isDialogVisible,isFree:hasOneFreePrivacy,onSelect:this.handleDialogSelect,onClose:this.handleDialogClose}))}})},2789:function(module,exports,__webpack_require__){"use strict";var defer=__webpack_require__(341),React=__webpack_require__(1);var CreditCardPaymentBox=__webpack_require__(2778),EmptyContent=__webpack_require__(185),FreeTrialConfirmationBox=__webpack_require__(2783),PayPalPaymentBox=__webpack_require__(2785),CreditsPaymentBox=__webpack_require__(2780),FreeCartPaymentBox=__webpack_require__(2782),PaymentBox=__webpack_require__(1625),storeTransactions=__webpack_require__(363),cartValues=__webpack_require__(184),isPaidForFullyInCredits=cartValues.isPaidForFullyInCredits,isFree=cartValues.isFree,hasFreeTrial=cartValues.cartItems.hasFreeTrial,countriesList=__webpack_require__(1588).forPayments(),analytics=__webpack_require__(16),TransactionStepsMixin=__webpack_require__(2790),upgradesActions=__webpack_require__(646);var SecurePaymentForm=React.createClass({displayName:"SecurePaymentForm",mixins:[TransactionStepsMixin],propTypes:{products:React.PropTypes.object.isRequired,redirectTo:React.PropTypes.func.isRequired},getInitialState:function getInitialState(){var cart=this.props.cart;return{userSelectedPaymentBox:null,visiblePaymentBox:this.getVisiblePaymentBox(cart),previousCart:null}},getVisiblePaymentBox:function getVisiblePaymentBox(cart){if(isPaidForFullyInCredits(cart)){return"credits"}else if(isFree(cart)){return"free-cart"}else if(hasFreeTrial(cart)){return"free-trial"}else if(this.state&&this.state.userSelectedPaymentBox){return this.state.userSelectedPaymentBox}else if(cartValues.isCreditCardPaymentsEnabled(cart)){return"credit-card"}else if(cartValues.isPayPalExpressEnabled(cart)){return"paypal"}else{return null}},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(nextProps.transaction.step.name!=="before-submit"){return}var newCart=nextProps.cart;this.setState({visiblePaymentBox:this.getVisiblePaymentBox(newCart)})},handlePaymentBoxSubmit:function handlePaymentBoxSubmit(event){analytics.ga.recordEvent("Upgrades","Submitted Checkout Form");this.submitTransaction(event)},render:function render(){if(this.state.visiblePaymentBox===null){return React.createElement(EmptyContent,{illustration:"/calypso/images/drake/drake-500.svg",title:this.translate("Checkout is not available"),line:this.translate("We're hard at work on the issue. Please check back shortly."),action:this.translate("Back to Plans"),actionURL:"/plans/"+this.props.selectedSite.slug})}return React.createElement("div",{className:"secure-payment-form"},React.createElement(CreditsPaymentBox,{cart:this.props.cart,selected:this.state.visiblePaymentBox==="credits",onSubmit:this.handlePaymentBoxSubmit,transactionStep:this.props.transaction.step}),React.createElement(FreeTrialConfirmationBox,{cart:this.props.cart,selected:this.state.visiblePaymentBox==="free-trial",onSubmit:this.handlePaymentBoxSubmit,transactionStep:this.props.transaction.step}),React.createElement(FreeCartPaymentBox,{cart:this.props.cart,selected:this.state.visiblePaymentBox==="free-cart",onSubmit:this.handlePaymentBoxSubmit,products:this.props.products,selectedSite:this.props.selectedSite,transactionStep:this.props.transaction.step}),React.createElement(CreditCardPaymentBox,{cards:this.props.cards,transaction:this.props.transaction,cart:this.props.cart,countriesList:countriesList,initialCard:this.getInitialCard(),selected:this.state.visiblePaymentBox==="credit-card",selectedSite:this.props.selectedSite,onToggle:this.selectPaymentBox,onSubmit:this.handlePaymentBoxSubmit,transactionStep:this.props.transaction.step}),React.createElement(PayPalPaymentBox,{cart:this.props.cart,transaction:this.props.transaction,countriesList:countriesList,selected:this.state.visiblePaymentBox==="paypal",selectedSite:this.props.selectedSite,onToggle:this.selectPaymentBox,redirectTo:this.props.redirectTo}))},getInitialCard:function getInitialCard(){return this.props.cards[0]},componentWillMount:function componentWillMount(){this.setInitialPaymentDetails()},componentDidUpdate:function componentDidUpdate(prevProps,prevState){if(this.state.visiblePaymentBox!==prevState.visiblePaymentBox){this.setInitialPaymentDetails()}},setInitialPaymentDetails:function setInitialPaymentDetails(){var newPayment;switch(this.state.visiblePaymentBox){case"credits":case"free-trial":case"free-cart":newPayment=storeTransactions.fullCreditsPayment();break;case"credit-card":if(this.getInitialCard()){newPayment=storeTransactions.storedCardPayment(this.getInitialCard())}else{newPayment=storeTransactions.newCardPayment()}break;case"paypal":break}if(newPayment){defer(function(){upgradesActions.setPayment(newPayment)})}},selectPaymentBox:function selectPaymentBox(paymentBox){this.setState({userSelectedPaymentBox:paymentBox,visiblePaymentBox:paymentBox})}});SecurePaymentForm.Placeholder=React.createClass({displayName:"SecurePaymentForm.Placeholder",render:function render(){return React.createElement(PaymentBox,{classSet:"selected is-empty",contentClassSet:"selected is-empty"},React.createElement("div",{className:"payment-box-section"},React.createElement("div",{className:"placeholder-row placeholder"}),React.createElement("div",{className:"placeholder-row placeholder"}),React.createElement("div",{className:"placeholder-col-narrow placeholder-inline-pad"},React.createElement("div",{className:"placeholder"})),React.createElement("div",{className:"placeholder-col-narrow placeholder-inline-pad-only-wide"},React.createElement("div",{className:"placeholder"})),React.createElement("div",{className:"placeholder-col-wide"},React.createElement("div",{className:"placeholder"})),React.createElement("div",{className:"placeholder-row placeholder"})),React.createElement("div",{className:"payment-box-hr"}),React.createElement("div",{className:"placeholder-button-container"},React.createElement("div",{className:"placeholder-col-narrow"},React.createElement("div",{className:"placeholder placeholder-button"}))))}});module.exports=SecurePaymentForm},2790:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),debug=__webpack_require__(4)("calypso:my-sites:upgrades:checkout:transaction-steps-mixin"),pick=__webpack_require__(72),defer=__webpack_require__(341),isEqual=__webpack_require__(92),page=__webpack_require__(40);var analytics=__webpack_require__(16),adTracking=__webpack_require__(382),isFree=__webpack_require__(184).isFree,cartItems=__webpack_require__(184).cartItems,upgradesNotices=__webpack_require__(2449),upgradesActions=__webpack_require__(646);var TransactionStepsMixin={submitTransaction:function submitTransaction(event){event.preventDefault();upgradesActions.submitTransaction(pick(this.props,["cart","transaction"]))},componentWillReceiveProps:function componentWillReceiveProps(nextProps){var prevStep=this.props.transaction.step,nextStep=nextProps.transaction.step;if(!isEqual(prevStep,nextStep)){this._handleTransactionStep(nextProps)}},_handleTransactionStep:function _handleTransactionStep(_ref){var cart=_ref.cart;var selectedSite=_ref.selectedSite;var transaction=_ref.transaction;var step=transaction.step;debug("transaction step: "+step.name);this._displayNotices(cart,step);this._recordAnalytics(step);this._finishIfLastStep(cart,selectedSite,step)},_displayNotices:function _displayNotices(cart,step){if(step.error){upgradesNotices.displayError(step.error);return}switch(step.name){case"input-validation":if(!cartItems.hasFreeTrial(cart)){upgradesNotices.displaySubmitting({isFreeCart:isFree(cart)})}break;case"received-wpcom-response":upgradesNotices.clear();break}},_recordAnalytics:function _recordAnalytics(step){var cartValue=this.props.cart;switch(step.name){case"input-validation":if(step.error){analytics.tracks.recordEvent("calypso_checkout_payment_error",{reason:step.error.code})}else{analytics.tracks.recordEvent("calypso_checkout_form_submit",{credits:cartValue.credits,payment_method:this.props.transaction.payment.paymentMethod})}break;case"received-wpcom-response":if(step.error){analytics.tracks.recordEvent("calypso_checkout_payment_error",{reason:step.error.message});this._recordDomainRegistrationAnalytics({cart:cartValue,success:false})}else if(step.data){if(!cartItems.hasFreeTrial(cartValue)){cartValue.products.forEach(function(product){adTracking.recordPurchase(product,step.data.receipt_id)});adTracking.recordOrderInAtlas(cartValue,step.data.receipt_id);adTracking.recordOrderInCriteo(cartValue,step.data.receipt_id);adTracking.recordConversionInOneByAOL()}analytics.tracks.recordEvent("calypso_checkout_payment_success",{coupon_code:cartValue.coupon,currency:cartValue.currency,payment_method:this.props.transaction.payment.paymentMethod,total_cost:cartValue.total_cost});cartValue.products.forEach(function(cartItem){analytics.tracks.recordEvent("calypso_checkout_product_purchase",cartItem)});this._recordDomainRegistrationAnalytics({cart:cartValue,success:true})}break;default:if(step.error){analytics.tracks.recordEvent("calypso_checkout_payment_error",{reason:step.error.message})}}},_recordDomainRegistrationAnalytics:function _recordDomainRegistrationAnalytics(parameters){var cart=parameters.cart,success=parameters.success;cartItems.getDomainRegistrations(cart).forEach(function(cartItem){analytics.tracks.recordEvent("calypso_domain_registration",{domain_tld:cartItems.getDomainRegistrationTld(cartItem),success:success})})},_finishIfLastStep:function _finishIfLastStep(cart,selectedSite,step){var _this=this;if(!step.last||step.error){return}defer(function(){page(_this.props.redirectTo())})}};module.exports=TransactionStepsMixin},2791:function(module,exports,__webpack_require__){"use strict";var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var React=__webpack_require__(1),isEmpty=__webpack_require__(81);var Input=__webpack_require__(1558);module.exports=React.createClass({displayName:"HiddenInput",componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(!this.state.toggled&&!isEmpty(nextProps.value)){this.setState({toggled:true})}},getInitialState:function getInitialState(){return{toggled:false}},componentDidUpdate:function componentDidUpdate(prevProps,prevState){if(!prevState.toggled&&this.state.toggled&&prevProps.value===this.props.value){this.refs.input.focus()}},handleClick:function handleClick(event){event.preventDefault();this.setState({toggled:true})},render:function render(){if(this.state.toggled){return React.createElement(Input,(0,_extends3.default)({ref:"input"},this.props))}return React.createElement("div",{className:"hidden-input"},React.createElement("a",{href:"",onClick:this.handleClick},this.props.text))}})},2792:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StateSelect=exports.Input=exports.HiddenInput=exports.CountrySelect=undefined;var _countrySelect=__webpack_require__(1668);var _countrySelect2=_interopRequireDefault(_countrySelect);var _hiddenInput=__webpack_require__(2791);var _hiddenInput2=_interopRequireDefault(_hiddenInput);var _input=__webpack_require__(1558);var _input2=_interopRequireDefault(_input);var _stateSelect=__webpack_require__(2187);var _stateSelect2=_interopRequireDefault(_stateSelect);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.CountrySelect=_countrySelect2.default;exports.HiddenInput=_hiddenInput2.default;exports.Input=_input2.default;exports.StateSelect=_stateSelect2.default},2793:function(module,exports,__webpack_require__){"use strict";var page=__webpack_require__(40),i18n=__webpack_require__(13),ReactDom=__webpack_require__(43),React=__webpack_require__(1);var analytics=__webpack_require__(16),sites=__webpack_require__(55)(),route=__webpack_require__(122),Main=__webpack_require__(147),upgradesActions=__webpack_require__(646),setTitle=__webpack_require__(648).setDocumentHeadTitle,setSection=__webpack_require__(157).setSection,productsList=__webpack_require__(369)(),renderWithReduxStore=__webpack_require__(1458).renderWithReduxStore;module.exports={domainsAddHeader:function domainsAddHeader(context,next){context.getSiteSelectionHeaderText=function(){return i18n.translate("Select a site to add a domain")};next()},domainsAddRedirectHeader:function domainsAddRedirectHeader(context,next){context.getSiteSelectionHeaderText=function(){return i18n.translate("Select a site to add Site Redirect")};next()},domainSearch:function domainSearch(context){var CartData=__webpack_require__(1687),DomainSearch=__webpack_require__(2852),basePath=route.sectionify(context.path);context.store.dispatch(setTitle(i18n.translate("Domain Search")));analytics.pageView.record(basePath,"Domain Search > Domain Registration");if(typeof window!=="undefined"){window.scrollTo(0,0)}renderWithReduxStore(React.createElement(CartData,null,React.createElement(DomainSearch,{basePath:basePath,context:context,sites:sites,productsList:productsList})),document.getElementById("primary"),context.store)},siteRedirect:function siteRedirect(context){var CartData=__webpack_require__(1687),SiteRedirect=__webpack_require__(2855),basePath=route.sectionify(context.path);context.store.dispatch(setTitle(i18n.translate("Redirect a Site")));analytics.pageView.record(basePath,"Domain Search > Site Redirect");renderWithReduxStore(React.createElement(CartData,null,React.createElement(SiteRedirect,{productsList:productsList,sites:sites})),document.getElementById("primary"),context.store)},mapDomain:function mapDomain(context){var CartData=__webpack_require__(1687),MapDomain=__webpack_require__(2856),basePath=route.sectionify(context.path);context.store.dispatch(setTitle(i18n.translate("Map a Domain")));analytics.pageView.record(basePath,"Domain Search > Domain Mapping");renderWithReduxStore(React.createElement(Main,null,React.createElement(CartData,null,React.createElement(MapDomain,{store:context.store,productsList:productsList,initialQuery:context.query.initialQuery,sites:sites}))),document.getElementById("primary"),context.store)},googleAppsWithRegistration:function googleAppsWithRegistration(context){var CartData=__webpack_require__(1687),GoogleApps=__webpack_require__(1881);context.store.dispatch(setTitle(i18n.translate("Register %(domain)s",{args:{domain:context.params.registerDomain}})));var handleAddGoogleApps=function handleAddGoogleApps(googleAppsCartItem){upgradesActions.addItem(googleAppsCartItem);page("/checkout/"+sites.getSelectedSite().slug)};var handleGoBack=function handleGoBack(){page("/domains/add/"+sites.getSelectedSite().slug)};var handleClickSkip=function handleClickSkip(){page("/checkout/"+sites.getSelectedSite().slug)};analytics.pageView.record("/domains/add/:site/google-apps","Domain Search > Domain Registration > Google Apps");ReactDom.render(React.createElement(Main,null,React.createElement(CartData,null,React.createElement(GoogleApps,{productsList:productsList,domain:context.params.registerDomain,onGoBack:handleGoBack,onAddGoogleApps:handleAddGoogleApps,onClickSkip:handleClickSkip}))),document.getElementById("primary"))},checkout:function checkout(context){var Checkout=__webpack_require__(2777),CheckoutData=__webpack_require__(1688),CartData=__webpack_require__(1687),SecondaryCart=__webpack_require__(2767),basePath=route.sectionify(context.path),product=context.params.product,selectedFeature=context.params.feature;if("thank-you"===product){return}analytics.pageView.record(basePath,"Checkout");
context.store.dispatch(setTitle(i18n.translate("Checkout")));renderWithReduxStore(React.createElement(CheckoutData,null,React.createElement(Checkout,{product:product,productsList:productsList,selectedFeature:selectedFeature,sites:sites})),document.getElementById("primary"),context.store);renderWithReduxStore(React.createElement(CartData,null,React.createElement(SecondaryCart,{selectedSite:sites.getSelectedSite()})),document.getElementById("secondary"),context.store)},checkoutThankYou:function checkoutThankYou(context){var CheckoutThankYouComponent=__webpack_require__(2774),basePath=route.sectionify(context.path),receiptId=Number(context.params.receiptId);analytics.pageView.record(basePath,"Checkout Thank You");context.store.dispatch(setSection({name:"checkout-thank-you"},{hasSidebar:false}));context.store.dispatch(setTitle(i18n.translate("Thank You")));renderWithReduxStore(React.createElement(CheckoutThankYouComponent,{productsList:productsList,receiptId:receiptId,selectedFeature:context.params.feature,selectedSite:sites.getSelectedSite()}),document.getElementById("primary"),context.store);ReactDom.unmountComponentAtNode(document.getElementById("secondary"))},redirectIfNoSite:function redirectIfNoSite(redirectTo){return function(context,next){var selectedSite=sites.getSelectedSite();if(!selectedSite||!selectedSite.isUpgradeable()){return page.redirect(redirectTo)}next()}}}},2794:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),update=__webpack_require__(96),groupBy=__webpack_require__(692),mapValues=__webpack_require__(84),map=__webpack_require__(50),page=__webpack_require__(40),find=__webpack_require__(33),isEmpty=__webpack_require__(81);var analyticsMixin=__webpack_require__(649);var Card=__webpack_require__(1450);var FormButton=__webpack_require__(337);var FormFooter=__webpack_require__(1669);var FormLabel=__webpack_require__(645);var FormTextInputWithAffixes=__webpack_require__(1511);var cartItems=__webpack_require__(184).cartItems;var paths=__webpack_require__(342);var Notice=__webpack_require__(79);var ValidationErrorList=__webpack_require__(1732);var upgradesActions=__webpack_require__(646);var _require=__webpack_require__(152);var hasGoogleApps=_require.hasGoogleApps;var getGoogleAppsSupportedDomains=_require.getGoogleAppsSupportedDomains;var googleAppsLibrary=__webpack_require__(1801);var validateUsers=googleAppsLibrary.validate;var filterUsers=googleAppsLibrary.filter;var DomainsSelect=__webpack_require__(2795);var AddEmailAddressesCard=React.createClass({displayName:"AddEmailAddressesCard",mixins:[analyticsMixin("domainManagement","addGoogleApps")],propTypes:{domains:React.PropTypes.object.isRequired,selectedDomainName:React.PropTypes.string},getInitialState:function getInitialState(){return{fieldsets:[this.getNewFieldset()],validationErrors:null}},getNewFieldset:function getNewFieldset(){var domain=void 0;if(this.props.selectedDomainName){domain=this.props.selectedDomainName}else if(this.props.domains.hasLoadedFromServer){domain=this.getFirstDomainName()}else{domain=null}return{username:{value:""},domain:{value:domain}}},removeValidationErrors:function removeValidationErrors(){this.setState({validationErrors:null})},validationErrors:function validationErrors(){if(this.state.validationErrors){return React.createElement(Notice,{onDismissClick:this.removeValidationErrors,status:"is-error"},React.createElement(ValidationErrorList,{messages:this.state.validationErrors}))}},componentDidUpdate:function componentDidUpdate(prevProps){if(this.needsToUpdateDomainFields(prevProps)){this.setDomainFieldsToFirstDomainName()}},needsToUpdateDomainFields:function needsToUpdateDomainFields(prevProps){return!this.props.selectedDomainName&&!prevProps.domains.hasLoadedFromServer&&this.props.domains.hasLoadedFromServer},getFirstDomainName:function getFirstDomainName(){var domains=getGoogleAppsSupportedDomains(this.props.domains.list);return domains[0].name},setDomainFieldsToFirstDomainName:function setDomainFieldsToFirstDomainName(){var firstDomainName=this.getFirstDomainName(),nextFieldsets=this.state.fieldsets.map(function(fieldset){return update(fieldset,{domain:{value:{$set:firstDomainName}}})});this.setState({fieldsets:nextFieldsets})},render:function render(){return React.createElement("div",{className:"add-email-addresses-card"},this.validationErrors(),React.createElement(Card,{className:"add-email-addresses-card__inner"},React.createElement("form",{className:"add-email-addresses-card__form"},React.createElement(FormLabel,null,this.translate("Add Email Addresses")),this.allEmailAddressFieldsets(),this.addAnotherEmailAddressLink(),this.formButtons())))},allEmailAddressFieldsets:function allEmailAddressFieldsets(){var _this=this;return React.createElement("div",{className:"add-email-addresses-card__email-address-fieldsets"},this.state.fieldsets.map(function(_,index){return _this.emailAddressFieldset(index)}))},emailAddressFieldset:function emailAddressFieldset(index){var field=this.state.fieldsets[index],contactText=this.translate("contact",{context:"part of e-mail address",comment:"As it would be part of an e-mail address contact@example.com"});var suffix=void 0,select=void 0;if(this.props.selectedDomainName){suffix="@"+field.domain.value}else{select=React.createElement(DomainsSelect,{domains:this.props.domains,value:this.state.fieldsets[index].domain.value,onChange:this.handleFieldChange.bind(this,"domain",index),onFocus:this.handleFieldFocus.bind(this,"Domain",index)})}return React.createElement("div",{className:"add-email-addresses-card__email-address-fieldset",key:index},React.createElement(FormTextInputWithAffixes,{onChange:this.handleFieldChange.bind(this,"username",index),onFocus:this.handleFieldFocus.bind(this,"Email",index),placeholder:this.translate("e.g. %(example)s",{args:{example:contactText}}),suffix:suffix,type:"text",value:field.username.value}),select)},handleFieldChange:function handleFieldChange(fieldName,index,event){var newValue=event.target.value;var command={fieldsets:{}};command.fieldsets[index]={};command.fieldsets[index][fieldName]={value:{$set:newValue}};if(fieldName==="domain"){this.recordEvent("domainChange",newValue,index)}this.setState(update(this.state,command))},handleFieldFocus:function handleFieldFocus(fieldName,index){this.recordEvent("inputFocus",this.props.selectedDomainName,fieldName,index)},addAnotherEmailAddressLink:function addAnotherEmailAddressLink(){return React.createElement("a",{className:"add-email-addresses-card__add-another-email-address-link",href:"#",onClick:this.handleAddAnotherEmailAddress},this.translate("+ Add another email address"))},handleAddAnotherEmailAddress:function handleAddAnotherEmailAddress(event){event.preventDefault();this.setState({fieldsets:this.state.fieldsets.concat([this.getNewFieldset()])});this.recordEvent("addAnotherEmailAddressClick",this.props.selectedDomainName)},formButtons:function formButtons(){return React.createElement(FormFooter,{className:"add-email-addresses-card__footer"},React.createElement(FormButton,{onClick:this.handleContinue,disabled:!this.props.domains.hasLoadedFromServer},this.translate("Continue")),React.createElement(FormButton,{type:"button",isPrimary:false,onClick:this.handleCancel,disabled:!this.props.domains.hasLoadedFromServer},this.translate("Cancel")))},getFields:function getFields(){return{username:this.translate("User Name")}},handleContinue:function handleContinue(event){event.preventDefault();var validation=validateUsers({users:this.state.fieldsets,fields:this.getFields()});if(!isEmpty(validation.errors)){this.setState({validationErrors:validation.errors,fieldsets:validation.users})}this.recordEvent("continueClick",this.props.selectedDomainName,isEmpty(validation.errors),validation.users.length);if(isEmpty(validation.errors)){this.addProductsAndGoToCheckout()}},addProductsAndGoToCheckout:function addProductsAndGoToCheckout(){var googleAppsCartItems=void 0;googleAppsCartItems=getGoogleAppsCartItems({domains:this.props.domains,fieldsets:filterUsers({users:this.state.fieldsets,fields:this.getFields()})});googleAppsCartItems.forEach(upgradesActions.addItem);page("/checkout/"+this.props.selectedSite.slug)},handleCancel:function handleCancel(event){event.preventDefault();this.recordEvent("cancelClick",this.props.selectedDomainName);page(paths.domainManagementEmail(this.props.selectedSite.slug,this.props.selectedDomainName))}});function getGoogleAppsCartItems(_ref){var domains=_ref.domains;var fieldsets=_ref.fieldsets;var groups=groupBy(fieldsets,function(fieldset){return fieldset.domain.value});groups=mapValues(groups,function(group){return map(group,function(fieldset){return{email:fieldset.username.value+"@"+fieldset.domain.value}})});return map(groups,function(users,domain){var domainInfo=find(domains.list,{name:domain});var item=void 0;if(hasGoogleApps(domainInfo)){item=cartItems.googleAppsExtraLicenses({domain:domain,users:users})}else{item=cartItems.googleApps({domain:domain,users:users})}return item})}module.exports=AddEmailAddressesCard},2795:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var _require=__webpack_require__(152);var getGoogleAppsSupportedDomains=_require.getGoogleAppsSupportedDomains;var DomainsSelect=React.createClass({displayName:"DomainsSelect",propTypes:{domains:React.PropTypes.object.isRequired},render:function render(){var domainRegistrations=void 0,disabled=void 0,options=void 0;if(this.props.domains.hasLoadedFromServer){domainRegistrations=getGoogleAppsSupportedDomains(this.props.domains.list);disabled=false;options=domainRegistrations.map(function(domain){return React.createElement("option",{value:domain.name,key:domain.name},"@",domain.name)})}else{disabled=true;options=React.createElement("option",null,this.translate("Loading"),"...")}return React.createElement("select",{value:this.props.value,onChange:this.props.onChange,onFocus:this.props.onFocus,disabled:disabled},options)}});module.exports=DomainsSelect},2796:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),page=__webpack_require__(40);var Main=__webpack_require__(147);var Header=__webpack_require__(1529);var AddEmailAddressesCard=__webpack_require__(2794);var paths=__webpack_require__(342);var _require=__webpack_require__(152);var hasGoogleAppsSupportedDomain=_require.hasGoogleAppsSupportedDomain;var SectionHeader=__webpack_require__(1451);var AddGoogleApps=React.createClass({displayName:"AddGoogleApps",componentDidMount:function componentDidMount(){this.ensureCanAddEmail()},componentDidUpdate:function componentDidUpdate(){this.ensureCanAddEmail()},ensureCanAddEmail:function ensureCanAddEmail(){var needsRedirect=this.props.domains.hasLoadedFromServer&&!hasGoogleAppsSupportedDomain(this.props.domains.list);if(needsRedirect){var path=paths.domainManagementEmail(this.props.selectedSite.slug,this.props.selectedDomainName);page.replace(path)}},render:function render(){return React.createElement(Main,{className:"domain-management-add-google-apps"},React.createElement(Header,{onClick:this.goToEmail,selectedDomainName:this.props.selectedDomainName},this.translate("Add Google Apps")),React.createElement(SectionHeader,{label:this.translate("Add Google Apps")}),React.createElement(AddEmailAddressesCard,{domains:this.props.domains,selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.selectedSite}))},goToEmail:function goToEmail(){var path=paths.domainManagementEmail(this.props.selectedSite.slug,this.props.selectedDomainName);page(path)}});module.exports=AddGoogleApps},2797:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var React=__webpack_require__(1);var notices=__webpack_require__(71),upgradesActions=__webpack_require__(646);function createContainer(DecoratedComponent){return React.createClass({propTypes:{selectedDomainName:React.PropTypes.string.isRequired},render:function render(){return React.createElement(DecoratedComponent,(0,_extends3.default)({},this.props,this.state,{handleSubmit:this.handleSubmit}))},getInitialState:function getInitialState(){return{submitting:false}},handleSubmit:function handleSubmit(event){var _this=this;event.preventDefault();this.setState({submitting:true});upgradesActions.resendIcannVerification(this.props.selectedDomainName,function(error){if(error){notices.error(error.message)}else{notices.success(_this.translate("We successfully resent the ICANN verification email to your "+"email address on file."))}_this.setState({submitting:false})})}})}var Button=React.createClass({displayName:"Button",propTypes:{submitting:React.PropTypes.bool.isRequired,onClick:React.PropTypes.func.isRequired},render:function render(){return React.createElement("button",{disabled:this.props.submitting,className:"button is-primary is-full-width",onClick:this.props.onClick},this.translate("Resend verification email"))}});exports.default={createContainer:createContainer,Button:Button};module.exports=exports["default"]},2798:function(module,exports,__webpack_require__){"use strict";var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _contactDisplay=__webpack_require__(2799);var _contactDisplay2=_interopRequireDefault(_contactDisplay);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ContactsPrivacyCard=_react2.default.createClass({displayName:"ContactsPrivacyCard",propTypes:{contactInformation:_react2.default.PropTypes.object.isRequired,privateDomain:_react2.default.PropTypes.bool.isRequired,hasPrivacyProtection:_react2.default.PropTypes.bool.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired,currentUserCanManage:_react2.default.PropTypes.bool.isRequired},render:function render(){return _react2.default.createElement("div",null,_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Domain Contacts")}),_react2.default.createElement(_compact2.default,{className:"contacts-privacy-card"},_react2.default.createElement("p",{className:"settings-explanation"},this.translate("Domain owners are required to make their contact information available to the public. "+"{{a}}Learn more.{{/a}}",{components:{a:_react2.default.createElement("a",{href:_support2.default.PUBLIC_VS_PRIVATE,target:"_blank"})}})),this.props.currentUserCanManage&&this.getNotice(),_react2.default.createElement(_contactDisplay2.default,{contactInformation:this.props.contactInformation})))},getNotice:function getNotice(){if(this.props.hasPrivacyProtection&&this.props.privateDomain){return _react2.default.createElement(_notice2.default,{status:"is-success",showDismiss:false},this.translate("{{strong}}Privacy Protection{{/strong}} is turned on for this domain. "+"Your contact information is {{strong}}private{{/strong}}. ",{components:{strong:_react2.default.createElement("strong",null)}}))}else if(this.props.hasPrivacyProtection&&!this.props.privateDomain){return _react2.default.createElement(_notice2.default,{status:"is-warning",showDismiss:false},this.translate("{{strong}}Privacy Protection{{/strong}} is temporarily "+"disabled for this domain while the domain is being transferred. "+"Your contact information is {{strong}}public{{/strong}}. "+"{{a}}Cancel Transfer and Enable Privacy Protection{{/a}}",{components:{strong:_react2.default.createElement("strong",null),a:_react2.default.createElement("a",{href:_paths2.default.domainManagementTransfer(this.props.selectedSite.slug,this.props.selectedDomainName)})}}))}return _react2.default.createElement(_notice2.default,{status:"is-warning",showDismiss:false},this.translate("{{strong}}Privacy Protection{{/strong}} is turned off for this domain. "+"Your contact information is {{strong}}public{{/strong}}. "+"{{a}}Enable Privacy Protection{{/a}}",{components:{strong:_react2.default.createElement("strong",null),a:_react2.default.createElement("a",{href:_paths2.default.domainManagementPrivacyProtection(this.props.selectedSite.slug,this.props.selectedDomainName)})}}))}});module.exports=ContactsPrivacyCard},2799:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var ContactDisplay=React.createClass({displayName:"ContactDisplay",propTypes:{contactInformation:React.PropTypes.object.isRequired},render:function render(){var contactInformation=this.props.contactInformation;return React.createElement("div",{className:"contact-display"},React.createElement("h2",null,this.translate("Public Record Preview")),React.createElement("div",{className:"contact-display-content"},React.createElement("p",null,contactInformation.firstName," ",contactInformation.lastName),contactInformation.organization&&React.createElement("p",null,contactInformation.organization),React.createElement("p",null,contactInformation.email),React.createElement("p",null,contactInformation.address1),contactInformation.address2&&React.createElement("p",null,contactInformation.address2),React.createElement("p",null,contactInformation.city,contactInformation.stateName&&React.createElement("span",null,", ",contactInformation.stateName),React.createElement("span",null," ",contactInformation.postalCode)),React.createElement("p",null,contactInformation.countryName),React.createElement("p",null,contactInformation.phone),contactInformation.fax&&React.createElement("p",null,contactInformation.fax)))}});module.exports=ContactDisplay},2800:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _card=__webpack_require__(2798);var _card2=_interopRequireDefault(_card);var _mainPlaceholder=__webpack_require__(1626);var _mainPlaceholder2=_interopRequireDefault(_mainPlaceholder);var _header=__webpack_require__(1529);var _header2=_interopRequireDefault(_header);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _verticalNav=__webpack_require__(1587);var _verticalNav2=_interopRequireDefault(_verticalNav);var _item=__webpack_require__(1553);var _item2=_interopRequireDefault(_item);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _domains=__webpack_require__(152);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ContactsPrivacy=_react2.default.createClass({displayName:"ContactsPrivacy",propTypes:{domains:_react2.default.PropTypes.object.isRequired,whois:_react2.default.PropTypes.object.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired},render:function render(){if(this.isDataLoading()){return _react2.default.createElement(_mainPlaceholder2.default,{goBack:this.goToEdit})}var domain=(0,_domains.getSelectedDomain)(this.props);var hasPrivacyProtection=domain.hasPrivacyProtection;var privateDomain=domain.privateDomain;var currentUserCanManage=domain.currentUserCanManage;return _react2.default.createElement(_main2.default,{className:"domain-management-contacts-privacy"},_react2.default.createElement(_header2.default,{onClick:this.goToEdit,selectedDomainName:this.props.selectedDomainName},this.translate("Contacts and Privacy")),_react2.default.createElement(_verticalNav2.default,null,_react2.default.createElement(_card2.default,{contactInformation:this.props.whois.data,selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.selectedSite,hasPrivacyProtection:hasPrivacyProtection,privateDomain:privateDomain,currentUserCanManage:currentUserCanManage}),_react2.default.createElement(_item2.default,{path:_paths2.default.domainManagementEditContactInfo(this.props.selectedSite.slug,this.props.selectedDomainName)},this.translate("Edit Contact Info")),!hasPrivacyProtection&&_react2.default.createElement(_item2.default,{path:_paths2.default.domainManagementPrivacyProtection(this.props.selectedSite.slug,this.props.selectedDomainName)},this.translate("Privacy Protection"))))},isDataLoading:function isDataLoading(){return!(0,_domains.getSelectedDomain)(this.props)||!this.props.whois.hasLoadedFromServer},goToEdit:function goToEdit(){(0,_page2.default)(_paths2.default.domainManagementEdit(this.props.selectedSite.slug,this.props.selectedDomainName))}});exports.default=ContactsPrivacy;module.exports=exports["default"]},2801:function(module,exports,__webpack_require__){"use strict";var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);var _dns=__webpack_require__(2266);var _dns2=_interopRequireDefault(_dns);var _domainManagement=__webpack_require__(2813);var _domainManagement2=_interopRequireDefault(_domainManagement);var _domainManagement3=__webpack_require__(2269);var _domainManagement4=_interopRequireDefault(_domainManagement3);var _email=__webpack_require__(2268);var _email2=_interopRequireDefault(_email);var _emailForwarding=__webpack_require__(2267);var _emailForwarding2=_interopRequireDefault(_emailForwarding);var _nameservers=__webpack_require__(2270);var _nameservers2=_interopRequireDefault(_nameservers);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _primaryDomain=__webpack_require__(2271);var _primaryDomain2=_interopRequireDefault(_primaryDomain);var _productsList=__webpack_require__(369);var _productsList2=_interopRequireDefault(_productsList);var _reactHelpers=__webpack_require__(1458);var _siteRedirect=__webpack_require__(2272);var _siteRedirect2=_interopRequireDefault(_siteRedirect);var _sitesList=__webpack_require__(55);var _sitesList2=_interopRequireDefault(_sitesList);var _transfer=__webpack_require__(2273);var _transfer2=_interopRequireDefault(_transfer);var _whois=__webpack_require__(2274);var _whois2=_interopRequireDefault(_whois);var _actions=__webpack_require__(648);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var productsList=new _productsList2.default,sites=new _sitesList2.default;var setTitle=function setTitle(title,pageContext){pageContext.store.dispatch((0,_actions.setDocumentHeadTitle)(title))};module.exports={domainManagementList:function domainManagementList(pageContext){setTitle(_i18nCalypso2.default.translate("Domain Management"),pageContext);_analytics2.default.pageView.record(_paths2.default.domainManagementList(":site"),"Domain Management");(0,_reactHelpers.renderWithReduxStore)(_react2.default.createElement(_domainManagement4.default,{component:_domainManagement2.default.List.default,context:pageContext,productsList:productsList,sites:sites}),document.getElementById("primary"),pageContext.store)},domainManagementEdit:function domainManagementEdit(pageContext){setTitle(_i18nCalypso2.default.translate("Edit %(domain)s",{args:{domain:pageContext.params.domain}}),pageContext);_analytics2.default.pageView.record(_paths2.default.domainManagementEdit(":site",":domain"),"Domain Management › Edit");(0,_reactHelpers.renderWithReduxStore)(_react2.default.createElement(_domainManagement4.default,{component:_domainManagement2.default.Edit,context:pageContext,productsList:productsList,selectedDomainName:pageContext.params.domain,sites:sites}),document.getElementById("primary"),pageContext.store)},domainManagementPrimaryDomain:function domainManagementPrimaryDomain(pageContext){setTitle(_i18nCalypso2.default.translate("Set Primary Domain"),pageContext);_analytics2.default.pageView.record(_paths2.default.domainManagementPrimaryDomain(":site",":domain"),"Domain Management › Set Primary Domain");(0,_reactHelpers.renderWithReduxStore)(_react2.default.createElement(_primaryDomain2.default,{component:_domainManagement2.default.PrimaryDomain,context:pageContext,selectedDomainName:pageContext.params.domain,sites:sites}),document.getElementById("primary"),pageContext.store)},domainManagementContactsPrivacy:function domainManagementContactsPrivacy(pageContext){setTitle(_i18nCalypso2.default.translate("Contacts and Privacy"),pageContext);_analytics2.default.pageView.record(_paths2.default.domainManagementContactsPrivacy(":site",":domain"),"Domain Management › Contacts and Privacy");(0,_reactHelpers.renderWithReduxStore)(_react2.default.createElement(_whois2.default,{component:_domainManagement2.default.ContactsPrivacy,context:pageContext,productsList:productsList,selectedDomainName:pageContext.params.domain,sites:sites}),document.getElementById("primary"),pageContext.store)},domainManagementEditContactInfo:function domainManagementEditContactInfo(pageContext){setTitle(_i18nCalypso2.default.translate("Edit Contact Info"),pageContext);_analytics2.default.pageView.record(_paths2.default.domainManagementEditContactInfo(":site",":domain"),"Domain Management › Contacts and Privacy › Edit Contact Info");(0,_reactHelpers.renderWithReduxStore)(_react2.default.createElement(_whois2.default,{component:_domainManagement2.default.EditContactInfo,context:pageContext,productsList:productsList,selectedDomainName:pageContext.params.domain,sites:sites}),document.getElementById("primary"),pageContext.store)},domainManagementEmail:function domainManagementEmail(pageContext){setTitle(_i18nCalypso2.default.translate("Email"),pageContext);_analytics2.default.pageView.record(_paths2.default.domainManagementEmail(":site",pageContext.params.domain?":domain":undefined),"Domain Management › Email");(0,_reactHelpers.renderWithReduxStore)(_react2.default.createElement(_email2.default,{component:_domainManagement2.default.Email,productsList:productsList,selectedDomainName:pageContext.params.domain,context:pageContext,sites:sites}),document.getElementById("primary"),pageContext.store)},domainManagementEmailForwarding:function domainManagementEmailForwarding(pageContext){setTitle(_i18nCalypso2.default.translate("Email Forwarding"),pageContext);_analytics2.default.pageView.record(_paths2.default.domainManagementEmailForwarding(":site",":domain"),"Domain Management › Email › Email Forwarding");(0,_reactHelpers.renderWithReduxStore)(_react2.default.createElement(_emailForwarding2.default,{component:_domainManagement2.default.EmailForwarding,selectedDomainName:pageContext.params.domain,sites:sites}),document.getElementById("primary"),pageContext.store)},domainManagementDns:function domainManagementDns(pageContext){setTitle(_i18nCalypso2.default.translate("DNS Records"),pageContext);_analytics2.default.pageView.record(_paths2.default.domainManagementDns(":site",":domain"),"Domain Management › Name Servers and DNS › DNS Records");(0,_reactHelpers.renderWithReduxStore)(_react2.default.createElement(_dns2.default,{component:_domainManagement2.default.Dns,selectedDomainName:pageContext.params.domain,sites:sites}),document.getElementById("primary"),pageContext.store)},domainManagementNameServers:function domainManagementNameServers(pageContext){setTitle(_i18nCalypso2.default.translate("Name Servers and DNS"),pageContext);_analytics2.default.pageView.record(_paths2.default.domainManagementNameServers(":site",":domain"),"Domain Management › Name Servers and DNS");(0,_reactHelpers.renderWithReduxStore)(_react2.default.createElement(_nameservers2.default,{component:_domainManagement2.default.NameServers,selectedDomainName:pageContext.params.domain,sites:sites}),document.getElementById("primary"),pageContext.store)},domainManagementPrivacyProtection:function domainManagementPrivacyProtection(pageContext){setTitle(_i18nCalypso2.default.translate("Privacy Protection"),pageContext);_analytics2.default.pageView.record(_paths2.default.domainManagementPrivacyProtection(":site",":domain"),"Domain Management › Contacts and Privacy › Privacy Protection");(0,_reactHelpers.renderWithReduxStore)(_react2.default.createElement(_whois2.default,{component:_domainManagement2.default.PrivacyProtection,context:pageContext,productsList:productsList,selectedDomainName:pageContext.params.domain,sites:sites}),document.getElementById("primary"),pageContext.store)},domainManagementAddGoogleApps:function domainManagementAddGoogleApps(pageContext){setTitle(_i18nCalypso2.default.translate("Add Google Apps"),pageContext);_analytics2.default.pageView.record(_paths2.default.domainManagementAddGoogleApps(":site",pageContext.params.domain?":domain":undefined),"Domain Management › Add Google Apps");(0,_reactHelpers.renderWithReduxStore)(_react2.default.createElement(_domainManagement4.default,{component:_domainManagement2.default.AddGoogleApps,context:pageContext,productsList:productsList,selectedDomainName:pageContext.params.domain,sites:sites}),document.getElementById("primary"),pageContext.store)},domainManagementRedirectSettings:function domainManagementRedirectSettings(pageContext){setTitle(_i18nCalypso2.default.translate("Redirect Settings"),pageContext);_analytics2.default.pageView.record(_paths2.default.domainManagementRedirectSettings(":site",":domain"),"Domain Management › Redirect Settings");(0,_reactHelpers.renderWithReduxStore)(_react2.default.createElement(_siteRedirect2.default,{component:_domainManagement2.default.SiteRedirect,selectedDomainName:pageContext.params.domain,sites:sites}),document.getElementById("primary"),pageContext.store)},domainManagementIndex:function domainManagementIndex(){_page2.default.redirect("/domains/manage"+(sites.getSelectedSite()?"/"+sites.getSelectedSite().slug:""))},domainManagementTransfer:function domainManagementTransfer(pageContext){setTitle(_i18nCalypso2.default.translate("Transfer Domain"),pageContext);(0,_reactHelpers.renderWithReduxStore)(_react2.default.createElement(_transfer2.default,{component:_domainManagement2.default.Transfer,selectedDomainName:pageContext.params.domain,sites:sites}),document.getElementById("primary"),pageContext.store)}}},2802:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _formFieldset=__webpack_require__(338);var _formFieldset2=_interopRequireDefault(_formFieldset);var _formInputValidation=__webpack_require__(1456);var _formInputValidation2=_interopRequireDefault(_formInputValidation);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _formTextInput=__webpack_require__(246);var _formTextInput2=_interopRequireDefault(_formTextInput);var _formTextInputWithAffixes=__webpack_require__(1511);var _formTextInputWithAffixes2=_interopRequireDefault(_formTextInputWithAffixes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ARecord=_react2.default.createClass({displayName:"ARecord",statics:{initialFields:{name:"",data:""}},propTypes:{fieldValues:_react2.default.PropTypes.object.isRequired,onChange:_react2.default.PropTypes.func.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,
show:_react2.default.PropTypes.bool.isRequired},render:function render(){var classes=(0,_classnames2.default)({"is-hidden":!this.props.show});var _props=this.props;var fieldValues=_props.fieldValues;var isValid=_props.isValid;var onChange=_props.onChange;var selectedDomainName=_props.selectedDomainName;var isNameValid=isValid("name");var isDataValid=isValid("data");var isAaaaRecord=this.props.fieldValues.type==="AAAA";var namePlaceholder=this.translate("Enter subdomain (optional)",{context:"Placeholder shown when entering the optional subdomain part of a new DNS record"}),dataPlaceholder=this.translate("e.g. %(example)s",{args:{example:"123.45.78.9"}});if(isAaaaRecord){namePlaceholder=this.translate("Enter subdomain (required)",{context:"Placeholder shown when entering the required subdomain part of a new DNS record"}),dataPlaceholder=this.translate("e.g. %(example)s",{args:{example:"2001:500:84::b"}})}return _react2.default.createElement("div",{className:classes},_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Name",{context:"Dns Record"})),_react2.default.createElement(_formTextInputWithAffixes2.default,{name:"name",placeholder:namePlaceholder,isError:!isNameValid,onChange:onChange,value:fieldValues.name,suffix:"."+selectedDomainName}),!isNameValid?_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid Name"),isError:true}):null),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Points To")),_react2.default.createElement(_formTextInput2.default,{name:"data",isError:!isDataValid,onChange:onChange,value:fieldValues.data,placeholder:dataPlaceholder}),!isDataValid?_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid IP"),isError:true}):null))}});exports.default=ARecord;module.exports=exports["default"]},2803:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _formFieldset=__webpack_require__(338);var _formFieldset2=_interopRequireDefault(_formFieldset);var _formInputValidation=__webpack_require__(1456);var _formInputValidation2=_interopRequireDefault(_formInputValidation);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _formTextInput=__webpack_require__(246);var _formTextInput2=_interopRequireDefault(_formTextInput);var _formTextInputWithAffixes=__webpack_require__(1511);var _formTextInputWithAffixes2=_interopRequireDefault(_formTextInputWithAffixes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CnameRecord=_react2.default.createClass({displayName:"CnameRecord",statics:{initialFields:{name:"",data:""}},propTypes:{fieldValues:_react2.default.PropTypes.object.isRequired,onChange:_react2.default.PropTypes.func.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,show:_react2.default.PropTypes.bool.isRequired},render:function render(){var classes=(0,_classnames2.default)({"is-hidden":!this.props.show}),isValid=this.props.isValid,isNameValid=isValid("name"),isDataValid=isValid("data");return _react2.default.createElement("div",{className:classes},_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Name",{context:"Dns Record"})),_react2.default.createElement(_formTextInputWithAffixes2.default,{name:"name",placeholder:this.translate("Enter subdomain (required)",{context:"Placeholder shown when entering the required subdomain part of a new DNS record"}),isError:!isNameValid,onChange:this.props.onChange,value:this.props.fieldValues.name,suffix:"."+this.props.selectedDomainName}),!isNameValid?_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid Name"),isError:true}):null),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Alias Of")),_react2.default.createElement(_formTextInput2.default,{name:"data",isError:!isDataValid,onChange:this.props.onChange,value:this.props.fieldValues.data,placeholder:this.translate("e.g. %(example)s",{args:{example:"example.com"}})}),!isDataValid?_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid Target Host"),isError:true}):null))}});exports.default=CnameRecord;module.exports=exports["default"]},2804:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _dialog=__webpack_require__(148);var _dialog2=_interopRequireDefault(_dialog);var _paths=__webpack_require__(342);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DeleteEmailForwardsDialog=_react2.default.createClass({displayName:"DeleteEmailForwardsDialog",propTypes:{onClose:_react2.default.PropTypes.func,visible:_react2.default.PropTypes.bool.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired},close:function close(result){this.props.onClose(result)},isVisible:function isVisible(){return this.props.visible},render:function render(){var _this=this;var buttons=[{action:"delete",label:this.translate("Deactivate Email Forwards and Remove Records"),isPrimary:true,onClick:function onClick(){return _this.close({shouldDeleteEmailForwards:true})}},{action:"keep",label:this.translate("Keep Records and Email Forwards")}];return _react2.default.createElement(_dialog2.default,{isVisible:this.isVisible(),buttons:buttons,onClose:function onClose(){return _this.close({shouldDeleteEmailForwards:false})},className:"cancel-purchase-button__warning-dialog"},_react2.default.createElement("h1",null,this.translate("Are you sure?")),_react2.default.createElement("p",null,this.translate("Removing this record will delete your current {{a}}Email Forwards{{/a}}.",{components:{a:_react2.default.createElement("a",{target:"_blank",href:this.getEmailForwardingPath()})}})))},getEmailForwardingPath:function getEmailForwardingPath(){return(0,_paths.domainManagementEmailForwarding)(this.props.selectedSite.slug,this.props.selectedDomainName)}});exports.default=DeleteEmailForwardsDialog;module.exports=exports["default"]},2805:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _slicedToArray2=__webpack_require__(262);var _slicedToArray3=_interopRequireDefault(_slicedToArray2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _includes=__webpack_require__(34);var _includes2=_interopRequireDefault(_includes);var _assign=__webpack_require__(29);var _assign2=_interopRequireDefault(_assign);var _find3=__webpack_require__(33);var _find4=_interopRequireDefault(_find3);var _aRecord=__webpack_require__(2802);var _aRecord2=_interopRequireDefault(_aRecord);var _cnameRecord=__webpack_require__(2803);var _cnameRecord2=_interopRequireDefault(_cnameRecord);var _formButton=__webpack_require__(337);var _formButton2=_interopRequireDefault(_formButton);var _formFieldset=__webpack_require__(338);var _formFieldset2=_interopRequireDefault(_formFieldset);var _formFooter=__webpack_require__(1669);var _formFooter2=_interopRequireDefault(_formFooter);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _formSelect=__webpack_require__(1484);var _formSelect2=_interopRequireDefault(_formSelect);var _mxRecord=__webpack_require__(2810);var _mxRecord2=_interopRequireDefault(_mxRecord);var _txtRecord=__webpack_require__(2812);var _txtRecord2=_interopRequireDefault(_txtRecord);var _srvRecord=__webpack_require__(2811);var _srvRecord2=_interopRequireDefault(_srvRecord);var _formState=__webpack_require__(1512);var _formState2=_interopRequireDefault(_formState);var _notices=__webpack_require__(71);var _notices2=_interopRequireDefault(_notices);var _actions=__webpack_require__(646);var upgradesActions=_interopRequireWildcard(_actions);var _dns=__webpack_require__(375);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DnsAddNew=_react2.default.createClass({displayName:"DnsAddNew",propTypes:{isSubmittingForm:_react2.default.PropTypes.bool.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired},getInitialState:function getInitialState(){return{show:false,fields:null,type:"A"}},recordTypes:[[_aRecord2.default,["A","AAAA"]],[_cnameRecord2.default,["CNAME"]],[_mxRecord2.default,["MX"]],[_txtRecord2.default,["TXT"]],[_srvRecord2.default,["SRV"]]],getFieldsForType:function getFieldsForType(type){var _find=(0,_find4.default)(this.recordTypes,function(_ref){var _ref2=(0,_slicedToArray3.default)(_ref,2);var _=_ref2[0];var types=_ref2[1];return(0,_includes2.default)(types,type)});var _find2=(0,_slicedToArray3.default)(_find,2);var Component=_find2[0];var _=_find2[1];return(0,_assign2.default)({},Component.initialFields,{type:type})},componentWillMount:function componentWillMount(){var _this=this;this.formStateController=_formState2.default.Controller({initialFields:this.getFieldsForType(this.state.type),onNewState:this.setFormState,validatorFunction:function validatorFunction(fieldValues,onComplete){onComplete(null,(0,_dns.validateAllFields)(fieldValues,_this.props.selectedDomainName))}});this.setFormState(this.formStateController.getInitialState())},setFormState:function setFormState(fields){this.setState({fields:fields})},onAddDnsRecord:function onAddDnsRecord(event){var _this2=this;event.preventDefault();if(!this.state.show){this.setState({show:true});return}this.formStateController.handleSubmit(function(hasErrors){if(hasErrors){return}var normalizedData=(0,_dns.getNormalizedData)(_formState2.default.getAllFieldValues(_this2.state.fields),_this2.props.selectedDomainName);_this2.formStateController.resetFields(_this2.getFieldsForType(_this2.state.type));upgradesActions.addDns(_this2.props.selectedDomainName,normalizedData,function(error){if(error){_notices2.default.error(error.message||_this2.translate("The DNS record has not been added."))}else{_notices2.default.success(_this2.translate("The DNS record has been added."),{duration:5e3});_this2.setState({show:true})}})})},onChange:function onChange(event){var _event$target=event.target;var name=_event$target.name;var value=_event$target.value;var skipNormalization=name==="data"&&this.state.type==="TXT";this.formStateController.handleFieldChange({name:name,value:skipNormalization?value:value.trim().toLowerCase()})},changeType:function changeType(event){var fields=this.getFieldsForType(event.target.value);this.setState({type:event.target.value});this.formStateController.resetFields(fields)},isValid:function isValid(fieldName){if(!this.state.fields[fieldName]){return true}return!_formState2.default.isFieldInvalid(this.state.fields,fieldName)},recordFields:function recordFields(){var _this3=this;return this.recordTypes.map(function(_ref3){var _ref4=(0,_slicedToArray3.default)(_ref3,2);var Component=_ref4[0];var showTypes=_ref4[1];return _react2.default.createElement(Component,{key:Component.displayName,selectedDomainName:_this3.props.selectedDomainName,show:(0,_includes2.default)(showTypes,_this3.state.fields.type.value),fieldValues:_formState2.default.getAllFieldValues(_this3.state.fields),isValid:_this3.isValid,onChange:_this3.onChange})})},render:function render(){var classes=(0,_classnames2.default)("form-content",{"is-hidden":!this.state.show}),options=["A","AAAA","CNAME","MX","SRV","TXT"].map(function(type){return _react2.default.createElement("option",{key:type},type)}),isSubmitDisabled=_formState2.default.isSubmitButtonDisabled(this.state.fields)||this.props.isSubmittingForm||_formState2.default.hasErrors(this.state.fields);return _react2.default.createElement("form",{className:"dns__add-new"},_react2.default.createElement("div",{className:classes},_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Type",{context:"DNS Record"})),_react2.default.createElement(_formSelect2.default,{onChange:this.changeType,value:this.state.fields.type.value},options)),this.recordFields()),_react2.default.createElement(_formFooter2.default,null,_react2.default.createElement(_formButton2.default,{disabled:this.state.show?isSubmitDisabled:false,onClick:this.onAddDnsRecord},this.translate("Add New DNS Record")),this.state.show&&_react2.default.createElement(_formButton2.default,{type:"button",disabled:this.props.isSubmittingForm,isPrimary:false,onClick:this.onCancel},this.translate("Cancel"))))},onCancel:function onCancel(){this.setState({show:false})}});exports.default=DnsAddNew;module.exports=exports["default"]},2806:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var support=__webpack_require__(339);var DnsDetails=React.createClass({displayName:"DnsDetails",render:function render(){return React.createElement("p",{className:"dns__details"},this.translate("DNS records are special settings that change how your domain works. They let you connect to third-party services, like an email provider. "),React.createElement("a",{href:support.CUSTOM_DNS},this.translate("Learn more.")))}});module.exports=DnsDetails},2807:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _deleteEmailForwardsDialog=__webpack_require__(2804);var _deleteEmailForwardsDialog2=_interopRequireDefault(_deleteEmailForwardsDialog);var _dnsRecord=__webpack_require__(2808);var _dnsRecord2=_interopRequireDefault(_dnsRecord);var _notices=__webpack_require__(71);var _notices2=_interopRequireDefault(_notices);var _actions=__webpack_require__(646);var _dns=__webpack_require__(375);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DnsList=_react2.default.createClass({displayName:"DnsList",propTypes:{dns:_react2.default.PropTypes.object.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired},getInitialState:function getInitialState(){return{dialog:this.noDialog()}},noDialog:function noDialog(){return{type:null,onClose:null}},openDialog:function openDialog(type,onClose){this.setState({dialog:{type:type,onClose:onClose}})},handleDialogClose:function handleDialogClose(result){this.state.dialog.onClose(result);this.setState({dialog:this.noDialog()})},deleteDns:function deleteDns(record){var _this=this;var confirmed=arguments.length<=1||arguments[1]===undefined?false:arguments[1];var records=this.props.dns.records;if(!confirmed&&(0,_dns.isDeletingLastMXRecord)(record,records)){this.openDialog("deleteEmailForwards",function(result){if(result.shouldDeleteEmailForwards){_this.deleteDns(record,true)}});return}(0,_actions.deleteDns)(this.props.selectedDomainName,record,function(error){if(error){_notices2.default.error(error.message||_this.translate("The DNS record has not been deleted."))}else{(function(){var notice=_notices2.default.success(_this.translate("The DNS record has been deleted."),{showDismiss:false,duration:5e3,button:_this.translate("Undo"),onClick:function onClick(){_notices2.default.removeNotice(notice);_this.addDns(record)}})})()}})},addDns:function addDns(record){var _this2=this;(0,_actions.addDns)(this.props.selectedDomainName,record,function(error){if(error){_notices2.default.error(error.message||_this2.translate("The DNS record could not be restored."))}else{_notices2.default.success(_this2.translate("The DNS record has been restored."),{duration:5e3})}})},render:function render(){var dialog=this.state.dialog;var _props=this.props;var dns=_props.dns;var selectedDomainName=_props.selectedDomainName;var selectedSite=_props.selectedSite;var dnsRecordsList=dns.records.map(function(dnsRecord,index){return _react2.default.createElement(_dnsRecord2.default,{key:index,dnsRecord:dnsRecord,onDeleteDns:this.deleteDns,selectedDomainName:selectedDomainName,selectedSite:selectedSite})},this);return _react2.default.createElement("div",{className:"dns__list"},_react2.default.createElement(_deleteEmailForwardsDialog2.default,{visible:dialog.type==="deleteEmailForwards",onClose:this.handleDialogClose,selectedDomainName:selectedDomainName,selectedSite:selectedSite}),_react2.default.createElement("ul",null,dnsRecordsList))}});exports.default=DnsList;module.exports=exports["default"]},2808:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _endsWith=__webpack_require__(354);var _endsWith2=_interopRequireDefault(_endsWith);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);var _dns=__webpack_require__(375);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DnsRecord=_react2.default.createClass({displayName:"DnsRecord",propTypes:{onDeleteDns:_react2.default.PropTypes.func.isRequired,dnsRecord:_react2.default.PropTypes.object.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired},handledBy:function handledBy(){var _props$dnsRecord=this.props.dnsRecord;var type=_props$dnsRecord.type;var aux=_props$dnsRecord.aux;var port=_props$dnsRecord.port;var service=_props$dnsRecord.service;var weight=_props$dnsRecord.weight;var protocol=_props$dnsRecord.protocol;var data=this.trimDot(this.props.dnsRecord.data);var target=this.trimDot(this.props.dnsRecord.target);if(this.props.dnsRecord.protected_field){if("MX"===type){return this.translate("Mail handled by WordPress.com email forwarding")}return this.translate("Handled by WordPress.com")}switch(type){case"A":case"AAAA":return this.translate("Points to %(data)s",{args:{data:data}});case"CNAME":return this.translate("Alias of %(data)s",{args:{data:data}});case"MX":return this.translate("Mail handled by %(data)s with priority %(aux)s",{args:{data:data,aux:aux}});case"SRV":return this.translate("Service %(service)s (%(protocol)s) on target %(target)s:%(port)s, "+"with priority %(aux)s and weight %(weight)s",{args:{service:service,protocol:protocol,target:target,port:port,aux:aux,weight:weight}})}return data},trimDot:function trimDot(str){return typeof str==="string"?str.replace(/\.$/,""):str},getName:function getName(){var _props$dnsRecord2=this.props.dnsRecord;var name=_props$dnsRecord2.name;var service=_props$dnsRecord2.service;var protocol=_props$dnsRecord2.protocol;var type=_props$dnsRecord2.type;var domain=this.props.selectedDomainName;var isRoot=name===domain+".";if("SRV"===type){return"_"+service+"._"+protocol+"."+(isRoot?"":name+".")+domain}if((0,_endsWith2.default)(name,".")){return name.slice(0,-1)}return name?name+"."+domain:domain},deleteDns:function deleteDns(){this.props.onDeleteDns(this.props.dnsRecord)},renderRemoveButton:function renderRemoveButton(){return _react2.default.createElement(_button2.default,{borderless:true,onClick:this.deleteDns},_react2.default.createElement(_gridicon2.default,{icon:"trash"}))},render:function render(){var dnsRecord=this.props.dnsRecord;var classes=(0,_classnames2.default)({"is-disabled":(0,_dns.isBeingProcessed)(dnsRecord)});var isAllowedToBeRemoved=!this.props.dnsRecord.protected_field||"MX"===this.props.dnsRecord.type;return _react2.default.createElement("li",{className:classes},_react2.default.createElement("div",{className:"dns__list-type"},_react2.default.createElement("label",null,this.props.dnsRecord.type)),_react2.default.createElement("div",{className:"dns__list-info"},_react2.default.createElement("strong",null,this.getName()),_react2.default.createElement("em",null,this.handledBy())),_react2.default.createElement("div",{className:"dns__list-remove"},isAllowedToBeRemoved&&this.renderRemoveButton()))}});exports.default=DnsRecord;module.exports=exports["default"]},2809:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _dnsAddNew=__webpack_require__(2805);var _dnsAddNew2=_interopRequireDefault(_dnsAddNew);var _dnsDetails=__webpack_require__(2806);var _dnsDetails2=_interopRequireDefault(_dnsDetails);var _dnsList=__webpack_require__(2807);var _dnsList2=_interopRequireDefault(_dnsList);var _mainPlaceholder=__webpack_require__(1626);var _mainPlaceholder2=_interopRequireDefault(_mainPlaceholder);var _header=__webpack_require__(1529);var _header2=_interopRequireDefault(_header);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _domains=__webpack_require__(152);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Dns=_react2.default.createClass({displayName:"Dns",propTypes:{domains:_react2.default.PropTypes.object.isRequired,dns:_react2.default.PropTypes.object.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired},render:function render(){if(!this.props.dns.hasLoadedFromServer){return _react2.default.createElement(_mainPlaceholder2.default,{goBack:this.goBack})}return _react2.default.createElement(_main2.default,{className:"dns"},_react2.default.createElement(_header2.default,{onClick:this.goBack,selectedDomainName:this.props.selectedDomainName},this.translate("DNS Records")),_react2.default.createElement(_sectionHeader2.default,{label:this.translate("DNS Records")}),_react2.default.createElement(_compact2.default,null,_react2.default.createElement(_dnsDetails2.default,null),_react2.default.createElement(_dnsList2.default,{dns:this.props.dns,selectedSite:this.props.selectedSite,selectedDomainName:this.props.selectedDomainName}),_react2.default.createElement(_dnsAddNew2.default,{isSubmittingForm:this.props.dns.isSubmittingForm,selectedDomainName:this.props.selectedDomainName})))},goBack:function goBack(){var path=void 0;if((0,_domains.isRegisteredDomain)((0,_domains.getSelectedDomain)(this.props))){path=_paths2.default.domainManagementNameServers}else{path=_paths2.default.domainManagementEdit}(0,_page2.default)(path(this.props.selectedSite.slug,this.props.selectedDomainName))}});exports.default=Dns;module.exports=exports["default"]},2810:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _formFieldset=__webpack_require__(338);var _formFieldset2=_interopRequireDefault(_formFieldset);var _formInputValidation=__webpack_require__(1456);var _formInputValidation2=_interopRequireDefault(_formInputValidation);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _formTextInput=__webpack_require__(246);var _formTextInput2=_interopRequireDefault(_formTextInput);var _formTextInputWithAffixes=__webpack_require__(1511);var _formTextInputWithAffixes2=_interopRequireDefault(_formTextInputWithAffixes);var _formSettingExplanation=__webpack_require__(1477);var _formSettingExplanation2=_interopRequireDefault(_formSettingExplanation);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MxRecord=_react2.default.createClass({displayName:"MxRecord",statics:{initialFields:{name:"",data:"",aux:10}},propTypes:{fieldValues:_react2.default.PropTypes.object.isRequired,onChange:_react2.default.PropTypes.func.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,show:_react2.default.PropTypes.bool.isRequired},fieldNames:["name","data","aux"],render:function render(){var classes=(0,_classnames2.default)({"is-hidden":!this.props.show}),isValid=this.props.isValid,isNameValid=isValid("name"),isDataValid=isValid("data"),isAuxValid=isValid("aux");return _react2.default.createElement("div",{className:classes},_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Name",{context:"Dns Record"})),_react2.default.createElement(_formTextInputWithAffixes2.default,{name:"name",placeholder:this.translate("Enter subdomain (optional)",{context:"Placeholder shown when entering the optional subdomain part of a new DNS record"}),isError:!isNameValid,onChange:this.props.onChange,value:this.props.fieldValues.name,suffix:"."+this.props.selectedDomainName}),!isNameValid?_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid Name"),isError:true}):null),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Handled by",{context:"MX Dns Record"})),_react2.default.createElement(_formTextInput2.default,{name:"data",isError:!isDataValid,onChange:this.props.onChange,value:this.props.fieldValues.data,placeholder:this.translate("e.g. %(example)s",{args:{example:"mail.your-provider.com"}})}),!isDataValid?_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid Mail Server"),isError:true}):null,_react2.default.createElement(_formSettingExplanation2.default,null,this.translate("Please use a domain name here (e.g. %(domain)s) - an IP address (e.g. %(ipAddress)s) will {{strong}}not{{/strong}} work.",{args:{domain:"mail.your-provider.com",ipAddress:"123.45.78.9"},components:{strong:_react2.default.createElement("strong",null)},context:"Hint for the 'Handled by' field of a MX record"}))),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Priority",{context:"MX Dns Record"})),_react2.default.createElement(_formTextInput2.default,{name:"aux",isError:!isAuxValid,onChange:this.props.onChange,value:this.props.fieldValues.aux,defaultValue:"10"}),!isAuxValid?_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid Priority"),isError:true}):null))}});exports.default=MxRecord;module.exports=exports["default"]},2811:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _formFieldset=__webpack_require__(338);var _formFieldset2=_interopRequireDefault(_formFieldset);var _formInputValidation=__webpack_require__(1456);var _formInputValidation2=_interopRequireDefault(_formInputValidation);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _formSelect=__webpack_require__(1484);var _formSelect2=_interopRequireDefault(_formSelect);var _formTextInput=__webpack_require__(246);var _formTextInput2=_interopRequireDefault(_formTextInput);var _formTextInputWithAffixes=__webpack_require__(1511);var _formTextInputWithAffixes2=_interopRequireDefault(_formTextInputWithAffixes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SrvRecord=_react2.default.createClass({displayName:"SrvRecord",statics:{initialFields:{name:"",service:"",aux:10,weight:10,target:"",port:"",protocol:"tcp"}},propTypes:{fieldValues:_react2.default.PropTypes.object.isRequired,onChange:_react2.default.PropTypes.func.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,show:_react2.default.PropTypes.bool.isRequired},render:function render(){var classes=(0,_classnames2.default)({"is-hidden":!this.props.show});var options=["tcp","udp","tls"].map(function(protocol){return _react2.default.createElement("option",{key:protocol,value:protocol},protocol.toUpperCase())});var _props$fieldValues=this.props.fieldValues;var aux=_props$fieldValues.aux;var name=_props$fieldValues.name;var port=_props$fieldValues.port;var protocol=_props$fieldValues.protocol;var service=_props$fieldValues.service;var target=_props$fieldValues.target;var weight=_props$fieldValues.weight;var isValid=this.props.isValid;var isNameValid=isValid("name");var isServiceValid=isValid("service");var isAuxValid=isValid("aux");var isWeightValid=isValid("weight");var isTargetValid=isValid("target");var isPortValid=isValid("port");return _react2.default.createElement("div",{className:classes},_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Name",{context:"Dns Record"})),_react2.default.createElement(_formTextInputWithAffixes2.default,{name:"name",placeholder:this.translate("Enter subdomain (optional)",{context:"Placeholder shown when entering the optional subdomain part of a new DNS record"}),isError:!isNameValid,onChange:this.props.onChange,value:name,suffix:"."+this.props.selectedDomainName}),!isNameValid?_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid Name"),isError:true}):null),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Service",{context:"Dns Record"})),_react2.default.createElement(_formTextInput2.default,{name:"service",isError:!isServiceValid,onChange:this.props.onChange,value:service,placeholder:this.translate("e.g. %(example)s",{args:{example:"sip"}})}),!isServiceValid?_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid Service"),isError:true}):null),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Protocol",{context:"Dns Record"})),_react2.default.createElement(_formSelect2.default,{name:"protocol",onChange:this.props.onChange,value:protocol},options)),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Priority",{context:"Dns Record"})),_react2.default.createElement(_formTextInput2.default,{name:"aux",isError:!isAuxValid,onChange:this.props.onChange,value:aux,defaultValue:"10"}),!isAuxValid?_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid Priority"),isError:true}):null),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Weight",{context:"Dns Record"})),_react2.default.createElement(_formTextInput2.default,{name:"weight",isError:!isWeightValid,onChange:this.props.onChange,
value:weight,defaultValue:"10"}),!isWeightValid?_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid Weight"),isError:true}):null),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Target Host",{context:"Dns Record"})),_react2.default.createElement(_formTextInput2.default,{name:"target",isError:!isTargetValid,onChange:this.props.onChange,value:target,placeholder:this.translate("e.g. %(example)s",{args:{example:"sip.your-provider.com"}})}),!isTargetValid?_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid Target Host"),isError:true}):null),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Target Port",{context:"Dns Record"})),_react2.default.createElement(_formTextInput2.default,{name:"port",isError:!isPortValid,onChange:this.props.onChange,value:port,placeholder:this.translate("e.g. %(example)s",{args:{example:"5060"}})}),!isPortValid?_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid Target Port"),isError:true}):null))}});exports.default=SrvRecord;module.exports=exports["default"]},2812:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _formFieldset=__webpack_require__(338);var _formFieldset2=_interopRequireDefault(_formFieldset);var _formInputValidation=__webpack_require__(1456);var _formInputValidation2=_interopRequireDefault(_formInputValidation);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _formTextarea=__webpack_require__(1480);var _formTextarea2=_interopRequireDefault(_formTextarea);var _formTextInputWithAffixes=__webpack_require__(1511);var _formTextInputWithAffixes2=_interopRequireDefault(_formTextInputWithAffixes);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TxtRecord=_react2.default.createClass({displayName:"TxtRecord",statics:{initialFields:{name:"",data:""}},propTypes:{fieldValues:_react2.default.PropTypes.object.isRequired,onChange:_react2.default.PropTypes.func.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,show:_react2.default.PropTypes.bool.isRequired},fieldNames:["name","data"],render:function render(){var classes=(0,_classnames2.default)({"is-hidden":!this.props.show}),isValid=this.props.isValid,isNameValid=isValid("name"),isDataValid=isValid("data");return _react2.default.createElement("div",{className:classes},_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Name",{context:"Dns Record"})),_react2.default.createElement(_formTextInputWithAffixes2.default,{name:"name",placeholder:this.translate("Enter subdomain (optional)",{context:"Placeholder shown when entering the optional subdomain part of a new DNS record"}),isError:!isNameValid,onChange:this.props.onChange,value:this.props.fieldValues.name,suffix:"."+this.props.selectedDomainName}),!isNameValid?_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid Name"),isError:true}):null),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Text",{context:"Dns Record TXT"})),_react2.default.createElement(_formTextarea2.default,{name:"data",onChange:this.props.onChange,value:this.props.fieldValues.data,placeholder:this.translate("e.g. %(example)s",{args:{example:"v=spf1 include:example.com ~all"}})}),!isDataValid?_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid TXT Record"),isError:true}):null))}});exports.default=TxtRecord;module.exports=exports["default"]},2813:function(module,exports,__webpack_require__){"use strict";module.exports={AddGoogleApps:__webpack_require__(2796),ContactsPrivacy:__webpack_require__(2800),Dns:__webpack_require__(2809),Edit:__webpack_require__(2818),EditContactInfo:__webpack_require__(2815),Email:__webpack_require__(2831),EmailForwarding:__webpack_require__(2828),List:__webpack_require__(2834),NameServers:__webpack_require__(2839),PrimaryDomain:__webpack_require__(2841),PrivacyProtection:__webpack_require__(2844),SiteRedirect:__webpack_require__(2845),Transfer:__webpack_require__(2848)}},2814:function(module,exports,__webpack_require__){"use strict";var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var React=__webpack_require__(1),endsWith=__webpack_require__(354),omit=__webpack_require__(18),page=__webpack_require__(40),bindActionCreators=__webpack_require__(6).bindActionCreators,connect=__webpack_require__(21).connect;var Card=__webpack_require__(145),FormButton=__webpack_require__(337),FormCountrySelect=__webpack_require__(1668),FormFooter=__webpack_require__(1669),FormStateSelect=__webpack_require__(2187),FormInput=__webpack_require__(1558),ValidationErrorList=__webpack_require__(1732),countriesList=__webpack_require__(1588).forDomainRegistrations(),formState=__webpack_require__(1512),notices=__webpack_require__(71),paths=__webpack_require__(342),statesList=__webpack_require__(2133).forDomainRegistrations(),upgradesActions=__webpack_require__(646),wpcom=__webpack_require__(22).undocumented(),successNotice=__webpack_require__(189).successNotice;var EditContactInfoFormCard=React.createClass({displayName:"EditContactInfoFormCard",propTypes:{contactInformation:React.PropTypes.object.isRequired,selectedDomainName:React.PropTypes.string.isRequired,selectedSite:React.PropTypes.oneOfType([React.PropTypes.object,React.PropTypes.bool]).isRequired},getInitialState:function getInitialState(){return{form:null,notice:null,formSubmitting:false}},componentWillMount:function componentWillMount(){var contactInformation=omit(this.props.contactInformation,["countryName","stateName"]);this.formStateController=formState.Controller({initialFields:contactInformation,validatorFunction:this.validate,onNewState:this.setFormState,onError:this.handleFormControllerError});this.setState({form:this.formStateController.getInitialState()})},validate:function validate(formValues,onComplete){wpcom.validateDomainContactInformation(formValues,[this.props.selectedDomainName],function(error,data){if(error){onComplete(error)}else{onComplete(null,data.messages||{})}})},setFormState:function setFormState(state){if(!this.isMounted()){return}var messages=formState.getErrorMessages(state);if(messages.length>0){var notice=notices.error(React.createElement(ValidationErrorList,{messages:messages}));this.setState({form:state,notice:notice})}else{if(this.state.notice){notices.removeNotice(this.state.notice)}this.setState({form:state,notice:null})}},handleFormControllerError:function handleFormControllerError(error){if(error){throw error}},render:function render(){return React.createElement(Card,{className:"edit-contact-info-form-card"},React.createElement("form",null,React.createElement("div",{className:"edit-contact-info-form-card__form-content"},this.getField(FormInput,{name:"first-name",autofocus:true,label:this.translate("First Name",{context:"Domain Edit Contact Info form.",textOnly:true})}),this.getField(FormInput,{name:"last-name",label:this.translate("Last Name",{context:"Domain Edit Contact Info form.",textOnly:true})}),this.getField(FormInput,{name:"organization",label:this.translate("Organization",{context:"Domain Edit Contact Info form.",textOnly:true})}),this.getField(FormInput,{name:"email",label:this.translate("Email",{context:"Domain Edit Contact Info form.",textOnly:true})}),this.getField(FormInput,{name:"phone",label:this.translate("Phone",{context:"Domain Edit Contact Info form.",textOnly:true})}),this.hasFaxField()?this.getField(FormInput,{name:"fax",label:this.translate("Fax",{context:"Domain Edit Contact Info form.",textOnly:true})}):null,this.getField(FormCountrySelect,{countriesList:countriesList,name:"country-code",label:this.translate("Country",{context:"Domain Edit Contact Info form.",textOnly:true})}),this.getField(FormInput,{name:"address-1",label:this.translate("Address",{context:"Domain Edit Contact Info form.",textOnly:true})}),this.getField(FormInput,{name:"address-2",label:this.translate("Address Line 2",{context:"Domain Edit Contact Info form.",textOnly:true})}),this.getField(FormInput,{name:"city",label:this.translate("City",{context:"Domain Edit Contact Info form.",textOnly:true})}),this.getField(FormStateSelect,{countryCode:formState.getFieldValue(this.state.form,"countryCode"),statesList:statesList,name:"state",label:this.translate("State",{context:"Domain Edit Contact Info form.",textOnly:true})}),this.getField(FormInput,{name:"postal-code",label:this.translate("Postal Code",{context:"Domain Edit Contact Info form.",textOnly:true})})),React.createElement(FormFooter,null,React.createElement(FormButton,{disabled:this.state.formSubmitting,onClick:this.saveContactInfo},this.translate("Save Contact Info")),React.createElement(FormButton,{type:"button",isPrimary:false,onClick:this.goToContactsPrivacy},this.translate("Cancel")))))},getField:function getField(Component,props){var name=props.name;return React.createElement(Component,(0,_extends3.default)({},props,{additionalClasses:"edit-contact-info-field",disabled:this.state.formSubmitting||formState.isFieldDisabled(this.state.form,name),isError:formState.isFieldInvalid(this.state.form,name),value:formState.getFieldValue(this.state.form,name),onChange:this.onChange}))},hasFaxField:function hasFaxField(){var NETHERLANDS_TLD=".nl";return endsWith(this.props.selectedDomainName,NETHERLANDS_TLD)},onChange:function onChange(event){var _event$target=event.target;var name=_event$target.name;var value=_event$target.value;if(this.isCountryField(name)){this.resetStateField()}this.formStateController.handleFieldChange({name:name,value:value})},isCountryField:function isCountryField(name){return name==="country-code"},resetStateField:function resetStateField(){this.formStateController.handleFieldChange({name:"state",value:"",hideError:true})},goToContactsPrivacy:function goToContactsPrivacy(){page(paths.domainManagementContactsPrivacy(this.props.selectedSite.slug,this.props.selectedDomainName))},saveContactInfo:function saveContactInfo(event){var _this=this;event.preventDefault();if(this.state.formSubmitting){return}this.setState({formSubmitting:true});this.formStateController.handleSubmit(function(hasErrors){if(hasErrors){_this.setState({formSubmitting:false});return}upgradesActions.updateWhois(_this.props.selectedDomainName,formState.getAllFieldValues(_this.state.form),function(error,data){_this.setState({formSubmitting:false});if(data&&data.success){_this.props.successNotice(_this.translate("The contact info has been updated. There may be a short delay before the changes show up in the public records."))}else if(error&&error.message){notices.error(error.message)}else{notices.error(_this.translate("There was a problem updating your contact info. Please try again later or contact support."))}})})}});module.exports=connect(null,function(dispatch){return bindActionCreators({successNotice:successNotice},dispatch)})(EditContactInfoFormCard)},2815:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _mainPlaceholder=__webpack_require__(1626);var _mainPlaceholder2=_interopRequireDefault(_mainPlaceholder);var _formCard=__webpack_require__(2814);var _formCard2=_interopRequireDefault(_formCard);var _privacyEnabledCard=__webpack_require__(2816);var _privacyEnabledCard2=_interopRequireDefault(_privacyEnabledCard);var _nonOwnerCard=__webpack_require__(2188);var _nonOwnerCard2=_interopRequireDefault(_nonOwnerCard);var _header=__webpack_require__(1529);var _header2=_interopRequireDefault(_header);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _domains=__webpack_require__(152);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EditContactInfo=_react2.default.createClass({displayName:"EditContactInfo",propTypes:{domains:_react2.default.PropTypes.object.isRequired,whois:_react2.default.PropTypes.object.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired},render:function render(){if(this.isDataLoading()){return _react2.default.createElement(_mainPlaceholder2.default,{goBack:this.goToContactsPrivacy})}return _react2.default.createElement(_main2.default,{className:"domain-management-edit-contact-info"},_react2.default.createElement(_header2.default,{onClick:this.goToContactsPrivacy,selectedDomainName:this.props.selectedDomainName},this.translate("Edit Contact Info")),this.getCard())},isDataLoading:function isDataLoading(){return!(0,_domains.getSelectedDomain)(this.props)||!this.props.whois.hasLoadedFromServer},getCard:function getCard(){var domain=(0,_domains.getSelectedDomain)(this.props);if(!domain.currentUserCanManage){return _react2.default.createElement(_nonOwnerCard2.default,{selectedDomainName:this.props.selectedDomainName})}if(!domain.isWhoisEditable){return _react2.default.createElement(_privacyEnabledCard2.default,null)}return _react2.default.createElement("div",null,_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Edit Contact Info")}),_react2.default.createElement(_formCard2.default,{contactInformation:this.props.whois.data,selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.selectedSite}))},goToContactsPrivacy:function goToContactsPrivacy(){(0,_page2.default)(_paths2.default.domainManagementContactsPrivacy(this.props.selectedSite.slug,this.props.selectedDomainName))}});exports.default=EditContactInfo;module.exports=exports["default"]},2816:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EditContactInfoPrivacyEnabledCard=_react2.default.createClass({displayName:"EditContactInfoPrivacyEnabledCard",render:function render(){return _react2.default.createElement(_card2.default,{className:"edit-contact-info-privacy-enabled-card"},_react2.default.createElement("p",{className:"edit-contact-info-privacy-enabled-card__settings-explanation"},this.translate("This domain is currently using Privacy Protection to keep your information from showing up in public record searches. "+"If you need to make a change to your domain's contact info, please {{a}}contact support{{/a}}.",{components:{a:_react2.default.createElement("a",{href:_support2.default.CALYPSO_CONTACT,target:"_blank"})}})))}});exports.default=EditContactInfoPrivacyEnabledCard;module.exports=exports["default"]},2817:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),page=__webpack_require__(40);var analyticsMixin=__webpack_require__(649),paths=__webpack_require__(342),Button=__webpack_require__(68);var PrimaryDomainButton=React.createClass({displayName:"PrimaryDomainButton",mixins:[analyticsMixin("domainManagement","edit")],propTypes:{domain:React.PropTypes.object.isRequired,selectedSite:React.PropTypes.oneOfType([React.PropTypes.object,React.PropTypes.bool]).isRequired,settingPrimaryDomain:React.PropTypes.bool.isRequired},handleClick:function handleClick(){this.recordEvent("makePrimaryClick",this.props.domain);page(paths.domainManagementPrimaryDomain(this.props.selectedSite.slug,this.props.domain.name))},render:function render(){var domain=this.props.domain;var label;if(domain&&!domain.isPrimary){if(this.props.settingPrimaryDomain){label=this.translate("Saving…")}else{label=this.translate("Make Primary")}return React.createElement(Button,{compact:true,className:"domain-details-card__make-primary-button",onClick:this.handleClick},label)}return null}});module.exports=PrimaryDomainButton},2818:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _mainPlaceholder=__webpack_require__(1626);var _mainPlaceholder2=_interopRequireDefault(_mainPlaceholder);var _header=__webpack_require__(1529);var _header2=_interopRequireDefault(_header);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _mappedDomain=__webpack_require__(2819);var _mappedDomain2=_interopRequireDefault(_mappedDomain);var _registeredDomain=__webpack_require__(2820);var _registeredDomain2=_interopRequireDefault(_registeredDomain);var _siteRedirect=__webpack_require__(2821);var _siteRedirect2=_interopRequireDefault(_siteRedirect);var _wpcomDomain=__webpack_require__(2822);var _wpcomDomain2=_interopRequireDefault(_wpcomDomain);var _constants=__webpack_require__(203);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _domains=__webpack_require__(152);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Edit=_react2.default.createClass({displayName:"Edit",render:function render(){var domain=this.props.domains&&(0,_domains.getSelectedDomain)(this.props),Details=this.getDetailsForType(domain&&domain.type);if(!domain||!Details){return _react2.default.createElement(_mainPlaceholder2.default,{goBack:this.goToDomainManagement})}return _react2.default.createElement(_main2.default,{className:"domain-management-edit"},_react2.default.createElement(_header2.default,{onClick:this.goToDomainManagement,selectedDomainName:this.props.selectedDomainName},this.translate("Domain Settings")),_react2.default.createElement(Details,{domain:domain,selectedSite:this.props.selectedSite,settingPrimaryDomain:this.props.domains.settingPrimaryDomain}))},getDetailsForType:function getDetailsForType(type){switch(type){case _constants.type.MAPPED:return _mappedDomain2.default;case _constants.type.REGISTERED:return _registeredDomain2.default;case _constants.type.SITE_REDIRECT:return _siteRedirect2.default;case _constants.type.WPCOM:return _wpcomDomain2.default;default:return null}},goToDomainManagement:function goToDomainManagement(){(0,_page2.default)(_paths2.default.domainManagementList(this.props.selectedSite.slug))}});exports.default=Edit;module.exports=exports["default"]},2819:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var analyticsMixin=__webpack_require__(649),Card=__webpack_require__(1450),Header=__webpack_require__(1825),Property=__webpack_require__(1826),SubscriptionSettings=__webpack_require__(1971),VerticalNav=__webpack_require__(1587),VerticalNavItem=__webpack_require__(1553),DomainWarnings=__webpack_require__(711),paths=__webpack_require__(342);var MappedDomain=React.createClass({displayName:"MappedDomain",mixins:[analyticsMixin("domainManagement","edit")],getAutoRenewalOrExpirationDate:function getAutoRenewalOrExpirationDate(){var domain=this.props.domain;if(domain.isAutoRenewing){return React.createElement(Property,{label:this.translate("Mapping renews on")},domain.autoRenewalDate)}var expirationMessage=domain.expirationMoment&&domain.expirationMoment.format("MMMM D, YYYY")||React.createElement("em",null,this.translate("Never Expires",{context:"Expiration detail for a mapped domain"}));return React.createElement(Property,{label:this.translate("Mapping expires on")},expirationMessage)},handlePaymentSettingsClick:function handlePaymentSettingsClick(){this.recordEvent("paymentSettingsClick",this.props.domain)},domainWarnings:function domainWarnings(){return React.createElement(DomainWarnings,{domain:this.props.domain,selectedSite:this.props.selectedSite,ruleWhiteList:["wrongNSMappedDomains"]})},render:function render(){return React.createElement("div",null,this.domainWarnings(),this.getDomainDetailsCard(),this.getVerticalNav())},getDomainDetailsCard:function getDomainDetailsCard(){return React.createElement("div",{className:"domain-details-card"},React.createElement(Header,this.props),React.createElement(Card,null,React.createElement(Property,{label:this.translate("Type",{context:"A type of domain."})},this.translate("Mapped Domain")),this.getAutoRenewalOrExpirationDate(),React.createElement(SubscriptionSettings,{onClick:this.handlePaymentSettingsClick})))},getVerticalNav:function getVerticalNav(){return React.createElement(VerticalNav,null,this.emailNavItem(),this.dnsRecordsNavItem())},emailNavItem:function emailNavItem(){var path=paths.domainManagementEmail(this.props.selectedSite.slug,this.props.domain.name);return React.createElement(VerticalNavItem,{path:path},this.translate("Email"))},dnsRecordsNavItem:function dnsRecordsNavItem(){var path=paths.domainManagementDns(this.props.selectedSite.slug,this.props.domain.name);return React.createElement(VerticalNavItem,{path:path},this.translate("DNS Records"))}});module.exports=MappedDomain},2820:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _analytics=__webpack_require__(649);var _analytics2=_interopRequireDefault(_analytics);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);var _domainWarnings=__webpack_require__(711);var _domainWarnings2=_interopRequireDefault(_domainWarnings);var _header=__webpack_require__(1825);var _header2=_interopRequireDefault(_header);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _property=__webpack_require__(1826);var _property2=_interopRequireDefault(_property);var _subscriptionSettings=__webpack_require__(1971);var _subscriptionSettings2=_interopRequireDefault(_subscriptionSettings);var _verticalNav=__webpack_require__(1587);var _verticalNav2=_interopRequireDefault(_verticalNav);var _item=__webpack_require__(1553);var _item2=_interopRequireDefault(_item);var _icannVerificationCard=__webpack_require__(2190);var _icannVerificationCard2=_interopRequireDefault(_icannVerificationCard);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RegisteredDomain=_react2.default.createClass({displayName:"RegisteredDomain",mixins:[(0,_analytics2.default)("domainManagement","edit")],getAutoRenewalOrExpirationDate:function getAutoRenewalOrExpirationDate(){var domain=this.props.domain;if(domain.isAutoRenewing){return _react2.default.createElement(_property2.default,{label:this.translate("Renews on")},domain.autoRenewalDate)}return _react2.default.createElement(_property2.default,{label:this.translate("Expires on")},domain.expirationMoment.format("MMMM D, YYYY"))},getLabel:function getLabel(_ref){var status=_ref.status;var icon=_ref.icon;var message=_ref.message;var href=_ref.href;return _react2.default.createElement("a",{href:href},_react2.default.createElement(_notice2.default,{isCompact:true,status:status,icon:icon},message))},getPrivacyProtection:function getPrivacyProtection(){var _props$domain=this.props.domain;var hasPrivacyProtection=_props$domain.hasPrivacyProtection;var privateDomain=_props$domain.privateDomain;var name=_props$domain.name;var slug=this.props.selectedSite.slug;var privacyPath=_paths2.default.domainManagementContactsPrivacy(slug,name);var transferPath=_paths2.default.domainManagementTransfer(slug,name);if(hasPrivacyProtection){if(privateDomain){return this.getLabel({status:"is-success",icon:"lock",href:privacyPath,message:this.translate("On",{context:"An icon label when Privacy Protection is enabled."})})}return this.getLabel({status:"is-warning",icon:"notice",href:transferPath,message:this.translate("Disabled for Transfer",{context:"An icon label when Privacy Protection is temporarily disabled for transfer."})})}return this.getLabel({status:"is-warning",icon:"notice",href:privacyPath,message:this.translate("None",{context:"An icon label when Privacy Protection is not purchased by the user."})})},handlePaymentSettingsClick:function handlePaymentSettingsClick(){this.recordEvent("paymentSettingsClick",this.props.domain)},domainWarnings:function domainWarnings(){return _react2.default.createElement(_domainWarnings2.default,{domain:this.props.domain,selectedSite:this.props.selectedSite,ruleWhiteList:["expiredDomains","expiringDomains","newDomainsWithPrimary","newDomains","pendingGappsTosAcceptanceDomains","wrongNSMappedDomains"]})},getVerticalNav:function getVerticalNav(){if(this.props.domain.expired){return null}return _react2.default.createElement(_verticalNav2.default,null,this.emailNavItem(),this.nameServersNavItem(),this.contactsPrivacyNavItem(),this.transferNavItem())},emailNavItem:function emailNavItem(){var path=_paths2.default.domainManagementEmail(this.props.selectedSite.slug,this.props.domain.name);return _react2.default.createElement(_item2.default,{path:path},this.translate("Email"))},nameServersNavItem:function nameServersNavItem(){var path=_paths2.default.domainManagementNameServers(this.props.selectedSite.slug,this.props.domain.name);return _react2.default.createElement(_item2.default,{path:path},this.translate("Name Servers and DNS"))},contactsPrivacyNavItem:function contactsPrivacyNavItem(){var path=_paths2.default.domainManagementContactsPrivacy(this.props.selectedSite.slug,this.props.domain.name);return _react2.default.createElement(_item2.default,{path:path},this.translate("Contacts and Privacy"))},transferNavItem:function transferNavItem(){var path=_paths2.default.domainManagementTransfer(this.props.selectedSite.slug,this.props.domain.name);return _react2.default.createElement(_item2.default,{path:path},this.translate("Transfer Domain"))},render:function render(){var domain=this.props.domain;return _react2.default.createElement("div",null,this.domainWarnings(),_react2.default.createElement("div",{className:"domain-details-card"},_react2.default.createElement(_header2.default,this.props),_react2.default.createElement(_compact2.default,null,_react2.default.createElement(_property2.default,{label:this.translate("Type",{context:"A type of domain."})},this.translate("Registered Domain")),_react2.default.createElement(_property2.default,{label:this.translate("Registered on")},domain.registrationDate),this.getAutoRenewalOrExpirationDate(),_react2.default.createElement(_property2.default,{label:this.translate("Privacy Protection")},this.getPrivacyProtection()),_react2.default.createElement(_subscriptionSettings2.default,{onClick:this.handlePaymentSettingsClick})),domain.isPendingIcannVerification&&_react2.default.createElement(_icannVerificationCard2.default,{selectedDomainName:domain.name,selectedSite:this.props.selectedSite})),this.getVerticalNav())}});exports.default=RegisteredDomain;module.exports=exports["default"]},2821:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var analyticsMixin=__webpack_require__(649),Card=__webpack_require__(1450),Header=__webpack_require__(1825),Property=__webpack_require__(1826),SubscriptionSettings=__webpack_require__(1971),VerticalNav=__webpack_require__(1587),VerticalNavItem=__webpack_require__(1553),paths=__webpack_require__(342);var SiteRedirect=React.createClass({displayName:"SiteRedirect",mixins:[analyticsMixin("domainManagement","edit")],getAutoRenewalOrExpirationDate:function getAutoRenewalOrExpirationDate(){var domain=this.props.domain;if(domain.isAutoRenewing){return React.createElement(Property,{label:this.translate("Redirect renews on")},domain.autoRenewalDate)}return React.createElement(Property,{label:this.translate("Redirect expires on")},domain.expirationMoment.format("MMMM D, YYYY"))},handlePaymentSettingsClick:function handlePaymentSettingsClick(){this.recordEvent("paymentSettingsClick",this.props.domain)},render:function render(){return React.createElement("div",null,React.createElement("div",{className:"domain-details-card"},React.createElement(Header,this.props),React.createElement(Card,null,React.createElement(Property,{label:this.translate("Type",{context:"A type of domain."})},this.translate("Site Redirect")),this.getAutoRenewalOrExpirationDate(),React.createElement(SubscriptionSettings,{onClick:this.handlePaymentSettingsClick}))),React.createElement(VerticalNav,null,this.siteRedirectNavItem()))},siteRedirectNavItem:function siteRedirectNavItem(){return React.createElement(VerticalNavItem,{path:paths.domainManagementRedirectSettings(this.props.selectedSite.slug,this.props.domain.name)},this.translate("Redirect Settings"))}});module.exports=SiteRedirect},2822:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _analytics=__webpack_require__(649);var _analytics2=_interopRequireDefault(_analytics);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _header=__webpack_require__(1825);var _header2=_interopRequireDefault(_header);var _property=__webpack_require__(1826);var _property2=_interopRequireDefault(_property);var _verticalNav=__webpack_require__(1587);var _verticalNav2=_interopRequireDefault(_verticalNav);var _item=__webpack_require__(1553);var _item2=_interopRequireDefault(_item);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WpcomDomain=_react2.default.createClass({displayName:"WpcomDomain",mixins:[(0,_analytics2.default)("domainManagement","edit")],handleEditSiteAddressClick:function handleEditSiteAddressClick(){this.recordEvent("navigationClick","Edit Site Address",this.props.domain)},render:function render(){return _react2.default.createElement("div",null,_react2.default.createElement("div",{className:"domain-details-card"},_react2.default.createElement(_header2.default,this.props),_react2.default.createElement(_compact2.default,null,_react2.default.createElement(_property2.default,{label:this.translate("Type",{context:"A type of domain."})},this.translate("Included with Site")),_react2.default.createElement(_property2.default,{label:this.translate("Renews on")},_react2.default.createElement("em",null,this.translate("Never Expires"))))),_react2.default.createElement(_verticalNav2.default,null,_react2.default.createElement(_item2.default,{path:"https://"+this.props.domain.name+"/wp-admin/index.php?page=my-blogs#blog_row_"+this.props.selectedSite.ID,external:true,onClick:this.handleEditSiteAddressClick},this.translate("Edit Site Address"))))}});exports.default=WpcomDomain;module.exports=exports["default"]},2823:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _emailForwardingLimit=__webpack_require__(2826);var _emailForwardingLimit2=_interopRequireDefault(_emailForwardingLimit);var _emailForwarding=__webpack_require__(2085);
var _formButton=__webpack_require__(337);var _formButton2=_interopRequireDefault(_formButton);var _formFieldset=__webpack_require__(338);var _formFieldset2=_interopRequireDefault(_formFieldset);var _formFooter=__webpack_require__(1669);var _formFooter2=_interopRequireDefault(_formFooter);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _formTextInput=__webpack_require__(246);var _formTextInput2=_interopRequireDefault(_formTextInput);var _formTextInputWithAffixes=__webpack_require__(1511);var _formTextInputWithAffixes2=_interopRequireDefault(_formTextInputWithAffixes);var _formInputValidation=__webpack_require__(1456);var _formInputValidation2=_interopRequireDefault(_formInputValidation);var _formState=__webpack_require__(1512);var _formState2=_interopRequireDefault(_formState);var _analytics=__webpack_require__(649);var _analytics2=_interopRequireDefault(_analytics);var _notices=__webpack_require__(71);var _notices2=_interopRequireDefault(_notices);var _actions=__webpack_require__(646);var upgradesActions=_interopRequireWildcard(_actions);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EmailForwardingAddNew=_react2.default.createClass({displayName:"EmailForwardingAddNew",propTypes:{initialShowForm:_react2.default.PropTypes.bool},mixins:[(0,_analytics2.default)("domainManagement","emailForwarding")],getInitialState:function getInitialState(){return{fields:{destination:"",mailbox:""},formSubmitting:false,showForm:false}},componentWillMount:function componentWillMount(){this.formStateController=_formState2.default.Controller({initialFields:this.getInitialState().fields,onNewState:this.setFormState,validatorFunction:function validatorFunction(fieldValues,onComplete){onComplete(null,(0,_emailForwarding.validateAllFields)(fieldValues))}});this.setFormState(this.formStateController.getInitialState())},hasForwards:function hasForwards(){return this.props.emailForwarding.list.length>0},hasReachedLimit:function hasReachedLimit(){return this.props.emailForwarding.list.length>=(0,_emailForwarding.emailForwardingPlanLimit)(this.props.selectedSite.plan)},onAddEmailForward:function onAddEmailForward(event){var _this=this;event.preventDefault();if(this.state.formSubmitting){return}this.setState({formSubmitting:true});this.formStateController.handleSubmit(function(hasErrors){if(hasErrors){_this.setState({formSubmitting:false});return}var _formState$getAllFiel=_formState2.default.getAllFieldValues(_this.state.fields);var mailbox=_formState$getAllFiel.mailbox;var destination=_formState$getAllFiel.destination;upgradesActions.addEmailForwarding(_this.props.selectedDomainName,mailbox,destination,function(error){_this.recordEvent("addNewEmailForwardClick",_this.props.selectedDomainName,mailbox,destination,!Boolean(error));if(error){_notices2.default.error(error.message||_this.translate("Failed to add email forwarding record. Please try again or {{contactSupportLink}}contact support{{/contactSupportLink}}.",{components:{contactSupportLink:_react2.default.createElement("a",{href:_support2.default.CALYPSO_CONTACT})}}))}else{_this.formStateController.resetFields(_this.getInitialState().fields);_notices2.default.success(_this.translate("%(email)s has been successfully added! You must confirm your email before it starts working. Please check your inbox for %(destination)s.",{args:{email:mailbox+"@"+_this.props.selectedDomainName,destination:destination}}),{duration:5e3})}_this.setState({formSubmitting:false,showForm:!error})})})},setFormState:function setFormState(fields){this.setState({fields:fields})},onShowForm:function onShowForm(event){event.preventDefault();this.setState({showForm:true})},addButton:function addButton(){var handler=this.shouldShowForm()?this.onAddEmailForward:this.onShowForm;return _react2.default.createElement(_formButton2.default,{disabled:this.state.formSubmitting||this.hasReachedLimit(),onClick:handler},this.translate("Add New Email Forward"))},cancelButton:function cancelButton(){if(!this.shouldShowForm()||!this.hasForwards()){return null}return _react2.default.createElement(_formButton2.default,{type:"button",isPrimary:false,disabled:this.state.formSubmitting,onClick:this.onCancel},this.translate("Cancel"))},formFooter:function formFooter(){return _react2.default.createElement(_formFooter2.default,null,this.addButton(),this.cancelButton())},formFields:function formFields(){if(!this.shouldShowForm()){return null}var contactText=this.translate("contact",{context:"part of e-mail address",comment:"As it would be part of an e-mail address contact@example.com"});var exampleEmailText=this.translate("e.g. %(example)s",{args:{example:contactText}});var isValidMailbox=this.isValid("mailbox");var isValidDestination=this.isValid("destination");var _formState$getAllFiel2=_formState2.default.getAllFieldValues(this.state.fields);var mailbox=_formState$getAllFiel2.mailbox;var destination=_formState$getAllFiel2.destination;return _react2.default.createElement("div",{className:"form-content"},_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Emails Sent To")),_react2.default.createElement(_formTextInputWithAffixes2.default,{disabled:this.state.formSubmitting,name:"mailbox",onChange:this.onChange,onFocus:this.handleFieldFocus.bind(this,"Mailbox"),isError:!isValidMailbox,placeholder:exampleEmailText,type:"text",suffix:"@"+this.props.selectedDomainName,value:mailbox}),!isValidMailbox&&_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid mailbox - only characters [a-z0-9._+-] are allowed"),isError:true})),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Will Be Forwarded To")),_react2.default.createElement(_formTextInput2.default,{disabled:this.state.formSubmitting,name:"destination",onChange:this.onChange,onFocus:this.handleFieldFocus.bind(this,"Destination"),isError:!isValidDestination,placeholder:this.translate("Your Existing Email Address"),type:"text",value:destination}),!isValidDestination&&_react2.default.createElement(_formInputValidation2.default,{text:this.translate("Invalid destination address"),isError:true})))},shouldShowForm:function shouldShowForm(){return!this.hasReachedLimit()&&(!this.hasForwards()||this.state.showForm)},render:function render(){return _react2.default.createElement("form",{className:"email-forwarding__add-new"},_react2.default.createElement(_emailForwardingLimit2.default,{selectedSite:this.props.selectedSite,emailForwarding:this.props.emailForwarding}),this.formFields(),this.formFooter())},onCancel:function onCancel(){this.setState({showForm:false});this.recordEvent("cancelClick",this.props.selectedDomainName)},onChange:function onChange(event){var _event$target=event.target;var name=_event$target.name;var value=_event$target.value;value=value.replace(/\s/g,"");if(name==="mailbox"){value=value.replace(/@.*$/,"")}this.formStateController.handleFieldChange({name:name,value:value})},isValid:function isValid(fieldName){return!_formState2.default.isFieldInvalid(this.state.fields,fieldName)},handleFieldFocus:function handleFieldFocus(fieldName){this.recordEvent("inputFocus",this.props.selectedDomainName,fieldName)}});exports.default=EmailForwardingAddNew;module.exports=exports["default"]},2824:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var support=__webpack_require__(339),analyticsMixin=__webpack_require__(649);var EmailForwardingDetails=React.createClass({displayName:"EmailForwardingDetails",mixins:[analyticsMixin("domainManagement","emailForwarding")],render:function render(){return React.createElement("p",{className:"email-forwarding__explanation"},this.translate("Email Forwarding lets you use your custom domain in your email address, so your email address can be just as memorable as your blog.")," ",React.createElement("a",{href:support.EMAIL_FORWARDING,target:"_blank",onClick:this.handleLearnMoreClick},this.translate("Learn more.")))},handleLearnMoreClick:function handleLearnMoreClick(){this.recordEvent("learnMoreClick",this.props.selectedDomainName)}});module.exports=EmailForwardingDetails},2825:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _redux=__webpack_require__(6);var _analytics=__webpack_require__(649);var _analytics2=_interopRequireDefault(_analytics);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);var _notices=__webpack_require__(71);var _notices2=_interopRequireDefault(_notices);var _actions=__webpack_require__(189);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);var _actions2=__webpack_require__(646);var upgradesActions=_interopRequireWildcard(_actions2);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EmailForwardingItem=_react2.default.createClass({displayName:"EmailForwardingItem",mixins:[(0,_analytics2.default)("domainManagement","emailForwarding")],deleteItem:function deleteItem(){var _this=this;var _props$emailData=this.props.emailData;var temporary=_props$emailData.temporary;var domain=_props$emailData.domain;var mailbox=_props$emailData.mailbox;var forward_address=_props$emailData.forward_address;var email=_props$emailData.email;if(temporary){return}upgradesActions.deleteEmailForwarding(domain,mailbox,function(error){_this.recordEvent("deleteClick",domain,mailbox,forward_address,!error);if(error){_notices2.default.error(error.message||_this.translate("Failed to delete email forwarding record. Please try again or {{contactSupportLink}}contact support{{/contactSupportLink}}.",{components:{contactSupportLink:_react2.default.createElement("a",{href:_support2.default.CALYPSO_CONTACT})}}))}else{_notices2.default.success(_this.translate("Yay, e-mail forwarding for %(email)s has been successfully deleted.",{args:{email:email}}),{duration:5e3})}})},resendVerificationEmail:function resendVerificationEmail(){var _this2=this;var _props$emailData2=this.props.emailData;var temporary=_props$emailData2.temporary;var domain=_props$emailData2.domain;var mailbox=_props$emailData2.mailbox;var forward_address=_props$emailData2.forward_address;if(temporary){return}upgradesActions.resendVerificationEmailForwarding(domain,mailbox,function(error,response){_this2.recordEvent("resendVerificationClick",domain,mailbox,forward_address,!error);if(error||!response.sent){_notices2.default.error(_this2.translate("Failed to resend verification email for email forwarding record. Please try again or {{contactSupportLink}}contact support{{/contactSupportLink}}.",{components:{contactSupportLink:_react2.default.createElement("a",{href:_support2.default.CALYPSO_CONTACT})}}))}else{_notices2.default.success(_this2.translate("Yay, successfully sent confirmation email to %(email)s!",{args:{email:forward_address}}),{duration:5e3})}})},render:function render(){return _react2.default.createElement("li",null,_react2.default.createElement(_button2.default,{borderless:true,disabled:this.props.emailData.temporary,onClick:this.deleteItem},_react2.default.createElement(_gridicon2.default,{icon:"trash"})),!this.props.emailData.active&&_react2.default.createElement(_button2.default,{disabled:this.props.emailData.temporary,borderless:true,onClick:this.resendVerificationEmail,title:this.translate("Resend Verification Email",{context:"Email Forwarding"})},_react2.default.createElement(_gridicon2.default,{icon:"mail"})),_react2.default.createElement("span",null,this.translate("{{strong1}}%(email)s{{/strong1}} {{em}}forwards to{{/em}} {{strong2}}%(forwardTo)s{{/strong2}}",{components:{strong1:_react2.default.createElement("strong",null),strong2:_react2.default.createElement("strong",null),em:_react2.default.createElement("em",null)},args:{email:this.props.emailData.email,forwardTo:this.props.emailData.forward_address}})))}});exports.default=(0,_reactRedux.connect)(null,function(dispatch){return(0,_redux.bindActionCreators)({successNotice:_actions.successNotice},dispatch)})(EmailForwardingItem);module.exports=exports["default"]},2826:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _emailForwarding=__webpack_require__(2085);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EmailForwardingLimit=_react2.default.createClass({displayName:"EmailForwardingLimit",render:function render(){var used=this.props.emailForwarding.list.length;if(used<1){return null}return _react2.default.createElement("div",{className:"email-forwarding__limit"},this.translate("You are using %(used)s out of %(available)s email forwards.",{args:{used:used,available:(0,_emailForwarding.emailForwardingPlanLimit)(this.props.selectedSite.plan)}}))}});exports.default=EmailForwardingLimit;module.exports=exports["default"]},2827:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var EmailForwardingItem=__webpack_require__(2825);var EmailForwardingList=React.createClass({displayName:"EmailForwardingList",render:function render(){var _this=this;var emailForwardingItems;var _props$emailForwardin=this.props.emailForwarding;var list=_props$emailForwardin.list;var hasLoadedFromServer=_props$emailForwardin.hasLoadedFromServer;if(!list&&!hasLoadedFromServer){return React.createElement("span",null,this.translate("Loading…"))}if(!list){return null}emailForwardingItems=list.map(function(emailForwarding){return React.createElement(EmailForwardingItem,{key:emailForwarding.email,emailData:emailForwarding,selectedSite:_this.props.selectedSite})});return React.createElement("ul",{className:"email-forwarding__list"},emailForwardingItems)}});module.exports=EmailForwardingList},2828:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _mainPlaceholder=__webpack_require__(1626);var _mainPlaceholder2=_interopRequireDefault(_mainPlaceholder);var _header=__webpack_require__(1529);var _header2=_interopRequireDefault(_header);var _emailForwardingList=__webpack_require__(2827);var _emailForwardingList2=_interopRequireDefault(_emailForwardingList);var _emailForwardingAddNew=__webpack_require__(2823);var _emailForwardingAddNew2=_interopRequireDefault(_emailForwardingAddNew);var _emailForwardingDetails=__webpack_require__(2824);var _emailForwardingDetails2=_interopRequireDefault(_emailForwardingDetails);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EmailForwarding=_react2.default.createClass({displayName:"EmailForwarding",propTypes:{emailForwarding:_react2.default.PropTypes.object.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired},render:function render(){if(this.isDataLoading()){return _react2.default.createElement(_mainPlaceholder2.default,{goBack:this.goToEditEmail})}return _react2.default.createElement(_main2.default,{className:"email-forwarding"},_react2.default.createElement(_header2.default,{onClick:this.goToEditEmail,selectedDomainName:this.props.selectedDomainName},this.translate("Email Forwarding")),_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Email Forwarding")}),_react2.default.createElement(_compact2.default,{className:"email-forwarding-card"},_react2.default.createElement(_emailForwardingDetails2.default,{selectedDomainName:this.props.selectedDomainName}),_react2.default.createElement(_emailForwardingList2.default,{selectedSite:this.props.selectedSite,emailForwarding:this.props.emailForwarding}),_react2.default.createElement(_emailForwardingAddNew2.default,{emailForwarding:this.props.emailForwarding,selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.selectedSite})))},isDataLoading:function isDataLoading(){return!this.props.emailForwarding.hasLoadedFromServer},goToEditEmail:function goToEditEmail(){(0,_page2.default)(_paths2.default.domainManagementEmail(this.props.selectedSite.slug,this.props.selectedDomainName))}});exports.default=EmailForwarding;module.exports=exports["default"]},2829:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),page=__webpack_require__(40);var Button=__webpack_require__(337),CompactCard=__webpack_require__(1450),config=__webpack_require__(10),paths=__webpack_require__(342),support=__webpack_require__(339),analyticsMixin=__webpack_require__(649);var AddGoogleAppsCard=React.createClass({displayName:"AddGoogleAppsCard",propTypes:{products:React.PropTypes.object.isRequired,selectedDomainName:React.PropTypes.string,selectedSite:React.PropTypes.oneOfType([React.PropTypes.object,React.PropTypes.bool]).isRequired},mixins:[analyticsMixin("domainManagement","email")],render:function render(){var gapps=this.props.products.gapps,googleAppsSupportUrl=support.ADDING_GOOGLE_APPS_TO_YOUR_SITE;var price=gapps&&gapps.cost_display;price=price.replace(/(\d+\.?\d+)/,function(val){var number=Math.round(parseFloat(val)/10*100)/100;return number%1===0?number:number.toFixed(2)});return React.createElement(CompactCard,{className:"add-google-apps-card"},React.createElement("header",{className:"add-google-apps-card__header"},React.createElement("h3",{className:"add-google-apps-card__product-logo"},React.createElement("strong",null,"Google"),React.createElement("span",null,"Apps for Work")),React.createElement("div",{className:"add-google-apps-card__price"},React.createElement("h4",{className:"add-google-apps-card__price-per-user"},React.createElement("span",null,this.translate("{{strong}}%(price)s{{/strong}} per user / month",{components:{strong:React.createElement("strong",null)},args:{price:price}}))),React.createElement("span",{className:"add-google-apps-card__price-separator"}," | "),React.createElement("h5",{className:"add-google-apps-card__billing-period"},this.translate("Billed yearly — get 2 months free!"))),this.renderAddGoogleAppsButton()),React.createElement("div",{className:"add-google-apps-card__product-details"},React.createElement("div",{className:"add-google-apps-card__description"},React.createElement("h2",{className:"add-google-apps-card__title"},this.translate("Professional Email & More")),React.createElement("p",null,this.translate("{{strong}}No setup or software required.{{/strong}} "+"Professional email, online storage, shared calendars, "+"video meetings, and more. {{a}}Learn more.{{/a}}",{components:{strong:React.createElement("strong",null),a:React.createElement("a",{href:googleAppsSupportUrl,target:"_blank",onClick:this.handleLearnMoreClick})}}))),React.createElement("div",{className:"add-google-apps-card__features"},React.createElement("h5",{className:"add-google-apps-card__professional-email"},React.createElement("span",{className:"noticon noticon-checkmark"}),this.translate("{{strong}}Professional{{/strong}} Email Address",{components:{strong:React.createElement("strong",null)}})),React.createElement("h5",{className:"add-google-apps-card__file-storage"},React.createElement("span",{className:"noticon noticon-checkmark"}),this.translate("{{strong}}30GB{{/strong}} Online File Storage",{components:{strong:React.createElement("strong",null)}})),React.createElement("h5",{className:"add-google-apps-card__professional-email"},React.createElement("span",{className:"noticon noticon-checkmark"}),this.translate("{{strong1}}Video{{/strong1}} Meetings {{a}}and {{strong2}}More!{{/strong2}}{{/a}}",{components:{strong1:React.createElement("strong",null),strong2:React.createElement("strong",null),a:React.createElement("a",{href:googleAppsSupportUrl,target:"_blank",onClick:this.handleAndMoreClick})}}))),this.renderAddGoogleAppsButton()))},renderAddGoogleAppsButton:function renderAddGoogleAppsButton(){if(!config.isEnabled("upgrades/checkout")){return null}return React.createElement(Button,{type:"button",onClick:this.goToAddGoogleApps},this.translate("Add Google Apps"))},handleLearnMoreClick:function handleLearnMoreClick(){this.recordEvent("learnMoreClick",this.props.selectedDomainName||null)},handleAndMoreClick:function handleAndMoreClick(){this.recordEvent("andMoreClick",this.props.selectedDomainName||null)},goToAddGoogleApps:function goToAddGoogleApps(){page(paths.domainManagementAddGoogleApps(this.props.selectedSite.slug,this.props.selectedDomainName))}});module.exports=AddGoogleAppsCard},2830:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _keys=__webpack_require__(44);var _keys2=_interopRequireDefault(_keys);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _groupBy=__webpack_require__(692);var _groupBy2=_interopRequireDefault(_groupBy);var _find=__webpack_require__(33);var _find2=_interopRequireDefault(_find);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _pendingGappsTosNotice=__webpack_require__(758);var _pendingGappsTosNotice2=_interopRequireDefault(_pendingGappsTosNotice);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _analytics=__webpack_require__(649);var _analytics2=_interopRequireDefault(_analytics);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _googleAppsUserItem=__webpack_require__(2191);var _googleAppsUserItem2=_interopRequireDefault(_googleAppsUserItem);var _domains=__webpack_require__(152);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GoogleAppsUsers=_react2.default.createClass({displayName:"GoogleAppsUsers",mixins:[(0,_analytics2.default)("domainManagement","googleApps")],propTypes:{domains:_react2.default.PropTypes.object.isRequired,googleAppsUsers:_react2.default.PropTypes.array.isRequired,selectedDomainName:_react2.default.PropTypes.string,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired,user:_react2.default.PropTypes.object.isRequired},getDomainsAsList:function getDomainsAsList(){return this.props.selectedDomainName?[(0,_domains.getSelectedDomain)(this.props)]:this.props.domains.list},canAddUsers:function canAddUsers(){var _this=this;return this.getDomainsAsList().some(function(domain){return domain.googleAppsSubscription.ownedByUserId===_this.props.user.ID})},isNewUser:function isNewUser(user){var domain=(0,_find2.default)(this.props.domains.list,{name:user.domain});return this.moment().subtract(1,"day").isBefore(domain.googleAppsSubscription.subscribedDate)},generateClickHandler:function generateClickHandler(user){var _this2=this;return function(){_this2.recordEvent("manageClick",_this2.props.selectedDomainName,user)}},goToAddGoogleApps:function goToAddGoogleApps(){this.recordEvent("addGoogleAppsUserClick",this.props.selectedDomainName)},renderDomain:function renderDomain(domain,users){var _this3=this;return _react2.default.createElement("div",{key:"google-apps-user-"+domain,className:"google-apps-users-card"},_react2.default.createElement(_sectionHeader2.default,{label:domain},this.canAddUsers()&&_react2.default.createElement(_button2.default,{primary:true,compact:true,href:_paths2.default.domainManagementAddGoogleApps(this.props.selectedSite.slug,domain),onClick:this.goToAddGoogleApps},this.translate("Add Google Apps User"))),_react2.default.createElement(_compact2.default,{className:"google-apps-users-card__user-list"},_react2.default.createElement("ul",{className:"google-apps-users-card__user-list-inner"},users.map(function(user,index){return _this3.renderUser(user,index)}))))},renderUser:function renderUser(user,index){if(user.error){var status="is-warning",text=user.error,supportLink=_react2.default.createElement("a",{href:_support2.default.CALYPSO_CONTACT},_react2.default.createElement("strong",null,this.translate("Please contact support")));if(this.isNewUser(user)){status=null;text=this.translate("We are setting up %(email)s for you. It should start working immediately, but may take up to 24 hours.",{args:{email:user.email}});supportLink=null}return _react2.default.createElement(_notice2.default,{key:"google-apps-user-notice-"+user.domain+"-"+index,showDismiss:false,status:status},text," ",supportLink)}return _react2.default.createElement(_googleAppsUserItem2.default,{key:"google-apps-user-"+user.domain+"-"+index,user:user,onClick:this.generateClickHandler(user)})},render:function render(){var _this4=this;var pendingDomains=this.getDomainsAsList().filter(_domains.hasPendingGoogleAppsUsers),usersByDomain=(0,_groupBy2.default)(this.props.googleAppsUsers,"domain");return _react2.default.createElement("div",null,pendingDomains.length!==0&&_react2.default.createElement(_pendingGappsTosNotice2.default,{key:"pending-gapps-tos-notice",siteSlug:this.props.selectedSite.slug,domains:pendingDomains,section:"google-apps"}),(0,_keys2.default)(usersByDomain).map(function(domain){return _this4.renderDomain(domain,usersByDomain[domain])}))}});exports.default=GoogleAppsUsers;module.exports=exports["default"]},2831:function(module,exports,__webpack_require__){"use strict";var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _header=__webpack_require__(1529);var _header2=_interopRequireDefault(_header);var _sidebarNavigation=__webpack_require__(1465);var _sidebarNavigation2=_interopRequireDefault(_sidebarNavigation);var _addGoogleAppsCard=__webpack_require__(2829);var _addGoogleAppsCard2=_interopRequireDefault(_addGoogleAppsCard);var _googleAppsUsersCard=__webpack_require__(2830);var _googleAppsUsersCard2=_interopRequireDefault(_googleAppsUsersCard);var _placeholder=__webpack_require__(2832);var _placeholder2=_interopRequireDefault(_placeholder);var _verticalNav=__webpack_require__(1587);var _verticalNav2=_interopRequireDefault(_verticalNav);var _item=__webpack_require__(1553);var _item2=_interopRequireDefault(_item);var _navigation=__webpack_require__(1670);var _navigation2=_interopRequireDefault(_navigation);var _emptyContent=__webpack_require__(185);var _emptyContent2=_interopRequireDefault(_emptyContent);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _domains=__webpack_require__(152);var _plans=__webpack_require__(1459);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Email=_react2.default.createClass({displayName:"Email",propTypes:{domains:_react2.default.PropTypes.object.isRequired,products:_react2.default.PropTypes.object.isRequired,selectedDomainName:_react2.default.PropTypes.string,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired,sitePlans:_react2.default.PropTypes.object.isRequired,user:_react2.default.PropTypes.object.isRequired,googleAppsUsers:_react2.default.PropTypes.array.isRequired,googleAppsUsersLoaded:_react2.default.PropTypes.bool.isRequired},render:function render(){return _react2.default.createElement(_main2.default,{className:"domain-management-email",wideLayout:(0,_plans.isPlanFeaturesEnabled)()},_react2.default.createElement(_sidebarNavigation2.default,null),this.headerOrUpgradesNavigation(),this.content())},headerOrUpgradesNavigation:function headerOrUpgradesNavigation(){if(this.props.selectedDomainName){return _react2.default.createElement(_header2.default,{onClick:this.goToEditOrList,selectedDomainName:this.props.selectedDomainName},this.translate("Email"))}return _react2.default.createElement(_navigation2.default,{path:this.props.context.path,cart:this.props.cart,selectedSite:this.props.selectedSite,sitePlans:this.props.sitePlans})},content:function content(){if(!(this.props.domains.hasLoadedFromServer&&this.props.googleAppsUsersLoaded)){return _react2.default.createElement(_placeholder2.default,null)}var domainList=this.props.selectedDomainName?[(0,_domains.getSelectedDomain)(this.props)]:this.props.domains.list;if(domainList.some(_domains.hasGoogleApps)){return this.googleAppsUsersCard()}else if((0,_domains.hasGoogleAppsSupportedDomain)(domainList)){return this.addGoogleAppsCard()}return this.emptyContent()},emptyContent:function emptyContent(){var _props=this.props;var selectedSite=_props.selectedSite;var selectedDomainName=_props.selectedDomainName;var domains=_props.domains;var emptyContentProps=void 0;if(selectedDomainName){emptyContentProps={title:this.translate("Google Apps is not supported on this domain"),line:this.translate("Only domains registered with WordPress.com are eligible for Google Apps."),secondaryAction:this.translate("Add Email Forwarding"),secondaryActionURL:_paths2.default.domainManagementEmailForwarding(selectedSite.slug,selectedDomainName)}}else if((0,_domains.hasMappedDomain)(domains.list)){emptyContentProps={title:this.translate("Google Apps is not supported on mapped domains"),line:this.translate("Only domains registered with WordPress.com are eligible for Google Apps.")}}else{emptyContentProps={title:this.translate("You don't have any domains yet."),line:this.translate("Add a domain to your site to make it easier "+"to remember and easier to share, and get access to email "+"forwarding, Google Apps for Work, and other email services.")}}(0,_assign2.default)(emptyContentProps,{illustration:"/calypso/images/drake/drake-whoops.svg",action:this.translate("Add a Custom Domain"),actionURL:"/domains/add/"+this.props.selectedSite.slug});return _react2.default.createElement(_emptyContent2.default,emptyContentProps)},googleAppsUsersCard:function googleAppsUsersCard(){return _react2.default.createElement(_googleAppsUsersCard2.default,this.props)},addGoogleAppsCard:function addGoogleAppsCard(){return _react2.default.createElement("div",null,_react2.default.createElement(_addGoogleAppsCard2.default,this.props),this.props.selectedDomainName&&_react2.default.createElement(_verticalNav2.default,null,_react2.default.createElement(_item2.default,{path:_paths2.default.domainManagementEmailForwarding(this.props.selectedSite.slug,this.props.selectedDomainName)
},this.translate("Email Forwarding"))))},goToEditOrList:function goToEditOrList(){if(this.props.selectedDomainName){(0,_page2.default)(_paths2.default.domainManagementEdit(this.props.selectedSite.slug,this.props.selectedDomainName))}else{(0,_page2.default)(_paths2.default.domainManagementList(this.props.selectedSite.slug))}}});module.exports=Email},2832:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _googleAppsUserItem=__webpack_require__(2191);var _googleAppsUserItem2=_interopRequireDefault(_googleAppsUserItem);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Placeholder=function Placeholder(){return _react2.default.createElement("div",{className:"google-apps-users-card is-placeholder"},_react2.default.createElement(_sectionHeader2.default,{label:"Google Apps Users"}),_react2.default.createElement(_compact2.default,{className:"google-apps-users-card__user-list"},_react2.default.createElement("ul",{className:"google-apps-users-card__user-list-inner"},_react2.default.createElement(_googleAppsUserItem2.default,{user:{email:"mail@example.com",domain:"example.com"}}))))};exports.default=Placeholder;module.exports=exports["default"]},2833:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);var _noticeAction=__webpack_require__(151);var _noticeAction2=_interopRequireDefault(_noticeAction);var _constants=__webpack_require__(2192);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DomainListNotice=function DomainListNotice(_ref){var type=_ref.type;var domainName=_ref.domainName;var errorMessage=_ref.errorMessage;var onUndoClick=_ref.onUndoClick;var onDismissClick=_ref.onDismissClick;var props={className:"domain-management-list__notice",showDismiss:false,onDismissClick:onDismissClick};switch(type){case _constants.PRIMARY_DOMAIN_CHANGE_SUCCESS:(0,_assign2.default)(props,{text:_react2.default.createElement("span",{key:"text"},_i18nCalypso2.default.translate("Primary Domain changed: All domains will redirect to"+" {{em}}%(domainName)s{{/em}}.",{args:{domainName:domainName},components:{em:_react2.default.createElement("em",null)}})),status:"is-success",children:_react2.default.createElement(_noticeAction2.default,{icon:"refresh",key:"undo-btn",onClick:onUndoClick},_i18nCalypso2.default.translate("Undo"))});break;case _constants.PRIMARY_DOMAIN_CHANGE_FAIL:(0,_assign2.default)(props,{text:errorMessage||_i18nCalypso2.default.translate("Something went wrong and we couldn't change your Primary Domain."),status:"is-error",showDismiss:true});break;case _constants.PRIMARY_DOMAIN_REVERT_SUCCESS:(0,_assign2.default)(props,{text:_react2.default.createElement("span",{key:"text"},_i18nCalypso2.default.translate("No worries, your Primary Domain has been set back to"+" {{em}}%(domainName)s{{/em}}.",{args:{domainName:domainName},components:{em:_react2.default.createElement("em",null)}})),status:"is-success",showDismiss:true,duration:1e4});break;case _constants.PRIMARY_DOMAIN_REVERT_FAIL:(0,_assign2.default)(props,{text:_react2.default.createElement("span",null,errorMessage||_i18nCalypso2.default.translate("Something went wrong and we couldn't revert the changes")),status:"is-error",showDismiss:true});break}return _react2.default.createElement(_notice2.default,props)};exports.default=DomainListNotice;module.exports=exports["default"]},2834:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.List=undefined;var _promise=__webpack_require__(51);var _promise2=_interopRequireDefault(_promise);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _times=__webpack_require__(653);var _times2=_interopRequireDefault(_times);var _findIndex=__webpack_require__(351);var _findIndex2=_interopRequireDefault(_findIndex);var _reactRedux=__webpack_require__(21);var _analytics=__webpack_require__(649);var _analytics2=_interopRequireDefault(_analytics);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _domainWarnings=__webpack_require__(711);var _domainWarnings2=_interopRequireDefault(_domainWarnings);var _item=__webpack_require__(2836);var _item2=_interopRequireDefault(_item);var _itemPlaceholder=__webpack_require__(2835);var _itemPlaceholder2=_interopRequireDefault(_itemPlaceholder);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _navigation=__webpack_require__(1670);var _navigation2=_interopRequireDefault(_navigation);var _sidebarNavigation=__webpack_require__(1465);var _sidebarNavigation2=_interopRequireDefault(_sidebarNavigation);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);var _domainManagement=__webpack_require__(727);var _domainListNotice=__webpack_require__(2833);var _domainListNotice2=_interopRequireDefault(_domainListNotice);var _constants=__webpack_require__(2192);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);var _noticeAction=__webpack_require__(151);var _noticeAction2=_interopRequireDefault(_noticeAction);var _selectors=__webpack_require__(352);var _trackComponentView=__webpack_require__(668);var _trackComponentView2=_interopRequireDefault(_trackComponentView);var _actions=__webpack_require__(250);var _plans=__webpack_require__(1459);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var List=exports.List=_react2.default.createClass({displayName:"List",mixins:[(0,_analytics2.default)("domainManagement","list")],getInitialState:function getInitialState(){return{changePrimaryDomainModeEnabled:false,primaryDomainIndex:-1,notice:null}},domainWarnings:function domainWarnings(){if(this.props.domains.hasLoadedFromServer){return _react2.default.createElement(_domainWarnings2.default,{domains:this.props.domains.list,selectedSite:this.props.selectedSite,ruleWhiteList:["newDomainsWithPrimary","newDomains","unverifiedDomains","pendingGappsTosAcceptanceDomains","wrongNSMappedDomains"]})}},domainCreditsInfoNotice:function domainCreditsInfoNotice(){if(!this.props.hasDomainCredit){return null}var eventName="calypso_domain_credit_reminder_impression";var eventProperties={cta_name:"domain_info_notice"};return _react2.default.createElement(_notice2.default,{status:"is-info",showDismiss:false,text:this.translate("Free domain available"),icon:"globe"},_react2.default.createElement(_noticeAction2.default,{onClick:this.props.clickClaimDomainNotice,href:"/domains/add/"+this.props.selectedSite.slug},this.translate("Claim Free Domain"),_react2.default.createElement(_trackComponentView2.default,{eventName:eventName,eventProperties:eventProperties})))},render:function render(){var headerText=this.translate("Domains",{context:"A navigation label."});if(!this.props.domains){return null}return _react2.default.createElement(_main2.default,{wideLayout:(0,_plans.isPlanFeaturesEnabled)()},_react2.default.createElement(_sidebarNavigation2.default,null),_react2.default.createElement(_navigation2.default,{path:this.props.context.path,cart:this.props.cart,selectedSite:this.props.selectedSite,sitePlans:this.props.sitePlans}),this.domainWarnings(),this.domainCreditsInfoNotice(),_react2.default.createElement(_sectionHeader2.default,{label:headerText},this.headerButtons()),_react2.default.createElement("div",{className:"domain-management-list__items"},this.notice(),this.listItems()))},hideNotice:function hideNotice(){this.setState({notice:null})},notice:function notice(){var notice=this.state.notice;if(!notice){return null}return _react2.default.createElement(_domainListNotice2.default,{type:notice.type,errorMessage:notice.error&&notice.error.message,onDismissClick:this.hideNotice,onUndoClick:this.undoSetPrimaryDomain,domainName:notice.domainName})},undoSetPrimaryDomain:function undoSetPrimaryDomain(){var _this=this;if(!this.state.notice){return}var previousDomainName=this.state.notice.previousDomainName;this.setPrimaryDomain(previousDomainName).then(function(){_this.setState({primaryDomainIndex:-1,settingPrimaryDomain:false,changePrimaryDomainModeEnabled:false,notice:{type:_constants.PRIMARY_DOMAIN_REVERT_SUCCESS,domainName:previousDomainName}})},function(error){_this.setState({notice:{primaryDomainIndex:-1,settingPrimaryDomain:false,changePrimaryDomainModeEnabled:false,type:_constants.PRIMARY_DOMAIN_REVERT_FAIL,domainName:previousDomainName,error:error}})});var previousDomainIndex=(0,_findIndex2.default)(this.props.domains.list,{name:previousDomainName});this.setState({notice:null,changePrimaryDomainModeEnabled:true,primaryDomainIndex:previousDomainIndex,settingPrimaryDomain:true});this.recordEvent("changePrimary",this.props.domains.list[previousDomainIndex])},clickAddDomain:function clickAddDomain(){this.recordEvent("addDomainClick");(0,_page2.default)("/domains/add/"+this.props.selectedSite.slug)},enableChangePrimaryDomainMode:function enableChangePrimaryDomainMode(){this.recordEvent("enablePrimaryDomainMode");this.setState({changePrimaryDomainModeEnabled:true,primaryDomainIndex:(0,_findIndex2.default)(this.props.domains.list,{isPrimary:true})})},disableChangePrimaryDomainMode:function disableChangePrimaryDomainMode(){this.recordEvent("disablePrimaryDomainMode");this.setState({changePrimaryDomainModeEnabled:false,primaryDomainIndex:-1})},headerButtons:function headerButtons(){if(this.state.changePrimaryDomainModeEnabled){return _react2.default.createElement(_button2.default,{disabled:this.state.settingPrimaryDomain,ref:"cancelChangePrimaryButton",borderless:true,compact:true,onClick:this.disableChangePrimaryDomainMode},_react2.default.createElement(_gridicon2.default,{icon:"cross",size:24}))}return _react2.default.createElement("div",null,this.changePrimaryButton(),this.addDomainButton())},changePrimaryButton:function changePrimaryButton(){if(!this.props.domains.list||this.props.domains.list.length<2){return null}return _react2.default.createElement(_button2.default,{compact:true,className:"domain-management-list__change-primary-button",onClick:this.enableChangePrimaryDomainMode},this.translate("Change Primary",{context:"Button label for changing primary domain"}))},addDomainButton:function addDomainButton(){if(!_config2.default.isEnabled("upgrades/domain-search")){return null}return _react2.default.createElement(_button2.default,{primary:true,compact:true,className:"domain-management-list__add-a-domain",onClick:this.clickAddDomain},this.translate("Add Domain"))},setPrimaryDomain:function setPrimaryDomain(domainName){var _this2=this;return new _promise2.default(function(resolve,reject){(0,_domainManagement.setPrimaryDomain)(_this2.props.selectedSite.ID,domainName,function(error,data){if(!error&&data&&data.success){_page2.default.redirect(_paths2.default.domainManagementList(_this2.props.selectedSite.slug));resolve()}else{reject(error)}})})},handleUpdatePrimaryDomain:function handleUpdatePrimaryDomain(index,domain){var _this3=this;if(this.state.settingPrimaryDomain){return}this.recordEvent("changePrimary",domain);var currentPrimaryIndex=(0,_findIndex2.default)(this.props.domains.list,{isPrimary:true}),currentPrimaryName=this.props.domains.list[currentPrimaryIndex].name;if(domain.name===currentPrimaryName){this.setState({changePrimaryDomainModeEnabled:false});return}this.setState({primaryDomainIndex:index,settingPrimaryDomain:true});return this.setPrimaryDomain(domain.name).then(function(){_this3.setState({settingPrimaryDomain:false,changePrimaryDomainModeEnabled:false,notice:{type:_constants.PRIMARY_DOMAIN_CHANGE_SUCCESS,domainName:domain.name,previousDomainName:currentPrimaryName}})},function(error){_this3.setState({settingPrimaryDomain:false,primaryDomainIndex:currentPrimaryIndex,notice:{type:_constants.PRIMARY_DOMAIN_CHANGE_FAIL,domainName:domain.name,error:error}})})},listItems:function listItems(){var _this4=this;if(!this.props.domains.hasLoadedFromServer){return(0,_times2.default)(3,function(n){return _react2.default.createElement(_itemPlaceholder2.default,{key:"item-"+n})})}return this.props.domains.list.map(function(domain,index){return _react2.default.createElement(_item2.default,{key:domain.name,domain:domain,enableSelection:_this4.state.changePrimaryDomainModeEnabled,isSelected:index===_this4.state.primaryDomainIndex,selectionIndex:index,busy:_this4.state.settingPrimaryDomain&&index===_this4.state.primaryDomainIndex,busyMessage:_this4.translate("Setting Primary Domain…",{context:"Shows up when the primary"+" domain is changing and the user is waiting"}),onSelect:_this4.handleUpdatePrimaryDomain,onClick:_this4.goToEditDomainRoot})})},goToEditDomainRoot:function goToEditDomainRoot(domain){(0,_page2.default)(_paths2.default.domainManagementEdit(this.props.selectedSite.slug,domain.name))}});exports.default=(0,_reactRedux.connect)(function(state,ownProps){return{hasDomainCredit:!!ownProps.selectedSite&&(0,_selectors.hasDomainCredit)(state,ownProps.selectedSite.ID)}},function(dispatch){return{clickClaimDomainNotice:function clickClaimDomainNotice(){return dispatch((0,_actions.recordTracksEvent)("calypso_domain_credit_reminder_click",{cta_name:"domain_info_notice"}))}}})(List)},2835:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ListItemPlaceholder=_react2.default.createClass({displayName:"ListItemPlaceholder",render:function render(){return _react2.default.createElement(_compact2.default,{className:"domain-management-list-item is-placeholder"},_react2.default.createElement("div",{className:"domain-management-list-item__link"},_react2.default.createElement("div",{className:"domain-management-list-item__title"}),_react2.default.createElement("div",{className:"domain-management-list-item__meta"},_react2.default.createElement("span",{className:"domain-management-list-item__type"}))))}});exports.default=ListItemPlaceholder;module.exports=exports["default"]},2836:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _primaryFlag=__webpack_require__(2189);var _primaryFlag2=_interopRequireDefault(_primaryFlag);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);var _constants=__webpack_require__(203);var _spinner=__webpack_require__(350);var _spinner2=_interopRequireDefault(_spinner);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ListItem=_react2.default.createClass({displayName:"ListItem",propTypes:{busy:_react2.default.PropTypes.bool,busyMessage:_react2.default.PropTypes.string,domain:_react2.default.PropTypes.object.isRequired,enableSelection:_react2.default.PropTypes.bool,onClick:_react2.default.PropTypes.func.isRequired,onSelect:_react2.default.PropTypes.func.isRequired,selectionIndex:_react2.default.PropTypes.number,isSelected:_react2.default.PropTypes.bool},render:function render(){var cardClass=(0,_classnames2.default)("domain-management-list-item",{busy:this.props.busy});return _react2.default.createElement(_compact2.default,{className:cardClass},this.selectionRadio(),this.props.enableSelection&&_react2.default.createElement("label",{htmlFor:this.getInputId()},this.content())||this.content())},content:function content(){return _react2.default.createElement("div",{className:"domain-management-list-item__link",onClick:this.handleClick},this.icon(),_react2.default.createElement("div",{className:"domain-management-list-item__title"},this.props.domain.name),_react2.default.createElement("span",{className:"domain-management-list-item__meta"},_react2.default.createElement("span",{className:"domain-management-list-item__type"},this.getDomainTypeText()),this.props.domain.type!=="WPCOM"&&this.showDomainExpirationWarning(this.props.domain),_react2.default.createElement(_primaryFlag2.default,{domain:this.props.domain})),this.busyMessage())},busyMessage:function busyMessage(){if(this.props.busy&&this.props.busyMessage){return _react2.default.createElement("div",{className:"domain-management-list-item__busy-message"},this.props.busyMessage)}},icon:function icon(){if(this.props.busy){return _react2.default.createElement(_spinner2.default,{className:"domain-management-list-item__spinner",size:20})}if(this.props.enableSelection){return null}return _react2.default.createElement(_gridicon2.default,{className:"card__link-indicator",icon:"chevron-right"})},handleClick:function handleClick(){if(this.props.enableSelection){return}this.props.onClick(this.props.domain)},handleSelect:function handleSelect(){this.props.onSelect(this.props.selectionIndex,this.props.domain)},getInputId:function getInputId(){return"domain-management-list-item_radio-"+this.props.domain.name},selectionRadio:function selectionRadio(){if(!this.props.enableSelection){return null}return _react2.default.createElement("input",{id:this.getInputId(),className:"domain-management-list-item__radio",type:"radio",checked:this.props.isSelected,onChange:this.handleSelect})},showDomainExpirationWarning:function showDomainExpirationWarning(domain){if(domain.expired){return _react2.default.createElement(_notice2.default,{isCompact:true,status:"is-error",icon:"spam"},this.translate("Expired %(timeSinceExpiry)s",{args:{timeSinceExpiry:domain.expirationMoment.fromNow()},context:'timeSinceExpiry is of the form "[number] [time-period] ago" i.e. "3 days ago"'}))}if(domain.expirationMoment&&domain.expirationMoment<this.moment().add(30,"days")){return _react2.default.createElement(_notice2.default,{isCompact:true,status:"is-error",icon:"spam"},this.translate("Expires %(timeUntilExpiry)s",{args:{timeUntilExpiry:domain.expirationMoment.fromNow()},context:'timeUntilExpiry is of the form "[number] [time-period] ago" i.e. "3 days ago"'}))}},getDomainTypeText:function getDomainTypeText(){switch(this.props.domain.type){case _constants.type.MAPPED:return this.translate("Mapped Domain");case _constants.type.REGISTERED:return this.translate("Registered Domain");case _constants.type.SITE_REDIRECT:return this.translate("Site Redirect");case _constants.type.WPCOM:return this.translate("Included with Site")}}});exports.default=ListItem;module.exports=exports["default"]},2837:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _dropRightWhile=__webpack_require__(3177);var _dropRightWhile2=_interopRequireDefault(_dropRightWhile);var _negate=__webpack_require__(388);var _negate2=_interopRequireDefault(_negate);var _identity=__webpack_require__(110);var _identity2=_interopRequireDefault(_identity);var _formButton=__webpack_require__(337);var _formButton2=_interopRequireDefault(_formButton);var _formFooter=__webpack_require__(1669);var _formFooter2=_interopRequireDefault(_formFooter);var _customNameserversRow=__webpack_require__(2838);var _customNameserversRow2=_interopRequireDefault(_customNameserversRow);var _nameservers=__webpack_require__(2086);var _analytics=__webpack_require__(649);var _analytics2=_interopRequireDefault(_analytics);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MIN_NAMESERVER_LENGTH=2,MAX_NAMESERVER_LENGTH=4;var CustomNameserversForm=_react2.default.createClass({displayName:"CustomNameserversForm",mixins:[(0,_analytics2.default)("domainManagement","nameServers")],propTypes:{nameservers:_react2.default.PropTypes.array,onChange:_react2.default.PropTypes.func.isRequired,onSubmit:_react2.default.PropTypes.func.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired,submitDisabled:_react2.default.PropTypes.bool.isRequired},warning:function warning(){return _react2.default.createElement(_notice2.default,{status:"is-warning",showDismiss:false},this.translate("Your domain must use WordPress.com name servers for your "+"WordPress.com site to load & other features to be available.")," ",_react2.default.createElement("a",{href:_support2.default.CHANGE_NAME_SERVERS,target:"_blank",onClick:this.handleLearnMoreClick},this.translate("Learn more.")))},handleLearnMoreClick:function handleLearnMoreClick(){this.recordEvent("customNameServersLearnMoreClick",this.props.selectedDomainName)},popularHostsMessage:function popularHostsMessage(){return _react2.default.createElement("div",{className:"custom-nameservers-form__explanation"},this.translate("Not sure what name servers to use?")," ",_react2.default.createElement("a",{href:_support2.default.CHANGE_NAME_SERVERS_FINDING_OUT_NEW_NS,target:"_blank",onClick:this.handleLookUpClick},this.translate("Look up the name servers for popular hosts.")))},handleLookUpClick:function handleLookUpClick(){this.recordEvent("customNameServersLookUpClick",this.props.selectedDomainName)},rows:function rows(){var _this=this;var nameservers=(0,_dropRightWhile2.default)(this.props.nameservers,(0,_negate2.default)(_identity2.default));if(nameservers.length<MAX_NAMESERVER_LENGTH){nameservers.push("")}while(nameservers.length<MIN_NAMESERVER_LENGTH){nameservers.push("")}return nameservers.map(function(nameserver,index){var placeholder=void 0;if(index<MIN_NAMESERVER_LENGTH){placeholder=_this.translate("Required")}else{placeholder=_this.translate("Optional")}return _react2.default.createElement(_customNameserversRow2.default,{key:index,index:index,placeholder:placeholder,nameserver:nameserver,selectedDomainName:_this.props.selectedDomainName,onChange:_this.handleChange,onRemove:_this.handleRemove})})},handleRemove:function handleRemove(index){this.props.onChange((0,_nameservers.remove)(this.props.nameservers,index))},handleChange:function handleChange(nameserver,index){this.props.onChange((0,_nameservers.change)(this.props.nameservers,index,nameserver))},render:function render(){var classes=(0,_classnames2.default)("button is-primary is-full-width",{disabled:this.props.submitDisabled});if(!this.props.nameservers){return null}return _react2.default.createElement("div",{className:"custom-nameservers-form is-compact card"},_react2.default.createElement("span",null,this.translate("Use Custom Name Servers:")),this.warning(),_react2.default.createElement("form",null,this.rows(),this.popularHostsMessage(),_react2.default.createElement(_formFooter2.default,null,_react2.default.createElement(_formButton2.default,{onClick:this.handleSubmit,className:classes,disabled:this.props.submitDisabled},this.translate("Save Custom Name Servers")),_react2.default.createElement(_formButton2.default,{type:"button",isPrimary:false,onClick:this.handleReset},this.translate("Reset to Defaults")))))},handleSubmit:function handleSubmit(event){event.preventDefault();this.recordEvent("saveCustomNameServersClick",this.props.selectedDomainName);this.props.onSubmit()},handleReset:function handleReset(event){event.preventDefault();this.recordEvent("resetToDefaultsClick",this.props.selectedDomainName);this.props.onReset()}});exports.default=CustomNameserversForm;module.exports=exports["default"]},2838:function(module,exports,__webpack_require__){"use strict";var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _analytics=__webpack_require__(649);var _analytics2=_interopRequireDefault(_analytics);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CustomNameserversRow=_react2.default.createClass({displayName:"CustomNameserversRow",mixins:[(0,_analytics2.default)("domainManagement","nameServers")],propTypes:{index:_react2.default.PropTypes.number,nameserver:_react2.default.PropTypes.string,onChange:_react2.default.PropTypes.func,onRemove:_react2.default.PropTypes.func},handleRemove:function handleRemove(event){event.preventDefault();this.recordEvent("removeClick",this.props.selectedDomainName);this.props.onRemove(this.props.index)},renderRemoveIcon:function renderRemoveIcon(){if(!this.props.nameserver){return null}return _react2.default.createElement(_button2.default,{borderless:true,compact:true,onClick:this.handleRemove},_react2.default.createElement(_gridicon2.default,{icon:"trash"}))},render:function render(){return _react2.default.createElement("div",{className:"custom-nameservers-row"},_react2.default.createElement("fieldset",null,_react2.default.createElement("input",{type:"text",placeholder:this.props.placeholder,onChange:this.handleChange,onFocus:this.handleFocus,value:this.props.nameserver}),this.renderRemoveIcon()))},handleChange:function handleChange(event){if(this.props.onChange){this.props.onChange(event.target.value,this.props.index)}},handleFocus:function handleFocus(){this.recordEvent("customNameserverInputFocus",this.props.selectedDomainName)}});module.exports=CustomNameserversRow},2839:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _reactRedux=__webpack_require__(21);var _redux=__webpack_require__(6);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _header=__webpack_require__(1529);var _header2=_interopRequireDefault(_header);var _customNameserversForm=__webpack_require__(2837);var _customNameserversForm2=_interopRequireDefault(_customNameserversForm);var _wpcomNameserversToggle=__webpack_require__(2840);var _wpcomNameserversToggle2=_interopRequireDefault(_wpcomNameserversToggle);var _icannVerificationCard=__webpack_require__(2190);var _icannVerificationCard2=_interopRequireDefault(_icannVerificationCard);var _notices=__webpack_require__(71);var _notices2=_interopRequireDefault(_notices);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _verticalNav=__webpack_require__(1587);var _verticalNav2=_interopRequireDefault(_verticalNav);var _item=__webpack_require__(1553);var _item2=_interopRequireDefault(_item);var _actions=__webpack_require__(646);var upgradesActions=_interopRequireWildcard(_actions);var _nameservers=__webpack_require__(2086);var _domains=__webpack_require__(152);var _isEmpty=__webpack_require__(81);var _isEmpty2=_interopRequireDefault(_isEmpty);var _actions2=__webpack_require__(189);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var NameServers=_react2.default.createClass({displayName:"NameServers",propTypes:{domains:_react2.default.PropTypes.object.isRequired,nameservers:_react2.default.PropTypes.object.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired},getInitialState:function getInitialState(){var nameservers=this.props.nameservers;return{formSubmitting:false,nameservers:nameservers.hasLoadedFromServer?nameservers.list:null}},hasWpcomNameservers:function hasWpcomNameservers(){if(!this.props.nameservers.hasLoadedFromServer){return true}return(0,_nameservers.isWpcomDefaults)(this.state.nameservers)},componentWillReceiveProps:function componentWillReceiveProps(props){this.setStateWhenLoadedFromServer(props)},setStateWhenLoadedFromServer:function setStateWhenLoadedFromServer(props){var prevNameservers=this.props.nameservers,nextNameservers=props.nameservers,finishedLoading=!prevNameservers.hasLoadedFromServer&&nextNameservers.hasLoadedFromServer;if(!finishedLoading){return}this.setState({nameservers:nextNameservers.list})},isLoading:function isLoading(){return!this.props.domains.hasLoadedFromServer||!this.props.nameservers.hasLoadedFromServer},render:function render(){var classes=(0,_classnames2.default)("name-servers",{"is-placeholder":this.isLoading()});return _react2.default.createElement(_main2.default,{className:classes},this.header(),_react2.default.createElement(_verticalNav2.default,null,this.wpcomNameserversToggle(),this.customNameservers(),this.dnsRecordsNavItem()))},wpcomNameserversToggle:function wpcomNameserversToggle(){return _react2.default.createElement(_wpcomNameserversToggle2.default,{selectedDomainName:this.props.selectedDomainName,onToggle:this.handleToggle,enabled:this.hasWpcomNameservers()})},handleToggle:function handleToggle(){if(this.hasWpcomNameservers()){this.setState({nameservers:[]})}else{this.resetToWpcomNameservers()}},resetToWpcomNameservers:function resetToWpcomNameservers(){var _this=this;if((0,_isEmpty2.default)(this.state.nameservers)){this.setState({nameservers:_nameservers.WPCOM_DEFAULTS})}else{this.setState({nameservers:_nameservers.WPCOM_DEFAULTS},function(){_this.saveNameservers()})}},saveNameservers:function saveNameservers(){var _this2=this;var nameservers=this.state.nameservers;var selectedDomainName=this.props.selectedDomainName;this.setState({formSubmitting:true});upgradesActions.updateNameservers(selectedDomainName,nameservers,function(error){if(error){_notices2.default.error(error.message)}else{_this2.props.successNotice(_this2.translate("Yay, the name servers have been successfully updated!"))}_this2.setState({formSubmitting:false})})},header:function header(){return _react2.default.createElement(_header2.default,{onClick:this.back,selectedDomainName:this.props.selectedDomainName},this.translate("Name Servers and DNS"))},back:function back(){(0,_page2.default)(_paths2.default.domainManagementEdit(this.props.selectedSite.slug,this.props.selectedDomainName))},customNameservers:function customNameservers(){if(this.hasWpcomNameservers()){return null}if(this.needsVerification()){return _react2.default.createElement(_icannVerificationCard2.default,{selectedDomainName:this.props.selectedDomainName,
explanationContext:"name-servers",selectedSite:this.props.selectedSite})}return _react2.default.createElement(_customNameserversForm2.default,{nameservers:this.state.nameservers,selectedSite:this.props.selectedSite,selectedDomainName:this.props.selectedDomainName,onChange:this.handleChange,onReset:this.handleReset,onSubmit:this.handleSubmit,submitDisabled:this.state.formSubmitting})},needsVerification:function needsVerification(){if(!this.props.domains.hasLoadedFromServer){return false}return(0,_domains.getSelectedDomain)(this.props).isPendingIcannVerification},handleChange:function handleChange(nameservers){this.setState({nameservers:nameservers})},handleReset:function handleReset(){this.resetToWpcomNameservers()},handleSubmit:function handleSubmit(){this.saveNameservers()},dnsRecordsNavItem:function dnsRecordsNavItem(){if(!this.hasWpcomNameservers()){return null}return _react2.default.createElement(_item2.default,{path:_paths2.default.domainManagementDns(this.props.selectedSite.slug,this.props.selectedDomainName)},this.translate("DNS Records"))}});exports.default=(0,_reactRedux.connect)(null,function(dispatch){return(0,_redux.bindActionCreators)({successNotice:_actions2.successNotice},dispatch)})(NameServers);module.exports=exports["default"]},2840:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _analytics=__webpack_require__(649);var _analytics2=_interopRequireDefault(_analytics);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Toggle=__webpack_require__(1564),support=__webpack_require__(339);var NameserversToggle=_react2.default.createClass({displayName:"NameserversToggle",mixins:[(0,_analytics2.default)("domainManagement","nameServers")],propTypes:{onToggle:_react2.default.PropTypes.func.isRequired,enabled:_react2.default.PropTypes.bool.isRequired},render:function render(){return _react2.default.createElement("div",{className:"name-servers__dns is-compact card"},_react2.default.createElement("span",{className:"name-servers__title"},this.translate("Use WordPress.com Name Servers")),_react2.default.createElement("form",{className:"name-servers__toggle"},_react2.default.createElement(Toggle,{id:"wp-nameservers",name:"wp-nameservers",onChange:this.handleToggle,type:"checkbox",checked:this.props.enabled,value:"active"})),this.renderExplanation())},handleToggle:function handleToggle(){this.recordEvent("wpcomNameServersToggleButtonClick",this.props.selectedDomainName,!this.props.enabled);this.props.onToggle()},renderExplanation:function renderExplanation(){if(!this.props.enabled){return null}return _react2.default.createElement("p",{className:"name-servers__explanation"},this.translate("Name servers point your domain to the right website host, like WordPress.com. "+"{{a}}Learn more.{{/a}}",{components:{a:_react2.default.createElement("a",{href:support.CHANGE_NAME_SERVERS,target:"_blank",onClick:this.handleLearnMoreClick})}}))},handleLearnMoreClick:function handleLearnMoreClick(){this.recordEvent("wpcomNameServersLearnMoreClick",this.props.selectedDomainName)}});exports.default=NameserversToggle;module.exports=exports["default"]},2841:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _analytics=__webpack_require__(649);var _analytics2=_interopRequireDefault(_analytics);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _header=__webpack_require__(1529);var _header2=_interopRequireDefault(_header);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _actions=__webpack_require__(646);var upgradesActions=_interopRequireWildcard(_actions);var _domains=__webpack_require__(152);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PrimaryDomain=_react2.default.createClass({displayName:"PrimaryDomain",mixins:[(0,_analytics2.default)("domainManagement","primaryDomain")],propTypes:{domains:_react2.default.PropTypes.object.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired},getInitialState:function getInitialState(){return{loading:false,errorMessage:null}},getEditPath:function getEditPath(){return _paths2.default.domainManagementEdit(this.props.selectedSite.slug,this.props.selectedDomainName)},goToEditDomainRoot:function goToEditDomainRoot(){(0,_page2.default)(this.getEditPath())},handleCancelClick:function handleCancelClick(){this.recordEvent("cancelClick",(0,_domains.getSelectedDomain)(this.props));(0,_page2.default)(this.getEditPath())},handleConfirmClick:function handleConfirmClick(){var _this=this;if(!this.state.loading){(function(){var domain=(0,_domains.getSelectedDomain)(_this.props);_this.setState({loading:true,errorMessage:null});upgradesActions.setPrimaryDomain(_this.props.selectedSite.ID,_this.props.selectedDomainName,function(error,data){_this.recordEvent("updatePrimaryDomainClick",domain,data&&data.success);if(!error&&data.success){_page2.default.redirect(_this.getEditPath())}else{_this.setState({loading:false,errorMessage:error.message||_this.translate("There was a problem updating your primary domain. Please try again later or contact support")})}})})()}},errors:function errors(){if(this.state.errorMessage){return _react2.default.createElement(_notice2.default,{status:"is-error"},this.state.errorMessage)}},render:function render(){var primaryDomainSupportUrl=_support2.default.SETTING_PRIMARY_DOMAIN;return _react2.default.createElement(_main2.default,{className:"domain-management-primary-domain"},_react2.default.createElement(_header2.default,{selectedDomainName:this.props.selectedDomainName,onClick:this.goToEditDomainRoot},this.translate("Primary Domain")),this.errors(),_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Make %(domainName)s the Primary Domain",{args:{domainName:this.props.selectedDomainName}})}),_react2.default.createElement(_compact2.default,{className:"primary-domain-card"},_react2.default.createElement("section",null,_react2.default.createElement("div",{className:"primary-domain-explanation"},this.translate("Your primary domain is the address visitors will see in their browser when visiting your site.")," ",_react2.default.createElement("a",{href:primaryDomainSupportUrl,target:"_blank"},this.translate("Learn More")))),_react2.default.createElement(_notice2.default,{showDismiss:false,className:"primary-domain-notice"},this.translate("The primary domain for this site is currently %(oldDomainName)s. If you update the primary domain, all other domains will redirect to %(newDomainName)s.",{args:{oldDomainName:this.props.selectedSite.domain,newDomainName:this.props.selectedDomainName}})),_react2.default.createElement("section",{className:"primary-domain-actions"},_react2.default.createElement("button",{className:"button is-primary",disabled:this.state.loading,onClick:this.handleConfirmClick},this.translate("Update Primary Domain")),_react2.default.createElement("button",{className:"button",disabled:this.state.loading,onClick:this.handleCancelClick},this.translate("Cancel")))))}});exports.default=PrimaryDomain;module.exports=exports["default"]},2842:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _addButton=__webpack_require__(2193);var _addButton2=_interopRequireDefault(_addButton);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Content=_react2.default.createClass({displayName:"Content",propTypes:{selectedDomainName:_react2.default.PropTypes.string.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired},render:function render(){return _react2.default.createElement("section",{className:"privacy-protection-card__content"},_react2.default.createElement("div",{className:"privacy-protection-card__description"},_react2.default.createElement("h2",null,this.translate("Why use Privacy Protection?")),_react2.default.createElement("p",null,this.translate("With Privacy Protection, we show our partner's contact information instead of your own."),_react2.default.createElement("a",{href:_support2.default.PUBLIC_VS_PRIVATE,target:"_blank"},this.translate("Learn more.")))),_react2.default.createElement("div",{className:"privacy-protection-card__features"},_react2.default.createElement("h5",null,_react2.default.createElement("span",{className:"noticon noticon-checkmark"}),this.translate("{{strong}}Protects{{/strong}} Your Identity Online",{components:{strong:_react2.default.createElement("strong",null)}})),_react2.default.createElement("h5",null,_react2.default.createElement("span",{className:"noticon noticon-checkmark"}),this.translate("{{strong}}Reduces{{/strong}} Email Spam",{components:{strong:_react2.default.createElement("strong",null)}})),_react2.default.createElement("h5",null,_react2.default.createElement("span",{className:"noticon noticon-checkmark"}),this.translate("{{strong}}Helps{{/strong}} Prevent Domain Hacking",{components:{strong:_react2.default.createElement("strong",null)}}))),_react2.default.createElement(_addButton2.default,{selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.selectedSite}))}});exports.default=Content;module.exports=exports["default"]},2843:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _addButton=__webpack_require__(2193);var _addButton2=_interopRequireDefault(_addButton);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Header=_react2.default.createClass({displayName:"Header",propTypes:{products:_react2.default.PropTypes.object.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired},render:function render(){var displayCost=this.props.products&&this.props.products.private_whois&&this.props.products.private_whois.cost_display;if(!displayCost){return null}return _react2.default.createElement("header",{className:"privacy-protection-card__header"},_react2.default.createElement("h3",null,this.translate("Privacy Protection")),_react2.default.createElement("div",{className:"privacy-protection-card__price"},_react2.default.createElement("h4",{className:"privacy-protection-card__price-per-user"},this.translate("{{strong}}%(cost)s{{/strong}} per domain / year",{args:{cost:displayCost},components:{strong:_react2.default.createElement("strong",null)}}))),_react2.default.createElement(_addButton2.default,{selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.selectedSite}))}});exports.default=Header;module.exports=exports["default"]},2844:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _content=__webpack_require__(2842);var _content2=_interopRequireDefault(_content);var _header=__webpack_require__(2843);var _header2=_interopRequireDefault(_header);var _mainPlaceholder=__webpack_require__(1626);var _mainPlaceholder2=_interopRequireDefault(_mainPlaceholder);var _header3=__webpack_require__(1529);var _header4=_interopRequireDefault(_header3);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _domains=__webpack_require__(152);var _constants=__webpack_require__(203);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PrivacyProtection=_react2.default.createClass({displayName:"PrivacyProtection",propTypes:{domains:_react2.default.PropTypes.object.isRequired,products:_react2.default.PropTypes.object.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired},componentWillMount:function componentWillMount(){this.ensurePageCanLoad()},componentWillUpdate:function componentWillUpdate(){this.ensurePageCanLoad()},ensurePageCanLoad:function ensurePageCanLoad(){var domain=(0,_domains.getSelectedDomain)(this.props);if(!domain){return}if(!this.canAddPrivacyProtection()){(0,_page2.default)(_paths2.default.domainManagementContactsPrivacy(this.props.selectedSite.slug,this.props.selectedDomainName))}},canAddPrivacyProtection:function canAddPrivacyProtection(){var domain=(0,_domains.getSelectedDomain)(this.props);return domain&&domain.type===_constants.type.REGISTERED&&!domain.hasPrivacyProtection},render:function render(){if(!this.canAddPrivacyProtection()){return _react2.default.createElement(_mainPlaceholder2.default,{goBack:this.goToPreviousSection})}return _react2.default.createElement(_main2.default,{className:"domain-management-privacy-protection"},_react2.default.createElement(_header4.default,{onClick:this.goToPreviousSection,selectedDomainName:this.props.selectedDomainName},this.translate("Privacy Protection")),_react2.default.createElement(_card2.default,{className:"privacy-protection-card"},_react2.default.createElement(_header2.default,{selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.selectedSite,products:this.props.products}),_react2.default.createElement(_content2.default,{selectedDomainName:this.props.selectedDomainName,selectedSite:this.props.selectedSite})))},goToPreviousSection:function goToPreviousSection(){var prevPath=this.props.context.prevPath;var previousSection=_paths2.default.getSectionName(prevPath);var path=void 0;if(previousSection==="contacts-privacy"){path=_paths2.default.domainManagementContactsPrivacy}else{path=_paths2.default.domainManagementEdit}(0,_page2.default)(path(this.props.selectedSite.slug,this.props.selectedDomainName))}});exports.default=PrivacyProtection;module.exports=exports["default"]},2845:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _analytics=__webpack_require__(649);var _analytics2=_interopRequireDefault(_analytics);var _header=__webpack_require__(1529);var _header2=_interopRequireDefault(_header);var _formButton=__webpack_require__(337);var _formButton2=_interopRequireDefault(_formButton);var _formFieldset=__webpack_require__(338);var _formFieldset2=_interopRequireDefault(_formFieldset);var _formFooter=__webpack_require__(1669);var _formFooter2=_interopRequireDefault(_formFooter);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _formTextInputWithAffixes=__webpack_require__(1511);var _formTextInputWithAffixes2=_interopRequireDefault(_formTextInputWithAffixes);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _notice=__webpack_require__(2846);var _notice2=_interopRequireDefault(_notice);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _actions=__webpack_require__(646);var upgradesActions=_interopRequireWildcard(_actions);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SiteRedirect=_react2.default.createClass({displayName:"SiteRedirect",mixins:[(0,_analytics2.default)("domainManagement","siteRedirect")],propTypes:{location:_react2.default.PropTypes.object.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired},componentWillMount:function componentWillMount(){upgradesActions.fetchSiteRedirect(this.props.selectedSite.domain)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(this.props.location.value!==nextProps.location.value){this.setState({location:nextProps.location.value})}},componentWillUnmount:function componentWillUnmount(){upgradesActions.closeSiteRedirectNotice(this.props.selectedSite.domain)},getInitialState:function getInitialState(){return{location:this.props.location.value}},handleChange:function handleChange(event){var location=event.target.value;location=location.replace(/.*:\/\//,"");this.setState({location:location})},handleClick:function handleClick(event){var _this=this;event.preventDefault();upgradesActions.updateSiteRedirect(this.props.selectedSite.domain,this.state.location,function(success){_this.recordEvent("updateSiteRedirectClick",_this.props.selectedDomainName,_this.state.location,success);if(success){(0,_page2.default)(_paths2.default.domainManagementRedirectSettings(_this.props.selectedSite.slug,_this.state.location))}})},handleFocus:function handleFocus(){this.recordEvent("locationFocus",this.props.selectedDomainName)},render:function render(){var classes=(0,_classnames2.default)("site-redirect-card",{fetching:this.props.location.isFetching});return _react2.default.createElement("div",null,_react2.default.createElement(_notice2.default,{notice:this.props.location.notice,selectedSite:this.props.selectedSite}),_react2.default.createElement(_main2.default,{className:"domain-management-site-redirect"},_react2.default.createElement(_header2.default,{onClick:this.goToEdit,selectedDomainName:this.props.selectedDomainName},this.translate("Redirect Settings")),_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Redirect Settings")}),_react2.default.createElement(_compact2.default,{className:classes},_react2.default.createElement("form",null,_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,this.translate("Redirect To")),_react2.default.createElement(_formTextInputWithAffixes2.default,{disabled:this.props.location.isFetching||this.props.location.isUpdating,name:"destination",noWrap:true,onChange:this.handleChange,onFocus:this.handleFocus,prefix:"http://",type:"text",value:this.state.location}),_react2.default.createElement("p",{className:"site-redirect__explanation"},this.translate("All domains on this site will redirect here."))),_react2.default.createElement(_formFooter2.default,null,_react2.default.createElement(_formButton2.default,{disabled:this.props.location.isFetching||this.props.location.isUpdating,onClick:this.handleClick},this.translate("Update Site Redirect")),_react2.default.createElement(_formButton2.default,{type:"button",isPrimary:false,onClick:this.goToEdit},this.translate("Cancel")))))))},goToEdit:function goToEdit(){this.recordEvent("cancelClick",this.props.selectedDomainName);(0,_page2.default)(_paths2.default.domainManagementEdit(this.props.selectedSite.slug,this.props.selectedDomainName))}});exports.default=SiteRedirect;module.exports=exports["default"]},2846:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var Notice=__webpack_require__(79),notices=__webpack_require__(71),upgradesActions=__webpack_require__(646);var SiteRedirectNotice=React.createClass({displayName:"SiteRedirectNotice",propTypes:{notice:React.PropTypes.object,selectedSite:React.PropTypes.oneOfType([React.PropTypes.object,React.PropTypes.bool]).isRequired},handleClick:function handleClick(event){event.preventDefault();upgradesActions.closeSiteRedirectNotice(this.props.selectedSite.domain)},render:function render(){if(this.props.notice){return React.createElement(Notice,{raw:{onRemoveCallback:this.handleClick},status:notices.getStatusHelper(this.props.notice),text:this.props.notice.text})}else{return null}}});module.exports=SiteRedirectNotice},2847:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _domainManagement=__webpack_require__(727);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _notices=__webpack_require__(71);var _notices2=_interopRequireDefault(_notices);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var IcannVerification=_react2.default.createClass({displayName:"IcannVerification",getInitialState:function getInitialState(){return{submitting:false}},handleClick:function handleClick(){var _this=this;this.setState({submitting:true});(0,_domainManagement.resendIcannVerification)(this.props.selectedDomainName,function(error){if(error){_notices2.default.error(error.message)}else{_notices2.default.success(_this.translate("We sent the ICANN verification email to your "+"email address. Please check your inbox and click the link in the email."))}_this.setState({submitting:false})})},render:function render(){return _react2.default.createElement("div",null,_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Transfer Domain")},_react2.default.createElement(_button2.default,{onClick:this.handleClick,disabled:this.state.submitting,compact:true,primary:true},this.translate("Resend Verification Email"))),_react2.default.createElement(_card2.default,{className:"transfer-card"},_react2.default.createElement("p",null,this.translate("You must verify your email address before you can transfer this domain. "+"{{learnMoreLink}}Learn more.{{/learnMoreLink}}",{components:{learnMoreLink:_react2.default.createElement("a",{href:_support2.default.TRANSFER_DOMAIN_REGISTRATION,target:"_blank"})}}))))}});exports.default=IcannVerification;module.exports=exports["default"]},2848:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _mainPlaceholder=__webpack_require__(1626);var _mainPlaceholder2=_interopRequireDefault(_mainPlaceholder);var _header=__webpack_require__(1529);var _header2=_interopRequireDefault(_header);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _nonOwnerCard=__webpack_require__(2188);var _nonOwnerCard2=_interopRequireDefault(_nonOwnerCard);var _paths=__webpack_require__(342);var _paths2=_interopRequireDefault(_paths);var _domains=__webpack_require__(152);var _icannVerification=__webpack_require__(2847);var _icannVerification2=_interopRequireDefault(_icannVerification);var _locked=__webpack_require__(2849);var _locked2=_interopRequireDefault(_locked);var _unlocked=__webpack_require__(2851);var _unlocked2=_interopRequireDefault(_unlocked);var _transferProhibited=__webpack_require__(2850);var _transferProhibited2=_interopRequireDefault(_transferProhibited);var _omit=__webpack_require__(18);var _omit2=_interopRequireDefault(_omit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Transfer=_react2.default.createClass({displayName:"Transfer",propTypes:{domains:_react2.default.PropTypes.object.isRequired,selectedDomainName:_react2.default.PropTypes.string.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired,wapiDomainInfo:_react2.default.PropTypes.object.isRequired},renderSection:function renderSection(){var _props$wapiDomainInfo=this.props.wapiDomainInfo.data;var locked=_props$wapiDomainInfo.locked;var transferProhibited=_props$wapiDomainInfo.transferProhibited;var _getSelectedDomain=(0,_domains.getSelectedDomain)(this.props);var isPendingIcannVerification=_getSelectedDomain.isPendingIcannVerification;var currentUserCanManage=_getSelectedDomain.currentUserCanManage;var section=null;if(!currentUserCanManage){section=_nonOwnerCard2.default}else if(transferProhibited){section=_transferProhibited2.default}else if(isPendingIcannVerification){section=_icannVerification2.default}else if(locked){section=_locked2.default}else{section=_unlocked2.default}return _react2.default.createElement(section,(0,_omit2.default)(this.props,["children"]))},render:function render(){if(this.isDataLoading()){return _react2.default.createElement(_mainPlaceholder2.default,{goBack:this.goToEdit})}return _react2.default.createElement(_main2.default,{className:"domain-management-transfer"},_react2.default.createElement(_header2.default,{onClick:this.goToEdit,selectedDomainName:this.props.selectedDomainName},this.translate("Transfer Domain")),this.renderSection())},goToEdit:function goToEdit(){(0,_page2.default)(_paths2.default.domainManagementEdit(this.props.selectedSite.slug,this.props.selectedDomainName))},isDataLoading:function isDataLoading(){return!this.props.wapiDomainInfo.hasLoadedFromServer||!this.props.domains.hasLoadedFromServer}});exports.default=Transfer;module.exports=exports["default"]},2849:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _domains=__webpack_require__(152);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _actions=__webpack_require__(646);var _shared=__webpack_require__(2194);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Locked=_react2.default.createClass({displayName:"Locked",getInitialState:function getInitialState(){return{submitting:false,showDialog:false}},unlockAndRequestTransferCode:function unlockAndRequestTransferCode(){var _this=this;var _getSelectedDomain=(0,_domains.getSelectedDomain)(this.props);var privateDomain=_getSelectedDomain.privateDomain;var hasPrivacyProtection=_getSelectedDomain.hasPrivacyProtection;var options={siteId:this.props.selectedSite.ID,domainName:this.props.selectedDomainName,unlock:true,disablePrivacy:privateDomain&&hasPrivacyProtection};this.setState({submitting:true});(0,_actions.requestTransferCode)(options,function(error){if(_this.isMounted()){_this.setState({submitting:false})}(0,_shared.displayRequestTransferCodeResponseNotice)(error,(0,_domains.getSelectedDomain)(_this.props))})},requestTransferCode:function requestTransferCode(){var _this2=this;var options={siteId:this.props.selectedSite.ID,domainName:this.props.selectedDomainName,unlock:false,disablePrivacy:false};this.setState({submitting:true});(0,_actions.requestTransferCode)(options,function(error){if(_this2.isMounted()){_this2.setState({submitting:false})}(0,_shared.displayRequestTransferCodeResponseNotice)(error,(0,_domains.getSelectedDomain)(_this2.props))})},handleTransferClick:function handleTransferClick(){this.unlockAndRequestTransferCode()},isManualTransferRequired:function isManualTransferRequired(){return(0,_domains.getSelectedDomain)(this.props).manualTransferRequired},renderManualTransferInfo:function renderManualTransferInfo(){return _react2.default.createElement("p",null,this.translate("This Top Level Domain (TLD) requires that we manually request a "+"transfer code on your behalf. After we have received it, we will "+"email it to you."))},handleGiveMeTheCodeClick:function handleGiveMeTheCodeClick(event){event.preventDefault();this.requestTransferCode()},render:function render(){var _getSelectedDomain2=(0,_domains.getSelectedDomain)(this.props);var privateDomain=_getSelectedDomain2.privateDomain;return _react2.default.createElement("div",null,_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Transfer Domain")}),_react2.default.createElement(_card2.default,{className:"transfer-card"},_react2.default.createElement("div",null,_react2.default.createElement("p",null,privateDomain?this.translate("To transfer your domain, we must unlock it and remove Privacy Protection. "+"Your contact information will be publicly available during the transfer period."):this.translate("To transfer your domain, we must unlock it.")," ",_react2.default.createElement("a",{href:_support2.default.TRANSFER_DOMAIN_REGISTRATION,target:"_blank"},this.translate("Learn More."))),_react2.default.createElement("p",{className:"transfer__small-text"},_react2.default.createElement("a",{href:"",onClick:this.handleGiveMeTheCodeClick},this.translate("I just want the transfer code for now."))),this.isManualTransferRequired()&&this.renderManualTransferInfo(),_react2.default.createElement(_button2.default,{className:"transfer__action-button",onClick:this.handleTransferClick,primary:true,disabled:this.state.submitting},this.translate("Update Settings And Continue")))))}});exports.default=Locked;module.exports=exports["default"]},2850:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TransferProhibited=function TransferProhibited(){return _react2.default.createElement("div",null,_react2.default.createElement(_sectionHeader2.default,{label:(0,_i18nCalypso.translate)("Transfer Domain")}),_react2.default.createElement(_card2.default,{className:"transfer-card"},_react2.default.createElement("p",null,(0,_i18nCalypso.translate)("It is only possible to transfer a domain after 60 days after the registration date. This 60 day lock is "+"required by the Internet Corporation for Assigned Names and Numbers (ICANN) and cannot be waived. "+"{{learnMoreLink}}Learn more.{{/learnMoreLink}}",{
components:{learnMoreLink:_react2.default.createElement("a",{href:_support2.default.TRANSFER_DOMAIN_REGISTRATION,target:"_blank"})}}))))};exports.default=TransferProhibited;module.exports=exports["default"]},2851:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _domains=__webpack_require__(152);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _actions=__webpack_require__(646);var _notices=__webpack_require__(71);var _notices2=_interopRequireDefault(_notices);var _shared=__webpack_require__(2194);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Unlocked=_react2.default.createClass({displayName:"Unlocked",getInitialState:function getInitialState(){return{submitting:false}},handleCancelTransferClick:function handleCancelTransferClick(){var _this=this;var _getSelectedDomain=(0,_domains.getSelectedDomain)(this.props);var privateDomain=_getSelectedDomain.privateDomain;var hasPrivacyProtection=_getSelectedDomain.hasPrivacyProtection;this.setState({submitting:true});(0,_actions.enableDomainLocking)({domainName:this.props.selectedDomainName,declineTransfer:true,enablePrivacy:hasPrivacyProtection&&!privateDomain,siteId:this.props.selectedSite.ID},function(error){if(error){var contactLink=_react2.default.createElement("a",{href:_support2.default.CALYPSO_CONTACT,target:"_blank"});var errorMessage=void 0;switch(error.error){case"enable_private_reg_failed":errorMessage=_this.translate("We were unable to enable Privacy Protection for your domain. "+"Please try again or {{contactLink}}Contact Support{{/contactLink}} if you continue to have trouble.",{components:{contactLink:contactLink}});break;case"decline_transfer_failed":errorMessage=_this.translate("We were unable to stop the transfer for your domain. "+"Please try again or {{contactLink}}Contact Support{{/contactLink}} if you continue to have trouble.",{components:{contactLink:contactLink}});break;case"lock_domain_failed":errorMessage=_this.translate("We were unable to lock your domain. "+"Please try again or {{contactLink}}Contact Support{{/contactLink}} if you continue to have trouble.",{components:{contactLink:contactLink}});break;default:errorMessage=_this.translate("Oops! Something went wrong and your request could not be "+"processed. Please try again or {{contactLink}}Contact Support{{/contactLink}} if "+"you continue to have trouble.",{components:{contactLink:contactLink}});break}_notices2.default.error(errorMessage)}else{if(hasPrivacyProtection){_notices2.default.success(_this.translate("We've canceled your domain transfer. Your domain is now locked and "+"Privacy Protection has been enabled."))}else{_notices2.default.success(_this.translate("We've canceled your domain transfer. Your domain is now locked back."))}}if(_this.isMounted()){_this.setState({submitting:false})}})},handleResendConfirmationCodeClick:function handleResendConfirmationCodeClick(){var _this2=this;this.setState({submitting:true});var options={siteId:this.props.selectedSite.ID,domainName:this.props.selectedDomainName,unlock:false,disablePrivacy:false};(0,_actions.requestTransferCode)(options,function(error){_this2.setState({submitting:false});(0,_shared.displayRequestTransferCodeResponseNotice)(error,(0,_domains.getSelectedDomain)(_this2.props))})},render:function render(){var _getSelectedDomain2=(0,_domains.getSelectedDomain)(this.props);var privateDomain=_getSelectedDomain2.privateDomain;var hasPrivacyProtection=_getSelectedDomain2.hasPrivacyProtection;var manualTransferRequired=_getSelectedDomain2.manualTransferRequired;return _react2.default.createElement("div",null,_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Transfer Domain"),className:"transfer__section-header"},_react2.default.createElement(_button2.default,{onClick:this.handleCancelTransferClick,disabled:this.state.submitting,compact:true},this.translate("Cancel Transfer")),!manualTransferRequired&&_react2.default.createElement(_button2.default,{onClick:this.handleResendConfirmationCodeClick,disabled:this.state.submitting,compact:true,primary:true},this.translate("Resend Transfer Code"))),_react2.default.createElement(_card2.default,{className:"transfer-card"},_react2.default.createElement("div",null,_react2.default.createElement("p",null,hasPrivacyProtection&&!privateDomain?this.translate("Your domain is unlocked and Privacy Protection has been disabled to prepare for transfer."):this.translate("Your domain is unlocked to prepare for transfer.")),_react2.default.createElement("p",null,!manualTransferRequired?this.translate("We have sent the transfer authorization code to the domain registrant's"+" email address. You must provide your registrar with your domain name and transfer code to complete"+" the transfer process."):this.translate("The registry for your domain requires a special process for transfers. "+"Our Happiness Engineers have been notified about your transfer request and will be in touch "+"shortly to help you complete the process.")," ",_react2.default.createElement("a",{href:_support2.default.TRANSFER_DOMAIN_REGISTRATION,target:"_blank"},this.translate("Learn More."))))))}});exports.default=Unlocked;module.exports=exports["default"]},2852:function(module,exports,__webpack_require__){"use strict";var connect=__webpack_require__(21).connect,page=__webpack_require__(40),React=__webpack_require__(1),classnames=__webpack_require__(11);var observe=__webpack_require__(146);var EmptyContent=__webpack_require__(185);var _fetchSitePlans=__webpack_require__(671).fetchSitePlans;var FreeTrialNotice=__webpack_require__(2853);var getPlansBySite=__webpack_require__(352).getPlansBySite;var _require=__webpack_require__(121);var currentUserHasFlag=_require.currentUserHasFlag;var _require2=__webpack_require__(1538);var DOMAINS_WITH_PLANS_ONLY=_require2.DOMAINS_WITH_PLANS_ONLY;var SidebarNavigation=__webpack_require__(1465);var RegisterDomainStep=__webpack_require__(1860);var UpgradesNavigation=__webpack_require__(1670);var Main=__webpack_require__(147);var upgradesActions=__webpack_require__(646);var cartItems=__webpack_require__(658);var analyticsMixin=__webpack_require__(649);var shouldFetchSitePlans=__webpack_require__(1459).shouldFetchSitePlans;var DomainSearch=React.createClass({displayName:"DomainSearch",mixins:[observe("productsList","sites"),analyticsMixin("registerDomain")],propTypes:{sites:React.PropTypes.object.isRequired,productsList:React.PropTypes.object.isRequired,basePath:React.PropTypes.string.isRequired,context:React.PropTypes.object.isRequired,domainsWithPlansOnly:React.PropTypes.bool.isRequired},getInitialState:function getInitialState(){return{domainRegistrationAvailable:true}},componentWillMount:function componentWillMount(){this.checkSiteIsUpgradeable()},componentDidMount:function componentDidMount(){this.props.sites.on("change",this.checkSiteIsUpgradeable);this.props.fetchSitePlans(this.props.sitePlans,this.props.sites.getSelectedSite());this.previousSelectedSite=this.props.sites.getSelectedSite()},componentWillReceiveProps:function componentWillReceiveProps(){var selectedSite=this.props.sites.getSelectedSite();if(this.previousSelectedSite!==selectedSite){this.props.fetchSitePlans(this.props.sitePlans,selectedSite);this.previousSelectedSite=selectedSite}},componentWillUnmount:function componentWillUnmount(){this.props.sites.off("change",this.checkSiteIsUpgradeable)},checkSiteIsUpgradeable:function checkSiteIsUpgradeable(){var selectedSite=this.props.sites.getSelectedSite();if(selectedSite&&!selectedSite.isUpgradeable()){page.redirect("/domains/add")}},handleDomainsAvailabilityChange:function handleDomainsAvailabilityChange(isAvailable){this.setState({domainRegistrationAvailable:isAvailable})},handleAddRemoveDomain:function handleAddRemoveDomain(suggestion){if(!cartItems.hasDomainInCart(this.props.cart,suggestion.domain_name)){this.addDomain(suggestion)}else{this.removeDomain(suggestion)}},addDomain:function addDomain(suggestion){this.recordEvent("addDomainButtonClick",suggestion.domain_name,"domains");var items=[];var shouldBundleDomainWithPlan=cartItems.shouldBundleDomainWithPlan(this.props.domainsWithPlansOnly,this.props.sites.getSelectedSite(),this.props.cart,suggestion);if(shouldBundleDomainWithPlan){var domain=cartItems.domainRegistration({domain:suggestion.domain_name,productSlug:suggestion.product_slug});items=items.concat(cartItems.bundleItemWithPlan(domain))}else{items.push(cartItems.domainRegistration({domain:suggestion.domain_name,productSlug:suggestion.product_slug}))}if(cartItems.isNextDomainFree(this.props.cart)||shouldBundleDomainWithPlan){upgradesActions.addItem(cartItems.domainPrivacyProtection({domain:suggestion.domain_name}))}upgradesActions.addItems(items);upgradesActions.goToDomainCheckout(suggestion)},removeDomain:function removeDomain(suggestion){this.recordEvent("removeDomainButtonClick",suggestion.domain_name);upgradesActions.removeDomainFromCart(suggestion)},render:function render(){var selectedSite=this.props.sites.getSelectedSite(),classes=classnames("main-column",{"domain-search-page-wrapper":this.state.domainRegistrationAvailable}),content;if(!this.state.domainRegistrationAvailable){content=React.createElement(EmptyContent,{illustration:"/calypso/images/drake/drake-500.svg",title:this.translate("Domain registration is unavailable"),line:this.translate("We're hard at work on the issue. Please check back shortly."),action:this.translate("Back to Plans"),actionURL:"/plans/"+selectedSite.slug})}else{content=React.createElement("span",null,React.createElement(FreeTrialNotice,{cart:this.props.cart,sitePlans:this.props.sitePlans,selectedSite:selectedSite}),React.createElement("div",{className:"domain-search__content"},React.createElement(UpgradesNavigation,{path:this.props.context.path,cart:this.props.cart,selectedSite:selectedSite,sitePlans:this.props.sitePlans}),React.createElement(RegisterDomainStep,{path:this.props.context.path,suggestion:this.props.context.params.suggestion,domainsWithPlansOnly:this.props.domainsWithPlansOnly,onDomainsAvailabilityChange:this.handleDomainsAvailabilityChange,onAddDomain:this.handleAddRemoveDomain,cart:this.props.cart,selectedSite:selectedSite,offerMappingOption:true,basePath:this.props.basePath,products:this.props.productsList.get()})))}return React.createElement(Main,{className:classes},React.createElement(SidebarNavigation,null),content)}});module.exports=connect(function(state,props){return{sitePlans:getPlansBySite(state,props.sites.getSelectedSite()),domainsWithPlansOnly:currentUserHasFlag(state,DOMAINS_WITH_PLANS_ONLY)}},function(dispatch){return{fetchSitePlans:function fetchSitePlans(sitePlans,site){if(shouldFetchSitePlans(sitePlans,site)){dispatch(_fetchSitePlans(site.ID))}}}})(DomainSearch)},2853:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _plans=__webpack_require__(1459);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FreeTrialNotice=_react2.default.createClass({displayName:"FreeTrialNotice",propTypes:{cart:_react2.default.PropTypes.object.isRequired,sitePlans:_react2.default.PropTypes.object.isRequired,selectedSite:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired},addPlanAndRedirect:function addPlanAndRedirect(event){event.preventDefault();(0,_plans.addCurrentPlanToCartAndRedirect)(this.props.sitePlans,this.props.selectedSite)},render:function render(){var _props=this.props;var cart=_props.cart;var sitePlans=_props.sitePlans;var isDataLoading=!cart.hasLoadedFromServer||!sitePlans.hasLoadedFromServer;var currentPlan=(0,_plans.getCurrentPlan)(sitePlans.data);if(isDataLoading||!currentPlan.freeTrial){return null}return _react2.default.createElement(_notice2.default,{status:"is-info",showDismiss:false},_i18nCalypso2.default.translate("You are currently on day %(day)d of your %(planName)s trial.",{args:{day:(0,_plans.getDayOfTrial)(currentPlan),planName:currentPlan.productName}})," ",_i18nCalypso2.default.translate("Get a free domain when you {{a}}upgrade{{/a}}.",{components:{a:_react2.default.createElement("a",{href:"#",onClick:this.addPlanAndRedirect})}}))}});exports.default=FreeTrialNotice;module.exports=exports["default"]},2854:function(module,exports,__webpack_require__){"use strict";var page=__webpack_require__(40),React=__webpack_require__(1);var cartItems=__webpack_require__(184).cartItems;var notices=__webpack_require__(71);var _require=__webpack_require__(152);var canRedirect=_require.canRedirect;var DomainProductPrice=__webpack_require__(1647);var upgradesActions=__webpack_require__(646);var analyticsMixin=__webpack_require__(649);var SiteRedirectStep=React.createClass({displayName:"SiteRedirectStep",mixins:[analyticsMixin("siteRedirect")],propTypes:{cart:React.PropTypes.object.isRequired,products:React.PropTypes.object.isRequired,selectedSite:React.PropTypes.oneOfType([React.PropTypes.object,React.PropTypes.bool]).isRequired},getInitialState:function getInitialState(){return{searchQuery:""}},render:function render(){var price=this.props.products.offsite_redirect?this.props.products.offsite_redirect.cost_display:null;return React.createElement("div",{className:"site-redirect-step"},React.createElement("form",{className:"site-redirect-step__form card",onSubmit:this.handleFormSubmit},React.createElement("div",{className:"site-redirect-step__domain-description"},React.createElement("p",null,this.translate("Redirect {{strong}}%(domain)s{{/strong}} to this domain",{components:{strong:React.createElement("strong",null)},args:{domain:this.props.selectedSite.slug}}))),React.createElement(DomainProductPrice,{price:price,requiresPlan:false}),React.createElement("fieldset",null,React.createElement("input",{className:"site-redirect-step__external-domain",type:"text",value:this.state.searchQuery,placeholder:this.translate("Enter a domain",{textOnly:true}),onChange:this.setSearchQuery,onClick:this.recordInputFocus}),React.createElement("button",{className:"site-redirect-step__go button is-primary",onClick:this.recordGoButtonClick},this.translate("Go",{context:"Upgrades: Label for adding Site Redirect"})))))},recordInputFocus:function recordInputFocus(){this.recordEvent("inputFocus",this.state.searchQuery)},recordGoButtonClick:function recordGoButtonClick(){this.recordEvent("goButtonClick",this.state.searchQuery)},setSearchQuery:function setSearchQuery(event){this.setState({searchQuery:event.target.value})},handleFormSubmit:function handleFormSubmit(event){var domain;event.preventDefault();this.recordEvent("formSubmit",this.state.searchQuery);domain=this.state.searchQuery;if(cartItems.hasProduct(this.props.cart,"offsite_redirect")){notices.error(this.getValidationErrorMessage(domain,{code:"already_in_cart"}));return}canRedirect(this.props.selectedSite.ID,domain,function(error){if(error){notices.error(this.getValidationErrorMessage(domain,error));return}this.addSiteRedirectToCart(domain)}.bind(this))},addSiteRedirectToCart:function addSiteRedirectToCart(domain){upgradesActions.addItem(cartItems.siteRedirect({domain:domain}));if(this.isMounted()){page("/checkout/"+this.props.selectedSite.slug)}},getValidationErrorMessage:function getValidationErrorMessage(domain,error){switch(error.code){case"invalid_domain":return this.translate("Sorry but %(domain)s does not appear to be a valid domain name.",{args:{domain:domain}});case"invalid_tld":return this.translate("Sorry but %(domain)s does not end with a valid domain extension.",{args:{domain:domain}});case"empty_query":return this.translate("Please enter a domain name or keyword.");case"has_subscription":return this.translate("You already have Site Redirect upgrade and can't add another one to the same site.");case"already_in_cart":return this.translate("You already have Site Redirect upgrade in the Shopping Cart and can't add another one");default:return this.translate("There is a problem adding Site Redirect that points to %(domain)s.",{args:{domain:domain}})}}});module.exports=SiteRedirectStep},2855:function(module,exports,__webpack_require__){"use strict";var page=__webpack_require__(40),React=__webpack_require__(1);var HeaderCake=__webpack_require__(1460),Main=__webpack_require__(147),SiteRedirectStep=__webpack_require__(2854),observe=__webpack_require__(146);var SiteRedirect=React.createClass({displayName:"SiteRedirect",mixins:[observe("productsList","sites")],propTypes:{productsList:React.PropTypes.object.isRequired,sites:React.PropTypes.object.isRequired},componentWillMount:function componentWillMount(){this.checkSiteIsUpgradeable()},componentDidMount:function componentDidMount(){this.props.sites.on("change",this.checkSiteIsUpgradeable)},componentWillUnmount:function componentWillUnmount(){this.props.sites.off("change",this.checkSiteIsUpgradeable)},checkSiteIsUpgradeable:function checkSiteIsUpgradeable(){var selectedSite=this.props.sites.getSelectedSite();if(selectedSite&&!selectedSite.isUpgradeable()){page.redirect("/domains/add")}},backToDomainSearch:function backToDomainSearch(){page("/domains/add/"+this.props.sites.getSelectedSite().slug)},render:function render(){return React.createElement(Main,null,React.createElement(HeaderCake,{onClick:this.backToDomainSearch},this.translate("Redirect a Site")),React.createElement(SiteRedirectStep,{cart:this.props.cart,products:this.props.productsList.get(),selectedSite:this.props.sites.getSelectedSite()}))}});module.exports=SiteRedirect},2856:function(module,exports,__webpack_require__){"use strict";var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var page=__webpack_require__(40);var React=__webpack_require__(1);var omit=__webpack_require__(18);var _require=__webpack_require__(21);var connect=_require.connect;var HeaderCake=__webpack_require__(1460);var Notice=__webpack_require__(79);var MapDomainStep=__webpack_require__(1859);var _require2=__webpack_require__(121);var currentUserHasFlag=_require2.currentUserHasFlag;var _require3=__webpack_require__(1538);var DOMAINS_WITH_PLANS_ONLY=_require3.DOMAINS_WITH_PLANS_ONLY;var cartItems=__webpack_require__(184).cartItems;var upgradesActions=__webpack_require__(646);var observe=__webpack_require__(146);var wpcom=__webpack_require__(22).undocumented();var paths=__webpack_require__(342);var MapDomain=React.createClass({displayName:"MapDomain",mixins:[observe("productsList","sites")],propTypes:{query:React.PropTypes.string,productsList:React.PropTypes.object.isRequired,domainsWithPlansOnly:React.PropTypes.bool.isRequired},getInitialState:function getInitialState(){return{errorMessage:null}},componentWillMount:function componentWillMount(){this.checkSiteIsUpgradeable()},componentDidMount:function componentDidMount(){if(this.props.sites){this.props.sites.on("change",this.checkSiteIsUpgradeable)}},componentWillUnmount:function componentWillUnmount(){if(this.props.sites){this.props.sites.off("change",this.checkSiteIsUpgradeable)}},checkSiteIsUpgradeable:function checkSiteIsUpgradeable(){if(!this.props.sites){return}var selectedSite=this.props.sites.getSelectedSite();if(selectedSite&&!selectedSite.isUpgradeable()){page.redirect("/domains/add/mapping")}},goBack:function goBack(){if(!this.props.sites){return page(this.props.path.replace("/mapping",""))}page("/domains/add/"+this.props.sites.getSelectedSite().slug)},handleRegisterDomain:function handleRegisterDomain(suggestion){var items=cartItems.bundleItemWithPlanIfNecessary(cartItems.domainRegistration({productSlug:suggestion.product_slug,domain:suggestion.domain}),this.props.domainsWithPlansOnly,this.props.sites.getSelectedSite(),this.props.cart);upgradesActions.addItems(items);if(this.isMounted()){page("/checkout/"+this.props.sites.getSelectedSite().slug)}},handleMapDomain:function handleMapDomain(domain){var _this=this;var selectedSite=this.props.sites.getSelectedSite();this.setState({errorMessage:null});if(selectedSite.is_vip){wpcom.addVipDomainMapping(selectedSite.ID,domain).then(function(){page(paths.domainManagementList(selectedSite.slug))},function(error){return _this.setState({errorMessage:error.message})});return}var items=cartItems.bundleItemWithPlanIfNecessary(cartItems.domainMapping({domain:domain}),this.props.domainsWithPlansOnly,selectedSite,this.props.cart);upgradesActions.addItems(items);if(this.isMounted()){page("/checkout/"+selectedSite.slug)}},render:function render(){var selectedSite=void 0;if(this.props.sites){selectedSite=this.props.sites.getSelectedSite()}return React.createElement("span",null,React.createElement(HeaderCake,{onClick:this.goBack},this.translate("Map a Domain")),this.state.errorMessage&&React.createElement(Notice,{status:"is-error",text:this.state.errorMessage}),React.createElement(MapDomainStep,(0,_extends3.default)({},omit(this.props,["children","productsList","sites"]),{products:this.props.productsList.get(),selectedSite:selectedSite,onRegisterDomain:this.handleRegisterDomain,onMapDomain:this.handleMapDomain,analyticsSection:"domains"})))}});module.exports=connect(function(state){return{domainsWithPlansOnly:currentUserHasFlag(state,DOMAINS_WITH_PLANS_ONLY)}})(MapDomain)},3044:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchByDomain=fetchByDomain;exports.fetchBySiteId=fetchBySiteId;var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);var _actionTypes=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var wpcom=_wp2.default.undocumented();function fetchByDomain(domain){return function(dispatch){dispatch({type:_actionTypes.GOOGLE_APPS_USERS_FETCH,domain:domain});return wpcom.googleAppsFilterByDomain(domain).then(function(data){dispatch({type:_actionTypes.GOOGLE_APPS_USERS_FETCH_COMPLETED,items:data.accounts})},function(error){dispatch({type:_actionTypes.GOOGLE_APPS_USERS_FETCH_FAILED,error:error})})}}function fetchBySiteId(siteId){return function(dispatch){dispatch({type:_actionTypes.GOOGLE_APPS_USERS_FETCH,siteId:siteId});return wpcom.googleAppsFilterBySiteId(siteId).then(function(data){dispatch({type:_actionTypes.GOOGLE_APPS_USERS_FETCH_COMPLETED,items:data.accounts})},function(error){return{type:_actionTypes.GOOGLE_APPS_USERS_FETCH_FAILED,error:error}})}}},3045:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getBySite=exports.getByDomain=undefined;exports.isLoaded=isLoaded;var _createSelector=__webpack_require__(154);var _createSelector2=_interopRequireDefault(_createSelector);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getGoogleAppsUsersState(state){return state.googleAppsUsers}function createGoogleAppsUsersSelector(fn){return(0,_createSelector2.default)(fn,function(state){return[getGoogleAppsUsersState(state)]})}var getByDomain=exports.getByDomain=createGoogleAppsUsersSelector(function(state,domainName){return getGoogleAppsUsersState(state).items.filter(function(item){return item.domain===domainName})});var getBySite=exports.getBySite=createGoogleAppsUsersSelector(function(state,siteId){return getGoogleAppsUsersState(state).items.filter(function(item){return item.site_id===siteId})});function isLoaded(state){return getGoogleAppsUsersState(state).loaded}},3052:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createReceiptObject=createReceiptObject;function createReceiptObject(data){return{receiptId:data.receipt_id,purchases:data.purchases.map(function(purchase){return{freeTrial:purchase.free_trial,isDomainRegistration:Boolean(purchase.is_domain_registration),meta:purchase.meta,productId:purchase.product_id,productSlug:purchase.product_slug,productType:purchase.product_type,productName:purchase.product_name,productNameShort:purchase.product_name_short,registrarSupportUrl:purchase.registrar_support_url,isEmailVerified:Boolean(purchase.is_email_verified)}})}}},3053:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getReceiptById=getReceiptById;var _reducer=__webpack_require__(767);function getReceiptById(state,receiptId){return state.receipts.items[receiptId]||_reducer.initialReceiptState}},3177:function(module,exports,__webpack_require__){var baseIteratee=__webpack_require__(39),baseWhile=__webpack_require__(1759);function dropRightWhile(array,predicate){return array&&array.length?baseWhile(array,baseIteratee(predicate,3),true,true):[]}module.exports=dropRightWhile}});