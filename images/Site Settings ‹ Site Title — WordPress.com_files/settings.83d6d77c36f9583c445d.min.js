webpackJsonp([8],{1439:function(module,exports,__webpack_require__){"use strict";var page=__webpack_require__(40);var config=__webpack_require__(10),controller=__webpack_require__(655),settingsController=__webpack_require__(2686);module.exports=function(){page("/settings",controller.siteSelection,settingsController.redirectToGeneral);page("/settings/import/:site_id",controller.siteSelection,controller.navigation,settingsController.importSite);if(config.isEnabled("manage/export/guided-transfer")){page("/settings/export/guided/:host_slug?/:site_id",controller.siteSelection,controller.navigation,settingsController.guidedTransfer)}if(config.isEnabled("manage/export")){page("/settings/export/:site_id",controller.siteSelection,controller.navigation,settingsController.exportSite)}if(config.isEnabled("manage/site-settings/delete-site")){page("/settings/delete-site/:site_id",controller.siteSelection,controller.navigation,settingsController.setScroll,settingsController.deleteSite);page("/settings/start-over/:site_id",controller.siteSelection,controller.navigation,settingsController.setScroll,settingsController.startOver)}page("/settings/:section/:site_id",controller.siteSelection,controller.navigation,settingsController.setScroll,settingsController.siteSettings);page("/settings/:section",settingsController.legacyRedirects,controller.siteSelection,controller.sites)}},1459:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isPlansWordingEnabled=exports.isPlanFeaturesEnabled=undefined;var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _keys=__webpack_require__(44);var _keys2=_interopRequireDefault(_keys);var _invoke2=__webpack_require__(677);var _invoke3=_interopRequireDefault(_invoke2);var _includes2=__webpack_require__(34);var _includes3=_interopRequireDefault(_includes2);var _get2=__webpack_require__(30);var _get3=_interopRequireDefault(_get2);var _find2=__webpack_require__(33);var _find3=_interopRequireDefault(_find2);exports.isFreePlan=isFreePlan;exports.getPlan=getPlan;exports.getValidFeatureKeys=getValidFeatureKeys;exports.isValidFeatureKey=isValidFeatureKey;exports.getFeatureByKey=getFeatureByKey;exports.getFeatureTitle=getFeatureTitle;exports.getSitePlanSlug=getSitePlanSlug;exports.canUpgradeToPlan=canUpgradeToPlan;exports.getUpgradePlanSlugFromPath=getUpgradePlanSlugFromPath;exports.getPlanPath=getPlanPath;exports.planHasFeature=planHasFeature;exports.hasFeature=hasFeature;exports.addCurrentPlanToCartAndRedirect=addCurrentPlanToCartAndRedirect;exports.getCurrentPlan=getCurrentPlan;exports.getCurrentTrialPeriodInDays=getCurrentTrialPeriodInDays;exports.getDayOfTrial=getDayOfTrial;exports.getDaysUntilUserFacingExpiry=getDaysUntilUserFacingExpiry;exports.getDaysUntilExpiry=getDaysUntilExpiry;exports.isInGracePeriod=isInGracePeriod;exports.shouldFetchSitePlans=shouldFetchSitePlans;exports.filterPlansBySiteAndProps=filterPlansBySiteAndProps;exports.plansLink=plansLink;exports.applyTestFiltersToPlansList=applyTestFiltersToPlansList;var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _moment=__webpack_require__(2);var _moment2=_interopRequireDefault(_moment);var _debug=__webpack_require__(4);var _debug2=_interopRequireDefault(_debug);var _config=__webpack_require__(10);var _actions=__webpack_require__(646);var _cartValues=__webpack_require__(184);var _productsValues=__webpack_require__(80);var _constants=__webpack_require__(187);var _assembler=__webpack_require__(360);var _sitesList=__webpack_require__(55);var _sitesList2=_interopRequireDefault(_sitesList);var _abtest=__webpack_require__(248);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var sitesList=(0,_sitesList2.default)();var debug=(0,_debug2.default)("calypso:plans");var isPersonalPlanEnabled=(0,_config.isEnabled)("plans/personal-plan");function isFreePlan(plan){return plan===_constants.PLAN_FREE||plan===_constants.PLAN_JETPACK_FREE}function getPlan(plan){return _constants.plansList[plan]}function getValidFeatureKeys(){return(0,_keys2.default)(_constants.featuresList)}function isValidFeatureKey(feature){return!!_constants.featuresList[feature]}function getFeatureByKey(feature){return _constants.featuresList[feature]}function getFeatureTitle(feature){return(0,_invoke3.default)(_constants.featuresList,[feature,"getTitle"])}function getSitePlanSlug(siteID){var site=void 0;if(siteID){site=sitesList.getSite(siteID)}else{site=sitesList.getSelectedSite()}return(0,_get3.default)(site,"plan.product_slug")}function canUpgradeToPlan(planKey){var site=arguments.length<=1||arguments[1]===undefined?sitesList.getSelectedSite():arguments[1];var plan=(0,_get3.default)(site,["plan","expired"],false)?_constants.PLAN_FREE:(0,_get3.default)(site,["plan","product_slug"],_constants.PLAN_FREE);return(0,_get3.default)(_constants.plansList,[planKey,"availableFor"],function(){return false})(plan)}function getUpgradePlanSlugFromPath(path,siteID){var site=siteID?sitesList.getSite(siteID):sitesList.getSelectedSite();return(0,_find3.default)((0,_keys2.default)(_constants.plansList),function(planKey){return(planKey===path||getPlanPath(planKey)===path)&&canUpgradeToPlan(planKey,site)})}function getPlanPath(plan){return(0,_get3.default)(_constants.plansList,[plan,"getPathSlug"],function(){return undefined})()}function planHasFeature(plan,feature){return(0,_includes3.default)((0,_get3.default)(_constants.featuresList,[feature,"plans"]),plan)}function hasFeature(feature,siteID){return planHasFeature(getSitePlanSlug(siteID),feature)}function addCurrentPlanToCartAndRedirect(sitePlans,selectedSite){(0,_actions.addItem)(_cartValues.cartItems.planItem(getCurrentPlan(sitePlans.data).productSlug));(0,_page2.default)("/checkout/"+selectedSite.slug)}function getCurrentPlan(plans){var currentPlan=(0,_find3.default)(plans,{currentPlan:true});if(currentPlan){debug("current plan: %o",currentPlan);return currentPlan}var site=sitesList.getSelectedSite();var plan=(0,_assembler.createSitePlanObject)(site.plan);debug("current plan: %o",plan);return plan}function getCurrentTrialPeriodInDays(plan){var expiryMoment=plan.expiryMoment;var subscribedDayMoment=plan.subscribedDayMoment;var userFacingExpiryMoment=plan.userFacingExpiryMoment;if(isInGracePeriod(plan)){return expiryMoment.diff(userFacingExpiryMoment,"days")}return userFacingExpiryMoment.diff(subscribedDayMoment,"days")}function getDayOfTrial(plan){var subscribedDayMoment=plan.subscribedDayMoment;return(0,_moment2.default)().startOf("day").diff(subscribedDayMoment,"days")+1}function getDaysUntilUserFacingExpiry(plan){var userFacingExpiryMoment=plan.userFacingExpiryMoment;return userFacingExpiryMoment.diff((0,_moment2.default)().startOf("day"),"days")}function getDaysUntilExpiry(plan){var expiryMoment=plan.expiryMoment;return expiryMoment.diff((0,_moment2.default)().startOf("day"),"days")}function isInGracePeriod(plan){return getDaysUntilUserFacingExpiry(plan)<=0}function shouldFetchSitePlans(sitePlans,selectedSite){return!sitePlans.hasLoadedFromServer&&!sitePlans.isRequesting&&selectedSite}function filterPlansBySiteAndProps(plans,site,hideFreePlan,intervalType,showJetpackFreePlan){var hasPersonalPlan=site&&site.plan.product_slug===_constants.PLAN_PERSONAL;return plans.filter(function(plan){if(site&&site.jetpack){if("monthly"===intervalType){if(showJetpackFreePlan){return(0,_productsValues.isJetpackPlan)(plan)&&(0,_productsValues.isMonthly)(plan)}return(0,_productsValues.isJetpackPlan)(plan)&&!(0,_productsValues.isFreeJetpackPlan)(plan)&&(0,_productsValues.isMonthly)(plan)}if(showJetpackFreePlan){return(0,_productsValues.isJetpackPlan)(plan)&&!(0,_productsValues.isMonthly)(plan)}return(0,_productsValues.isJetpackPlan)(plan)&&!(0,_productsValues.isFreeJetpackPlan)(plan)&&!(0,_productsValues.isMonthly)(plan)}if(hideFreePlan&&_constants.PLAN_FREE===plan.product_slug){return false}if(plan.product_slug===_constants.PLAN_PERSONAL&&!(hasPersonalPlan||isPersonalPlanEnabled)){return false}return!(0,_productsValues.isJetpackPlan)(plan)})}var isPlanFeaturesEnabled=exports.isPlanFeaturesEnabled=function isPlanFeaturesEnabled(){return(0,_config.isEnabled)("manage/plan-features")};var isPlansWordingEnabled=exports.isPlansWordingEnabled=function isPlansWordingEnabled(){return(0,_abtest.abtest)("plansWording")==="targetedWording"};function plansLink(url,site,intervalType){if("monthly"===intervalType){url+="/monthly"}if(site){url+="/"+site.slug}return url}function applyTestFiltersToPlansList(planName){var filteredPlanConstantObj=(0,_extends3.default)({},_constants.plansList[planName]);var filteredPlanFeaturesConstantList=_constants.plansList[planName].getFeatures();var removeDisabledFeatures=function removeDisabledFeatures(){};var updatePlanDescriptions=function updatePlanDescriptions(){if(isPlansWordingEnabled()&&(0,_includes3.default)(_constants.allWpcomPlans,planName)){filteredPlanConstantObj.getDescription=_constants.plansList[planName].getTargetedDescription}};var updatePlanFeatures=function updatePlanFeatures(){};removeDisabledFeatures();updatePlanDescriptions();updatePlanFeatures();filteredPlanConstantObj.getFeatures=function(){return filteredPlanFeaturesConstantList};return filteredPlanConstantObj}},1472:function(module,exports,__webpack_require__){"use strict";var _defineProperty2=__webpack_require__(7);var _defineProperty3=_interopRequireDefault(_defineProperty2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var React=__webpack_require__(1),classNames=__webpack_require__(11);var SegmentedControlItem=React.createClass({displayName:"SegmentedControlItem",propTypes:{children:React.PropTypes.node.isRequired,path:React.PropTypes.string,selected:React.PropTypes.bool,title:React.PropTypes.string,onClick:React.PropTypes.func},getDefaultProps:function getDefaultProps(){return{selected:false}},render:function render(){var itemClassName=classNames({"segmented-control__item":true,"is-selected":this.props.selected});var linkClassName=classNames("segmented-control__link",(0,_defineProperty3.default)({},"item-index-"+this.props.index,this.props.index!=null));return React.createElement("li",{className:itemClassName},React.createElement("a",{href:this.props.path,className:linkClassName,ref:"itemLink",onTouchTap:this.props.onClick,title:this.props.title,role:"radio",tabIndex:0,"aria-selected":this.props.selected},React.createElement("span",{className:"segmented-control__text"},this.props.children)))}});module.exports=SegmentedControlItem},1484:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _omit=__webpack_require__(18);var _omit2=_interopRequireDefault(_omit);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FormSelect=_react2.default.createClass({displayName:"FormSelect",getDefaultProps:function getDefaultProps(){return{isError:false}},render:function render(){var classes=(0,_classnames2.default)(this.props.className,"form-select",{"is-error":this.props.isError});return _react2.default.createElement("select",(0,_extends3.default)({},(0,_omit2.default)(this.props,"className"),{className:classes}),this.props.children)}});exports.default=FormSelect;module.exports=exports["default"]},1486:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),classNames=__webpack_require__(11),noop=__webpack_require__(36);var Card=__webpack_require__(145),CompactCard=__webpack_require__(1450),Gridicon=__webpack_require__(28);var FoldableCard=React.createClass({displayName:"FoldableCard",propTypes:{actionButton:React.PropTypes.element,actionButtonExpanded:React.PropTypes.element,cardKey:React.PropTypes.string,compact:React.PropTypes.bool,disabled:React.PropTypes.bool,expandedSummary:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.element]),expanded:React.PropTypes.bool,icon:React.PropTypes.string,onClick:React.PropTypes.func,onClose:React.PropTypes.func,onOpen:React.PropTypes.func,screenReaderText:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.bool]),summary:React.PropTypes.oneOfType([React.PropTypes.string,React.PropTypes.element])},getInitialState:function getInitialState(){return{expanded:this.props.expanded}},getDefaultProps:function getDefaultProps(){return{onOpen:noop,onClose:noop,cardKey:"",icon:"chevron-down",isExpanded:false,screenReaderText:false}},onClick:function onClick(){if(this.props.children){this.setState({expanded:!this.state.expanded})}if(this.props.onClick){this.props.onClick()}if(this.state.expanded){this.props.onClose(this.props.cardKey)}else{this.props.onOpen(this.props.cardKey)}},getClickAction:function getClickAction(){if(this.props.disabled){return}return this.onClick},getActionButton:function getActionButton(){if(this.state.expanded){return this.props.actionButtonExpanded||this.props.actionButton}return this.props.actionButton},renderActionButton:function renderActionButton(){var clickAction=!this.props.clickableHeader?this.getClickAction():null;if(this.props.actionButton){return React.createElement("div",{className:"foldable-card__action",onClick:clickAction},this.getActionButton())}if(this.props.children){var iconSize=24;var screenReaderText=this.props.screenReaderText||this.translate("More");return React.createElement("button",{disabled:this.props.disabled,className:"foldable-card__action foldable-card__expand",onClick:clickAction},React.createElement("span",{className:"screen-reader-text"},screenReaderText),React.createElement(Gridicon,{icon:this.props.icon,size:iconSize}))}},renderContent:function renderContent(){return React.createElement("div",{className:"foldable-card__content"},this.props.children)},renderHeader:function renderHeader(){var summary=this.props.summary?React.createElement("span",{className:"foldable-card__summary"},this.props.summary," "):null,expandedSummary=this.props.expandedSummary?React.createElement("span",{className:"foldable-card__summary_expanded"},this.props.expandedSummary," "):null,headerClickAction=this.props.clickableHeader?this.getClickAction():null,headerClasses=classNames("foldable-card__header",{"is-clickable":!!this.props.clickableHeader,"has-border":!!this.props.summary});return React.createElement("div",{className:headerClasses,onClick:headerClickAction},React.createElement("span",{className:"foldable-card__main"},this.props.header," "),React.createElement("span",{className:"foldable-card__secondary"},summary,expandedSummary,this.renderActionButton()))},render:function render(){var Container=this.props.compact?CompactCard:Card,itemSiteClasses=classNames("foldable-card",this.props.className,{"is-disabled":!!this.props.disabled,"is-expanded":!!this.state.expanded,"has-expanded-summary":!!this.props.expandedSummary});return React.createElement(Container,{className:itemSiteClasses},this.renderHeader(),this.state.expanded&&this.renderContent())}});module.exports=FoldableCard},1488:function(module,exports,__webpack_require__){"use strict";var ReactDom=__webpack_require__(43),React=__webpack_require__(1),filter=__webpack_require__(69),map=__webpack_require__(50),classNames=__webpack_require__(11);var ControlItem=__webpack_require__(1472);var _instance=1;var SegmentedControl=React.createClass({displayName:"SegmentedControl",propTypes:{initialSelected:React.PropTypes.string,compact:React.PropTypes.bool,className:React.PropTypes.string,style:React.PropTypes.object,onSelect:React.PropTypes.func,options:React.PropTypes.arrayOf(React.PropTypes.shape({value:React.PropTypes.string.isRequired,label:React.PropTypes.string.isRequired,path:React.PropTypes.string}))},getDefaultProps:function getDefaultProps(){return{compact:false}},getInitialState:function getInitialState(){var initialSelected;if(this.props.options){initialSelected=this.props.initialSelected||this.props.options[0].value}return{selected:initialSelected,keyboardNavigation:false}},componentWillMount:function componentWillMount(){this.id=_instance;_instance++},componentWillUnmount:function componentWillUnmount(){window.removeEventListener("keydown",this.navigateItem)},render:function render(){var segmentedClasses={"segmented-control":true,"keyboard-navigation":this.state.keyboardNavigation,"is-compact":this.props.compact,"is-primary":this.props.primary};if(this.props.className){this.props.className.split(" ").forEach(function(className){segmentedClasses[className]=true})}return React.createElement("ul",{className:classNames(segmentedClasses),style:this.props.style,role:"radiogroup",onKeyDown:this.navigateItem,onKeyUp:this.setKeyboardNavigation.bind(this,true)},this.getSegmentedItems())},getSegmentedItems:function getSegmentedItems(){var refIndex=0;if(this.props.children){return React.Children.map(this.props.children,function(child,index){var newChild=React.cloneElement(child,{ref:child.type===ControlItem?"item-"+refIndex:null,key:"item-"+index,onClick:function(event){this.setKeyboardNavigation(false);if(typeof child.props.onClick==="function"){child.props.onClick(event)}}.bind(this)});if(child.type===ControlItem){refIndex++}return newChild},this)}return this.props.options.map(function(item,index){return React.createElement(ControlItem,{key:"segmented-control-"+this.id+"-"+item.value,ref:"item-"+index,selected:this.state.selected===item.value,onClick:this.selectItem.bind(this,item),path:item.path,index:index},item.label)},this)},selectItem:function selectItem(option){if(!option){return}if(this.props.onSelect){this.props.onSelect(option)}this.setState({selected:option.value,keyboardNavigation:false})},setKeyboardNavigation:function setKeyboardNavigation(value){this.setState({keyboardNavigation:value})},navigateItem:function navigateItem(event){switch(event.keyCode){case 9:this.navigateItemByTabKey(event);break;case 32:case 13:event.preventDefault();document.activeElement.click();break;case 37:event.preventDefault();this.focusSibling("previous");break;case 39:event.preventDefault();this.focusSibling("next");break}},navigateItemByTabKey:function navigateItemByTabKey(event){var direction=event.shiftKey?"previous":"next",newIndex=this.focusSibling(direction);if(newIndex!==false){event.preventDefault()}},focusSibling:function focusSibling(direction){var increment,items,newIndex;if(this.props.options){items=filter(map(this.props.options,"value"),Boolean)}else{items=filter(this.props.children,function(item){return item.type===ControlItem})}if(typeof this.focused!=="number"){this.focused=this.getCurrentFocusedIndex()}increment=direction==="previous"?-1:1;newIndex=this.focused+increment;if(newIndex>=items.length||newIndex<0){return false}ReactDom.findDOMNode(this.refs["item-"+newIndex].refs.itemLink).focus();this.focused=newIndex;return newIndex},getCurrentFocusedIndex:function getCurrentFocusedIndex(){var activeItem=document.activeElement.parentNode,siblings=Array.prototype.slice(activeItem.parentNode.children),index=siblings.indexOf(activeItem);return index>-1?index:0}});module.exports=SegmentedControl},1501:function(module,exports,__webpack_require__){"use strict";var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var React=__webpack_require__(1),classnames=__webpack_require__(11),omit=__webpack_require__(18);module.exports=React.createClass({displayName:"FormLegend",render:function render(){return React.createElement("legend",(0,_extends3.default)({},omit(this.props,"className"),{className:classnames(this.props.className,"form-legend")}),this.props.children)}})},1510:function(module,exports,__webpack_require__){"use strict";var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var React=__webpack_require__(1),classnames=__webpack_require__(11),omit=__webpack_require__(18);module.exports=React.createClass({displayName:"FormRadio",render:function render(){var otherProps=omit(this.props,["className","type"]);return React.createElement("input",(0,_extends3.default)({},otherProps,{type:"radio",className:classnames(this.props.className,"form-radio")}))}})},1511:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _omit=__webpack_require__(18);var _omit2=_interopRequireDefault(_omit);var _formTextInput=__webpack_require__(246);var _formTextInput2=_interopRequireDefault(_formTextInput);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"FormTextInputWithAffixes",propTypes:{noWrap:_react2.default.PropTypes.bool,prefix:_react2.default.PropTypes.string,suffix:_react2.default.PropTypes.string},render:function render(){return _react2.default.createElement("div",{className:(0,_classnames2.default)("form-text-input-with-affixes",{"no-wrap":this.props.noWrap})},this.props.prefix&&_react2.default.createElement("span",{className:"form-text-input-with-affixes__prefix"},this.props.prefix),_react2.default.createElement(_formTextInput2.default,(0,_omit2.default)(this.props,this.constructor.propTypes)),this.props.suffix&&_react2.default.createElement("span",{className:"form-text-input-with-affixes__suffix"},this.props.suffix))}});module.exports=exports["default"]},1530:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.hasLoadedSitePurchasesFromServer=exports.hasLoadedUserPurchasesFromServer=exports.isFetchingSitePurchases=exports.isFetchingUserPurchases=exports.getIncludedDomainPurchase=exports.getSitePurchases=exports.getByPurchaseId=exports.getPurchasesError=exports.getUserPurchases=exports.getPurchases=undefined;var _createSelector=__webpack_require__(154);var _createSelector2=_interopRequireDefault(_createSelector);var _assembler=__webpack_require__(1899);var _assembler2=_interopRequireDefault(_assembler);var _purchases=__webpack_require__(664);var _productsValues=__webpack_require__(80);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getPurchases=exports.getPurchases=(0,_createSelector2.default)(function(state){return _assembler2.default.createPurchasesArray(state.purchases.data)},function(state){return[state.purchases.data]});var getUserPurchases=exports.getUserPurchases=function getUserPurchases(state,userId){return state.purchases.hasLoadedUserPurchasesFromServer&&getPurchases(state).filter(function(purchase){return purchase.userId===userId})};var getPurchasesError=exports.getPurchasesError=function getPurchasesError(state){return state.purchases.error};var getByPurchaseId=exports.getByPurchaseId=function getByPurchaseId(state,purchaseId){return getPurchases(state).filter(function(purchase){return purchase.id===purchaseId}).shift()};var getSitePurchases=exports.getSitePurchases=function getSitePurchases(state,siteId){return getPurchases(state).filter(function(purchase){return purchase.siteId===siteId})};var getIncludedDomainPurchase=exports.getIncludedDomainPurchase=function getIncludedDomainPurchase(state,subscriptionPurchase){if(!subscriptionPurchase||!(0,_purchases.isSubscription)(subscriptionPurchase)){return null}var includedDomain=subscriptionPurchase.includedDomain;var sitePurchases=getSitePurchases(state,subscriptionPurchase.siteId);var domainPurchase=sitePurchases.find(function(purchase){return((0,_productsValues.isDomainMapping)(purchase)||(0,_productsValues.isDomainRegistration)(purchase))&&includedDomain===purchase.meta});return domainPurchase};var isFetchingUserPurchases=exports.isFetchingUserPurchases=function isFetchingUserPurchases(state){return state.purchases.isFetchingUserPurchases};var isFetchingSitePurchases=exports.isFetchingSitePurchases=function isFetchingSitePurchases(state){return state.purchases.isFetchingSitePurchases};var hasLoadedUserPurchasesFromServer=exports.hasLoadedUserPurchasesFromServer=function hasLoadedUserPurchasesFromServer(state){return state.purchases.hasLoadedUserPurchasesFromServer};var hasLoadedSitePurchasesFromServer=exports.hasLoadedSitePurchasesFromServer=function hasLoadedSitePurchasesFromServer(state){return state.purchases.hasLoadedSitePurchasesFromServer}},1535:function(module,exports,__webpack_require__){"use strict";var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _stringify=__webpack_require__(41);var _stringify2=_interopRequireDefault(_stringify);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=__webpack_require__(4)("calypso:users:actions");var Dispatcher=__webpack_require__(38),wpcom=__webpack_require__(22),UsersStore=__webpack_require__(1544);var UsersActions={fetchUsers:function fetchUsers(fetchOptions){var paginationData=UsersStore.getPaginationData(fetchOptions);if(paginationData.fetchingUsers){return}debug("fetchUsers",fetchOptions);Dispatcher.handleViewAction({type:"FETCHING_USERS",fetchOptions:fetchOptions});wpcom.site(fetchOptions.siteId).usersList(fetchOptions,function(error,data){Dispatcher.handleServerAction({type:"RECEIVE_USERS",fetchOptions:fetchOptions,data:data,error:error})})},fetchUpdated:function fetchUpdated(fetchOptions){var paginationData=UsersStore.getPaginationData(fetchOptions);if(paginationData.fetchingUsers){return}Dispatcher.handleViewAction({type:"FETCHING_UPDATED_USERS",fetchOptions:fetchOptions});var updatedFetchOptions=UsersStore.getUpdatedParams(fetchOptions);debug("Updated fetchOptions: "+(0,_stringify2.default)(updatedFetchOptions));wpcom.site(fetchOptions.siteId).usersList(updatedFetchOptions,function(error,data){Dispatcher.handleServerAction({type:"RECEIVE_UPDATED_USERS",fetchOptions:fetchOptions,data:data,error:error})})},deleteUser:function deleteUser(siteId,userId,reassignUserId){debug("deleteUser",userId);var user=UsersStore.getUser(siteId,userId);if(!user){return}Dispatcher.handleViewAction({type:"DELETE_SITE_USER",siteId:siteId,user:user});var attributes=void 0;if("undefined"!==typeof reassignUserId){attributes={reassign:reassignUserId}}wpcom.undocumented().site(siteId).deleteUser(userId,attributes,function(error,data){if(error||!data.success){Dispatcher.handleServerAction({type:"RECEIVE_DELETE_SITE_USER_FAILURE",action:"DELETE_SITE_USER",siteId:siteId,user:user,error:error})}else{Dispatcher.handleServerAction({type:"RECEIVE_DELETE_SITE_USER_SUCCESS",action:"DELETE_SITE_USER",siteId:siteId,user:user,data:data})}})},updateUser:function updateUser(siteId,userId,attributes){debug("updateUser",userId);var user=UsersStore.getUser(siteId,userId),updatedUser=(0,_assign2.default)(user,attributes);if(!user){return}Dispatcher.handleViewAction({type:"UPDATE_SITE_USER",siteId:siteId,user:updatedUser});wpcom.undocumented().site(siteId).updateUser(userId,attributes,function(error,data){if(error){debug("Update user error",error);Dispatcher.handleServerAction({type:"RECEIVE_UPDATE_SITE_USER_FAILURE",action:"UPDATE_SITE_USER",siteId:siteId,user:user,error:error})}else{Dispatcher.handleServerAction({type:"RECEIVE_UPDATE_SITE_USER_SUCCESS",action:"UPDATE_SITE_USER",siteId:siteId,user:user,data:data})}})},fetchUser:function fetchUser(fetchOptions,login){debug("fetchUser",fetchOptions);Dispatcher.handleViewAction({type:"FETCHING_USERS",fetchOptions:fetchOptions});wpcom.undocumented().site(fetchOptions.siteId).getUser(login,function(error,data){if(error){Dispatcher.handleServerAction({type:"RECEIVE_USER_FAILED",fetchOptions:fetchOptions,siteId:fetchOptions.siteId,login:login,error:error})}else{Dispatcher.handleServerAction({type:"RECEIVE_SINGLE_USER",fetchOptions:fetchOptions,user:data})}})}};module.exports=UsersActions},1540:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageViewTracker=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _flowRight=__webpack_require__(156);var _flowRight2=_interopRequireDefault(_flowRight);var _noop=__webpack_require__(36);var _noop2=_interopRequireDefault(_noop);var _reactRedux=__webpack_require__(21);var _actions=__webpack_require__(250);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PageViewTracker=exports.PageViewTracker=_react2.default.createClass({displayName:"PageViewTracker",getInitialState:function getInitialState(){return{timer:null}},componentDidMount:function componentDidMount(){this.queuePageView()},componentWillUnmount:function componentWillUnmount(){clearTimeout(this.state.timer)},queuePageView:function queuePageView(){var _props=this.props;var _props$delay=_props.delay;var delay=_props$delay===undefined?0:_props$delay;var path=_props.path;var _props$recorder=_props.recorder;var recorder=_props$recorder===undefined?_noop2.default:_props$recorder;var title=_props.title;if(this.state.timer){return}if(!delay){return recorder(path,title)}this.setState({timer:setTimeout(function(){return recorder(path,title)},delay)})},render:function render(){return null}});PageViewTracker.propTypes={delay:_react.PropTypes.number,path:_react.PropTypes.string.isRequired,recorder:_react.PropTypes.func,title:_react.PropTypes.string.isRequired};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{recorder:(0,_flowRight2.default)(dispatch,_actions.recordPageView)}};exports.default=(0,_reactRedux.connect)(null,mapDispatchToProps)(PageViewTracker)},1544:function(module,exports,__webpack_require__){"use strict";var _set=__webpack_require__(685);var _set2=_interopRequireDefault(_set);var _keys=__webpack_require__(44);var _keys2=_interopRequireDefault(_keys);var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=__webpack_require__(4)("calypso:users:store"),omit=__webpack_require__(18),find=__webpack_require__(33),endsWith=__webpack_require__(354);var Dispatcher=__webpack_require__(38),emitter=__webpack_require__(32),deterministicStringify=__webpack_require__(684);var _fetchingUsersByNamespace={},_fetchingUpdatedUsersByNamespace={},_usersBySite={},_totalUsersByNamespace={},_usersFetchedByNamespace={},_offsetByNamespace={},_userIDsByNamespace={};var UsersStore={getPaginationData:function getPaginationData(fetchOptions){var namespace=getNamespace(fetchOptions);debug("getPaginationData:",namespace);return{fetchInitialized:_usersFetchedByNamespace.hasOwnProperty(namespace),totalUsers:_totalUsersByNamespace[namespace]||0,fetchingUsers:_fetchingUsersByNamespace[namespace]||false,usersCurrentOffset:_offsetByNamespace[namespace],numUsersFetched:_usersFetchedByNamespace[namespace],fetchNameSpace:namespace}},getUsers:function getUsers(fetchOptions){var namespace=getNamespace(fetchOptions),siteId=fetchOptions.siteId,users=[];debug("getUsers:",namespace);if(!_usersBySite[siteId]){_usersBySite[siteId]={}}if(!_userIDsByNamespace[namespace]){return users}_userIDsByNamespace[namespace].forEach(function(userId){if(_usersBySite[siteId][userId]){users.push(_usersBySite[siteId][userId])}});return users},getUser:function getUser(siteId,userId){if(!_usersBySite[siteId]||!_usersBySite[siteId][userId]){return null}return _usersBySite[siteId][userId]},getUserByLogin:function getUserByLogin(siteId,login){return find(_usersBySite[siteId],function(user){return user.login===login})},getUpdatedParams:function getUpdatedParams(fetchOptions){var namespace=getNamespace(fetchOptions);
var requestNumber=_usersFetchedByNamespace[namespace]||fetchOptions.number;return(0,_assign2.default)({},fetchOptions,{offset:0,number:Math.min(requestNumber,1e3)})},emitChange:function emitChange(){this.emit("change")}};function updateUser(siteId,id,user){if(!_usersBySite[siteId]){_usersBySite[siteId]={}}if(!_usersBySite[siteId][id]){_usersBySite[siteId][id]={}}_usersBySite[siteId][id]=(0,_assign2.default)({},_usersBySite[siteId][id],user)}function decrementPaginationData(siteId,userId){(0,_keys2.default)(_userIDsByNamespace).forEach(function(namespace){if(endsWith(namespace,"siteId="+siteId)&&_userIDsByNamespace[namespace].has(userId)){_totalUsersByNamespace[namespace]--;_usersFetchedByNamespace[namespace]--}})}function incrementPaginationData(siteId,userId){(0,_keys2.default)(_userIDsByNamespace).forEach(function(namespace){if(endsWith(namespace,"siteId="+siteId)&&_userIDsByNamespace[namespace].has(userId)){_totalUsersByNamespace[namespace]++;_usersFetchedByNamespace[namespace]++}})}function deleteUserFromSite(siteId,userId){if(!_usersBySite[siteId]||!_usersBySite[siteId][userId]){return}delete _usersBySite[siteId][userId];decrementPaginationData(siteId,userId)}function deleteUserFromNamespaces(siteId,userId){(0,_keys2.default)(_userIDsByNamespace).forEach(function(namespace){if(endsWith(namespace,"siteId="+siteId)&&_userIDsByNamespace[namespace].has(userId)){_userIDsByNamespace[namespace].delete(userId)}})}function addSingleUser(fetchOptions,user,namespace){if(!_userIDsByNamespace[namespace]){_userIDsByNamespace[namespace]=new _set2.default}_userIDsByNamespace[namespace].add(user.ID);updateUser(fetchOptions.siteId,user.ID,user)}function updateUsers(fetchOptions,users,total){var namespace=getNamespace(fetchOptions),offset=fetchOptions.offset;debug("updateUsers:",namespace);if(!offset){_userIDsByNamespace[namespace]=new _set2.default}users.forEach(function(user){_userIDsByNamespace[namespace].add(user.ID);updateUser(fetchOptions.siteId,user.ID,user)});_totalUsersByNamespace[namespace]=total;_offsetByNamespace[namespace]=offset;_usersFetchedByNamespace[namespace]=_userIDsByNamespace[namespace].size}function getNamespace(fetchOptions){return deterministicStringify(omit(fetchOptions,["number","offset"]))}UsersStore.dispatchToken=Dispatcher.register(function(payload){var action=payload.action,namespace;switch(action.type){case"RECEIVE_USERS":namespace=getNamespace(action.fetchOptions);_fetchingUsersByNamespace[namespace]=false;if(!action.error){updateUsers(action.fetchOptions,action.data.users,action.data.found);UsersStore.emitChange()}break;case"RECEIVE_UPDATED_USERS":namespace=getNamespace(action.fetchOptions);_fetchingUpdatedUsersByNamespace[namespace]=false;if(!action.error){updateUsers(action.fetchOptions,action.data.users,action.data.found);UsersStore.emitChange()}break;case"UPDATE_SITE_USER":updateUser(action.siteId,action.user.ID,action.user);UsersStore.emitChange();break;case"RECEIVE_UPDATE_SITE_USER_FAILURE":updateUser(action.siteId,action.user.ID,action.user);UsersStore.emitChange();break;case"DELETE_SITE_USER":deleteUserFromSite(action.siteId,action.user.ID);UsersStore.emitChange();break;case"RECEIVE_DELETE_SITE_USER_SUCCESS":deleteUserFromNamespaces(action.siteId,action.user.ID);UsersStore.emitChange();break;case"RECEIVE_DELETE_SITE_USER_FAILURE":updateUser(action.siteId,action.user.ID,action.user);incrementPaginationData(action.siteId,action.user.ID);UsersStore.emitChange();break;case"FETCHING_USERS":namespace=getNamespace(action.fetchOptions);_fetchingUsersByNamespace[namespace]=true;UsersStore.emitChange();break;case"FETCHING_UPDATED_USERS":namespace=getNamespace(action.fetchOptions);_fetchingUpdatedUsersByNamespace[namespace]=true;UsersStore.emitChange();break;case"RECEIVE_SINGLE_USER":namespace=getNamespace(action.fetchOptions);_fetchingUsersByNamespace[namespace]=false;addSingleUser(action.fetchOptions,action.user,namespace);UsersStore.emitChange();break;case"RECEIVE_USER_FAILED":namespace=getNamespace(action.fetchOptions);_fetchingUsersByNamespace[namespace]=false;UsersStore.emitChange();break}});emitter(UsersStore);module.exports=UsersStore},1545:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _toConsumableArray2=__webpack_require__(46);var _toConsumableArray3=_interopRequireDefault(_toConsumableArray2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _noop=__webpack_require__(36);var _noop2=_interopRequireDefault(_noop);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);var _sitesList=__webpack_require__(55);var _sitesList2=_interopRequireDefault(_sitesList);var _plans=__webpack_require__(1459);var _productsValues=__webpack_require__(80);var _trackComponentView=__webpack_require__(668);var _trackComponentView2=_interopRequireDefault(_trackComponentView);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var sites=(0,_sitesList2.default)();exports.default=_react2.default.createClass({displayName:"UpgradeNudge",propTypes:{onClick:_react2.default.PropTypes.func,className:_react2.default.PropTypes.string,message:_react2.default.PropTypes.string,icon:_react2.default.PropTypes.string,event:_react2.default.PropTypes.string,href:_react2.default.PropTypes.string,jetpack:_react2.default.PropTypes.bool,compact:_react2.default.PropTypes.bool,feature:_react2.default.PropTypes.oneOf([false].concat((0,_toConsumableArray3.default)((0,_plans.getValidFeatureKeys)()))),shouldDisplay:_react2.default.PropTypes.func},getDefaultProps:function getDefaultProps(){return{onClick:_noop2.default,message:"And get your own domain address.",icon:"star",event:null,jetpack:false,feature:false,compact:false,shouldDisplay:null}},handleClick:function handleClick(){if(this.props.event||this.props.feature){_analytics2.default.tracks.recordEvent("calypso_upgrade_nudge_cta_click",{cta_name:this.props.event,cta_feature:this.props.feature})}this.props.onClick()},shouldDisplay:function shouldDisplay(site){var _props=this.props;var feature=_props.feature;var jetpack=_props.jetpack;var shouldDisplay=_props.shouldDisplay;if(shouldDisplay){return shouldDisplay()}if(!site){return false}if(feature&&(0,_plans.hasFeature)(feature,site.ID)){return false}if(!feature&&!(0,_productsValues.isFreePlan)(site.plan)){return false}if(feature==="no-adverts"&&site.options.wordads){return false}if(!jetpack&&site.jetpack||jetpack&&!site.jetpack){return false}return true},render:function render(){var classes=(0,_classnames2.default)(this.props.className,"upgrade-nudge");var site=sites.getSelectedSite();var href=this.props.href;if(!this.shouldDisplay(site)){return null}if(!this.props.href&&site){if(this.props.feature){href="/plans/"+site.slug+"?feature="+this.props.feature}else{href="/plans/"+site.slug}}if(this.props.compact){return _react2.default.createElement(_button2.default,{className:classes,onClick:this.handleClick,href:href},_react2.default.createElement(_gridicon2.default,{className:"upgrade-nudge__icon",icon:this.props.icon}),_react2.default.createElement("div",{className:"upgrade-nudge__info"},_react2.default.createElement("span",{className:"upgrade-nudge__title"},this.props.title||this.translate("Upgrade to Premium")),_react2.default.createElement("span",{className:"upgrade-nudge__message"},this.props.message)))}return _react2.default.createElement(_card2.default,{compact:true,className:classes,onClick:this.handleClick,href:href},_react2.default.createElement(_gridicon2.default,{className:"upgrade-nudge__icon",icon:this.props.icon,size:18}),_react2.default.createElement("div",{className:"upgrade-nudge__info"},_react2.default.createElement("span",{className:"upgrade-nudge__title"},this.props.title||this.translate("Upgrade to Premium")),_react2.default.createElement("span",{className:"upgrade-nudge__message"},this.props.message)),(this.props.event||this.props.feature)&&_react2.default.createElement(_trackComponentView2.default,{eventName:"calypso_upgrade_nudge_impression",eventProperties:{cta_name:this.props.event,cta_feature:this.props.feature}}))}});module.exports=exports["default"]},1546:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.removePurchase=exports.fetchUserPurchases=exports.fetchSitePurchases=exports.clearPurchases=exports.cancelPrivateRegistration=undefined;var _promise=__webpack_require__(51);var _promise2=_interopRequireDefault(_promise);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _olark=__webpack_require__(708);var _olark2=_interopRequireDefault(_olark);var _actionTypes=__webpack_require__(3);var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var wpcom=_wp2.default.undocumented();var PURCHASES_FETCH_ERROR_MESSAGE=_i18nCalypso2.default.translate("There was an error retrieving purchases.");var PURCHASE_REMOVE_ERROR_MESSAGE=_i18nCalypso2.default.translate("There was an error removing the purchase.");var cancelPrivateRegistration=exports.cancelPrivateRegistration=function cancelPrivateRegistration(purchaseId){return function(dispatch){dispatch({type:_actionTypes.PRIVACY_PROTECTION_CANCEL,purchaseId:purchaseId});return new _promise2.default(function(resolve,reject){wpcom.cancelPrivateRegistration(purchaseId,function(error,data){error?reject(error):resolve(data)})}).then(function(data){dispatch({type:_actionTypes.PRIVACY_PROTECTION_CANCEL_COMPLETED,purchase:data.upgrade})}).catch(function(error){dispatch({type:_actionTypes.PRIVACY_PROTECTION_CANCEL_FAILED,purchaseId:purchaseId,error:error.message||_i18nCalypso2.default.translate("There was a problem canceling this private registration. "+"Please try again later or contact support.")})})}};var clearPurchases=exports.clearPurchases=function clearPurchases(){_olark2.default.updateOlarkGroupAndEligibility();return{type:_actionTypes.PURCHASES_REMOVE}};var fetchSitePurchases=exports.fetchSitePurchases=function fetchSitePurchases(siteId){return function(dispatch){dispatch({type:_actionTypes.PURCHASES_SITE_FETCH,siteId:siteId});return new _promise2.default(function(resolve,reject){wpcom.sitePurchases(siteId,function(error,data){error?reject(error):resolve(data)})}).then(function(data){dispatch({type:_actionTypes.PURCHASES_SITE_FETCH_COMPLETED,siteId:siteId,purchases:data})}).catch(function(){dispatch({type:_actionTypes.PURCHASES_SITE_FETCH_FAILED,error:PURCHASES_FETCH_ERROR_MESSAGE})})}};var fetchUserPurchases=exports.fetchUserPurchases=function fetchUserPurchases(userId){return function(dispatch){dispatch({type:_actionTypes.PURCHASES_USER_FETCH});return new _promise2.default(function(resolve,reject){wpcom.me().purchases(function(error,data){error?reject(error):resolve(data)})}).then(function(data){dispatch({type:_actionTypes.PURCHASES_USER_FETCH_COMPLETED,purchases:data,userId:userId})}).catch(function(){dispatch({type:_actionTypes.PURCHASES_USER_FETCH_FAILED,error:PURCHASES_FETCH_ERROR_MESSAGE})})}};var removePurchase=exports.removePurchase=function removePurchase(purchaseId,userId){return function(dispatch){return new _promise2.default(function(resolve,reject){wpcom.me().deletePurchase(purchaseId,function(error,data){error?reject(error):resolve(data)})}).then(function(data){dispatch({type:_actionTypes.PURCHASE_REMOVE_COMPLETED,purchases:data.purchases,userId:userId});_olark2.default.updateOlarkGroupAndEligibility()}).catch(function(error){dispatch({type:_actionTypes.PURCHASE_REMOVE_FAILED,error:error.message||PURCHASE_REMOVE_ERROR_MESSAGE})})}}},1564:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FormToggle=function(_PureComponent){(0,_inherits3.default)(FormToggle,_PureComponent);function FormToggle(){(0,_classCallCheck3.default)(this,FormToggle);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(FormToggle).apply(this,arguments));_this.onKeyDown=_this.onKeyDown.bind(_this);_this.onClick=_this.onClick.bind(_this);return _this}(0,_createClass3.default)(FormToggle,[{key:"componentWillMount",value:function componentWillMount(){this.id=this.constructor.idNum++}},{key:"onKeyDown",value:function onKeyDown(event){if(this.props.disabled){return}if(event.key==="Enter"||event.key===" "){event.preventDefault();this.props.onChange()}this.props.onKeyDown(event)}},{key:"onClick",value:function onClick(){if(!this.props.disabled){this.props.onChange()}}},{key:"render",value:function render(){var id=this.props.id||"toggle-"+this.id;var toggleClasses=(0,_classnames2.default)("form-toggle",this.props.className,{"is-toggling":this.props.toggling});return _react2.default.createElement("span",null,_react2.default.createElement("input",{className:toggleClasses,type:"checkbox",checked:this.props.checked,readOnly:true,disabled:this.props.disabled}),_react2.default.createElement("label",{className:"form-toggle__label",htmlFor:id},_react2.default.createElement("span",{className:"form-toggle__switch",disabled:this.props.disabled,id:id,onClick:this.onClick,onKeyDown:this.onKeyDown,role:"checkbox","aria-checked":this.props.checked,"aria-label":this.props["aria-label"],tabIndex:this.props.disabled?-1:0}),this.props.children))}}]);return FormToggle}(_react.PureComponent);FormToggle.propTypes={onChange:_react.PropTypes.func,onKeyDown:_react.PropTypes.func,checked:_react.PropTypes.bool,disabled:_react.PropTypes.bool,id:_react.PropTypes.string,className:_react.PropTypes.string,toggling:_react.PropTypes.bool,"aria-label":_react.PropTypes.string,children:_react.PropTypes.node};FormToggle.defaultProps={checked:false,disabled:false,onKeyDown:function onKeyDown(){},onChange:function onChange(){}};FormToggle.idNum=0;exports.default=FormToggle;module.exports=exports["default"]},1597:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MEDIUM=exports.WORDPRESS=exports.appStates=undefined;var _freeze=__webpack_require__(247);var _freeze2=_interopRequireDefault(_freeze);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var appStates=exports.appStates=(0,_freeze2.default)({CANCEL_PENDING:"importer-canceling",DEFUNCT:"importer-defunct",DISABLED:"importer-disabled",EXPIRE_PENDING:"importer-expire-pending",IMPORT_FAILURE:"importer-import-failure",IMPORT_SUCCESS:"importer-import-success",IMPORTING:"importer-importing",INACTIVE:"importer-inactive",MAP_AUTHORS:"importer-map-authors",READY_FOR_UPLOAD:"importer-ready-for-upload",UPLOAD_SUCCESS:"importer-upload-success",UPLOAD_FAILURE:"importer-upload-failure",UPLOADING:"importer-uploading"});var WORDPRESS=exports.WORDPRESS="importer-type-wordpress";var MEDIUM=exports.MEDIUM="importer-type-medium"},1610:function(module,exports,__webpack_require__){"use strict";var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=_react2.default.createClass({displayName:"ProgressBar",getDefaultProps:function getDefaultProps(){return{total:100,compact:false,isPulsing:false}},propTypes:{value:_react2.default.PropTypes.number.isRequired,total:_react2.default.PropTypes.number,color:_react2.default.PropTypes.string,title:_react2.default.PropTypes.string,compact:_react2.default.PropTypes.bool,className:_react2.default.PropTypes.string,isPulsing:_react2.default.PropTypes.bool},renderBar:function renderBar(){var title=this.props.title?_react2.default.createElement("span",{className:"screen-reader-text"},this.props.title):null;var styles={width:Math.ceil(this.props.value/this.props.total*100)+"%"};if(this.props.color){styles.backgroundColor=this.props.color}return _react2.default.createElement("div",{className:"progress-bar__progress",style:styles},title)},render:function render(){var classes=(0,_classnames2.default)(this.props.className,"progress-bar",{"is-compact":this.props.compact,"is-pulsing":this.props.isPulsing});return _react2.default.createElement("div",{className:classes},this.renderBar())}})},1612:function(module,exports,__webpack_require__){"use strict";var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var React=__webpack_require__(1),debug=__webpack_require__(4)("calypso:site-users-fetcher"),omit=__webpack_require__(18),isEqual=__webpack_require__(92),includes=__webpack_require__(34),partition=__webpack_require__(1760);var UsersStore=__webpack_require__(1544),UsersActions=__webpack_require__(1535),pollers=__webpack_require__(191);var defaultOptions={number:100,offset:0};module.exports=React.createClass({displayName:"SiteUsersFetcher",propTypes:{fetchOptions:React.PropTypes.object.isRequired,exclude:React.PropTypes.oneOfType([React.PropTypes.arrayOf(React.PropTypes.number),React.PropTypes.func])},getInitialState:function getInitialState(){return this._getState()},componentWillMount:function componentWillMount(){debug("Mounting SiteUsersFetcher");UsersStore.on("change",this._updateSiteUsers);this._fetchIfEmpty();this._poller=pollers.add(UsersStore,UsersActions.fetchUpdated.bind(UsersActions,this.props.fetchOptions,true),{leading:false})},componentWillUnmount:function componentWillUnmount(){UsersStore.off("change",this._updateSiteUsers);pollers.remove(this._poller)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(!nextProps.fetchOptions){return}if(!isEqual(this.props.fetchOptions,nextProps.fetchOptions)){this._updateSiteUsers(nextProps.fetchOptions);this._fetchIfEmpty(nextProps.fetchOptions);pollers.remove(this._poller);this._poller=pollers.add(UsersStore,UsersActions.fetchUpdated.bind(UsersActions,nextProps.fetchOptions,true),{leading:false})}},render:function render(){var childrenProps=(0,_assign2.default)(omit(this.props,"children"),this.state);return React.cloneElement(this.props.children,childrenProps)},_updateSiteUsers:function _updateSiteUsers(fetchOptions){fetchOptions=fetchOptions||this.props.fetchOptions;this.setState(this._getState(fetchOptions))},_getState:function _getState(fetchOptions){var paginationData,users;fetchOptions=fetchOptions||this.props.fetchOptions;fetchOptions=(0,_assign2.default)({},defaultOptions,fetchOptions);paginationData=UsersStore.getPaginationData(fetchOptions);users=UsersStore.getUsers(fetchOptions);if(this.props.exclude){users=partition(users,function(user){if("function"===typeof this.props.exclude){return!this.props.exclude(user)}return!includes(this.props.exclude,user.ID)}.bind(this))}return(0,_assign2.default)({},paginationData,{users:this.props.exclude?users[0]:users,fetchOptions:fetchOptions,excludedUsers:this.props.exclude?users[1]:[]})},_fetchIfEmpty:function _fetchIfEmpty(fetchOptions){fetchOptions=fetchOptions||this.props.fetchOptions;if(!fetchOptions||!fetchOptions.siteId){return}fetchOptions=(0,_assign2.default)({},defaultOptions,fetchOptions);if(UsersStore.getUsers(fetchOptions).length){debug("initial fetch not necessary");return}setTimeout(function(){var paginationData=UsersStore.getPaginationData(fetchOptions);if(paginationData.fetchingUsers){return}UsersActions.fetchUsers(fetchOptions)},0)}})},1614:function(module,exports,__webpack_require__){"use strict";var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _freeze=__webpack_require__(247);var _freeze2=_interopRequireDefault(_freeze);var _typeof2=__webpack_require__(31);var _typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var take=__webpack_require__(1638),clone=__webpack_require__(251),map=__webpack_require__(50),difference=__webpack_require__(112),React=__webpack_require__(1),PureRenderMixin=__webpack_require__(105),each=__webpack_require__(704),identity=__webpack_require__(110),classNames=__webpack_require__(11),debug=__webpack_require__(4)("calypso:token-field"),some=__webpack_require__(82),forEach=__webpack_require__(123);var SuggestionsList=__webpack_require__(1708),Token=__webpack_require__(1710),TokenInput=__webpack_require__(1709);var TokenField=React.createClass({displayName:"TokenField",propTypes:{suggestions:React.PropTypes.array,maxSuggestions:React.PropTypes.number,displayTransform:React.PropTypes.func,saveTransform:React.PropTypes.func,onChange:React.PropTypes.func,isBorderless:React.PropTypes.bool,maxLength:React.PropTypes.number,onFocus:React.PropTypes.func,disabled:React.PropTypes.bool,tokenizeOnSpace:React.PropTypes.bool,value:function value(props){var value=props.value;if(!Array.isArray(value)){return new Error("Value prop is expected to be an array.")}forEach(value,function(item){if("object"===(typeof item==="undefined"?"undefined":(0,_typeof3.default)(item))){if(!("value"in item)){return new Error("When using object for value prop, each object is expected to have a 'value' property.")}}})}},getDefaultProps:function getDefaultProps(){return{suggestions:(0,_freeze2.default)([]),maxSuggestions:100,value:(0,_freeze2.default)([]),displayTransform:identity,saveTransform:function saveTransform(token){return token.trim()},onChange:function onChange(){},isBorderless:false,disabled:false,tokenizeOnSpace:false}},mixins:[PureRenderMixin],getInitialState:function getInitialState(){return{incompleteTokenValue:"",inputOffsetFromEnd:0,isActive:false,selectedSuggestionIndex:-1,selectedSuggestionScroll:false}},componentDidUpdate:function componentDidUpdate(){if(this.state.isActive&&!this.refs.input.hasFocus()){debug("componentDidUpdate focusing input");this.refs.input.focus()}},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(nextProps.disabled&&this.state.isActive){this.setState({isActive:false,incompleteTokenValue:""})}},render:function render(){var classes=classNames("token-field",{"is-active":this.state.isActive,"is-disabled":this.props.disabled});var tokenFieldProps={ref:"main",className:classes,tabIndex:"-1"};if(!this.props.disabled){tokenFieldProps=(0,_assign2.default)({},tokenFieldProps,{onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onFocus:this._onFocus})}return React.createElement("div",tokenFieldProps,React.createElement("div",{ref:"tokensAndInput",className:"token-field__input-container",tabIndex:"-1",onMouseDown:this._onContainerTouched,onTouchStart:this._onContainerTouched},this._renderTokensAndInput()),React.createElement(SuggestionsList,{match:this.props.saveTransform(this.state.incompleteTokenValue),displayTransform:this.props.displayTransform,suggestions:this._getMatchingSuggestions(),selectedIndex:this.state.selectedSuggestionIndex,scrollIntoView:this.state.selectedSuggestionScroll,isExpanded:this.state.isActive,onHover:this._onSuggestionHovered,onSelect:this._onSuggestionSelected}))},_renderTokensAndInput:function _renderTokensAndInput(){var components=map(this.props.value,this._renderToken);components.splice(this._getIndexOfInput(),0,this._renderInput());return components},_renderToken:function _renderToken(token){var value=this._getTokenValue(token);var status=token.status?token.status:undefined;return React.createElement(Token,{key:"token-"+value,value:value,status:status,tooltip:token.tooltip,displayTransform:this.props.displayTransform,onClickRemove:this._onTokenClickRemove,isBorderless:token.isBorderless||this.props.isBorderless,onMouseEnter:token.onMouseEnter,onMouseLeave:token.onMouseLeave,disabled:"error"!==status&&this.props.disabled})},_renderInput:function _renderInput(){var _props=this.props;var maxLength=_props.maxLength;var value=_props.value;var props={ref:"input",key:"input",disabled:this.props.disabled,value:this.state.incompleteTokenValue,onBlur:this._onBlur};if(!(maxLength&&value.length>=maxLength)){(0,_assign2.default)(props,{onChange:this._onInputChange})}return React.createElement(TokenInput,props)},_onFocus:function _onFocus(event){this.setState({isActive:true});if("function"===typeof this.props.onFocus){this.props.onFocus(event)}},_onBlur:function _onBlur(event){if(this._inputHasValidValue()){debug("_onBlur adding current token");this.setState({isActive:false},this._addCurrentToken)}else{debug("_onBlur not adding current token");this.setState(this.getInitialState())}},_onTokenClickRemove:function _onTokenClickRemove(event){this._deleteToken(event.value)},_onSuggestionHovered:function _onSuggestionHovered(suggestion){var index=this._getMatchingSuggestions().indexOf(suggestion);if(index>=0){this.setState({selectedSuggestionIndex:index,selectedSuggestionScroll:false})}},_onSuggestionSelected:function _onSuggestionSelected(suggestion){debug("_onSuggestionSelected",suggestion);this._addNewToken(suggestion)},_onInputChange:function _onInputChange(event){this.setState({incompleteTokenValue:event.value,selectedSuggestionIndex:-1,selectedSuggestionScroll:false})},_onContainerTouched:function _onContainerTouched(event){if(event.target===this.refs.tokensAndInput&&this.state.isActive){event.preventDefault()}},_onKeyDown:function _onKeyDown(event){var preventDefault=false;switch(event.keyCode){case 8:preventDefault=this._handleDeleteKey(this._deleteTokenBeforeInput);break;case 9:preventDefault=this._addCurrentToken();break;case 13:preventDefault=this._addCurrentToken();break;case 37:preventDefault=this._handleLeftArrowKey();break;case 38:preventDefault=this._handleUpArrowKey();break;case 39:preventDefault=this._handleRightArrowKey();break;case 40:preventDefault=this._handleDownArrowKey();break;case 46:preventDefault=this._handleDeleteKey(this._deleteTokenAfterInput);break;case 32:if(this.props.tokenizeOnSpace){preventDefault=this._addCurrentToken()}break;default:break}if(preventDefault){event.preventDefault()}},_onKeyPress:function _onKeyPress(event){var preventDefault=false;switch(event.charCode){case 44:preventDefault=this._handleCommaKey();break;default:break}if(preventDefault){event.preventDefault()}},_handleDeleteKey:function _handleDeleteKey(deleteToken){var preventDefault=false;if(this.refs.input.hasFocus()&&this._isInputEmpty()){deleteToken();preventDefault=true}return preventDefault},_getMatchingSuggestions:function _getMatchingSuggestions(){var suggestions=this.props.suggestions,match=this.props.saveTransform(this.state.incompleteTokenValue),startsWithMatch=[],containsMatch=[];if(match.length===0){suggestions=difference(suggestions,this.props.value)}else{match=match.toLocaleLowerCase();each(suggestions,function(suggestion){var index=suggestion.toLocaleLowerCase().indexOf(match);if(this.props.value.indexOf(suggestion)===-1){if(index===0){startsWithMatch.push(suggestion)}else if(index>0){containsMatch.push(suggestion)}}}.bind(this));suggestions=startsWithMatch.concat(containsMatch)}return take(suggestions,this.props.maxSuggestions)},_getSelectedSuggestion:function _getSelectedSuggestion(){if(this.state.selectedSuggestionIndex!==-1){return this._getMatchingSuggestions()[this.state.selectedSuggestionIndex]}},_addCurrentToken:function _addCurrentToken(){var preventDefault=false,selectedSuggestion=this._getSelectedSuggestion();if(selectedSuggestion){this._addNewToken(selectedSuggestion);preventDefault=true}else if(this._inputHasValidValue()){this._addNewToken(this.state.incompleteTokenValue);preventDefault=true}return preventDefault},_handleLeftArrowKey:function _handleLeftArrowKey(){var preventDefault=false;if(this._isInputEmpty()){this._moveInputBeforePreviousToken();preventDefault=true}return preventDefault},_handleRightArrowKey:function _handleRightArrowKey(){var preventDefault=false;if(this._isInputEmpty()){this._moveInputAfterNextToken();preventDefault=true}return preventDefault},_handleUpArrowKey:function _handleUpArrowKey(){this.setState({selectedSuggestionIndex:Math.max((this.state.selectedSuggestionIndex||0)-1,0),selectedSuggestionScroll:true});return true},_handleDownArrowKey:function _handleDownArrowKey(){this.setState({selectedSuggestionIndex:Math.min(this.state.selectedSuggestionIndex+1||0,this._getMatchingSuggestions().length-1),selectedSuggestionScroll:true});return true},_handleCommaKey:function _handleCommaKey(){var preventDefault=true;if(this._inputHasValidValue()){this._addNewToken(this.state.incompleteTokenValue)}return preventDefault},_isInputEmpty:function _isInputEmpty(){return this.state.incompleteTokenValue.length===0},_inputHasValidValue:function _inputHasValidValue(){return this.props.saveTransform(this.state.incompleteTokenValue).length>0},_deleteTokenBeforeInput:function _deleteTokenBeforeInput(){var index=this._getIndexOfInput()-1;if(index>-1){this._deleteToken(this.props.value[index])}},_deleteTokenAfterInput:function _deleteTokenAfterInput(){var index=this._getIndexOfInput();if(index<this.props.value.length){this._deleteToken(this.props.value[index]);this._moveInputToIndex(index)}},_deleteToken:function _deleteToken(token){var _this=this;var newTokens=this.props.value.filter(function(item){return _this._getTokenValue(item)!==_this._getTokenValue(token)});this.props.onChange(newTokens)},_moveInputToIndex:function _moveInputToIndex(index){this.setState({inputOffsetFromEnd:this.props.value.length-Math.max(index,-1)-1})},_moveInputBeforePreviousToken:function _moveInputBeforePreviousToken(){this.setState({inputOffsetFromEnd:Math.min(this.state.inputOffsetFromEnd+1,this.props.value.length)})},_moveInputAfterNextToken:function _moveInputAfterNextToken(){this.setState({inputOffsetFromEnd:Math.max(this.state.inputOffsetFromEnd-1,0)})},_addNewToken:function _addNewToken(token){var newValue;token=this.props.saveTransform(token);if(!this._valueContainsToken(token)){newValue=clone(this.props.value);newValue.splice(this._getIndexOfInput(),0,token);this.props.onChange(newValue)}this.setState({incompleteTokenValue:"",selectedSuggestionIndex:-1,selectedSuggestionScroll:false});if(this.state.isActive){debug("_addNewToken focusing input");this.refs.input.focus()}},_valueContainsToken:function _valueContainsToken(token){var _this2=this;return some(this.props.value,function(item){return _this2._getTokenValue(token)===_this2._getTokenValue(item)})},_getTokenValue:function _getTokenValue(token){if("object"===(typeof token==="undefined"?"undefined":(0,_typeof3.default)(token))){return token.value}return token},_getIndexOfInput:function _getIndexOfInput(){return this.props.value.length-this.state.inputOffsetFromEnd}});module.exports=TokenField},1621:function(module,exports,__webpack_require__){"use strict";var _defineProperty2=__webpack_require__(7);var _defineProperty3=_interopRequireDefault(_defineProperty2);var _debug=__webpack_require__(4);var _debug2=_interopRequireDefault(_debug);var _omit=__webpack_require__(18);var _omit2=_interopRequireDefault(_omit);
var _notices=__webpack_require__(71);var _notices2=_interopRequireDefault(_notices);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=(0,_debug2.default)("calypso:my-sites:site-settings");module.exports={componentWillMount:function componentWillMount(){debug("Mounting "+this.constructor.displayName+" React component.");if(this.props.site.settings){this.setState(this.getSettingsFromSite())}},componentDidMount:function componentDidMount(){this.updateJetpackSettings()},updateJetpackSettings:function updateJetpackSettings(site){this.getModuleStatus&&this.getModuleStatus(site);this.getSshSettings&&this.getSshSettings(site)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(!nextProps.site){return}if(this.props.site.ID!==nextProps.site.ID){this.updateJetpackSettings(nextProps.site)}if(nextProps.site.settings){var newState=this.getSettingsFromSite(nextProps.site);if(this.state.dirtyFields){newState=(0,_omit2.default)(newState,this.state.dirtyFields)}return this.setState(newState)}if(!this.getModuleStatus&&!this.getSshSettings){this.resetState()}if(nextProps.site.fetchingSettings){this.setState({fetchingSettings:true})}},recordClickEventAndStop:function recordClickEventAndStop(recordObject,clickEvent){this.recordEvent(recordObject);clickEvent.preventDefault()},recordEvent:function recordEvent(eventAction){debug("record event: %o",eventAction);_analytics2.default.ga.recordEvent("Site Settings",eventAction)},recordEventOnce:function recordEventOnce(key,eventAction){debug("record event once: %o - %o",key,eventAction);if(this.state["recordEventOnce-"+key]){return}this.recordEvent(eventAction);this.setState((0,_defineProperty3.default)({},"recordEventOnce-"+key,true))},getInitialState:function getInitialState(){return this.getSettingsFromSite()},handleRadio:function handleRadio(event){var currentTargetName=event.currentTarget.name,currentTargetValue=event.currentTarget.value;this.setState((0,_defineProperty3.default)({},currentTargetName,currentTargetValue))},toggleJetpackModule:function toggleJetpackModule(module){var _this=this;var event=this.props.site.isModuleActive(module)?"deactivate":"activate";_notices2.default.clearNotices("notices");this.setState({togglingModule:true});this.props.site.toggleModule(module,function(error){_this.setState({togglingModule:false});if(error){debug("jetpack module toggle error",error);_this.handleError();_this.props.site.handleError(error,_this.props.site.isModuleActive(module)?"deactivateModule":"activateModule",{},module)}else{if("protect"===module){_this.props.site.fetchSettings()}_this.getModuleStatus()}});this.recordEvent("Clicked to "+event+" Jetpack "+module)},submitForm:function submitForm(event){var _this2=this;var site=this.props.site;if(!event.isDefaultPrevented()&&event.nativeEvent){event.preventDefault()}_notices2.default.clearNotices("notices");this.setState({submittingForm:true});site.saveSettings((0,_omit2.default)(this.state,"dirtyFields"),function(error){if(error){switch(error.error){case"invalid_ip":_notices2.default.error(_this2.translate("One of your IP Addresses was invalid. Please, try again."));break;default:_notices2.default.error(_this2.translate("There was a problem saving your changes. Please, try again."))}_this2.setState({submittingForm:false})}else{_notices2.default.success(_this2.translate("Settings saved!"));_this2.markSaved();_this2.setState({submittingForm:false,dirtyFields:[]});site.fetchSettings()}if("function"===typeof _this2.onSaveComplete){_this2.onSaveComplete(error)}});this.recordEvent("Clicked Save Settings Button")}}},1638:function(module,exports,__webpack_require__){var baseSlice=__webpack_require__(196),toInteger=__webpack_require__(63);function take(array,n,guard){if(!(array&&array.length)){return[]}n=guard||n===undefined?1:toInteger(n);return baseSlice(array,0,n<0?0:n)}module.exports=take},1649:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _omit=__webpack_require__(18);var _omit2=_interopRequireDefault(_omit);var _noop=__webpack_require__(36);var _noop2=_interopRequireDefault(_noop);var _formTextarea=__webpack_require__(1480);var _formTextarea2=_interopRequireDefault(_formTextarea);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"CountedTextarea",propTypes:{value:_react2.default.PropTypes.string,placeholder:_react2.default.PropTypes.string,countPlaceholderLength:_react2.default.PropTypes.bool,onChange:_react2.default.PropTypes.func,acceptableLength:_react2.default.PropTypes.number,showRemainingCharacters:_react2.default.PropTypes.bool},getDefaultProps:function getDefaultProps(){return{value:"",placeholder:"",countPlaceholderLength:false,onChange:_noop2.default,showRemainingCharacters:false}},renderCountPanel:function renderCountPanel(){var length=this.props.value.length;if(!length&&this.props.countPlaceholderLength){length=this.props.placeholder.length}var panelText=void 0;if(this.props.showRemainingCharacters&&this.props.acceptableLength){panelText=this.translate("%d character remaining","%d characters remaining",{context:"Input length",args:[this.props.acceptableLength-length],count:this.props.acceptableLength-length})}else{panelText=this.translate("%d character","%d characters",{context:"Input length",args:[length],count:length})}return _react2.default.createElement("div",{className:"counted-textarea__count-panel"},panelText,this.props.children)},render:function render(){var classes=(0,_classnames2.default)("counted-textarea",this.props.className,{"is-exceeding-acceptable-length":this.props.acceptableLength&&this.props.value.length>this.props.acceptableLength});return _react2.default.createElement("div",{className:classes},_react2.default.createElement(_formTextarea2.default,(0,_extends3.default)({},(0,_omit2.default)(this.props,"className","acceptableLength","showRemainingCharacters","children"),{className:"counted-textarea__input"})),this.renderCountPanel())}});module.exports=exports["default"]},1652:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var Gravatar=__webpack_require__(647);module.exports=React.createClass({displayName:"UserItem",propTypes:{user:React.PropTypes.object},render:function render(){var user=this.props.user||null,name=user?user.name:"";return React.createElement("div",{className:"user",title:name},React.createElement(Gravatar,{size:26,user:user}),React.createElement("span",{className:"user__name"},name))}})},1657:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _toConsumableArray2=__webpack_require__(46);var _toConsumableArray3=_interopRequireDefault(_toConsumableArray2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={linkState:function linkState(key){var _this=this;var link={};link.value=this.state[key];link.requestChange=function(newValue){var newState={};newState[key]=newValue;var dirtyFields=_this.state.dirtyFields||[];if(dirtyFields.indexOf(key)===-1){newState.dirtyFields=[].concat((0,_toConsumableArray3.default)(dirtyFields),[key])}_this.setState(newState)};return link}};module.exports=exports["default"]},1674:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getPostTypeFieldValue=exports.getPostTypeFieldValues=exports.getPostTypeFieldOptions=exports.getSelectedPostType=exports.getAdvancedSettings=exports.getExportingState=undefined;var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);exports.shouldShowProgress=shouldShowProgress;exports.isExporting=isExporting;exports.isDateRangeValid=isDateRangeValid;exports.prepareExportRequest=prepareExportRequest;var _constants=__webpack_require__(729);var _object=__webpack_require__(2021);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getExportingState=exports.getExportingState=function getExportingState(state,siteId){var exportingState=state.siteSettings.exporter.exportingState;if(!exportingState[siteId]){return _constants.States.READY}return exportingState[siteId]};function shouldShowProgress(state,siteId){var exportingState=getExportingState(state,siteId);return exportingState===_constants.States.STARTING||exportingState===_constants.States.EXPORTING}function isExporting(state,siteId){var exportingState=getExportingState(state,siteId);return exportingState===_constants.States.EXPORTING}function isDateRangeValid(state,siteId,postType){var site=state.siteSettings.exporter.selectedAdvancedSettings[siteId];if(!site){return true}var values=site[postType];if(!values){return true}var startDate=values.start_date;var endDate=values.end_date;if(startDate&&endDate&&startDate>endDate){return false}return true}var getAdvancedSettings=exports.getAdvancedSettings=function getAdvancedSettings(state,siteId){return state.siteSettings.exporter.advancedSettings[siteId]};var getSelectedPostType=exports.getSelectedPostType=function getSelectedPostType(state){return state.siteSettings.exporter.selectedPostType};var getPostTypeFieldOptions=exports.getPostTypeFieldOptions=function getPostTypeFieldOptions(state,siteId,postType,fieldName){var optionSet=(0,_object.get)({author:"authors",status:"statuses",start_date:"dates",end_date:"dates",category:"categories"},fieldName,null);var advancedSettings=getAdvancedSettings(state,siteId);if(!advancedSettings){return null}var fields=advancedSettings[postType];if(!fields){return null}return fields[optionSet]||null};var getPostTypeFieldValues=exports.getPostTypeFieldValues=function getPostTypeFieldValues(state,siteId,postType){var site=state.siteSettings.exporter.selectedAdvancedSettings[siteId];if(!site){return null}return site[postType]||null};var getPostTypeFieldValue=exports.getPostTypeFieldValue=function getPostTypeFieldValue(state,siteId,postType,fieldName){var fields=getPostTypeFieldValues(state,siteId,postType);if(!fields){return null}return fields[fieldName]||null};function prepareExportRequest(state,siteId){var _ref=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];var _ref$exportAll=_ref.exportAll;var exportAll=_ref$exportAll===undefined?true:_ref$exportAll;if(exportAll){return null}var postType=getSelectedPostType(state);var selectedFieldValues=getPostTypeFieldValues(state,siteId,postType);return(0,_assign2.default)({post_type:postType},selectedFieldValues)}},1683:function(module,exports,__webpack_require__){"use strict";var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _freeze=__webpack_require__(247);var _freeze2=_interopRequireDefault(_freeze);var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ReactDom=__webpack_require__(43),React=__webpack_require__(1),debug=__webpack_require__(4)("calypso:author-selector"),trim=__webpack_require__(192);var Popover=__webpack_require__(345),PopoverMenuItem=__webpack_require__(1462),SiteUsersFetcher=__webpack_require__(1612),UserItem=__webpack_require__(1652),Gridicon=__webpack_require__(28),InfiniteList=__webpack_require__(1497),UsersActions=__webpack_require__(1535),Search=__webpack_require__(651),hasTouch=__webpack_require__(155).hasTouch;var instance=0,SwitcherShell;SwitcherShell=React.createClass({displayName:"AuthorSwitcherShell",propTypes:{users:React.PropTypes.array,fetchingUsers:React.PropTypes.bool,numUsersFetched:React.PropTypes.number,totalUsers:React.PropTypes.number,usersCurrentOffset:React.PropTypes.number,allowSingleUser:React.PropTypes.bool,popoverPosition:React.PropTypes.string},getInitialState:function getInitialState(){return{showAuthorMenu:false}},componentWillMount:function componentWillMount(){this.instance=instance;instance++},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(!nextProps.fetchOptions.siteId||nextProps.fetchOptions.siteId!==this.props.fetchOptions.siteId){this.props.updateSearch(false)}},componentDidUpdate:function componentDidUpdate(prevProps,prevState){var _this=this;if(!this.state.showAuthorMenu){return}if(!prevState.showAuthorMenu&&this.props.users.length>10&&!hasTouch()){setTimeout(function(){return _this.refs.authorSelectorSearch.focus()},0)}},render:function render(){var users=this.props.users,infiniteListKey=this.props.fetchNameSpace+this.instance;if(!this._userCanSelectAuthor()){return React.createElement("span",null,this.props.children)}return React.createElement("span",null,React.createElement("span",{className:"author-selector__author-toggle",onClick:this._toggleShowAuthor,tabIndex:-1,ref:"author-selector-toggle"},this.props.children,React.createElement(Gridicon,{ref:"authorSelectorChevron",icon:"chevron-down",size:16})),React.createElement(Popover,{isVisible:this.state.showAuthorMenu,onClose:this._onClose,position:this.props.popoverPosition,context:this.refs&&this.refs.authorSelectorChevron,onKeyDown:this._onKeyDown,className:"author-selector__popover popover"},this.props.fetchOptions.search||users.length>10?React.createElement(Search,{onSearch:this._onSearch,placeholder:this.translate("Find Author",{context:"search label"}),delaySearch:true,ref:"authorSelectorSearch"}):null,this.props.fetchInitialized&&!users.length&&this.props.fetchOptions.search&&!this.props.fetchingUsers?this._noUsersFound():React.createElement(InfiniteList,{items:users,key:infiniteListKey,namespace:infiniteListKey,className:"author-selector__infinite-list",ref:this._setListContext,context:this.state.listContext,fetchingNextPage:this.props.fetchingUsers,guessedItemHeight:42,lastPage:this._isLastPage(),fetchNextPage:this._fetchNextPage,getItemRef:this._getAuthorItemGUID,renderLoadingPlaceholders:this._renderLoadingAuthors,renderItem:this._renderAuthor})))},_isLastPage:function _isLastPage(){var usersLength=this.props.users.length;if(this.props.exclude){usersLength+=this.props.excludedUsers.length}return this.props.totalUsers<=usersLength},_setListContext:function _setListContext(infiniteListInstance){this.setState({listContext:ReactDom.findDOMNode(infiniteListInstance)})},_userCanSelectAuthor:function _userCanSelectAuthor(){var users=this.props.users;if(this.props.fetchOptions.search){return true}if(!users||!users.length||!this.props.allowSingleUser&&users.length===1){return false}return true},_toggleShowAuthor:function _toggleShowAuthor(){this.setState({showAuthorMenu:!this.state.showAuthorMenu})},_onClose:function _onClose(event){var toggleElement=ReactDom.findDOMNode(this.refs["author-selector-toggle"]);if(event&&toggleElement.contains(event.target)){return}this.setState({showAuthorMenu:false});this.props.updateSearch(false)},_renderAuthor:function _renderAuthor(author){var authorGUID=this._getAuthorItemGUID(author);return React.createElement(PopoverMenuItem,{className:"author-selector__menu-item",onClick:this._selectAuthor.bind(this,author),focusOnHover:false,key:authorGUID,ref:authorGUID,tabIndex:"-1"},React.createElement(UserItem,{user:author}))},_noUsersFound:function _noUsersFound(){return React.createElement("div",{className:"author-selector__no-users"},this.translate("No matching users found."))},_selectAuthor:function _selectAuthor(author){debug("assign author:",author);if(this.props.onSelect){this.props.onSelect(author)}this.setState({showAuthorMenu:false});this.props.updateSearch(false)},_fetchNextPage:function _fetchNextPage(){var fetchOptions=(0,_assign2.default)({},this.props.fetchOptions,{offset:this.props.users.length});debug("fetching next batch of authors");UsersActions.fetchUsers(fetchOptions)},_getAuthorItemGUID:function _getAuthorItemGUID(author){return"author-item-"+author.ID},_renderLoadingAuthors:function _renderLoadingAuthors(){return React.createElement(PopoverMenuItem,{disabled:true,key:"author-item-placeholder"},React.createElement(UserItem,null))},_onSearch:function _onSearch(searchTerm){this.props.updateSearch(searchTerm)}});module.exports=React.createClass({displayName:"AuthorSelector",propTypes:{siteId:React.PropTypes.number.isRequired,onSelect:React.PropTypes.func,exclude:React.PropTypes.arrayOf(React.PropTypes.number),allowSingleUser:React.PropTypes.bool,popoverPosition:React.PropTypes.string},getInitialState:function getInitialState(){return{search:""}},getDefaultProps:function getDefaultProps(){return{showAuthorMenu:false,onClose:function onClose(){},allowSingleUser:false,popoverPosition:"bottom left"}},componentDidMount:function componentDidMount(){debug("AuthorSelector mounted")},render:function render(){var searchString=this.state.search||"",fetchOptions;searchString=trim(searchString);fetchOptions={siteId:this.props.siteId,order:"ASC",order_by:"display_name",number:50};if(searchString){fetchOptions.number=20;fetchOptions.search=searchString;fetchOptions.search_columns=["user_login","display_name"]}(0,_freeze2.default)(fetchOptions);return React.createElement(SiteUsersFetcher,{fetchOptions:fetchOptions,exclude:this.props.exclude},React.createElement(SwitcherShell,(0,_extends3.default)({},this.props,{updateSearch:this._updateSearch})))},_updateSearch:function _updateSearch(searchTerm){searchTerm=searchTerm?"*"+searchTerm+"*":"";this.setState({search:searchTerm})}})},1696:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DropZone=undefined;var _from=__webpack_require__(703);var _from2=_interopRequireDefault(_from);var _reactDom=__webpack_require__(43);var _reactDom2=_interopRequireDefault(_reactDom);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactAddonsCreateFragment=__webpack_require__(683);var _reactAddonsCreateFragment2=_interopRequireDefault(_reactAddonsCreateFragment);var _without=__webpack_require__(190);var _without2=_interopRequireDefault(_without);var _includes=__webpack_require__(34);var _includes2=_interopRequireDefault(_includes);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _noop=__webpack_require__(36);var _noop2=_interopRequireDefault(_noop);var _identity=__webpack_require__(110);var _identity2=_interopRequireDefault(_identity);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);var _i18nCalypso=__webpack_require__(13);var _rootChild=__webpack_require__(197);var _rootChild2=_interopRequireDefault(_rootChild);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DropZone=exports.DropZone=_react2.default.createClass({displayName:"DropZone",propTypes:{onDrop:_react.PropTypes.func,onVerifyValidTransfer:_react.PropTypes.func,onFilesDrop:_react.PropTypes.func,fullScreen:_react.PropTypes.bool,icon:_react.PropTypes.string,translate:_react.PropTypes.func},getInitialState:function getInitialState(){return{isDraggingOverDocument:false,isDraggingOverElement:false}},getDefaultProps:function getDefaultProps(){return{onDrop:_noop2.default,onVerifyValidTransfer:function onVerifyValidTransfer(){return true},onFilesDrop:_noop2.default,fullScreen:false,icon:"cloud-upload",translate:_identity2.default}},componentDidMount:function componentDidMount(){this.dragEnterNodes=[];window.addEventListener("dragover",this.preventDefault);window.addEventListener("drop",this.onDrop);window.addEventListener("dragenter",this.toggleDraggingOverDocument);window.addEventListener("dragleave",this.toggleDraggingOverDocument);window.addEventListener("mouseup",this.resetDragState)},componentDidUpdate:function componentDidUpdate(prevProps,prevState){if(prevState.isDraggingOverDocument!==this.state.isDraggingOverDocument){this.toggleMutationObserver()}},componentWillUnmount:function componentWillUnmount(){window.removeEventListener("dragover",this.preventDefault);window.removeEventListener("drop",this.onDrop);window.removeEventListener("dragenter",this.toggleDraggingOverDocument);window.removeEventListener("dragleave",this.toggleDraggingOverDocument);window.removeEventListener("mouseup",this.resetDragState);this.disconnectMutationObserver()},resetDragState:function resetDragState(){if(!(this.state.isDraggingOverDocument||this.state.isDraggingOverElement)){return}this.setState({isDraggingOverDocument:false,isDraggingOverElement:false})},toggleMutationObserver:function toggleMutationObserver(){this.disconnectMutationObserver();if(this.state.isDraggingOverDocument){this.observer=new window.MutationObserver(this.detectNodeRemoval);this.observer.observe(document.body,{childList:true,subtree:true})}},disconnectMutationObserver:function disconnectMutationObserver(){if(!this.observer){return}this.observer.disconnect();delete this.observer},detectNodeRemoval:function detectNodeRemoval(mutations){var _this=this;mutations.forEach(function(mutation){if(!mutation.removedNodes.length){return}_this.dragEnterNodes=(0,_without2.default)(_this.dragEnterNodes,(0,_from2.default)(mutation.removedNodes))})},toggleDraggingOverDocument:function toggleDraggingOverDocument(event){var isDraggingOverDocument=void 0,detail=void 0,isValidDrag=void 0;if("dragenter"===event.type&&!(0,_includes2.default)(this.dragEnterNodes,event.target)){this.dragEnterNodes.push(event.target)}else if("dragleave"===event.type){this.dragEnterNodes=(0,_without2.default)(this.dragEnterNodes,event.target)}detail=window.CustomEvent&&event instanceof window.CustomEvent?event.detail:event;isValidDrag=this.props.onVerifyValidTransfer(detail.dataTransfer);isDraggingOverDocument=isValidDrag&&this.dragEnterNodes.length;this.setState({isDraggingOverDocument:isDraggingOverDocument,isDraggingOverElement:isDraggingOverDocument&&(this.props.fullScreen||this.isWithinZoneBounds(detail.clientX,detail.clientY))});if(window.CustomEvent&&event instanceof window.CustomEvent){this.dragEnterNodes=(0,_without2.default)(this.dragEnterNodes,window)}},preventDefault:function preventDefault(event){event.preventDefault()},isWithinZoneBounds:function isWithinZoneBounds(x,y){var rect=void 0;if(!this.refs.zone){return false}rect=this.refs.zone.getBoundingClientRect();if(rect.bottom===rect.top||rect.left===rect.right){return false}return x>=rect.left&&x<=rect.right&&y>=rect.top&&y<=rect.bottom},onDrop:function onDrop(event){event.dataTransfer&&event.dataTransfer.files.length;this.resetDragState();if(!this.props.fullScreen&&!_reactDom2.default.findDOMNode(this.refs.zone).contains(event.target)){return}this.props.onDrop(event);if(!this.props.onVerifyValidTransfer(event.dataTransfer)){return}if(event.dataTransfer){this.props.onFilesDrop(Array.prototype.slice.call(event.dataTransfer.files))}event.stopPropagation();event.preventDefault()},renderContent:function renderContent(){var content=void 0;if(this.props.children){content=this.props.children}else{content=(0,_reactAddonsCreateFragment2.default)({icon:_react2.default.createElement(_gridicon2.default,{icon:this.props.icon,size:48,className:"drop-zone__content-icon"}),text:_react2.default.createElement("span",{className:"drop-zone__content-text"},this.props.translate("Drop files to upload"))})}return _react2.default.createElement("div",{className:"drop-zone__content"},content)},render:function render(){var classes=(0,_classnames2.default)("drop-zone",{"is-active":this.state.isDraggingOverDocument||this.state.isDraggingOverElement,"is-dragging-over-document":this.state.isDraggingOverDocument,"is-dragging-over-element":this.state.isDraggingOverElement,"is-full-screen":this.props.fullScreen});var element=_react2.default.createElement("div",{ref:"zone",className:classes},this.renderContent());if(this.props.fullScreen){return _react2.default.createElement(_rootChild2.default,null,element)}return element}});exports.default=(0,_i18nCalypso.localize)(DropZone)},1697:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var React=_interopRequireWildcard(_react);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _utils=__webpack_require__(150);var _utils2=_interopRequireDefault(_utils);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);var _noticeAction=__webpack_require__(151);var _noticeAction2=_interopRequireDefault(_noticeAction);var _spinner=__webpack_require__(350);var _spinner2=_interopRequireDefault(_spinner);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _sitesList=__webpack_require__(55);var _sitesList2=_interopRequireDefault(_sitesList);var _user=__webpack_require__(37);var _user2=_interopRequireDefault(_user);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var sites=(0,_sitesList2.default)();var user=(0,_user2.default)();var EmailUnverifiedNotice=function(_React$Component){(0,_inherits3.default)(EmailUnverifiedNotice,_React$Component);function EmailUnverifiedNotice(props){(0,_classCallCheck3.default)(this,EmailUnverifiedNotice);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(EmailUnverifiedNotice).call(this,props));_this.updateVerificationState=_this.updateVerificationState.bind(_this);_this.handleDismiss=_this.handleDismiss.bind(_this);_this.handleSendVerificationEmail=_this.handleSendVerificationEmail.bind(_this);_this.handleChangeEmail=_this.handleChangeEmail.bind(_this);_this.state={needsVerification:_utils2.default.needsVerificationForSite(sites.getSelectedSite()),pendingRequest:false,emailSent:false,error:null};return _this}(0,_createClass3.default)(EmailUnverifiedNotice,[{key:"componentWillMount",value:function componentWillMount(){user.on("change",this.updateVerificationState);user.on("verify",this.updateVerificationState);sites.on("change",this.updateVerificationState)}},{key:"componentWillUnmount",value:function componentWillUnmount(){user.off("change",this.updateVerificationState);user.off("verify",this.updateVerificationState);sites.off("change",this.updateVerificationState)}},{key:"updateVerificationState",value:function updateVerificationState(){this.setState({needsVerification:_utils2.default.needsVerificationForSite(sites.getSelectedSite())})}},{key:"handleDismiss",value:function handleDismiss(){this.setState({error:null,emailSent:false})}},{key:"handleChangeEmail",value:function handleChangeEmail(e){e.preventDefault();(0,_page2.default)("/me/account")}},{key:"handleSendVerificationEmail",value:function handleSendVerificationEmail(e){var _this2=this;e.preventDefault();if(this.state.pendingRequest){return}this.setState({pendingRequest:true});user.sendVerificationEmail(function(error,response){_this2.setState({emailSent:response&&response.success,error:error,pendingRequest:false})})}},{key:"renderEmailSendPending",value:function renderEmailSendPending(){return React.createElement(_notice2.default,{icon:"mail",showDismiss:false,text:_i18nCalypso2.default.translate("Sending...")},React.createElement(_noticeAction2.default,null,React.createElement(_spinner2.default,null)))}},{key:"renderEmailSendSuccess",value:function renderEmailSendSuccess(){var noticeText=_i18nCalypso2.default.translate("We sent another confirmation email to %(email)s.",{args:{email:user.get().email}});return React.createElement(_notice2.default,{text:noticeText,status:"is-success",onDismissClick:this.handleDismiss,className:"email-verification-notice"})}},{key:"renderEmailSendError",value:function renderEmailSendError(){var noticeText=[React.createElement("strong",null,_i18nCalypso2.default.translate("The email could not be sent."))," ",this.state.error.message];return React.createElement(_notice2.default,{text:noticeText,icon:"notice",onDismissClick:this.handleDismiss,status:"is-warning",className:"email-verification-notice"},React.createElement(_noticeAction2.default,{onClick:this.handleSendVerificationEmail},_i18nCalypso2.default.translate("Try Again")))}},{key:"render",value:function render(){if(this.state.pendingRequest){return this.renderEmailSendPending()}if(this.state.error){return this.renderEmailSendError()}if(this.state.emailSent){return this.renderEmailSendSuccess()}var noticeText=React.createElement("div",null,React.createElement("p",null,React.createElement("strong",null,_i18nCalypso2.default.getLocaleSlug()==="en"?_i18nCalypso2.default.translate("To continue, please confirm your email address"):_i18nCalypso2.default.translate("Please confirm your email address"))),React.createElement("p",null,_i18nCalypso2.default.getLocaleSlug()==="en"?_i18nCalypso2.default.translate("Click the link in the email we sent to %(email)s.",{args:{email:user.get().email}}):_i18nCalypso2.default.translate("To post and keep using WordPress.com you need to confirm your email address. "+"Please click the link in the email we sent at %(email)s.",{args:{email:user.get().email}})),React.createElement("p",null,_i18nCalypso2.default.getLocaleSlug()==="en"?_i18nCalypso2.default.translate("Didn't get it? {{requestButton}}Resend Confirmation Email{{/requestButton}} "+"or {{changeButton}}Change Account Email Address{{/changeButton}}",{components:{requestButton:React.createElement("a",{href:"#",tabIndex:"0",onClick:this.handleSendVerificationEmail}),changeButton:React.createElement("a",{href:"#",tabIndex:"0",onClick:this.handleChangeEmail})}}):_i18nCalypso2.default.translate("{{requestButton}}Re-send your confirmation email{{/requestButton}} "+"or {{changeButton}}change the email address on your account{{/changeButton}}.",{components:{requestButton:React.createElement("a",{href:"#",tabIndex:"0",onClick:this.handleSendVerificationEmail}),changeButton:React.createElement("a",{href:"#",tabIndex:"0",onClick:this.handleChangeEmail})}})));return React.createElement(_notice2.default,{text:noticeText,icon:"info",showDismiss:false,className:"email-unverified-notice"})}}]);return EmailUnverifiedNotice}(React.Component);exports.default=EmailUnverifiedNotice;module.exports=exports["default"]},1698:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var React=_interopRequireWildcard(_react);var _emailUnverifiedNotice=__webpack_require__(1697);var _emailUnverifiedNotice2=_interopRequireDefault(_emailUnverifiedNotice);
var _utils=__webpack_require__(150);var _utils2=_interopRequireDefault(_utils);var _sitesList=__webpack_require__(55);var _sitesList2=_interopRequireDefault(_sitesList);var _user=__webpack_require__(37);var _user2=_interopRequireDefault(_user);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var sites=(0,_sitesList2.default)();var user=(0,_user2.default)();var EmailVerificationGate=function(_React$Component){(0,_inherits3.default)(EmailVerificationGate,_React$Component);function EmailVerificationGate(props){(0,_classCallCheck3.default)(this,EmailVerificationGate);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(EmailVerificationGate).call(this,props));_this.updateVerificationState=_this.updateVerificationState.bind(_this);_this.handleFocus=_this.handleFocus.bind(_this);_this.state={needsVerification:_utils2.default.needsVerificationForSite(sites.getSelectedSite())};return _this}(0,_createClass3.default)(EmailVerificationGate,[{key:"componentWillMount",value:function componentWillMount(){user.on("change",this.updateVerificationState);user.on("verify",this.updateVerificationState);sites.on("change",this.updateVerificationState)}},{key:"componentWillUnmount",value:function componentWillUnmount(){user.off("change",this.updateVerificationState);user.off("verify",this.updateVerificationState);sites.off("change",this.updateVerificationState)}},{key:"updateVerificationState",value:function updateVerificationState(){this.setState({needsVerification:_utils2.default.needsVerificationForSite(sites.getSelectedSite())})}},{key:"handleFocus",value:function handleFocus(e){e.target.blur()}},{key:"render",value:function render(){if(this.state.needsVerification){return React.createElement("div",{tabIndex:"-1",className:"email-verification-gate",onFocus:this.handleFocus},React.createElement(_emailUnverifiedNotice2.default,null),React.createElement("div",{className:"email-verification-gate__content"},this.props.children))}return React.createElement("div",null,this.props.children)}}]);return EmailVerificationGate}(React.Component);exports.default=EmailVerificationGate;module.exports=exports["default"]},1700:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),debug=__webpack_require__(4)("calypso:forms:select-opt-groups");var SelectOptGroups=React.createClass({displayName:"SelectOptGroups",componentWillMount:function componentWillMount(){debug("Mounting SelectOptGroups React component.")},render:function render(){return React.createElement("select",this.props,this.props.optGroups.map(function(optGroup){return React.createElement("optgroup",{label:optGroup.label,key:"optgroup-"+optGroup.label},optGroup.options.map(function(option){return React.createElement("option",{value:option.value,key:"option-"+optGroup.label+option.label},option.label)}))}))}});module.exports=SelectOptGroups},1708:function(module,exports,__webpack_require__){"use strict";var _freeze=__webpack_require__(247);var _freeze2=_interopRequireDefault(_freeze);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var map=__webpack_require__(50),React=__webpack_require__(1),PureRenderMixin=__webpack_require__(105),classNames=__webpack_require__(11),scrollIntoView=__webpack_require__(1844);var SuggestionsList=React.createClass({displayName:"SuggestionsList",propTypes:{isExpanded:React.PropTypes.bool,match:React.PropTypes.string,displayTransform:React.PropTypes.func.isRequired,onSelect:React.PropTypes.func,suggestions:React.PropTypes.array,selectedIndex:React.PropTypes.number},getDefaultProps:function getDefaultProps(){return{isExpanded:false,match:"",onHover:function onHover(){},onSelect:function onSelect(){},suggestions:(0,_freeze2.default)([])}},mixins:[PureRenderMixin],componentDidUpdate:function componentDidUpdate(prevProps){var node;if(prevProps.isExpanded&&this.props.isExpanded&&this.props.selectedIndex>-1&&this.props.scrollIntoView){this._scrollingIntoView=true;node=this.refs.list;scrollIntoView(node.children[this.props.selectedIndex],node,{onlyScrollIfNeeded:true});setTimeout(function(){this._scrollingIntoView=false}.bind(this),100)}},_computeSuggestionMatch:function _computeSuggestionMatch(suggestion){var match=this.props.displayTransform(this.props.match||"").toLocaleLowerCase(),indexOfMatch;if(match.length===0){return null}suggestion=this.props.displayTransform(suggestion);indexOfMatch=suggestion.toLocaleLowerCase().indexOf(match);return{suggestionBeforeMatch:suggestion.substring(0,indexOfMatch),suggestionMatch:suggestion.substring(indexOfMatch,indexOfMatch+match.length),suggestionAfterMatch:suggestion.substring(indexOfMatch+match.length)}},render:function render(){var classes=classNames("token-field__suggestions-list",{"is-expanded":this.props.isExpanded&&this.props.suggestions.length>0});return React.createElement("ul",{ref:"list",className:classes,tabIndex:"-1"},this._renderSuggestions())},_renderSuggestions:function _renderSuggestions(){return map(this.props.suggestions,function(suggestion,index){var match=this._computeSuggestionMatch(suggestion),classes=classNames("token-field__suggestion",{"is-selected":index===this.props.selectedIndex});return React.createElement("li",{className:classes,key:suggestion,onMouseDown:this._handleMouseDown,onClick:this._handleClick(suggestion),onMouseEnter:this._handleHover(suggestion)},match?React.createElement("span",null,match.suggestionBeforeMatch,React.createElement("strong",{className:"token-field__suggestion-match"},match.suggestionMatch),match.suggestionAfterMatch):this.props.displayTransform(suggestion))}.bind(this))},_handleHover:function _handleHover(suggestion){return function(){if(!this._scrollingIntoView){this.props.onHover(suggestion)}}.bind(this)},_handleClick:function _handleClick(suggestion){return function(){this.props.onSelect(suggestion)}.bind(this)},_handleMouseDown:function _handleMouseDown(e){e.preventDefault()}});module.exports=SuggestionsList},1709:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),PureRenderMixin=__webpack_require__(105);var TokenInput=React.createClass({displayName:"TokenInput",propTypes:{onChange:React.PropTypes.func,onBlur:React.PropTypes.func,value:React.PropTypes.string,disabled:React.PropTypes.bool},getDefaultProps:function getDefaultProps(){return{onChange:function onChange(){},onBlur:function onBlur(){},value:"",disabled:false}},mixins:[PureRenderMixin],render:function render(){return React.createElement("input",{ref:"input",type:"text",disabled:this.props.disabled,value:this.props.value,size:this.props.value.length+1,onBlur:this.props.onBlur,onChange:this._onChange,className:"token-field__input"})},focus:function focus(){if(this.isMounted()){this.refs.input.focus()}},hasFocus:function hasFocus(){return this.isMounted()&&this.refs.input===document.activeElement},_onChange:function _onChange(event){this.props.onChange({value:event.target.value})}});module.exports=TokenInput},1710:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _mixin=__webpack_require__(105);var _mixin2=_interopRequireDefault(_mixin);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _tooltip=__webpack_require__(657);var _tooltip2=_interopRequireDefault(_tooltip);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"Token",propTypes:{value:_react2.default.PropTypes.string.isRequired,displayTransform:_react2.default.PropTypes.func.isRequired,onClickRemove:_react2.default.PropTypes.func,status:_react2.default.PropTypes.oneOf(["error","success","validating"]),isBorderless:_react2.default.PropTypes.bool,tooltip:_react2.default.PropTypes.string,disabled:_react2.default.PropTypes.bool},getDefaultProps:function getDefaultProps(){return{onClickRemove:function onClickRemove(){},isBorderless:false,disabled:false}},mixins:[_mixin2.default],render:function render(){var _props=this.props;var value=_props.value;var status=_props.status;var isBorderless=_props.isBorderless;var tooltip=_props.tooltip;var displayTransform=_props.displayTransform;var tokenClasses=(0,_classnames2.default)("token-field__token",{"is-error":"error"===status,"is-success":"success"===status,"is-validating":"validating"===status,"is-borderless":isBorderless,"is-disabled":this.props.disabled});return _react2.default.createElement("span",{className:tokenClasses,tabIndex:"-1",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},_react2.default.createElement("span",{className:"token-field__token-text"},displayTransform(value)),_react2.default.createElement("span",{className:"token-field__remove-token noticon noticon-close-alt",onClick:!this.props.disabled&&this._onClickRemove}),tooltip&&_react2.default.createElement(_tooltip2.default,{showOnMobile:true,context:this,status:status,isVisible:true,position:"bottom"},tooltip))},_onClickRemove:function _onClickRemove(){this.props.onClickRemove({value:this.props.value})}});module.exports=exports["default"]},1760:function(module,exports,__webpack_require__){var createAggregator=__webpack_require__(377);var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});module.exports=partition},1805:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.startUpload=exports.startImport=exports.setUploadProgress=exports.mapAuthor=exports.finishUpload=exports.failUpload=undefined;var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);exports.cancelImport=cancelImport;exports.fetchState=fetchState;exports.resetImport=resetImport;exports.startMappingAuthors=startMappingAuthors;exports.startImporting=startImporting;var _dispatcher=__webpack_require__(38);var _dispatcher2=_interopRequireDefault(_dispatcher);var _includes=__webpack_require__(34);var _includes2=_interopRequireDefault(_includes);var _flowRight=__webpack_require__(156);var _flowRight2=_interopRequireDefault(_flowRight);var _partial=__webpack_require__(254);var _partial2=_interopRequireDefault(_partial);var _actionTypes=__webpack_require__(3);var _constants=__webpack_require__(1597);var _common=__webpack_require__(2392);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var wpcom=__webpack_require__(22).undocumented();var ID_GENERATOR_PREFIX="local-generated-id-";var cancelOrder=function cancelOrder(siteId,importerId){return(0,_common.toApi)({importerId:importerId,importerState:_constants.appStates.CANCEL_PENDING,site:{ID:siteId}})};var expiryOrder=function expiryOrder(siteId,importerId){return(0,_common.toApi)({importerId:importerId,importerState:_constants.appStates.EXPIRE_PENDING,site:{ID:siteId}})};var importOrder=function importOrder(importerStatus){return(0,_common.toApi)((0,_assign2.default)({},importerStatus,{importerState:_constants.appStates.IMPORTING}))};var apiStart=function apiStart(){return _dispatcher2.default.handleViewAction({type:_actionTypes.IMPORTS_FETCH})};var apiSuccess=function apiSuccess(data){_dispatcher2.default.handleViewAction({type:_actionTypes.IMPORTS_FETCH_COMPLETED});return data};var apiFailure=function apiFailure(data){_dispatcher2.default.handleViewAction({type:_actionTypes.IMPORTS_FETCH_FAILED});return data};var setImportLock=function setImportLock(shouldEnableLock,importerId){var type=shouldEnableLock?_actionTypes.IMPORTS_IMPORT_LOCK:_actionTypes.IMPORTS_IMPORT_UNLOCK;_dispatcher2.default.handleViewAction({type:type,importerId:importerId})};var lockImport=(0,_partial2.default)(setImportLock,true);var unlockImport=(0,_partial2.default)(setImportLock,false);var asArray=function asArray(a){return[].concat(a)};function receiveImporterStatus(importerStatus){_dispatcher2.default.handleViewAction({type:_actionTypes.IMPORTS_IMPORT_RECEIVE,importerStatus:importerStatus})}function cancelImport(siteId,importerId){lockImport(importerId);_dispatcher2.default.handleViewAction({type:_actionTypes.IMPORTS_IMPORT_CANCEL,importerId:importerId,siteId:siteId});if((0,_includes2.default)(importerId,ID_GENERATOR_PREFIX)){return}apiStart();wpcom.updateImporter(siteId,cancelOrder(siteId,importerId)).then(apiSuccess).then(_common.fromApi).then(receiveImporterStatus).catch(apiFailure)}var failUpload=exports.failUpload=function failUpload(importerId){return function(_ref){var error=_ref.message;return{type:_actionTypes.IMPORTS_UPLOAD_FAILED,importerId:importerId,error:error}}};function fetchState(siteId){apiStart();return wpcom.fetchImporterState(siteId).then(apiSuccess).then(asArray).then(function(importers){return importers.map(_common.fromApi)}).then(function(importers){return importers.map(receiveImporterStatus)}).catch(apiFailure)}var finishUpload=exports.finishUpload=function finishUpload(importerId){return function(importerStatus){return{type:_actionTypes.IMPORTS_UPLOAD_COMPLETED,importerId:importerId,importerStatus:importerStatus}}};var mapAuthor=exports.mapAuthor=function mapAuthor(importerId,sourceAuthor,targetAuthor){return{type:_actionTypes.IMPORTS_AUTHORS_SET_MAPPING,importerId:importerId,sourceAuthor:sourceAuthor,targetAuthor:targetAuthor}};function resetImport(siteId,importerId){lockImport(importerId);_dispatcher2.default.handleViewAction({type:_actionTypes.IMPORTS_IMPORT_RESET,importerId:importerId,siteId:siteId});apiStart();wpcom.updateImporter(siteId,expiryOrder(siteId,importerId)).then(apiSuccess).then(_common.fromApi).then(receiveImporterStatus).catch(apiFailure)}function startMappingAuthors(importerId){lockImport(importerId);_dispatcher2.default.handleViewAction({type:_actionTypes.IMPORTS_AUTHORS_START_MAPPING,importerId:importerId})}var setUploadProgress=exports.setUploadProgress=function setUploadProgress(importerId,data){return{type:_actionTypes.IMPORTS_UPLOAD_SET_PROGRESS,uploadLoaded:data.uploadLoaded,uploadTotal:data.uploadTotal,importerId:importerId}};var startImport=exports.startImport=function startImport(siteId,importerType){var importerId=""+ID_GENERATOR_PREFIX+Math.round(Math.random()*1e4);return{type:_actionTypes.IMPORTS_IMPORT_START,importerId:importerId,importerType:importerType,siteId:siteId}};function startImporting(importerStatus){var importerId=importerStatus.importerId;var siteId=importerStatus.site.ID;unlockImport(importerId);_dispatcher2.default.handleViewAction({type:_actionTypes.IMPORTS_START_IMPORTING,importerId:importerId});wpcom.updateImporter(siteId,importOrder(importerStatus))}var startUpload=exports.startUpload=function startUpload(importerStatus,file){return function(dispatch){var importerId=importerStatus.importerId;var siteId=importerStatus.site.ID;wpcom.uploadExportFile(siteId,{importStatus:(0,_common.toApi)(importerStatus),file:file,onprogress:function onprogress(event){return dispatch(setUploadProgress(importerId,{uploadLoaded:event.loaded,uploadTotal:event.total}))},onabort:function onabort(){return cancelImport(siteId,importerId)}}).then(function(data){return(0,_assign2.default)(data,{siteId:siteId})}).then(_common.fromApi).then((0,_flowRight2.default)(dispatch,finishUpload(importerId))).catch((0,_flowRight2.default)(dispatch,failUpload(importerId)));dispatch({type:_actionTypes.IMPORTS_UPLOAD_START,filename:file.name,importerId:importerId})}}},1867:function(module,exports,__webpack_require__){"use strict";var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var React=__webpack_require__(1),debug=__webpack_require__(4)("calypso:forms:language-selector");var SelectOptGroups=__webpack_require__(1700);function coerceToOptions(data,valueKey){valueKey="undefined"===typeof valueKey?"value":valueKey;return data.map(function(language){return{value:language[valueKey],label:language.name}})}var LanguageSelector=React.createClass({displayName:"LanguageSelector",componentWillMount:function componentWillMount(){debug("Mounting LanguageSelector React component.")},languageOptGroups:function languageOptGroups(){var allLanguages,popularLanguages;allLanguages=coerceToOptions(this.props.languages,this.props.valueKey);popularLanguages=this.props.languages.filter(function(language){return language.popular});popularLanguages.sort(function(a,b){return a.popular-b.popular});popularLanguages=coerceToOptions(popularLanguages,this.props.valueKey);return[{label:this.translate("Popular languages",{textOnly:true}),options:popularLanguages},{label:this.translate("All languages",{textOnly:true}),options:allLanguages}]},render:function render(){return React.createElement(SelectOptGroups,(0,_extends3.default)({optGroups:this.languageOptGroups()},this.props))}});module.exports=LanguageSelector},1887:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EVERY_MINUTE=exports.EVERY_THIRTY_SECONDS=exports.EVERY_TEN_SECONDS=exports.EVERY_FIVE_SECONDS=exports.EVERY_SECOND=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _omit=__webpack_require__(18);var _omit2=_interopRequireDefault(_omit);var _runner=__webpack_require__(2395);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.EVERY_SECOND=_runner.EVERY_SECOND;exports.EVERY_FIVE_SECONDS=_runner.EVERY_FIVE_SECONDS;exports.EVERY_TEN_SECONDS=_runner.EVERY_TEN_SECONDS;exports.EVERY_THIRTY_SECONDS=_runner.EVERY_THIRTY_SECONDS;exports.EVERY_MINUTE=_runner.EVERY_MINUTE;exports.default=_react2.default.createClass({displayName:"Interval",propTypes:{onTick:_react.PropTypes.func.isRequired,period:_react.PropTypes.oneOf([_runner.EVERY_SECOND,_runner.EVERY_FIVE_SECONDS,_runner.EVERY_TEN_SECONDS,_runner.EVERY_THIRTY_SECONDS,_runner.EVERY_MINUTE]).isRequired,pauseWhenHidden:_react.PropTypes.bool,children:_react.PropTypes.element},getDefaultProps:function getDefaultProps(){return{pauseWhenHidden:true}},getInitialState:function getInitialState(){return{id:null}},componentDidMount:function componentDidMount(){this.start();document.addEventListener("visibilitychange",this.handleVisibilityChange,false)},componentWillUnmount:function componentWillUnmount(){document.removeEventListener("visibilitychange",this.handleVisibilityChange,false);this.stop()},componentDidUpdate:function componentDidUpdate(prevProps){if(prevProps.period===this.props.period&&prevProps.onTick===this.props.onTick){return}this.start()},handleVisibilityChange:function handleVisibilityChange(){var id=this.state.id;var pauseWhenHidden=this.props.pauseWhenHidden;if(document.hidden&&id&&pauseWhenHidden){return this.stop()}if(!document.hidden&&!id&&pauseWhenHidden){this.start()}},start:function start(){var _props=this.props;var period=_props.period;var onTick=_props.onTick;if(this.state.id){(0,_runner.remove)(this.state.id)}this.setState({id:(0,_runner.add)(period,onTick)},onTick)},stop:function stop(){(0,_runner.remove)(this.state.id);this.setState({id:null})},render:function render(){return this.props.children?_react2.default.cloneElement(this.props.children,(0,_omit2.default)(this.props,["onTick","period","pauseWhenHidden","children"])):null}})},1899:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _camelCase=__webpack_require__(194);var _camelCase2=_interopRequireDefault(_camelCase);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _sort=__webpack_require__(725);var _sort2=_interopRequireDefault(_sort);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function createPurchaseObject(purchase){var object={id:Number(purchase.ID),active:Boolean(purchase.active),amount:Number(purchase.amount),attachedToPurchaseId:Number(purchase.attached_to_purchase_id),canDisableAutoRenew:Boolean(purchase.can_disable_auto_renew),currencyCode:purchase.currency_code,currencySymbol:purchase.currency_symbol,domain:purchase.domain,error:null,expiryDate:purchase.expiry_date,expiryMoment:purchase.expiry_date?_i18nCalypso2.default.moment(purchase.expiry_date):null,expiryStatus:(0,_camelCase2.default)(purchase.expiry_status),hasPrivateRegistration:Boolean(purchase.has_private_registration),includedDomain:purchase.included_domain,isCancelable:Boolean(purchase.is_cancelable),isDomainRegistration:Boolean(purchase.is_domain_registration),isRedeemable:Boolean(purchase.is_redeemable),isRefundable:Boolean(purchase.is_refundable),isRenewable:Boolean(purchase.is_renewable),meta:purchase.meta,priceText:""+purchase.currency_symbol+purchase.amount,payment:{name:purchase.payment_name,type:purchase.payment_type,countryCode:purchase.payment_country_code,countryName:purchase.payment_country_name},productId:Number(purchase.product_id),productName:purchase.product_name,productSlug:purchase.product_slug,refundText:""+purchase.refund_currency_symbol+purchase.refund_amount,refundPeriodInDays:purchase.refund_period_in_days,renewDate:purchase.renew_date,renewMoment:purchase.renew_date&&purchase.renew_date>"0"?_i18nCalypso2.default.moment(purchase.renew_date):null,siteId:Number(purchase.blog_id),siteName:purchase.blogname,subscribedDate:purchase.subscribed_date,subscriptionStatus:purchase.subscription_status,tagLine:purchase.tag_line,userId:Number(purchase.user_id)};if("credit_card"===purchase.payment_type){var payment=(0,_assign2.default)({},object.payment,{creditCard:{id:Number(purchase.payment_card_id),type:purchase.payment_card_type,number:Number(purchase.payment_details),expiryDate:purchase.payment_expiry,expiryMoment:purchase.payment_expiry?_i18nCalypso2.default.moment(purchase.payment_expiry,"MM/YY"):null}});return(0,_assign2.default)({},object,{payment:payment})}return object}function createPurchasesArray(dataTransferObject){if(!Array.isArray(dataTransferObject)){return[]}return(0,_sort2.default)(dataTransferObject.map(createPurchaseObject))}exports.default={createPurchaseObject:createPurchaseObject,createPurchasesArray:createPurchasesArray};module.exports=exports["default"]},1914:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.connectDispatcher=undefined;var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _dispatcher=__webpack_require__(38);var _dispatcher2=_interopRequireDefault(_dispatcher);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _find=__webpack_require__(33);var _find2=_interopRequireDefault(_find);var _identity=__webpack_require__(110);var _identity2=_interopRequireDefault(_identity);var _isFunction=__webpack_require__(85);var _isFunction2=_interopRequireDefault(_isFunction);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var firstCallable=function firstCallable(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return(0,_find2.default)(args,_isFunction2.default)};var mergeProps=function mergeProps(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}return _assign2.default.apply(Object,[{}].concat(args))};var dispatchObject=function dispatchObject(action){return _dispatcher2.default.handleViewAction(action)};var dispatchThunk=function dispatchThunk(thunk){return thunk(dispatchObject)};var dispatch=function dispatch(action){return(0,_isFunction2.default)(action)?dispatchThunk(action):dispatchObject(action)};var connectDispatcher=exports.connectDispatcher=function connectDispatcher(fromState,fromDispatch){return function(Component){return function(props){return _react2.default.createElement(Component,mergeProps(props,firstCallable(fromState,_identity2.default)({}),firstCallable(fromDispatch,_identity2.default)(dispatch)),props.children)}}}},2001:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setPostType=setPostType;exports.setPostTypeFieldValue=setPostTypeFieldValue;exports.advancedSettingsFetch=advancedSettingsFetch;exports.advancedSettingsReceive=advancedSettingsReceive;exports.advancedSettingsFail=advancedSettingsFail;exports.startExport=startExport;exports.exportStarted=exportStarted;exports.exportStatusFetch=exportStatusFetch;exports.exportFailed=exportFailed;exports.exportComplete=exportComplete;exports.clearExport=clearExport;var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);var _actionTypes=__webpack_require__(3);var _selectors=__webpack_require__(1674);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function setPostType(postType){return{type:_actionTypes.EXPORT_POST_TYPE_SET,postType:postType}}function setPostTypeFieldValue(siteId,postType,fieldName,value){return{type:_actionTypes.EXPORT_POST_TYPE_FIELD_SET,siteId:siteId,postType:postType,fieldName:fieldName,value:value}}function advancedSettingsFetch(siteId){return function(dispatch,getState){if(siteId===null||typeof siteId==="undefined"){return}if(getState().siteSettings.exporter.fetchingAdvancedSettings[siteId]===true){return}dispatch({type:_actionTypes.EXPORT_ADVANCED_SETTINGS_FETCH,siteId:siteId});var updateExportSettings=function updateExportSettings(settings){return dispatch(advancedSettingsReceive(siteId,settings))};var fetchFail=function fetchFail(error){return dispatch(advancedSettingsFail(siteId,error))};return _wp2.default.undocumented().getExportSettings(siteId).then(updateExportSettings).catch(fetchFail)}}function advancedSettingsReceive(siteId,advancedSettings){return{type:_actionTypes.EXPORT_ADVANCED_SETTINGS_RECEIVE,siteId:siteId,advancedSettings:advancedSettings}}function advancedSettingsFail(siteId,error){return{type:_actionTypes.EXPORT_ADVANCED_SETTINGS_FETCH_FAIL,siteId:siteId,error:error}}function startExport(siteId){var _ref=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var _ref$exportAll=_ref.exportAll;var exportAll=_ref$exportAll===undefined?true:_ref$exportAll;return function(dispatch,getState){if(!siteId){return}dispatch({type:_actionTypes.EXPORT_START_REQUEST,siteId:siteId,exportAll:exportAll});var advancedSettings=(0,_selectors.prepareExportRequest)(getState(),siteId,{exportAll:exportAll});var success=function success(){return dispatch(exportStarted(siteId))};var failure=function failure(error){return dispatch(exportFailed(siteId,error))};return _wp2.default.undocumented().startExport(siteId,advancedSettings).then(success).catch(failure)}}function exportStarted(siteId){return{type:_actionTypes.EXPORT_STARTED,siteId:siteId}}function exportStatusFetch(siteId){return function(dispatch){dispatch({type:_actionTypes.EXPORT_STATUS_FETCH,siteId:siteId});var failure=function failure(error){dispatch(exportFailed(siteId,error))};var success=function success(){var response=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];switch(response.status){case"finished":return dispatch(exportComplete(siteId,response.attachment_url));case"running":return}return failure(response)};return _wp2.default.undocumented().getExport(siteId,0).then(success).catch(failure)}}function exportFailed(siteId,error){return{type:_actionTypes.EXPORT_FAILURE,siteId:siteId,error:error}}function exportComplete(siteId,downloadURL){return{type:_actionTypes.EXPORT_COMPLETE,siteId:siteId,downloadURL:downloadURL}}function clearExport(siteId){return{type:_actionTypes.EXPORT_CLEAR,siteId:siteId}}},2002:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isRequestingGuidedTransferStatus=isRequestingGuidedTransferStatus;exports.isGuidedTransferInProgress=isGuidedTransferInProgress;exports.isGuidedTransferAwaitingPurchase=isGuidedTransferAwaitingPurchase;function isRequestingGuidedTransferStatus(state,siteId){return state.sites.guidedTransfer.isFetching[siteId]===true}function isGuidedTransferInProgress(state,siteId){var status=state.sites.guidedTransfer.status[siteId];if(!status){return false}return status.upgrade_purchased&&status.host_details_entered}function isGuidedTransferAwaitingPurchase(state,siteId){var status=state.sites.guidedTransfer.status[siteId];if(!status){return false}return!status.upgrade_purchased&&status.host_details_entered}},2018:function(module,exports,__webpack_require__){var copyObjectWith=__webpack_require__(737),createAssigner=__webpack_require__(205),keysIn=__webpack_require__(158);var assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObjectWith(source,keysIn(source),object,customizer)});module.exports=assignInWith},2019:function(module,exports,__webpack_require__){var baseCastFunction=__webpack_require__(264),baseFor=__webpack_require__(385),keysIn=__webpack_require__(158);function forIn(object,iteratee){return object==null?object:baseFor(object,baseCastFunction(iteratee),keysIn)}module.exports=forIn},2021:function(module,exports,__webpack_require__){module.exports={assign:__webpack_require__(29),assignIn:__webpack_require__(784),assignInWith:__webpack_require__(2018),assignWith:__webpack_require__(3172),create:__webpack_require__(3173),defaults:__webpack_require__(3174),defaultsDeep:__webpack_require__(3175),extend:__webpack_require__(786),extendWith:__webpack_require__(3178),findKey:__webpack_require__(738),findLastKey:__webpack_require__(3179),forIn:__webpack_require__(2019),forInRight:__webpack_require__(3180),forOwn:__webpack_require__(256),forOwnRight:__webpack_require__(3181),functions:__webpack_require__(3182),functionsIn:__webpack_require__(3183),get:__webpack_require__(30),has:__webpack_require__(361),hasIn:__webpack_require__(787),invert:__webpack_require__(3185),invertBy:__webpack_require__(3186),invoke:__webpack_require__(677),keys:__webpack_require__(94),keysIn:__webpack_require__(158),mapKeys:__webpack_require__(270),mapValues:__webpack_require__(84),merge:__webpack_require__(56),mergeWith:__webpack_require__(739),omit:__webpack_require__(18),omitBy:__webpack_require__(98),pick:__webpack_require__(72),pickBy:__webpack_require__(347),result:__webpack_require__(2242),set:__webpack_require__(788),setWith:__webpack_require__(3195),toPairs:__webpack_require__(212),toPairsIn:__webpack_require__(3196),transform:__webpack_require__(682),unset:__webpack_require__(3197),values:__webpack_require__(188),valuesIn:__webpack_require__(3199)}},2070:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _reactRedux=__webpack_require__(21);var _selectors=__webpack_require__(1530);var _actions=__webpack_require__(1546);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var QuerySitePurchases=function(_Component){(0,_inherits3.default)(QuerySitePurchases,_Component);function QuerySitePurchases(){(0,_classCallCheck3.default)(this,QuerySitePurchases);return(0,_possibleConstructorReturn3.default)(this,(0,
_getPrototypeOf2.default)(QuerySitePurchases).apply(this,arguments))}(0,_createClass3.default)(QuerySitePurchases,[{key:"requestSitePurchases",value:function requestSitePurchases(){var props=arguments.length<=0||arguments[0]===undefined?this.props:arguments[0];this.props.fetchSitePurchases(props.siteId)}},{key:"componentWillMount",value:function componentWillMount(){this.requestSitePurchases()}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(nextProps.requesting||!nextProps.siteId||this.props.siteId===nextProps.siteId){return}this.requestSitePurchases(nextProps)}},{key:"render",value:function render(){return null}}]);return QuerySitePurchases}(_react.Component);QuerySitePurchases.propTypes={siteId:_react.PropTypes.number.isRequired,requesting:_react.PropTypes.bool.isRequired,fetchSitePurchases:_react.PropTypes.func.isRequired};exports.default=(0,_reactRedux.connect)(function(state){return{requesting:(0,_selectors.isFetchingSitePurchases)(state)}},{fetchSitePurchases:_actions.fetchSitePurchases})(QuerySitePurchases);module.exports=exports["default"]},2153:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _omit=__webpack_require__(18);var _omit2=_interopRequireDefault(_omit);var _formButton=__webpack_require__(337);var _formButton2=_interopRequireDefault(_formButton);var _spinner=__webpack_require__(350);var _spinner2=_interopRequireDefault(_spinner);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"SpinnerButton",propTypes:{disabled:_react.PropTypes.bool,loading:_react.PropTypes.bool,text:_react.PropTypes.string,loadingText:_react.PropTypes.string,size:_react.PropTypes.number},getDefaultProps:function getDefaultProps(){return{size:24,loading:false}},render:function render(){var _props=this.props;var loading=_props.loading;var text=_props.text;var loadingText=_props.loadingText;var size=_props.size;var disabled=_props.disabled;var buttonProps=(0,_omit2.default)(this.props,["loading","loadingText","text","size","disabled"]);return _react2.default.createElement("div",null,_react2.default.createElement(_formButton2.default,(0,_extends3.default)({disabled:loading||disabled},buttonProps),loading?loadingText:text),loading&&_react2.default.createElement(_spinner2.default,{size:size,className:"export-card__spinner-button"}))}});module.exports=exports["default"]},2154:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _mixin=__webpack_require__(105);var _mixin2=_interopRequireDefault(_mixin);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _includes=__webpack_require__(34);var _includes2=_interopRequireDefault(_includes);var _constants=__webpack_require__(1597);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _errorPane=__webpack_require__(2555);var _errorPane2=_interopRequireDefault(_errorPane);var _importerHeader=__webpack_require__(2556);var _importerHeader2=_interopRequireDefault(_importerHeader);var _importingPane=__webpack_require__(2559);var _importingPane2=_interopRequireDefault(_importingPane);var _uploadingPane=__webpack_require__(2560);var _uploadingPane2=_interopRequireDefault(_uploadingPane);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var compactStates=[_constants.appStates.DISABLED,_constants.appStates.INACTIVE],importingStates=[_constants.appStates.IMPORT_FAILURE,_constants.appStates.IMPORT_SUCCESS,_constants.appStates.IMPORTING,_constants.appStates.MAP_AUTHORS],uploadingStates=[_constants.appStates.READY_FOR_UPLOAD,_constants.appStates.UPLOAD_FAILURE,_constants.appStates.UPLOAD_SUCCESS,_constants.appStates.UPLOADING];exports.default=_react2.default.createClass({displayName:"FileImporter",mixins:[_mixin2.default],propTypes:{importerData:_react.PropTypes.shape({title:_react.PropTypes.string.isRequired,icon:_react.PropTypes.string.isRequired,description:_react.PropTypes.oneOfType([_react.PropTypes.string,_react.PropTypes.node]).isRequired,uploadDescription:_react.PropTypes.oneOfType([_react.PropTypes.string,_react.PropTypes.node])}).isRequired,importerStatus:_react.PropTypes.shape({errorData:_react.PropTypes.shape({type:_react.PropTypes.string.isRequired,description:_react.PropTypes.string.isRequired}),filename:_react.PropTypes.string,importerState:_react.PropTypes.string.isRequired,percentComplete:_react.PropTypes.number,siteTitle:_react.PropTypes.string.isRequired,statusMessage:_react.PropTypes.string})},render:function render(){var _props$importerData=this.props.importerData;var title=_props$importerData.title;var icon=_props$importerData.icon;var description=_props$importerData.description;var uploadDescription=_props$importerData.uploadDescription;var site=this.props.site;var state=this.props.importerStatus,isEnabled=_constants.appStates.DISABLED!==state.importerState,cardClasses=(0,_classnames2.default)("importer__shell",{"is-compact":(0,_includes2.default)(compactStates,state.importerState),"is-disabled":!isEnabled});return _react2.default.createElement(_card2.default,{className:cardClasses},_react2.default.createElement(_importerHeader2.default,(0,_extends3.default)({importerStatus:state},{icon:icon,title:title,description:description,isEnabled:isEnabled,site:site})),state.errorData&&_react2.default.createElement(_errorPane2.default,{type:state.errorData.type,description:state.errorData.description}),(0,_includes2.default)(importingStates,state.importerState)&&_react2.default.createElement(_importingPane2.default,{importerStatus:state,site:this.props.site}),(0,_includes2.default)(uploadingStates,state.importerState)&&_react2.default.createElement(_uploadingPane2.default,{description:uploadDescription,importerStatus:state}))}});module.exports=exports["default"]},2173:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var ActionPanelBody=React.createClass({displayName:"ActionPanelBody",render:function render(){return React.createElement("div",{className:"settings-action-panel__body"},this.props.children)}});module.exports=ActionPanelBody},2174:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),classNames=__webpack_require__(11);var ActionPanelFigure=React.createClass({displayName:"ActionPanelFigure",propTypes:{inlineBodyText:React.PropTypes.bool},getDefaultProps:function getDefaultProps(){return{inlineBodyText:false}},render:function render(){var figureClasses=classNames({"settings-action-panel__figure":true,"is-inline-body-text":this.props.inlineBodyText});return React.createElement("div",{className:figureClasses},this.props.children)}});module.exports=ActionPanelFigure},2175:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var ActionPanelFooter=React.createClass({displayName:"ActionPanelFooter",render:function render(){return React.createElement("div",{className:"settings-action-panel__footer"},this.props.children)}});module.exports=ActionPanelFooter},2176:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var Card=__webpack_require__(145);var ActionPanel=React.createClass({displayName:"ActionPanel",render:function render(){return React.createElement(Card,{className:"settings-action-panel"},this.props.children)}});module.exports=ActionPanel},2177:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1);var ActionPanelTitle=React.createClass({displayName:"ActionPanelTitle",render:function render(){return React.createElement("h2",{className:"settings-action-panel__title"},this.props.children)}});module.exports=ActionPanelTitle},2178:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _dialog=__webpack_require__(148);var _dialog2=_interopRequireDefault(_dialog);var _paths=__webpack_require__(652);var _paths2=_interopRequireDefault(_paths);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var DeleteSiteWarningDialog=function DeleteSiteWarningDialog(_ref){var isVisible=_ref.isVisible;var onClose=_ref.onClose;return _react2.default.createElement(_dialog2.default,{isVisible:isVisible,buttons:[{action:"dismiss",label:_i18nCalypso2.default.translate("Dismiss")},_react2.default.createElement("a",{className:"button is-primary",href:_paths2.default.list()},_i18nCalypso2.default.translate("Manage Purchases",{context:"button label"}))],onClose:onClose,className:"delete-site-warning-dialog"},_react2.default.createElement("h1",null,_i18nCalypso2.default.translate("Premium Upgrades")),_react2.default.createElement("p",null,_i18nCalypso2.default.translate("You have active premium upgrades on your site. "+"Please cancel your upgrades prior to deleting your site.")))};DeleteSiteWarningDialog.propTypes={isVisible:_react.PropTypes.bool.isRequired,onClose:_react.PropTypes.func.isRequired};exports.default=DeleteSiteWarningDialog;module.exports=exports["default"]},2240:function(module,exports,__webpack_require__){var arrayFilter=__webpack_require__(376),isFunction=__webpack_require__(85);function baseFunctions(object,props){return arrayFilter(props,function(key){return isFunction(object[key])})}module.exports=baseFunctions},2241:function(module,exports,__webpack_require__){var baseInverter=__webpack_require__(3165);function createInverter(setter,toIteratee){return function(object,iteratee){return baseInverter(object,setter,toIteratee(iteratee),{})}}module.exports=createInverter},2286:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _reactRedux=__webpack_require__(21);var _redux=__webpack_require__(6);var _selectors=__webpack_require__(2002);var _actions=__webpack_require__(3054);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var QuerySiteGuidedTransfer=function(_Component){(0,_inherits3.default)(QuerySiteGuidedTransfer,_Component);function QuerySiteGuidedTransfer(props){(0,_classCallCheck3.default)(this,QuerySiteGuidedTransfer);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(QuerySiteGuidedTransfer).call(this,props));_this.request=_this.request.bind(_this);return _this}(0,_createClass3.default)(QuerySiteGuidedTransfer,[{key:"request",value:function request(){var props=arguments.length<=0||arguments[0]===undefined?this.props:arguments[0];if(!props.isRequesting&&props.siteId){props.requestGuidedTransferStatus(props.siteId)}}},{key:"componentWillMount",value:function componentWillMount(){this.request()}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(this.props.siteId!==nextProps.siteId){this.request(nextProps)}}},{key:"render",value:function render(){return null}}]);return QuerySiteGuidedTransfer}(_react.Component);QuerySiteGuidedTransfer.propTypes={siteId:_react.PropTypes.number,isRequesting:_react.PropTypes.bool};QuerySiteGuidedTransfer.defaultProps={requestGuidedTransferStatus:function requestGuidedTransferStatus(){}};var mapStateToProps=function mapStateToProps(state,ownProps){return{isRequesting:(0,_selectors.isRequestingGuidedTransferStatus)(state,ownProps.siteId)}};var mapDispatchToProps=function mapDispatchToProps(dispatch){return(0,_redux.bindActionCreators)({requestGuidedTransferStatus:_actions.requestGuidedTransferStatus},dispatch)};exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(QuerySiteGuidedTransfer);module.exports=exports["default"]},2317:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MetaTitleEditor=undefined;var _defineProperty2=__webpack_require__(7);var _defineProperty3=_interopRequireDefault(_defineProperty2);var _extends3=__webpack_require__(19);var _extends4=_interopRequireDefault(_extends3);var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _values2=__webpack_require__(188);var _values3=_interopRequireDefault(_values2);var _property2=__webpack_require__(153);var _property3=_interopRequireDefault(_property2);var _pick2=__webpack_require__(72);var _pick3=_interopRequireDefault(_pick2);var _noop2=__webpack_require__(36);var _noop3=_interopRequireDefault(_noop2);var _matches2=__webpack_require__(387);var _matches3=_interopRequireDefault(_matches2);var _map2=__webpack_require__(50);var _map3=_interopRequireDefault(_map2);var _isUndefined2=__webpack_require__(681);var _isUndefined3=_interopRequireDefault(_isUndefined2);var _isString2=__webpack_require__(162);var _isString3=_interopRequireDefault(_isString2);var _identity2=__webpack_require__(110);var _identity3=_interopRequireDefault(_identity2);var _get2=__webpack_require__(30);var _get3=_interopRequireDefault(_get2);var _findKey2=__webpack_require__(738);var _findKey3=_interopRequireDefault(_findKey2);var _difference2=__webpack_require__(112);var _difference3=_interopRequireDefault(_difference2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _segmentedControl=__webpack_require__(1488);var _segmentedControl2=_interopRequireDefault(_segmentedControl);var _tokenField=__webpack_require__(1614);var _tokenField2=_interopRequireDefault(_tokenField);var _i18nCalypso=__webpack_require__(13);var _mappings=__webpack_require__(716);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var titleTypes=function titleTypes(translate){return[{value:"frontPage",label:translate("Front Page")},{value:"posts",label:translate("Posts")},{value:"pages",label:translate("Pages")},{value:"groups",label:translate("Tags")},{value:"archives",label:translate("Archives")}]};var getValidTokens=function getValidTokens(translate){return{siteName:translate("Site Name"),tagline:translate("Tagline"),postTitle:translate("Post Title"),pageTitle:translate("Page Title"),groupTitle:translate("Category/Tag Title"),date:translate("Date")}};var tokenMap={frontPage:["siteName","tagline"],posts:["siteName","tagline","postTitle"],pages:["siteName","tagline","pageTitle"],groups:["siteName","tagline","groupTitle"],archives:["siteName","tagline","date"]};var tokenize=function tokenize(translate){return function(value){if(!(0,_isString3.default)(value)){return value}var type=(0,_findKey3.default)(getValidTokens(translate),(0,_matches3.default)(value));return(0,_isUndefined3.default)(type)?{type:"string",isBorderless:true,value:value}:{type:type,value:value}}};var MetaTitleEditor=exports.MetaTitleEditor=function(_Component){(0,_inherits3.default)(MetaTitleEditor,_Component);function MetaTitleEditor(props){(0,_classCallCheck3.default)(this,MetaTitleEditor);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(MetaTitleEditor).call(this,props));_this.state={type:"frontPage"};_this.switchType=_this.switchType.bind(_this);_this.updateTitleFormat=_this.updateTitleFormat.bind(_this);return _this}(0,_createClass3.default)(MetaTitleEditor,[{key:"switchType",value:function switchType(_ref){var type=_ref.value;this.setState({type:type})}},{key:"updateTitleFormat",value:function updateTitleFormat(values){var _props=this.props;var onChange=_props.onChange;var translate=_props.translate;var titleFormats=_props.titleFormats;var type=this.state.type;var tokens=(0,_mappings.removeBlanks)((0,_map3.default)(values,tokenize(translate)));onChange((0,_extends4.default)({},titleFormats,(0,_defineProperty3.default)({},type,tokens)))}},{key:"render",value:function render(){var _props2=this.props;var disabled=_props2.disabled;var translate=_props2.translate;var titleFormats=_props2.titleFormats;var type=this.state.type;var validTokens=getValidTokens(translate);var values=(0,_map3.default)((0,_get3.default)(titleFormats,type,[]),function(token){return"string"!==token.type?(0,_extends4.default)({},token,{value:validTokens[token.type]}):(0,_extends4.default)({},token,{isBorderless:true})});var suggestions=(0,_difference3.default)((0,_values3.default)((0,_pick3.default)(validTokens,tokenMap[type])),(0,_map3.default)(values,(0,_property3.default)("value")));return _react2.default.createElement("div",{className:"meta-title-editor"},_react2.default.createElement(_segmentedControl2.default,{initialSelected:type,options:titleTypes(translate),onSelect:this.switchType}),_react2.default.createElement(_tokenField2.default,{disabled:disabled,onChange:this.updateTitleFormat,saveTransform:_identity3.default,suggestions:suggestions,value:values}))}}]);return MetaTitleEditor}(_react.Component);MetaTitleEditor.propTypes={disabled:_react.PropTypes.bool,onChange:_react.PropTypes.func,titleFormats:_react.PropTypes.object.isRequired};MetaTitleEditor.defaultProps={disabled:false,onChange:_noop3.default,translate:_identity3.default};exports.default=(0,_i18nCalypso.localize)(MetaTitleEditor)},2324:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _map=__webpack_require__(50);var _map2=_interopRequireDefault(_map);var _i18nCalypso=__webpack_require__(13);var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Component=_react2.default.Component;var PropTypes=_react2.default.PropTypes;var noop=function noop(){};var undocumented=_wp2.default.undocumented();var Timezone=function(_Component){(0,_inherits3.default)(Timezone,_Component);function Timezone(){(0,_classCallCheck3.default)(this,Timezone);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(Timezone).call(this));_this.onSelect=_this.onSelect.bind(_this);_this.state={zonesByContinent:[],manualUtcOffsets:[]};return _this}(0,_createClass3.default)(Timezone,[{key:"componentWillMount",value:function componentWillMount(){var _this2=this;undocumented.timezones(function(err,zones){if(err){return}var timezones={zonesByContinent:zones.timezones_by_continent,manualUtcOffsets:zones.manual_utc_offsets};_this2.setState(timezones)})}},{key:"onSelect",value:function onSelect(event){this.props.onSelect(event.target.value)}},{key:"renderOptionsByContinent",value:function renderOptionsByContinent(){var zonesByContinent=this.state.zonesByContinent;return(0,_map2.default)(zonesByContinent,function(countries,continent){return _react2.default.createElement("optgroup",{label:continent,key:continent},(0,_map2.default)(countries,function(_ref,index){var value=_ref.value;var label=_ref.label;return _react2.default.createElement("option",{value:value,key:index},label)}))})}},{key:"renderManualUtcOffsets",value:function renderManualUtcOffsets(){return _react2.default.createElement("optgroup",{label:this.props.translate("Manual Offsets")},(0,_map2.default)(this.state.manualUtcOffsets,function(_ref2,index){var value=_ref2.value;var label=_ref2.label;return _react2.default.createElement("option",{value:value,key:index},label)}))}},{key:"render",value:function render(){var selectedZone=this.props.selectedZone;return _react2.default.createElement("select",{onChange:this.onSelect,value:selectedZone||null},this.renderOptionsByContinent(),_react2.default.createElement("optgroup",{label:"UTC"},_react2.default.createElement("option",{value:"UTC"},"UTC")),this.renderManualUtcOffsets())}}]);return Timezone}(Component);Timezone.defaultProps={onSelect:noop};Timezone.propTypes={selectedZone:PropTypes.string,onSelect:PropTypes.func};exports.default=(0,_i18nCalypso.localize)(Timezone);module.exports=exports["default"]},2392:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _slicedToArray2=__webpack_require__(262);var _slicedToArray3=_interopRequireDefault(_slicedToArray2);exports.fromApi=fromApi;exports.toApi=toApi;var _find=__webpack_require__(33);var _find2=_interopRequireDefault(_find);var _immutable=__webpack_require__(108);var _constants=__webpack_require__(1597);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var importerStateMap=[[_constants.appStates.CANCEL_PENDING,"cancel"],[_constants.appStates.DEFUNCT,"importStopped"],[_constants.appStates.DISABLED,"disabled"],[_constants.appStates.EXPIRE_PENDING,"expire"],[_constants.appStates.IMPORT_FAILURE,"importFailure"],[_constants.appStates.IMPORT_SUCCESS,"importSuccess"],[_constants.appStates.IMPORTING,"importing"],[_constants.appStates.INACTIVE,"importer-inactive"],[_constants.appStates.MAP_AUTHORS,"importer-map-authors"],[_constants.appStates.READY_FOR_UPLOAD,"importer-ready-for-upload"],[_constants.appStates.UPLOAD_SUCCESS,"uploadSuccess"],[_constants.appStates.UPLOAD_FAILURE,"importer-upload-failure"],[_constants.appStates.UPLOADING,"importer-uploading"]];function apiToAppState(state){return(0,_find2.default)(importerStateMap,function(_ref){var _ref2=(0,_slicedToArray3.default)(_ref,2);var api=_ref2[1];return api===state})[0]}function appStateToApi(state){return(0,_find2.default)(importerStateMap,function(_ref3){var _ref4=(0,_slicedToArray3.default)(_ref3,1);var appState=_ref4[0];return appState===state})[1]}function generateSourceAuthorIds(customData){if(!customData.sourceAuthors){return customData}return(0,_assign2.default)({},customData,{sourceAuthors:customData.sourceAuthors.map(function(author){return author.id?author:(0,_assign2.default)({},author,{id:author.login})})})}function replaceUserInfoWithIds(customData){if(!customData.sourceAuthors){return customData}return(0,_assign2.default)({},customData,{sourceAuthors:customData.sourceAuthors.map(function(author){return author.mappedTo?(0,_assign2.default)({},author,{mappedTo:author.mappedTo.ID}):author})})}function fromApi(state){var importerId=state.importId;var importStatus=state.importStatus;var type=state.type;var progress=state.progress;var customData=state.customData;var siteId=state.siteId;return{importerId:importerId,importerState:apiToAppState(importStatus),type:"importer-type-"+type,progress:(0,_immutable.fromJS)(progress),customData:(0,_immutable.fromJS)(generateSourceAuthorIds(customData)),site:{ID:siteId}}}function toApi(state){var importerId=state.importerId;var site=state.site;var type=state.type;var importerState=state.importerState;var customData=state.customData;var _state$progress=state.progress;var progress=_state$progress===undefined?undefined:_state$progress;return(0,_assign2.default)({},{importerId:importerId,progress:progress},{importStatus:appStateToApi(importerState)},site&&site.ID?{siteId:site.ID}:{},type&&{type:type.replace("importer-type-","")},customData?{customData:replaceUserInfoWithIds(customData)}:{})}},2393:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _epsilon=__webpack_require__(3064);var _epsilon2=_interopRequireDefault(_epsilon);exports.getState=getState;var _immutable=__webpack_require__(108);var _immutable2=_interopRequireDefault(_immutable);var _partial=__webpack_require__(254);var _partial2=_interopRequireDefault(_partial);var _actionTypes=__webpack_require__(3);var _constants=__webpack_require__(1597);var _store=__webpack_require__(86);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var initialState=_immutable2.default.fromJS({count:0,importers:{},importerLocks:{},api:{isHydrated:false,isFetching:false,retryCount:0}});var equals=function equals(a,b){return a===b};var increment=function increment(a){return a+1};var removableStates=[_constants.appStates.CANCEL_PENDING,_constants.appStates.DEFUNCT];var shouldRemove=function shouldRemove(importer){return removableStates.some((0,_partial2.default)(equals,importer.get("importerState")))};var adjustImporterLock=function adjustImporterLock(state,_ref){var action=_ref.action;switch(action.type){case _actionTypes.IMPORTS_IMPORT_LOCK:return state.setIn(["importerLocks",action.importerId],true);case _actionTypes.IMPORTS_IMPORT_UNLOCK:return state.setIn(["importerLocks",action.importerId],false);default:return state}};var ImporterStore=(0,_store.createReducerStore)(function(state,payload){var action=payload.action;var newState=void 0;switch(action.type){case _actionTypes.IMPORTS_STORE_RESET:newState=initialState;break;case _actionTypes.IMPORTS_FETCH:newState=state.setIn(["api","isFetching"],true);break;case _actionTypes.IMPORTS_FETCH_FAILED:newState=state.setIn(["api","isFetching"],false).updateIn(["api","retryCount"],increment);break;case _actionTypes.IMPORTS_FETCH_COMPLETED:newState=state.setIn(["api","isFetching"],false).setIn(["api","isHydrated"],true).setIn(["api","retryCount"],0);break;case _actionTypes.IMPORTS_IMPORT_CANCEL:case _actionTypes.IMPORTS_IMPORT_RESET:newState=state.update("importers",function(importers){return importers.filterNot(function(importer){return importer.get("importerId")===action.importerId})});break;case _actionTypes.IMPORTS_UPLOAD_FAILED:newState=state.setIn(["importers",action.importerId,"importerState"],_constants.appStates.UPLOAD_FAILURE).setIn(["importers",action.importerId,"errorData"],{type:"uploadError",description:action.error});break;case _actionTypes.IMPORTS_UPLOAD_COMPLETED:newState=state.deleteIn(["importers"],action.importerId).setIn(["importers",action.importerStatus.importerId],_immutable2.default.fromJS(action.importerStatus));break;case _actionTypes.IMPORTS_AUTHORS_START_MAPPING:newState=state.setIn(["importers",action.importerId,"importerState"],_constants.appStates.MAP_AUTHORS);break;case _actionTypes.IMPORTS_AUTHORS_SET_MAPPING:newState=state.updateIn(["importers",action.importerId,"customData","sourceAuthors"],function(authors){return authors.map(function(author){if(action.sourceAuthor.id!==author.get("id")){return author}return author.set("mappedTo",action.targetAuthor)})});break;case _actionTypes.IMPORTS_IMPORT_RECEIVE:newState=state.setIn(["api","isHydrated"],true);if(newState.getIn(["importerLocks",action.importerStatus.importerId],false)){break}if(action.importerStatus.importerState===_constants.appStates.DEFUNCT){newState=newState.deleteIn(["importers",action.importerStatus.importerId]);break}newState=newState.setIn(["importers",action.importerStatus.importerId],_immutable2.default.fromJS(action.importerStatus)).update("importers",function(importers){return importers.filterNot(shouldRemove)});break;case _actionTypes.IMPORTS_UPLOAD_SET_PROGRESS:newState=state.setIn(["importers",action.importerId,"percentComplete"],action.uploadLoaded/(action.uploadTotal+_epsilon2.default)*100);break;case _actionTypes.IMPORTS_IMPORT_START:var newImporter=_immutable2.default.fromJS({importerId:action.importerId,type:action.importerType,importerState:_constants.appStates.READY_FOR_UPLOAD,site:{ID:action.siteId}});newState=state.update("count",function(count){return count+1}).setIn(["importers",action.importerId],newImporter);break;case _actionTypes.IMPORTS_START_IMPORTING:newState=state.setIn(["importers",action.importerId,"importerState"],_constants.appStates.IMPORTING);break;case _actionTypes.IMPORTS_UPLOAD_START:newState=state.setIn(["importers",action.importerId,"importerState"],_constants.appStates.UPLOADING).setIn(["importers",action.importerId,"filename"],action.filename);break;default:newState=state;break}newState=adjustImporterLock(newState,payload);return newState},initialState);function getState(){return ImporterStore.get().toJS()}exports.default=ImporterStore},2395:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.resetForTesting=exports.EVERY_MINUTE=exports.EVERY_THIRTY_SECONDS=exports.EVERY_TEN_SECONDS=exports.EVERY_FIVE_SECONDS=exports.EVERY_SECOND=undefined;exports.add=add;exports.remove=remove;var _immutable=__webpack_require__(108);var EVERY_SECOND=exports.EVERY_SECOND=1e3;var EVERY_FIVE_SECONDS=exports.EVERY_FIVE_SECONDS=5*1e3;var EVERY_TEN_SECONDS=exports.EVERY_TEN_SECONDS=10*1e3;var EVERY_THIRTY_SECONDS=exports.EVERY_THIRTY_SECONDS=30*1e3;var EVERY_MINUTE=exports.EVERY_MINUTE=60*1e3;var initialState=(0,_immutable.fromJS)({nextId:1,periodTimers:{EVERY_SECOND:null,EVERY_FIVE_SECONDS:null,EVERY_TEN_SECONDS:null,EVERY_THIRTY_SECONDS:null,EVERY_MINUTE:null},actions:[]});var state=initialState;var increment=function increment(a){return a+1};var addToList=function addToList(item){return function(list){return list.push(item)}};var removeFromList=function removeFromList(id){return function(list){return list.filterNot(function(o){return o.get("id")===id})}};var resetForTesting=exports.resetForTesting=function resetForTesting(){state.get("periodTimers").forEach(clearTimeout);state=initialState};function add(period,onTick){var id=state.get("nextId");storeNewAction({id:id,period:period,onTick:onTick});scheduleNextRun();return id}function storeNewAction(_ref){var id=_ref.id;var period=_ref.period;var onTick=_ref.onTick;state=state.update("actions",addToList((0,_immutable.fromJS)({id:id,period:period,onTick:onTick}))).update("nextId",increment)}function remove(id){removeFromQueue(id);scheduleNextRun()}function removeFromQueue(id){state=state.update("actions",removeFromList(id))}function getPeriodActions(period){return state.get("actions").filter(function(a){return a.get("period")===period})}function hasPeriodActions(period){return state.get("actions").some(function(a){return a.get("period")===period})}function executePeriodActions(period){var callAction=function callAction(a){return a.get("onTick").call()||true};getPeriodActions(period).forEach(callAction);state=state.setIn(["periodTimers",period],null);scheduleNextRun()}function scheduleNextRun(){[EVERY_SECOND,EVERY_FIVE_SECONDS,EVERY_TEN_SECONDS,EVERY_THIRTY_SECONDS,EVERY_MINUTE].forEach(function(p){
if(!hasPeriodActions(p)){state=state.updateIn(["periodTimers",p],clearTimeout);return}if(!state.get("periodTimers").get(p)){state=state.setIn(["periodTimers",p],setTimeout(executePeriodActions,p,p))}})}},2540:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _postTypeOptions=__webpack_require__(2542);var _postTypeOptions2=_interopRequireDefault(_postTypeOptions);var _spinnerButton=__webpack_require__(2153);var _spinnerButton2=_interopRequireDefault(_spinnerButton);var _selectors=__webpack_require__(1674);var _selectors2=__webpack_require__(70);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AdvancedSettings=_react2.default.createClass({displayName:"AdvancedSettings",propTypes:{onSelectPostType:_react.PropTypes.func.isRequired,onClickExport:_react.PropTypes.func.isRequired,postType:_react.PropTypes.string},render:function render(){return _react2.default.createElement("div",{className:"export-card__advanced-settings"},_react2.default.createElement("h1",{className:"export-card__advanced-settings-title"},this.translate("Select specific content to export")),_react2.default.createElement("p",{className:"export-card__advanced-settings-description"},this.translate("Use the options below to select a specific content "+"type to download. You can select Posts, Pages, "+"or Feedback, and filter by the listed parameters. "+"After making your selection you can download your "+"content in an .xml file.")),_react2.default.createElement("div",{className:"export-card__advanced-settings-row"},_react2.default.createElement(_postTypeOptions2.default,{postType:"post",legend:this.translate("Posts")}),_react2.default.createElement(_postTypeOptions2.default,{postType:"page",legend:this.translate("Pages")}),_react2.default.createElement(_postTypeOptions2.default,{postType:"feedback",legend:this.translate("Feedback"),description:this.translate("Survey results etc.")})),_react2.default.createElement(_spinnerButton2.default,{className:"export-card__export-button",disabled:!this.props.isValid,loading:this.props.shouldShowProgress,isPrimary:true,onClick:this.props.onClickExport,text:this.translate("Export Selected Content"),loadingText:this.translate("Exporting")}))}});var mapStateToProps=function mapStateToProps(state,ownProps){var siteId=(0,_selectors2.getSelectedSiteId)(state);var postType=ownProps.postType;var isDateValid=(0,_selectors.isDateRangeValid)(state,siteId,postType);return{siteId:siteId,isValid:postType&&isDateValid}};exports.default=(0,_reactRedux.connect)(mapStateToProps)(AdvancedSettings);module.exports=exports["default"]},2541:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _flowRight2=__webpack_require__(156);var _flowRight3=_interopRequireDefault(_flowRight2);var _i18nCalypso=__webpack_require__(13);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _spinnerButton=__webpack_require__(2153);var _spinnerButton2=_interopRequireDefault(_spinnerButton);var _foldableCard=__webpack_require__(1486);var _foldableCard2=_interopRequireDefault(_foldableCard);var _interval=__webpack_require__(1887);var _interval2=_interopRequireDefault(_interval);var _advancedSettings=__webpack_require__(2540);var _advancedSettings2=_interopRequireDefault(_advancedSettings);var _actions=__webpack_require__(250);var _actions2=__webpack_require__(2001);var _selectors=__webpack_require__(1674);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ExportCard=function(_Component){(0,_inherits3.default)(ExportCard,_Component);function ExportCard(){(0,_classCallCheck3.default)(this,ExportCard);return(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(ExportCard).apply(this,arguments))}(0,_createClass3.default)(ExportCard,[{key:"componentWillMount",value:function componentWillMount(){this.props.advancedSettingsFetch(this.props.siteId)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(newProps){if(newProps.siteId!==this.props.siteId){this.props.advancedSettingsFetch(newProps.siteId)}}},{key:"render",value:function render(){var _props=this.props;var translate=_props.translate;var fetchStatus=_props.fetchStatus;var exportButton=_react2.default.createElement(_spinnerButton2.default,{className:"export-card__export-button",loading:this.props.shouldShowProgress,isPrimary:true,onClick:this.props.exportAll,text:translate("Export All"),loadingText:translate("Exporting")});return _react2.default.createElement("div",{className:"export-card"},_react2.default.createElement(_foldableCard2.default,{actionButtonIcon:"cog",header:_react2.default.createElement("div",null,_react2.default.createElement("h1",{className:"export-card__title"},translate("Export your content")),_react2.default.createElement("h2",{className:"export-card__subtitle"},translate("Or select specific content items to export"))),summary:exportButton,expandedSummary:exportButton},_react2.default.createElement(_advancedSettings2.default,{postType:this.props.postType,shouldShowProgress:this.props.shouldShowProgress,onSelectPostType:this.props.setPostType,onClickExport:this.props.exportSelectedItems})),this.props.isExporting&&_react2.default.createElement(_interval2.default,{onTick:fetchStatus,period:_interval.EVERY_SECOND}))}}]);return ExportCard}(_react.Component);var mapStateToProps=function mapStateToProps(state,_ref){var siteId=_ref.siteId;return{postType:(0,_selectors.getSelectedPostType)(state),shouldShowProgress:(0,_selectors.shouldShowProgress)(state,siteId),isExporting:(0,_selectors.isExporting)(state,siteId)}};var trackExportClick=function trackExportClick(){var scope=arguments.length<=0||arguments[0]===undefined?"all":arguments[0];return(0,_actions.recordTracksEvent)("calypso_export_start_button_click",{scope:scope})};var mapDispatchToProps=function mapDispatchToProps(dispatch,_ref2){var siteId=_ref2.siteId;return{advancedSettingsFetch:(0,_flowRight3.default)(dispatch,_actions2.advancedSettingsFetch),setPostType:(0,_flowRight3.default)(dispatch,_actions2.setPostType),fetchStatus:function fetchStatus(){return dispatch((0,_actions2.exportStatusFetch)(siteId))},exportAll:function exportAll(){return dispatch((0,_actions.withAnalytics)(trackExportClick(),(0,_actions2.startExport)(siteId)))},exportSelectedItems:function exportSelectedItems(){return dispatch((0,_actions.withAnalytics)(trackExportClick("selected"),(0,_actions2.startExport)(siteId,{exportAll:false})))}}};exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)((0,_i18nCalypso.localize)(ExportCard));module.exports=exports["default"]},2542:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _mixin=__webpack_require__(105);var _mixin2=_interopRequireDefault(_mixin);var _reactRedux=__webpack_require__(21);var _formRadio=__webpack_require__(1510);var _formRadio2=_interopRequireDefault(_formRadio);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _select=__webpack_require__(2543);var _select2=_interopRequireDefault(_select);var _tooltip=__webpack_require__(657);var _tooltip2=_interopRequireDefault(_tooltip);var _actions=__webpack_require__(2001);var _selectors=__webpack_require__(1674);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mapStateToProps=function mapStateToProps(state,ownProps){var siteId=state.ui.selectedSiteId;return{siteId:siteId,isDateValid:(0,_selectors.isDateRangeValid)(state,siteId,ownProps.postType),isEnabled:(0,_selectors.getSelectedPostType)(state)===ownProps.postType}};var mapDispatchToProps=function mapDispatchToProps(dispatch,ownProps){return{onSelect:function onSelect(){return dispatch((0,_actions.setPostType)(ownProps.postType))}}};var PostTypeOptions=_react2.default.createClass({displayName:"PostTypeOptions",mixins:[_mixin2.default],propTypes:{legend:_react.PropTypes.string.isRequired},render:function render(){var _this=this;var _props=this.props;var description=_props.description;var legend=_props.legend;var isDateValid=_props.isDateValid;var isEnabled=_props.isEnabled;var onSelect=_props.onSelect;var postType=_props.postType;var siteId=_props.siteId;var fields=["author","status","start_date","end_date","category"];var setRef=function setRef(fieldName){return function(c){if(fieldName==="start_date"){_this._startDate=c}}};return _react2.default.createElement("div",{className:"export-card__option-fieldset"},_react2.default.createElement(_formLabel2.default,{className:"export-card__option-fieldset-legend"},_react2.default.createElement(_formRadio2.default,{checked:isEnabled,onChange:onSelect}),_react2.default.createElement("span",{className:"export-card__option-fieldset-legend-text"},legend)),description&&_react2.default.createElement("p",{className:"export-card__option-fieldset-description"},description),_react2.default.createElement("div",{className:"export-card__option-fieldset-fields"},fields.map(function(fieldName){return _react2.default.createElement(_select2.default,{key:fieldName,ref:setRef(fieldName),siteId:siteId,postType:postType,fieldName:fieldName,isEnabled:isEnabled,isError:(fieldName==="start_date"||fieldName==="end_date")&&!isDateValid})})),_react2.default.createElement(_tooltip2.default,{context:this._startDate,status:"error",isVisible:isEnabled&&!this.props.isDateValid},this.translate("Selected start date is later than the end date")))}});exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)(PostTypeOptions);module.exports=exports["default"]},2543:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _object=__webpack_require__(2021);var _reactRedux=__webpack_require__(21);var _formSelect=__webpack_require__(1484);var _formSelect2=_interopRequireDefault(_formSelect);var _selectors=__webpack_require__(1674);var _actions=__webpack_require__(2001);var _i18nCalypso=__webpack_require__(13);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Select=function(_Component){(0,_inherits3.default)(Select,_Component);function Select(props){(0,_classCallCheck3.default)(this,Select);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(Select).call(this,props));_this.setValue=_this.setValue.bind(_this);return _this}(0,_createClass3.default)(Select,[{key:"setValue",value:function setValue(e){this.props.setValue(e.target.value)}},{key:"render",value:function render(){var _props=this.props;var isEnabled=_props.isEnabled;var isError=_props.isError;var postType=_props.postType;var shouldShowPlaceholders=_props.shouldShowPlaceholders;var value=_props.value;var fieldName=_props.fieldName;var fieldsForPostType=(0,_object.get)({post:["author","status","start_date","end_date","category"],page:["author","status","start_date","end_date"]},postType,[]);var label=(0,_object.get)({author:this.props.translate("Author"),status:this.props.translate("Status"),start_date:this.props.translate("Start Date"),end_date:this.props.translate("End Date"),category:this.props.translate("Category")},fieldName,"");if(fieldsForPostType.indexOf(this.props.fieldName)<0){return null}var options=this.props.options&&this.props.options.map(function(option,i){return _react2.default.createElement("option",{key:i,value:option.value},option.label)});return _react2.default.createElement(_formSelect2.default,{className:shouldShowPlaceholders?"export-card__placeholder-select":"",disabled:shouldShowPlaceholders||!isEnabled,isError:isEnabled&&isError,onChange:this.setValue,value:value},_react2.default.createElement("option",{value:""},label),options)}}]);return Select}(_react.Component);exports.default=Select;var mapStateToProps=function mapStateToProps(state,ownProps){var siteId=ownProps.siteId;var postType=ownProps.postType;var fieldName=ownProps.fieldName;var options=(0,_selectors.getPostTypeFieldOptions)(state,siteId,postType,fieldName);var value=(0,_selectors.getPostTypeFieldValue)(state,siteId,postType,fieldName);return{shouldShowPlaceholders:!options,options:options,value:value}};var mapDispatchToProps=function mapDispatchToProps(dispatch,ownProps){var siteId=ownProps.siteId;var postType=ownProps.postType;var fieldName=ownProps.fieldName;return{setValue:function setValue(value){return dispatch((0,_actions.setPostTypeFieldValue)(siteId,postType,fieldName,value))}}};exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps)((0,_i18nCalypso.localize)(Select));module.exports=exports["default"]},2544:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var GuidedTransferInProgress=function GuidedTransferInProgress(_ref){var translate=_ref.translate;return _react2.default.createElement(_card2.default,{className:"guided-transfer-card__in-progress"},_react2.default.createElement("div",{className:"guided-transfer-card__in-progress-icon"},_react2.default.createElement(_gridicon2.default,{icon:"time",size:48})),_react2.default.createElement("h1",{className:"guided-transfer-card__in-progress-title"},translate("Your site is being prepared for transfer")),_react2.default.createElement("p",null,translate("A Guided Transfer occurs over a 24 hour period. A Happiness Engineer "+"will work with you to set up a day to perform the transfer.")),_react2.default.createElement(_button2.default,{href:_support2.default.GUIDED_TRANSFER},translate("Learn more about Guided Transfers")))};exports.default=(0,_i18nCalypso.localize)(GuidedTransferInProgress);module.exports=exports["default"]},2545:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _reactRedux=__webpack_require__(21);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);var _formButton=__webpack_require__(337);var _formButton2=_interopRequireDefault(_formButton);var _selectors=__webpack_require__(106);var _selectors2=__webpack_require__(70);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Feature=function Feature(_ref){var children=_ref.children;return _react2.default.createElement("li",{className:"guided-transfer-card__feature-list-item"},_react2.default.createElement(_gridicon2.default,{className:"guided-transfer-card__feature-icon",size:18,icon:"checkmark"}),_react2.default.createElement("span",{className:"guided-transfer-card__feature-text"},children))};var GuidedTransferCard=function(_Component){(0,_inherits3.default)(GuidedTransferCard,_Component);function GuidedTransferCard(){(0,_classCallCheck3.default)(this,GuidedTransferCard);return(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(GuidedTransferCard).apply(this,arguments))}(0,_createClass3.default)(GuidedTransferCard,[{key:"render",value:function render(){var translate=this.props.translate;return _react2.default.createElement("div",null,_react2.default.createElement(_compact2.default,null,_react2.default.createElement("div",{className:"guided-transfer-card__options"},_react2.default.createElement("div",{className:"guided-transfer-card__options-header-title-container"},_react2.default.createElement("h1",{className:"guided-transfer-card__title"},translate("Guided Transfer")),_react2.default.createElement("h2",{className:"guided-transfer-card__subtitle"},_react2.default.createElement("span",{className:"guided-transfer-card__price"},"$129"),"",translate("One-time expense"))),_react2.default.createElement("div",{className:"guided-transfer-card__options-header-button-container"},_react2.default.createElement(_formButton2.default,{href:"/settings/export/guided/"+this.props.siteSlug,isPrimary:true},translate("Purchase a Guided Transfer"))))),_react2.default.createElement(_compact2.default,{className:"guided-transfer-card__details"},_react2.default.createElement("div",{className:"guided-transfer-card__details-container"},_react2.default.createElement("div",{className:"guided-transfer-card__details-text"},_react2.default.createElement("h1",{className:"guided-transfer-card__details-title"},translate("Hassle-free migration with two weeks of support")),translate("Have one of our Happiness Engineers {{strong}}transfer your "+"site{{/strong}} to a self-hosted WordPress.org installation with "+"one of our hosting partners.",{components:{strong:_react2.default.createElement("strong",null)}}),_react2.default.createElement("br",null),_react2.default.createElement("a",{href:"https://en.support.wordpress.com/guided-transfer/"},translate("Learn more."))),_react2.default.createElement("ul",{className:"guided-transfer-card__feature-list"},_react2.default.createElement(Feature,null,translate("Seamless content transfer")),_react2.default.createElement(Feature,null,translate("Install and configure plugins to keep your functionality")),_react2.default.createElement(Feature,null,translate("Switch your domain over {{link}}and more!{{/link}}",{components:{link:_react2.default.createElement("a",{href:"https://en.support.wordpress.com/guided-transfer/"})}}))))))}}]);return GuidedTransferCard}(_react.Component);var mapStateToProps=function mapStateToProps(state){return{siteId:(0,_selectors2.getSelectedSiteId)(state),siteSlug:(0,_selectors.getSiteSlug)(state,(0,_selectors2.getSelectedSiteId)(state))}};exports.default=(0,_reactRedux.connect)(mapStateToProps)((0,_i18nCalypso.localize)(GuidedTransferCard));module.exports=exports["default"]},2546:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _querySiteGuidedTransfer=__webpack_require__(2286);var _querySiteGuidedTransfer2=_interopRequireDefault(_querySiteGuidedTransfer);var _selectors=__webpack_require__(70);var _selectors2=__webpack_require__(106);var _selectors3=__webpack_require__(2002);var _notices=__webpack_require__(2547);var _notices2=_interopRequireDefault(_notices);var _exportCard=__webpack_require__(2541);var _exportCard2=_interopRequireDefault(_exportCard);var _guidedTransferCard=__webpack_require__(2545);var _guidedTransferCard2=_interopRequireDefault(_guidedTransferCard);var _inProgress=__webpack_require__(2544);var _inProgress2=_interopRequireDefault(_inProgress);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Exporter=function(_Component){(0,_inherits3.default)(Exporter,_Component);function Exporter(){(0,_classCallCheck3.default)(this,Exporter);return(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(Exporter).apply(this,arguments))}(0,_createClass3.default)(Exporter,[{key:"render",value:function render(){var _props=this.props;var siteId=_props.siteId;var siteSlug=_props.siteSlug;var isGuidedTransferInProgress=_props.isGuidedTransferInProgress;var showGuidedTransferOptions=_config2.default.isEnabled("manage/export/guided-transfer");return _react2.default.createElement("div",{className:"exporter"},showGuidedTransferOptions&&_react2.default.createElement(_querySiteGuidedTransfer2.default,{siteId:siteId}),_react2.default.createElement(_notices2.default,{siteId:siteId,siteSlug:siteSlug}),showGuidedTransferOptions&&isGuidedTransferInProgress&&_react2.default.createElement(_inProgress2.default,null),_react2.default.createElement(_exportCard2.default,{siteId:siteId}),showGuidedTransferOptions&&!isGuidedTransferInProgress&&_react2.default.createElement(_guidedTransferCard2.default,null))}}]);return Exporter}(_react.Component);var mapStateToProps=function mapStateToProps(state){return{siteId:(0,_selectors.getSelectedSiteId)(state),siteSlug:(0,_selectors2.getSiteSlug)(state,(0,_selectors.getSelectedSiteId)(state)),isGuidedTransferInProgress:(0,_selectors3.isGuidedTransferInProgress)(state,(0,_selectors.getSelectedSiteId)(state))}};exports.default=(0,_reactRedux.connect)(mapStateToProps)(Exporter);module.exports=exports["default"]},2547:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _i18nCalypso=__webpack_require__(13);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);var _noticeAction=__webpack_require__(151);var _noticeAction2=_interopRequireDefault(_noticeAction);var _support=__webpack_require__(339);var _support2=_interopRequireDefault(_support);var _selectors=__webpack_require__(1674);var _selectors2=__webpack_require__(2002);var _selectors3=__webpack_require__(70);var _constants=__webpack_require__(729);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Notices=function(_Component){(0,_inherits3.default)(Notices,_Component);function Notices(){(0,_classCallCheck3.default)(this,Notices);return(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(Notices).apply(this,arguments))}(0,_createClass3.default)(Notices,[{key:"exportNotice",value:function exportNotice(){var _props=this.props;var exportDidComplete=_props.exportDidComplete;var exportDidFail=_props.exportDidFail;var exportDownloadURL=_props.exportDownloadURL;var translate=_props.translate;if(exportDidComplete){return _react2.default.createElement(_notice2.default,{status:"is-success",showDismiss:false,text:translate("Your export was successful!\n\t\t\t\t\t\tA download link has also been sent to your email.")},_react2.default.createElement(_noticeAction2.default,{href:exportDownloadURL},translate("Download")))}if(exportDidFail){return _react2.default.createElement(_notice2.default,{status:"is-error",showDismiss:false,text:translate("There was a problem preparing your\n\t\t\t\t\t\texport file. Please check your connection and try\n\t\t\t\t\t\tagain, or contact support.")},_react2.default.createElement(_noticeAction2.default,{href:_support2.default.CALYPSO_CONTACT},translate("Get Help")))}return null}},{key:"guidedTransferNotice",value:function guidedTransferNotice(){var _props2=this.props;var translate=_props2.translate;var siteSlug=_props2.siteSlug;if(this.props.isGuidedTransferAwaitingPurchase){return _react2.default.createElement(_notice2.default,{status:"is-warning",showDismiss:false,text:translate("It looks like you've started a Guided Transfer. "+"We just need your payment to confirm the transfer and "+"then we'll get started!")},_react2.default.createElement(_noticeAction2.default,{href:"/settings/export/guided/"+siteSlug},translate("Continue")))}return null}},{key:"render",value:function render(){return _react2.default.createElement("div",null,this.exportNotice(),this.guidedTransferNotice())}}]);return Notices}(_react.Component);var mapStateToProps=function mapStateToProps(state,_ref){var siteId=_ref.siteId;return{exportDidComplete:(0,_selectors.getExportingState)(state,(0,_selectors3.getSelectedSiteId)(state))===_constants.States.COMPLETE,exportDidFail:(0,_selectors.getExportingState)(state,(0,_selectors3.getSelectedSiteId)(state))===_constants.States.FAILED,exportDownloadURL:state.siteSettings.exporter.downloadURL,isGuidedTransferAwaitingPurchase:(0,_selectors2.isGuidedTransferAwaitingPurchase)(state,siteId)}};exports.default=(0,_reactRedux.connect)(mapStateToProps)((0,_i18nCalypso.localize)(Notices));module.exports=exports["default"]},2549:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _formButton=__webpack_require__(337);var _formButton2=_interopRequireDefault(_formButton);var _formFieldset=__webpack_require__(338);var _formFieldset2=_interopRequireDefault(_formFieldset);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _formTextInput=__webpack_require__(246);var _formTextInput2=_interopRequireDefault(_formTextInput);var _formPasswordInput=__webpack_require__(367);var _formPasswordInput2=_interopRequireDefault(_formPasswordInput);var _formSettingExplanation=__webpack_require__(1477);var _formSettingExplanation2=_interopRequireDefault(_formSettingExplanation);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"account-info",propTypes:{hostInfo:_react.PropTypes.shape({label:_react.PropTypes.string.isRequired,url:_react.PropTypes.string.isRequired}).isRequired},render:function render(){var hostInfo=this.props.hostInfo;return _react2.default.createElement("div",null,_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Account Info")}),_react2.default.createElement(_compact2.default,null,_react2.default.createElement("p",null,this.translate("Please enter your credentials. They will be stored securely so that one "+"of our Happiness Engineers can get the transfer going for you.")),_react2.default.createElement("div",null,_react2.default.createElement(_formFieldset2.default,{className:"guided-transfer__account-username-fieldset"},_react2.default.createElement(_formLabel2.default,{htmlFor:"username"},this.translate("%(host)s account username",{args:{host:hostInfo.label}})),_react2.default.createElement(_formTextInput2.default,{id:"username",placeholder:this.translate("Username")})),_react2.default.createElement(_formFieldset2.default,{className:"guided-transfer__account-password-fieldset"},_react2.default.createElement(_formLabel2.default,{htmlFor:"password"},this.translate("%(host)s account password",{args:{host:hostInfo.label}})),_react2.default.createElement(_formPasswordInput2.default,{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",id:"password",placeholder:this.translate("Password")}))),_react2.default.createElement(_formSettingExplanation2.default,{className:"guided-transfer__account-info-tip"},this.translate("You don't have a %(host)s account yet? "+"{{host_link}}Create one{{/host_link}} and return here.",{components:{host_link:_react2.default.createElement("a",{href:hostInfo.url})},args:{host:hostInfo.label}}))),_react2.default.createElement(_compact2.default,null,_react2.default.createElement(_formButton2.default,null,"Continue")))}});module.exports=exports["default"]},2550:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _keys=__webpack_require__(44);var _keys2=_interopRequireDefault(_keys);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _get=__webpack_require__(30);var _get2=_interopRequireDefault(_get);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _headerCake=__webpack_require__(1460);var _headerCake2=_interopRequireDefault(_headerCake);var _accountInfo=__webpack_require__(2549);var _accountInfo2=_interopRequireDefault(_accountInfo);var _hostSelect=__webpack_require__(2551);var _hostSelect2=_interopRequireDefault(_hostSelect);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var guidedTransferHosts={bluehost:{label:_i18nCalypso2.default.translate("Bluehost"),logo:"/calypso/images/guided-transfer/bluehost-logo.png",url:"#bluehost"},siteground:{logo:"/calypso/images/guided-transfer/siteground-logo.png",label:_i18nCalypso2.default.translate("SiteGround"),url:"#siteground"}};exports.default=_react2.default.createClass({displayName:"GuidedTransfer",propTypes:{hostSlug:_react.PropTypes.string,siteSlug:_react.PropTypes.string.isRequired},showExporter:function showExporter(){(0,_page2.default)("/settings/export/"+this.props.siteSlug);
},showHostSelection:function showHostSelection(){(0,_page2.default)("/settings/export/guided/"+this.props.siteSlug)},showHost:function showHost(hostSlug){(0,_page2.default)("/settings/export/guided/"+hostSlug+"/"+this.props.siteSlug)},goBack:function goBack(){if(this.props.hostSlug){this.showHostSelection()}else{this.showExporter()}},render:function render(){var _this=this;var hostInfo=(0,_get2.default)(guidedTransferHosts,this.props.hostSlug);var hosts=(0,_keys2.default)(guidedTransferHosts).map(function(hostSlug){return(0,_extends3.default)({},guidedTransferHosts[hostSlug],{showHost:function showHost(){return _this.showHost(hostSlug)}})});return _react2.default.createElement("div",{className:"guided-transfer"},_react2.default.createElement("div",{className:"guided-transfer__header-nav"},_react2.default.createElement(_headerCake2.default,{onClick:this.goBack,isCompact:true},this.translate("Guided Transfer"))),_react2.default.createElement("div",{className:"guided-transfer__content"},hostInfo?_react2.default.createElement(_accountInfo2.default,{hostInfo:hostInfo}):_react2.default.createElement(_hostSelect2.default,{hosts:hosts})))}});module.exports=exports["default"]},2551:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"host-select",propTypes:{hosts:_react.PropTypes.arrayOf(_react.PropTypes.shape({showHost:_react.PropTypes.func.isRequired,label:_react.PropTypes.string.isRequired,logo:_react.PropTypes.string.isRequired})).isRequired},render:function render(){var hosts=this.props.hosts;return _react2.default.createElement("div",null,_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Set up Guided Transfer")}),_react2.default.createElement(_card2.default,null,_react2.default.createElement("p",null,this.translate("{{strong}}Please choose{{/strong}} one of our Guided Transfer compatible "+"{{partner_link}}partner hosts{{/partner_link}}. You must have a hosting account "+"with one of them to be able to move your site. Visit them {{lobby_link}}Guided "+"Transfer Lobby{{/lobby_link}} if you have any question before starting, or "+"{{learn_link}}learn more{{/learn_link}} about the process.",{components:{strong:_react2.default.createElement("strong",null),partner_link:_react2.default.createElement("a",{href:"https://get.wp.com/gt-hosting/"}),lobby_link:_react2.default.createElement("a",{href:"https://guidedtransfer.wordpress.com/"}),learn_link:_react2.default.createElement("a",{href:"https://en.support.wordpress.com/guided-transfer/"})}})),_react2.default.createElement("div",null,hosts.map(function(host,index){var showHost=host.showHost;var label=host.label;var logo=host.logo;return _react2.default.createElement(_button2.default,{className:"guided-transfer__host-button",onClick:showHost,key:index,"aria-label":label},_react2.default.createElement("img",{className:"guided-transfer__host-button-image",src:logo}))}))))}});module.exports=exports["default"]},2552:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _reactRedux=__webpack_require__(21);var _guidedTransfer=__webpack_require__(2550);var _guidedTransfer2=_interopRequireDefault(_guidedTransfer);var _selectors=__webpack_require__(70);var _selectors2=__webpack_require__(106);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function mapStateToProps(state){var siteId=(0,_selectors.getSelectedSiteId)(state);var siteSlug=(0,_selectors2.getSiteSlug)(state,siteId);return{siteSlug:siteSlug}}exports.default=(0,_reactRedux.connect)(mapStateToProps)(_guidedTransfer2.default);module.exports=exports["default"]},2553:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _mixin=__webpack_require__(105);var _mixin2=_interopRequireDefault(_mixin);var _authorSelector=__webpack_require__(1683);var _authorSelector2=_interopRequireDefault(_authorSelector);var _user=__webpack_require__(1652);var _user2=_interopRequireDefault(_user);var _user3=__webpack_require__(37);var _user4=_interopRequireDefault(_user3);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"ImporterAuthorMapping",mixins:[_mixin2.default],propTypes:{hasSingleAuthor:_react.PropTypes.bool.isRequired,onSelect:_react.PropTypes.func,siteId:_react.PropTypes.number.isRequired,sourceAuthor:_react.PropTypes.shape({id:_react.PropTypes.string.isRequired,name:_react.PropTypes.string.isRequired,mappedTo:_react.PropTypes.shape({ID:_react.PropTypes.number.isRequired,name:_react.PropTypes.string.isRequired,avatar_URL:_react.PropTypes.string.isRequired})}).isRequired},componentWillMount:function componentWillMount(){var _props=this.props;var hasSingleAuthor=_props.hasSingleAuthor;var selectAuthor=_props.onSelect;if(hasSingleAuthor){selectAuthor(this.getCurrentUser())}},getCurrentUser:function getCurrentUser(){var currentUser=(0,_user4.default)().get();return(0,_assign2.default)({},currentUser,{name:currentUser.display_name})},render:function render(){var _props2=this.props;var hasSingleAuthor=_props2.hasSingleAuthor;var siteId=_props2.siteId;var onSelect=_props2.onSelect;var _props2$sourceAuthor=_props2.sourceAuthor;var name=_props2$sourceAuthor.name;var _props2$sourceAuthor$=_props2$sourceAuthor.mappedTo;var selectedAuthor=_props2$sourceAuthor$===undefined?{name:"Choose an author"}:_props2$sourceAuthor$;return _react2.default.createElement("div",{className:"importer__author-mapping"},_react2.default.createElement("span",{className:"importer__source-author"},name),_react2.default.createElement(_gridicon2.default,{className:"importer__mapping-relation",icon:"arrow-right"}),!hasSingleAuthor?_react2.default.createElement(_authorSelector2.default,{siteId:siteId,onSelect:onSelect},_react2.default.createElement(_user2.default,{user:selectedAuthor})):_react2.default.createElement(_user2.default,{user:this.getCurrentUser()}))}});module.exports=exports["default"]},2554:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _mixin=__webpack_require__(105);var _mixin2=_interopRequireDefault(_mixin);var _formButton=__webpack_require__(337);var _formButton2=_interopRequireDefault(_formButton);var _authorMappingItem=__webpack_require__(2553);var _authorMappingItem2=_interopRequireDefault(_authorMappingItem);var _siteUsersFetcher=__webpack_require__(1612);var _siteUsersFetcher2=_interopRequireDefault(_siteUsersFetcher);var _store=__webpack_require__(1544);var _store2=_interopRequireDefault(_store);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"ImporterMappingPane",mixins:[_mixin2.default],propTypes:{hasSingleAuthor:_react.PropTypes.bool.isRequired,onMap:_react.PropTypes.func,onStartImport:_react.PropTypes.func,siteId:_react.PropTypes.number.isRequired,sourceAuthors:_react.PropTypes.arrayOf(_react.PropTypes.shape({id:_react.PropTypes.string.isRequired,name:_react.PropTypes.string.isRequired}).isRequired).isRequired,sourceTitle:_react.PropTypes.string.isRequired,targetTitle:_react.PropTypes.string.isRequired},getFetchOptions:function getFetchOptions(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return(0,_assign2.default)({number:50,order:"ASC",order_by:"display_name",siteId:this.props.siteId},options)},getMappingDescription:function getMappingDescription(numSourceUsers,numTargetUsers,targetTitle){if(numTargetUsers===1&&numSourceUsers===1){return this.translate("We found one author on your %(sourceType)s site. "+"Because you're the only author on {{b}}%(destinationSiteTitle)s{{/b}}, "+"all imported content will be assigned to you. "+"Click Start Import to proceed.",{args:{sourceType:"WordPress",destinationSiteTitle:targetTitle},components:{b:_react2.default.createElement("strong",null)}})}else if(numTargetUsers===1&&numSourceUsers>1){return this.translate("We found multiple authors on your %(sourceType)s site. "+"Because you're the only author on {{b}}%(destinationSiteTitle)s{{/b}}, "+"all imported content will be assigned to you. "+"Click Start Import to proceed.",{args:{sourceType:"WordPress",destinationSiteTitle:targetTitle},components:{b:_react2.default.createElement("strong",null)}})}else if(numTargetUsers>1&&numSourceUsers===1){return this.translate("We found multiple authors on {{b}}%(destinationSiteTitle)s{{/b}}. "+"Please reassign the authors of the imported items to an existing "+"user on {{b}}%(destinationSiteTitle)s{{/b}}, then click Start Import.",{args:{sourceType:"WordPress",destinationSiteTitle:targetTitle},components:{b:_react2.default.createElement("strong",null)}})}else if(numTargetUsers>1&&numSourceUsers>1){return this.translate("We found multiple authors on your %(sourceType)s site. "+"Please reassign the authors of the imported items to an existing "+"user on {{b}}%(destinationSiteTitle)s{{/b}}, then click Start Import.",{args:{sourceType:"WordPress",destinationSiteTitle:targetTitle},components:{b:_react2.default.createElement("strong",null)}})}},getUserCount:function getUserCount(){var fetchOptions=this.getFetchOptions(50);var _UsersStore$getPagina=_store2.default.getPaginationData(fetchOptions);var totalUsers=_UsersStore$getPagina.totalUsers;return totalUsers},render:function render(){var _props=this.props;var hasSingleAuthor=_props.hasSingleAuthor;var sourceAuthors=_props.sourceAuthors;var sourceTitle=_props.sourceTitle;var targetTitle=_props.targetTitle;var onMap=_props.onMap;var onStartImport=_props.onStartImport;var siteId=_props.siteId;var canStartImport=hasSingleAuthor||sourceAuthors.some(function(author){return author.mappedTo});var targetUserCount=this.getUserCount();var mappingDescription=this.getMappingDescription(sourceAuthors.length,targetUserCount,targetTitle);return _react2.default.createElement("div",{className:"importer__mapping-pane"},_react2.default.createElement(_siteUsersFetcher2.default,{fetchOptions:this.getFetchOptions({number:50})},_react2.default.createElement("div",{className:"importer__mapping-description"},mappingDescription)),_react2.default.createElement("div",{className:"importer__mapping-header"},_react2.default.createElement("span",{className:"importer__mapping-source-title"},sourceTitle),_react2.default.createElement("span",{className:"importer__mapping-target-title"},targetTitle)),sourceAuthors.map(function(author){return _react2.default.createElement(_authorMappingItem2.default,{hasSingleAuthor:hasSingleAuthor,key:"author-mapping-"+author.id,onSelect:function onSelect(e){return onMap(author,e)},siteId:siteId,sourceAuthor:author})}),_react2.default.createElement(_formButton2.default,{disabled:!canStartImport,onClick:onStartImport},this.translate("Start Import")))}});module.exports=exports["default"]},2555:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _mixin=__webpack_require__(105);var _mixin2=_interopRequireDefault(_mixin);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"SiteSettingsImporterError",mixins:[_mixin2.default],propTypes:{description:_react.PropTypes.string.isRequired,type:_react.PropTypes.string.isRequired},contactSupport:function contactSupport(event){event.preventDefault();event.stopPropagation();(0,_page2.default)("/help")},getImportError:function getImportError(){return this.translate("%(errorDescription)s{{br/}}{{a}}Try again{{/a}} or {{cs}}contact support{{/cs}}.",{args:{errorDescription:this.props.description},components:{a:_react2.default.createElement("a",{href:"#",onclick:this.retryImport}),br:_react2.default.createElement("br",null),cs:_react2.default.createElement("a",{href:"#",onclick:this.contactSupport})}})},getUploadError:function getUploadError(){var defaultError=this.translate("Unexpected error during the upload");var _props$description=this.props.description;var description=_props$description===undefined?"":_props$description;return this.translate("%(errorDescription)s{{br/}}Try another file or {{cs}}contact support{{/cs}}.",{args:{errorDescription:description.length?description:defaultError},components:{br:_react2.default.createElement("br",null),cs:_react2.default.createElement("a",{href:"#",onClick:this.contactSupport})}})},getErrorMessage:function getErrorMessage(){var actionMessage;switch(this.props.type){case"uploadError":actionMessage=this.getUploadError();break;case"importError":actionMessage=this.getImportError();break}return actionMessage},retryImport:function retryImport(event){event.preventDefault();event.stopPropagation()},render:function render(){return _react2.default.createElement("div",null,_react2.default.createElement(_notice2.default,{status:"is-error",text:this.getErrorMessage(),showDismiss:false}))}});module.exports=exports["default"]},2556:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ImporterHeader=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _mixin=__webpack_require__(105);var _mixin2=_interopRequireDefault(_mixin);var _includes=__webpack_require__(34);var _includes2=_interopRequireDefault(_includes);var _formButton=__webpack_require__(337);var _formButton2=_interopRequireDefault(_formButton);var _constants=__webpack_require__(1597);var _actions=__webpack_require__(1805);var _socialLogo=__webpack_require__(699);var _socialLogo2=_interopRequireDefault(_socialLogo);var _flowRight=__webpack_require__(156);var _flowRight2=_interopRequireDefault(_flowRight);var _dispatcherConverter=__webpack_require__(1914);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var startStates=[_constants.appStates.DISABLED,_constants.appStates.INACTIVE],cancelStates=[_constants.appStates.MAP_AUTHORS,_constants.appStates.READY_FOR_UPLOAD,_constants.appStates.UPLOAD_FAILURE,_constants.appStates.UPLOAD_SUCCESS,_constants.appStates.UPLOADING],stopStates=[_constants.appStates.IMPORT_FAILURE,_constants.appStates.IMPORTING],doneStates=[_constants.appStates.IMPORT_SUCCESS];var ImporterHeader=exports.ImporterHeader=_react2.default.createClass({displayName:"ImporterHeader",mixins:[_mixin2.default],propTypes:{importerStatus:_react.PropTypes.shape({importerState:_react.PropTypes.string.isRequired,type:_react.PropTypes.string.isRequired}),description:_react.PropTypes.string.isRequired,icon:_react.PropTypes.string.isRequired,title:_react.PropTypes.string.isRequired,isEnabled:_react.PropTypes.bool.isRequired},controlButtonClicked:function controlButtonClicked(){var _props=this.props;var _props$importerStatus=_props.importerStatus;var importerId=_props$importerStatus.importerId;var importerState=_props$importerStatus.importerState;var type=_props$importerStatus.type;var siteId=_props.site.ID;var startImport=_props.startImport;if((0,_includes2.default)([].concat(cancelStates,stopStates),importerState)){(0,_actions.cancelImport)(siteId,importerId)}else if((0,_includes2.default)(startStates,importerState)){startImport(siteId,type)}else if((0,_includes2.default)(doneStates,importerState)){(0,_actions.resetImport)(siteId,importerId)}},getButtonText:function getButtonText(){var importerState=this.props.importerStatus.importerState;if((0,_includes2.default)(startStates,importerState)){return this.translate("Start Import",{context:"verb"})}if((0,_includes2.default)(cancelStates,importerState)){return this.translate("Cancel",{context:"verb"})}if((0,_includes2.default)(stopStates,importerState)){return this.translate("Stop Import",{context:"verb"})}if((0,_includes2.default)(doneStates,importerState)){return this.translate("Done",{context:"adjective"})}},render:function render(){var _props2=this.props;var importerState=_props2.importerStatus.importerState;var icon=_props2.icon;var isEnabled=_props2.isEnabled;var title=_props2.title;var description=_props2.description;var canCancel=isEnabled&&!(0,_includes2.default)([_constants.appStates.UPLOADING],importerState);var isScary=(0,_includes2.default)([].concat(stopStates,cancelStates),importerState);return _react2.default.createElement("header",{className:"importer-service"},(0,_includes2.default)(["wordpress","medium"],icon)?_react2.default.createElement(_socialLogo2.default,{className:"importer__service-icon",icon:icon,size:48}):_react2.default.createElement("svg",{className:"importer__service-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),_react2.default.createElement(_formButton2.default,{className:"importer__master-control",disabled:!canCancel,isPrimary:false,scary:isScary,onClick:this.controlButtonClicked},this.getButtonText()),_react2.default.createElement("div",{className:"importer__service-info"},_react2.default.createElement("h1",{className:"importer__service-title"},title),_react2.default.createElement("p",null,description)))}});var mapDispatchToProps=function mapDispatchToProps(dispatch){return{startImport:(0,_flowRight2.default)(dispatch,_actions.startImport)}};exports.default=(0,_dispatcherConverter.connectDispatcher)(null,mapDispatchToProps)(ImporterHeader)},2557:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _mixin=__webpack_require__(105);var _mixin2=_interopRequireDefault(_mixin);var _fileImporter=__webpack_require__(2154);var _fileImporter2=_interopRequireDefault(_fileImporter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var importerData={title:"Medium",icon:"medium"};exports.default=_react2.default.createClass({displayName:"ImporterMedium",mixins:[_mixin2.default],render:function render(){importerData.description=this.translate("Import posts, tags, images and videos "+"from a Medium export file.");importerData.uploadDescription=this.translate("Upload a {{b}}Medium export file{{/b}} to start "+"importing into {{b2}}%(title)s{{/b2}}.",{args:{title:this.props.site.title},components:{b:_react2.default.createElement("strong",null),b2:_react2.default.createElement("strong",null)}});return _react2.default.createElement(_fileImporter2.default,(0,_extends3.default)({importerData:importerData},this.props))}});module.exports=exports["default"]},2558:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _mixin=__webpack_require__(105);var _mixin2=_interopRequireDefault(_mixin);var _fileImporter=__webpack_require__(2154);var _fileImporter2=_interopRequireDefault(_fileImporter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var importerData={title:"WordPress",icon:"wordpress"};exports.default=_react2.default.createClass({displayName:"ImporterWordPress",mixins:[_mixin2.default],propTypes:{importerStatus:_react.PropTypes.shape({filename:_react.PropTypes.string,importerState:_react.PropTypes.string.isRequired,errorData:_react.PropTypes.shape({type:_react.PropTypes.string.isRequired,description:_react.PropTypes.string.isRequired}),percentComplete:_react.PropTypes.number,siteTitle:_react.PropTypes.string.isRequired,statusMessage:_react.PropTypes.string})},render:function render(){importerData.description=this.translate("Import posts, pages, and media "+"from a WordPress exportfile.");importerData.uploadDescription=this.translate("Upload a {{b}}WordPress export file{{/b}} to start "+"importing into {{b2}}%(title)s{{/b2}}. Check out our "+"{{a}}WordPress export guide{{/a}} if you need "+"help exporting the file.",{args:{title:this.props.site.title},components:{b:_react2.default.createElement("strong",null),b2:_react2.default.createElement("strong",null),a:_react2.default.createElement("a",{href:"https://en.support.wordpress.com/export/"})}});return _react2.default.createElement(_fileImporter2.default,(0,_extends3.default)({importerData:importerData},this.props))}});module.exports=exports["default"]},2559:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ImportingPane=undefined;var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _keys=__webpack_require__(44);var _keys2=_interopRequireDefault(_keys);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _mixin=__webpack_require__(105);var _mixin2=_interopRequireDefault(_mixin);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _has=__webpack_require__(361);var _has2=_interopRequireDefault(_has);var _omit=__webpack_require__(18);var _omit2=_interopRequireDefault(_omit);var _actions=__webpack_require__(1805);var _constants=__webpack_require__(1597);var _dispatcherConverter=__webpack_require__(1914);var _progressBar=__webpack_require__(1610);var _progressBar2=_interopRequireDefault(_progressBar);var _authorMappingPane=__webpack_require__(2554);var _authorMappingPane2=_interopRequireDefault(_authorMappingPane);var _spinner=__webpack_require__(350);var _spinner2=_interopRequireDefault(_spinner);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var sum=function sum(a,b){return a+b};var calculateProgress=function calculateProgress(progress){var _progress$attachment=progress.attachment;var attachment=_progress$attachment===undefined?{}:_progress$attachment;if(attachment.total>0&&attachment.completed>=0){return 80*attachment.completed/attachment.total+.2*calculateProgress((0,_omit2.default)(progress,["attachment"]))}var percentages=(0,_keys2.default)(progress).map(function(k){return progress[k]}).filter(function(_ref){var total=_ref.total;return total>0}).map(function(_ref2){var completed=_ref2.completed;var total=_ref2.total;return completed/total});return 100*percentages.reduce(sum,0)/percentages.length};var resourcesRemaining=function resourcesRemaining(progress){return(0,_keys2.default)(progress).map(function(k){return progress[k]}).map(function(_ref3){var completed=_ref3.completed;var total=_ref3.total;return total-completed}).reduce(sum,0)};var hasProgressInfo=function hasProgressInfo(progress){if(!progress){return false}var types=(0,_keys2.default)(progress).map(function(k){return progress[k]}).filter(function(_ref4){var total=_ref4.total;return total>0});if(!types.length){return false}var firstType=types.shift();if(!(0,_has2.default)(firstType,"completed")){return false}return true};var ImportingPane=exports.ImportingPane=_react2.default.createClass({displayName:"SiteSettingsImportingPane",mixins:[_mixin2.default],propTypes:{importerStatus:_react.PropTypes.shape({counts:_react.PropTypes.shape({comments:_react.PropTypes.number,pages:_react.PropTypes.number,posts:_react.PropTypes.number}),errorData:_react.PropTypes.shape({description:_react.PropTypes.string.isRequired,type:_react.PropTypes.string.isRequired}),importerState:_react.PropTypes.string.isRequired,percentComplete:_react.PropTypes.number,site:_react.PropTypes.shape({slug:_react.PropTypes.string.isRequired}),statusMessage:_react.PropTypes.string}),site:_react.PropTypes.shape({ID:_react.PropTypes.number.isRequired,single_user_site:_react.PropTypes.bool.isRequired}).isRequired},getErrorMessage:function getErrorMessage(_ref5){var description=_ref5.description;if(!description){return this.translate("An unspecified error occured during the import.")}return description},getHeadingText:function getHeadingText(){return this.translate("Importing may take a while, but you can "+"safely navigate away from this page if you need "+"to. If you {{b}}stop the import{{/b}}, your site "+"will be {{b2}}partially imported{{/b2}}.",{components:{b:_react2.default.createElement("strong",null),b2:_react2.default.createElement("strong",null)}})},getSuccessText:function getSuccessText(){var _props$importerStatus=this.props.importerStatus;var slug=_props$importerStatus.site.slug;var _props$importerStatus2=_props$importerStatus.progress;var page=_props$importerStatus2.page;var post=_props$importerStatus2.post;var pageLink=_react2.default.createElement("a",{href:"/pages/"+slug});var pageText=this.translate("Pages",{context:"noun"});var postLink=_react2.default.createElement("a",{href:"/posts/"+slug});var postText=this.translate("Posts",{context:"noun"});if(page&&post){return this.translate("All done! Check out {{a}}Posts{{/a}} or "+"{{b}}Pages{{/b}} to see your imported content.",{components:{a:postLink,b:pageLink}})}if(page||post){return this.translate("All done! Check out {{a}}%(articles)s{{/a}} "+"to see your imported content.",{components:{a:page?pageLink:postLink},args:{articles:page?pageText:postText}})}return this.translate("Import complete!")},getImportMessage:function getImportMessage(numResources){if(0===numResources){return this.translate("Finishing up the import")}return this.translate("Waiting on %(numResources)d resource to import","Waiting on %(numResources)d resources to import",{count:numResources,args:{numResources:numResources}})},isError:function isError(){return this.isInState(_constants.appStates.IMPORT_FAILURE)},isFinished:function isFinished(){return this.isInState(_constants.appStates.IMPORT_SUCCESS)},isImporting:function isImporting(){return this.isInState(_constants.appStates.IMPORTING)},isInState:function isInState(state){return state===this.props.importerStatus.importerState},isMapping:function isMapping(){return this.isInState(_constants.appStates.MAP_AUTHORS)},render:function render(){var _this=this;var _props=this.props;var _props$importerStatus3=_props.importerStatus;var importerId=_props$importerStatus3.importerId;var _props$importerStatus4=_props$importerStatus3.errorData;var errorData=_props$importerStatus4===undefined?{}:_props$importerStatus4;var customData=_props$importerStatus3.customData;var mapAuthorFor=_props.mapAuthorFor;var _props$site=_props.site;var siteId=_props$site.ID;var siteName=_props$site.name;var hasSingleAuthor=_props$site.single_user_site;var progressClasses=(0,_classnames2.default)("importer__import-progress",{"is-complete":this.isFinished()});var _props$importerStatus5=this.props.importerStatus;var percentComplete=_props$importerStatus5.percentComplete;var progress=_props$importerStatus5.progress;var statusMessage=_props$importerStatus5.statusMessage;var blockingMessage=void 0;if(this.isError()){statusMessage=this.getErrorMessage(errorData)}if(this.isFinished()){percentComplete=100;statusMessage=this.getSuccessText()}if(this.isImporting()&&hasProgressInfo(progress)){var remainingResources=resourcesRemaining(progress);percentComplete=calculateProgress(progress);blockingMessage=this.getImportMessage(remainingResources)}return _react2.default.createElement("div",{className:"importer__importing-pane"},this.isImporting()&&_react2.default.createElement("p",null,this.getHeadingText()),this.isMapping()&&_react2.default.createElement(_authorMappingPane2.default,(0,_extends3.default)({hasSingleAuthor:hasSingleAuthor,onMap:mapAuthorFor(importerId),onStartImport:function onStartImport(){return(0,_actions.startImporting)(_this.props.importerStatus)}},{siteId:siteId},{sourceAuthors:customData.sourceAuthors,sourceTitle:customData.siteTitle||this.translate("Original Site"),targetTitle:siteName})),this.isImporting()&&(percentComplete>=0?_react2.default.createElement(_progressBar2.default,{className:progressClasses,value:percentComplete}):_react2.default.createElement("div",null,_react2.default.createElement(_spinner2.default,{className:"importer__import-spinner"}),_react2.default.createElement("br",null))),blockingMessage&&_react2.default.createElement("div",null,blockingMessage),_react2.default.createElement("div",null,_react2.default.createElement("p",{className:"importer__status-message"},statusMessage)))}});var mapDispatchToProps=function mapDispatchToProps(dispatch){return{mapAuthorFor:function mapAuthorFor(importerId){return function(source,target){return dispatch((0,_actions.mapAuthor)(importerId,source,target))}}}};exports.default=(0,_dispatcherConverter.connectDispatcher)(null,mapDispatchToProps)(ImportingPane)},2560:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UploadingPane=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _mixin=__webpack_require__(105);var _mixin2=_interopRequireDefault(_mixin);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _flowRight=__webpack_require__(156);var _flowRight2=_interopRequireDefault(_flowRight);var _noop=__webpack_require__(36);var _noop2=_interopRequireDefault(_noop);var _includes=__webpack_require__(34);var _includes2=_interopRequireDefault(_includes);var _actions=__webpack_require__(1805);var _constants=__webpack_require__(1597);var _formButton=__webpack_require__(337);var _formButton2=_interopRequireDefault(_formButton);var _dropZone=__webpack_require__(1696);var _dropZone2=_interopRequireDefault(_dropZone);var _progressBar=__webpack_require__(1610);var _progressBar2=_interopRequireDefault(_progressBar);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);var _dispatcherConverter=__webpack_require__(1914);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UploadingPane=exports.UploadingPane=_react2.default.createClass({displayName:"SiteSettingsUploadingPane",mixins:[_mixin2.default],propTypes:{description:_react.PropTypes.oneOfType([_react.PropTypes.node,_react.PropTypes.string]),importerStatus:_react.PropTypes.shape({filename:_react.PropTypes.string,importerState:_react.PropTypes.string.isRequired,percentComplete:_react.PropTypes.number})},componentWillUnmount:function componentWillUnmount(){window.clearInterval(this.randomizeTimer)},getDefaultProps:function getDefaultProps(){return{description:null}},getMessage:function getMessage(){var _this=this;var _props$importerStatus=this.props.importerStatus;var importerState=_props$importerStatus.importerState;var _props$importerStatus2=_props$importerStatus.percentComplete;var percentComplete=_props$importerStatus2===undefined?0:_props$importerStatus2;var filename=_props$importerStatus.filename;switch(importerState){case _constants.appStates.READY_FOR_UPLOAD:case _constants.appStates.UPLOAD_FAILURE:return _react2.default.createElement("p",null,this.translate("Drag a file here, or click to upload a file"));
case _constants.appStates.UPLOADING:var uploadPercent=percentComplete,progressClasses=(0,_classnames2.default)("importer__upload-progress",{"is-complete":uploadPercent>95}),uploaderPrompt=void 0;if(uploadPercent<99){uploaderPrompt=this.translate("Uploading %(filename)s",{args:{filename:filename}})}else{uploaderPrompt=this.translate("Processing uploaded file")}return _react2.default.createElement("div",null,_react2.default.createElement("p",null,uploaderPrompt),_react2.default.createElement(_progressBar2.default,{className:progressClasses,value:uploadPercent,total:100}));case _constants.appStates.UPLOAD_SUCCESS:return _react2.default.createElement("div",null,_react2.default.createElement("p",null,this.translate("Success! File uploaded.")),_react2.default.createElement(_formButton2.default,{className:"importer__start",onClick:function onClick(){return(0,_actions.startMappingAuthors)(_this.props.importerStatus.importerId)}},this.translate("Start Import")))}},initiateFromDrop:function initiateFromDrop(event){this.startUpload(event[0])},initiateFromForm:function initiateFromForm(event){var fileSelector=this.refs.fileSelector;event.preventDefault();event.stopPropagation();this.startUpload(fileSelector.files[0])},isReadyForImport:function isReadyForImport(){var importerState=this.props.importerStatus.importerState;var READY_FOR_UPLOAD=_constants.appStates.READY_FOR_UPLOAD;var UPLOAD_FAILURE=_constants.appStates.UPLOAD_FAILURE;return(0,_includes2.default)([READY_FOR_UPLOAD,UPLOAD_FAILURE],importerState)},openFileSelector:function openFileSelector(){var fileSelector=this.refs.fileSelector;fileSelector.click()},startUpload:function startUpload(file){var startUpload=this.props.startUpload;startUpload(this.props.importerStatus,file)},render:function render(){return _react2.default.createElement("div",null,_react2.default.createElement("p",null,this.props.description),_react2.default.createElement("div",{className:"importer__uploading-pane",onClick:this.isReadyForImport()?this.openFileSelector:null},_react2.default.createElement("div",{className:"importer__upload-content"},_react2.default.createElement(_gridicon2.default,{className:"importer__upload-icon",icon:"cloud-upload"}),this.getMessage()),this.isReadyForImport()?_react2.default.createElement("input",{ref:"fileSelector",type:"file",name:"exportFile",onChange:this.initiateFromForm}):null,_react2.default.createElement(_dropZone2.default,{onFilesDrop:this.isReadyForImport()?this.initiateFromDrop:_noop2.default})))}});var mapDispatchToProps=function mapDispatchToProps(dispatch){return{startUpload:(0,_flowRight2.default)(dispatch,_actions.startUpload)}};exports.default=(0,_dispatcherConverter.connectDispatcher)(null,mapDispatchToProps)(UploadingPane)},2686:function(module,exports,__webpack_require__){"use strict";var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _deleteSite=__webpack_require__(2689);var _deleteSite2=_interopRequireDefault(_deleteSite);var _reactHelpers=__webpack_require__(1458);var _route=__webpack_require__(122);var _route2=_interopRequireDefault(_route);var _main=__webpack_require__(2699);var _main2=_interopRequireDefault(_main);var _sitesList=__webpack_require__(55);var _sitesList2=_interopRequireDefault(_sitesList);var _startOver=__webpack_require__(2709);var _startOver2=_interopRequireDefault(_startOver);var _actions=__webpack_require__(648);var _toTitleCase=__webpack_require__(659);var _toTitleCase2=_interopRequireDefault(_toTitleCase);var _utils=__webpack_require__(186);var _utils2=_interopRequireDefault(_utils);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var sites=(0,_sitesList2.default)();function canDeleteSite(site){if(!site.capabilities||!site.capabilities.manage_options){return false}if(site.jetpack){return false}if(site.is_vip){return false}return true}function renderPage(context,component){(0,_reactHelpers.renderWithReduxStore)(component,document.getElementById("primary"),context.store)}module.exports={redirectToGeneral:function redirectToGeneral(){_page2.default.redirect("/settings/general")},siteSettings:function siteSettings(context){var analyticsPageTitle="Site Settings";var basePath=_route2.default.sectionify(context.path);var fiveMinutes=5*60*1e3;var site=sites.getSelectedSite();var section=context.params.section;context.store.dispatch((0,_actions.setDocumentHeadTitle)(_i18nCalypso2.default.translate("Site Settings",{textOnly:true})));if(site&&!_utils2.default.userCan("manage_options",site)){_page2.default.redirect("/stats");return}if(site.jetpack&&!_config2.default.isEnabled("manage/jetpack")){window.location.href="//wordpress.com/manage/"+site.ID;return}if(site.jetpack&&(section==="seo"||section==="analytics")){_page2.default.redirect("/settings/general/"+site.slug);return}if(!site.latestSettings||(new Date).getTime()-site.latestSettings>fiveMinutes){if(sites.initialized){site.fetchSettings()}else{sites.once("change",function(){site=sites.getSelectedSite();site.fetchSettings()})}}renderPage(context,_react2.default.createElement(_main2.default,{sites:sites,section:section}));if("undefined"!==typeof section){analyticsPageTitle+=" > "+(0,_toTitleCase2.default)(section)}_analytics2.default.pageView.record(basePath+"/:site",analyticsPageTitle)},importSite:function importSite(context){renderPage(context,_react2.default.createElement(_main2.default,{sites:sites,section:"import"}))},exportSite:function exportSite(context){renderPage(context,_react2.default.createElement(_main2.default,{sites:sites,section:"export"}))},guidedTransfer:function guidedTransfer(context){renderPage(context,_react2.default.createElement(_main2.default,{sites:sites,section:"guidedTransfer",hostSlug:context.params.host_slug}))},deleteSite:function deleteSite(context){var site=sites.getSelectedSite();if(sites.initialized){if(!canDeleteSite(site)){return(0,_page2.default)("/settings/general/"+site.slug)}}else{sites.once("change",function(){site=sites.getSelectedSite();if(!canDeleteSite(site)){return(0,_page2.default)("/settings/general/"+site.slug)}})}renderPage(context,_react2.default.createElement(_deleteSite2.default,{sites:sites,path:context.path}))},startOver:function startOver(context){var site=sites.getSelectedSite();if(sites.initialized){if(!canDeleteSite(site)){return(0,_page2.default)("/settings/general/"+site.slug)}}else{sites.once("change",function(){site=sites.getSelectedSite();if(!canDeleteSite(site)){return(0,_page2.default)("/settings/general/"+site.slug)}})}renderPage(context,_react2.default.createElement(_startOver2.default,{sites:sites,path:context.path}))},legacyRedirects:function legacyRedirects(context,next){var section=context.params.section,redirectMap={account:"/me/account",password:"/me/security","public-profile":"/me/public-profile",notifications:"/me/notifications",disbursements:"/me/public-profile",earnings:"/me/public-profile","billing-history":"/me/billing","billing-history-v2":"/me/billing","connected-apps":"/me/security/connected-applications"};if(!context){return(0,_page2.default)("/me/public-profile")}if(redirectMap[section]){return _page2.default.redirect(redirectMap[section])}next()},setScroll:function setScroll(context,next){window.scroll(0,0);next()}}},2687:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _defineProperty2=__webpack_require__(7);var _defineProperty3=_interopRequireDefault(_defineProperty2);var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _i18nCalypso=__webpack_require__(13);var _selectors=__webpack_require__(70);var _selectors2=__webpack_require__(349);var _selectors3=__webpack_require__(106);var _route=__webpack_require__(122);var _queryPostTypes=__webpack_require__(662);var _queryPostTypes2=_interopRequireDefault(_queryPostTypes);var _formFieldset=__webpack_require__(338);var _formFieldset2=_interopRequireDefault(_formFieldset);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _formToggle=__webpack_require__(1564);var _formToggle2=_interopRequireDefault(_formToggle);var _formSettingExplanation=__webpack_require__(1477);var _formSettingExplanation2=_interopRequireDefault(_formSettingExplanation);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _featureExample=__webpack_require__(690);var _featureExample2=_interopRequireDefault(_featureExample);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);var _noticeAction=__webpack_require__(151);var _noticeAction2=_interopRequireDefault(_noticeAction);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CustomPostTypesFieldset=function(_Component){(0,_inherits3.default)(CustomPostTypesFieldset,_Component);function CustomPostTypesFieldset(props){(0,_classCallCheck3.default)(this,CustomPostTypesFieldset);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(CustomPostTypesFieldset).call(this,props));_this.boundToggleTestimonial=_this.onChange.bind(_this,"jetpack-testimonial");_this.boundTogglePortfolio=_this.onChange.bind(_this,"jetpack-portfolio");_this.state={hadOnceEnabled:{}};return _this}(0,_createClass3.default)(CustomPostTypesFieldset,[{key:"componentWillMount",value:function componentWillMount(){this.updateHadOnceEnabled()}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(this.props.siteId!==nextProps.siteId){this.setState({hadOnceEnabled:{}},this.updateHadOnceEnabled)}else{this.updateHadOnceEnabled(nextProps)}}},{key:"updateHadOnceEnabled",value:function updateHadOnceEnabled(){var _this2=this;var props=arguments.length<=0||arguments[0]===undefined?this.props:arguments[0];this.setState({hadOnceEnabled:["jetpack-testimonial","jetpack-portfolio"].reduce(function(memo,postType){var valueKey=_this2.getPostTypeValueKey(postType);memo[postType]=_this2.state.hadOnceEnabled[postType]||props.value[valueKey];return memo},{})})}},{key:"hasDefaultPostTypeEnabled",value:function hasDefaultPostTypeEnabled(postType){return this.props.postTypes&&!this.state.hadOnceEnabled[postType]&&false===this.props.value[this.getPostTypeValueKey(postType)]&&!!this.props.postTypes[postType]}},{key:"getPostTypeValueKey",value:function getPostTypeValueKey(postType){if("jetpack-testimonial"===postType){return"jetpack_testimonial"}if("jetpack-portfolio"===postType){return"jetpack_portfolio"}}},{key:"isEnabled",value:function isEnabled(postType){return this.hasDefaultPostTypeEnabled(postType)||this.props.value[this.getPostTypeValueKey(postType)]}},{key:"isDisabled",value:function isDisabled(postType){var _props=this.props;var requestingSettings=_props.requestingSettings;var requestingPostTypes=_props.requestingPostTypes;return requestingSettings||requestingPostTypes||this.hasDefaultPostTypeEnabled(postType)}},{key:"onChange",value:function onChange(postType){var _props2=this.props;var recordEvent=_props2.recordEvent;var onChange=_props2.onChange;switch(postType){case"jetpack-testimonial":recordEvent("Clicked Jetpack Testimonial CPT Checkbox");break;case"jetpack-portfolio":recordEvent("Clicked Jetpack Portfolio CPT Checkbox");break}onChange((0,_defineProperty3.default)({},this.getPostTypeValueKey(postType),!this.isEnabled(postType)))}},{key:"render",value:function render(){var _props3=this.props;var translate=_props3.translate;var siteId=_props3.siteId;var siteSlug=_props3.siteSlug;var siteUrl=_props3.siteUrl;var className=_props3.className;var siteSupportsCustomTypes=_props3.siteSupportsCustomTypes;var ToggleWrapper=siteSupportsCustomTypes?"div":_featureExample2.default;return _react2.default.createElement(_formFieldset2.default,{className:className},siteId&&_react2.default.createElement(_queryPostTypes2.default,{siteId:siteId}),_react2.default.createElement(_formLabel2.default,null,translate("Custom Content Types")),_react2.default.createElement("p",null,translate("Display different types of content on your site with {{link}}custom content types{{/link}}.",{components:{link:_react2.default.createElement("a",{href:"https://en.support.wordpress.com/custom-post-types/",target:"_blank"})}})),!siteSupportsCustomTypes&&_react2.default.createElement(_notice2.default,{status:"is-warning",showDismiss:false,text:translate("You must update to the latest version of Jetpack to use this feature")},_react2.default.createElement(_noticeAction2.default,{href:(0,_route.addSiteFragment)("/plugins/jetpack",siteSlug)},translate("Update",{context:"verb"}))),_react2.default.createElement(ToggleWrapper,null,_react2.default.createElement("div",{className:"site-settings__custom-post-type"},_react2.default.createElement(_sectionHeader2.default,{label:translate("Testimonials")},_react2.default.createElement(_formToggle2.default,{checked:this.isEnabled("jetpack-testimonial"),onChange:this.boundToggleTestimonial,disabled:this.isDisabled("jetpack-testimonial")})),_react2.default.createElement(_card2.default,null,this.hasDefaultPostTypeEnabled("jetpack-testimonial")&&_react2.default.createElement(_formSettingExplanation2.default,null,translate("Your theme supports Testimonials")),translate("The Testimonial custom content type allows you to add, organize, and display your "+"testimonials. If your theme doesnt support it yet, you can display testimonials using "+"the {{shortcodeLink}}testimonial shortcode{{/shortcodeLink}} ( {{code}}[testimonials]{{/code}} ) "+"or you can {{archiveLink}}view a full archive of your testimonials{{/archiveLink}}.",{components:{shortcodeLink:_react2.default.createElement("a",{href:"https://support.wordpress.com/testimonials-shortcode/"}),code:_react2.default.createElement("code",null),archiveLink:_react2.default.createElement("a",{href:siteUrl.replace(/\/$/,"")+"/testimonial"})}}))),_react2.default.createElement("div",{className:"site-settings__custom-post-type"},_react2.default.createElement(_sectionHeader2.default,{label:translate("Portfolio Projects")},_react2.default.createElement(_formToggle2.default,{checked:this.isEnabled("jetpack-portfolio"),onChange:this.boundTogglePortfolio,disabled:this.isDisabled("jetpack-portfolio")})),_react2.default.createElement(_card2.default,null,this.hasDefaultPostTypeEnabled("jetpack-portfolio")&&_react2.default.createElement(_formSettingExplanation2.default,null,translate("Your theme supports Portfolio Projects")),translate("The Portfolio custom content type gives you an easy way to manage and showcase projects "+"on your site. If your theme doesnt support it yet, you can display the portfolio using "+"the {{shortcodeLink}}portfolio shortcode{{/shortcodeLink}} ( {{code}}[portfolio]{{/code}} ) "+"or you can {{archiveLink}}view a full archive of your portfolio projects{{/archiveLink}}.",{components:{shortcodeLink:_react2.default.createElement("a",{href:"https://support.wordpress.com/portfolios/portfolio-shortcode/"}),code:_react2.default.createElement("code",null),archiveLink:_react2.default.createElement("a",{href:siteUrl.replace(/\/$/,"")+"/portfolio"})}})))))}}]);return CustomPostTypesFieldset}(_react.Component);CustomPostTypesFieldset.propTypes={translate:_react.PropTypes.func,requestingSettings:_react.PropTypes.bool,value:_react.PropTypes.object,onChange:_react.PropTypes.func,recordEvent:_react.PropTypes.func,className:_react.PropTypes.string,siteId:_react.PropTypes.number,siteSlug:_react.PropTypes.string,siteUrl:_react.PropTypes.string,requestingPostTypes:_react.PropTypes.bool,postTypes:_react.PropTypes.object,siteSupportsCustomTypes:_react.PropTypes.bool};exports.default=(0,_reactRedux.connect)(function(state){var siteId=(0,_selectors.getSelectedSiteId)(state);var site=(0,_selectors.getSelectedSite)(state);return{siteId:siteId,siteSlug:(0,_selectors3.getSiteSlug)(state,siteId),siteUrl:site?site.URL:"",requestingPostTypes:(0,_selectors2.isRequestingPostTypes)(state,siteId),postTypes:(0,_selectors2.getPostTypes)(state,siteId),siteSupportsCustomTypes:false!==(0,_selectors3.isJetpackMinimumVersion)(state,siteId,"4.2.0")}})((0,_i18nCalypso.localize)(CustomPostTypesFieldset));module.exports=exports["default"]},2688:function(module,exports,__webpack_require__){"use strict";var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _filter=__webpack_require__(69);var _filter2=_interopRequireDefault(_filter);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _deleteSiteWarningDialog=__webpack_require__(2178);var _deleteSiteWarningDialog2=_interopRequireDefault(_deleteSiteWarningDialog);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _analytics=__webpack_require__(16);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var trackDeleteSiteOption=function trackDeleteSiteOption(option){_analytics.tracks.recordEvent("calypso_settings_delete_site_options",{option:option})};module.exports=_react2.default.createClass({displayName:"DeleteSite",propTypes:{sitePurchases:_react2.default.PropTypes.array.isRequired,hasLoadedSitePurchasesFromServer:_react2.default.PropTypes.bool.isRequired,site:_react2.default.PropTypes.object.isRequired},getInitialState:function getInitialState(){return{showDialog:false,showStartOverDialog:false}},render:function render(){var selectedSite=this.props.site;var changeAddressLink="/domains/manage/"+selectedSite.slug;var startOverLink="/settings/start-over/"+selectedSite.slug;var deleteSiteLink="/settings/delete-site/"+selectedSite.slug;var changeAddressLinkText=this.translate("Register a new domain or change your site's address.");var strings={changeSiteAddress:this.translate("Change Site Address"),startOver:this.translate("Start Over"),deleteSite:this.translate("Delete Site")};if(!this.props.hasLoadedSitePurchasesFromServer){return null}if(!_config2.default.isEnabled("upgrades/domain-search")){changeAddressLinkText=this.translate("Change your site's address.")}return _react2.default.createElement("div",{className:"delete-site-options"},_react2.default.createElement(_compact2.default,{href:changeAddressLink,onClick:this.trackChangeAddress,className:"delete-site-options__link"},_react2.default.createElement("div",{className:"delete-site-options__content"},_react2.default.createElement("h2",{className:"delete-site-options__section-title"},strings.changeSiteAddress),_react2.default.createElement("p",{className:"delete-site-options__section-desc"},changeAddressLinkText),_react2.default.createElement("p",{className:"delete-site-options__section-footnote"},this.translate('Your current site address is "%(siteAddress)s."',{args:{siteAddress:selectedSite.slug}})))),_react2.default.createElement(_compact2.default,{href:startOverLink,onClick:this.trackStartOver,className:"delete-site-options__link"},_react2.default.createElement("div",{className:"delete-site-options__content"},_react2.default.createElement("h2",{className:"delete-site-options__section-title"},strings.startOver),_react2.default.createElement("p",{className:"delete-site-options__section-desc"},this.translate("Keep your URL and site active, but remove the content.")))),_react2.default.createElement(_compact2.default,{href:deleteSiteLink,onClick:this.checkForSubscriptions,className:"delete-site-options__link"},_react2.default.createElement("div",{className:"delete-site-options__content"},_react2.default.createElement("h2",{className:"delete-site-options__section-title"},strings.deleteSite),_react2.default.createElement("p",{className:"delete-site-options__section-desc"},this.translate("All your posts, images, data, and this site's address ({{siteAddress /}}) will be gone forever.",{components:{siteAddress:_react2.default.createElement("strong",null,selectedSite.slug)}})),_react2.default.createElement("p",{className:"delete-site-options__section-footnote"},this.translate("Be careful! Once a site is deleted, it cannot be recovered. Please be sure before you proceed.")))),_react2.default.createElement(_deleteSiteWarningDialog2.default,{isVisible:this.state.showDialog,onClose:this.closeDialog}))},trackChangeAddress:function trackChangeAddress(){trackDeleteSiteOption("change-address")},trackStartOver:function trackStartOver(){trackDeleteSiteOption("start-over")},checkForSubscriptions:function checkForSubscriptions(event){trackDeleteSiteOption("delete-site");var activeSubscriptions=(0,_filter2.default)(this.props.sitePurchases,"active");if(!activeSubscriptions.length){return true}event.preventDefault();this.setState({showDialog:true})},closeDialog:function closeDialog(){this.setState({showDialog:false})}})},2689:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DeleteSite=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _debug=__webpack_require__(4);var _debug2=_interopRequireDefault(_debug);var _reactAddonsLinkedStateMixin=__webpack_require__(340);var _reactAddonsLinkedStateMixin2=_interopRequireDefault(_reactAddonsLinkedStateMixin);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _property=__webpack_require__(153);var _property2=_interopRequireDefault(_property);var _headerCake=__webpack_require__(1460);var _headerCake2=_interopRequireDefault(_headerCake);var _actionPanel=__webpack_require__(2176);var _actionPanel2=_interopRequireDefault(_actionPanel);var _title=__webpack_require__(2177);var _title2=_interopRequireDefault(_title);var _body=__webpack_require__(2173);var _body2=_interopRequireDefault(_body);var _figure=__webpack_require__(2174);var _figure2=_interopRequireDefault(_figure);var _footer=__webpack_require__(2175);var _footer2=_interopRequireDefault(_footer);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _deleteSiteWarningDialog=__webpack_require__(2178);var _deleteSiteWarningDialog2=_interopRequireDefault(_deleteSiteWarningDialog);var _dialog=__webpack_require__(148);var _dialog2=_interopRequireDefault(_dialog);var _selectors=__webpack_require__(1530);var _selectors2=__webpack_require__(70);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);var _notices=__webpack_require__(71);var _notices2=_interopRequireDefault(_notices);var _paths=__webpack_require__(652);var _paths2=_interopRequireDefault(_paths);var _querySitePurchases=__webpack_require__(2070);var _querySitePurchases2=_interopRequireDefault(_querySitePurchases);var _actions=__webpack_require__(393);var _actions2=_interopRequireDefault(_actions);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=(0,_debug2.default)("calypso:my-sites:site-settings");var DeleteSite=exports.DeleteSite=_react2.default.createClass({displayName:"DeleteSite",mixins:[_reactAddonsLinkedStateMixin2.default],getInitialState:function getInitialState(){return{showConfirmDialog:false,confirmDomain:"",site:this.props.sites.getSelectedSite(),showWarningDialog:false}},componentWillMount:function componentWillMount(){debug("Mounting DeleteSite React component.");this.props.sites.on("change",this._updateSite)},componentWillUnmount:function componentWillUnmount(){this.props.sites.off("change",this._updateSite)},renderNotice:function renderNotice(){var site=this.state.site;if(!site){return null}return _react2.default.createElement(_notice2.default,{status:"is-warning",showDismiss:false},this.translate("{{strong}}%(domain)s{{/strong}} will be unavailable in the future.",{components:{strong:_react2.default.createElement("strong",null)},args:{domain:site.domain}}))},render:function render(){var site=this.state.site,adminURL=site.options&&site.options.admin_url?site.options.admin_url:"",exportLink=_config2.default.isEnabled("manage/export")?"/settings/export/"+site.slug:adminURL+"tools.php?page=export-choices",exportTarget=_config2.default.isEnabled("manage/export")?undefined:"_blank",deleteDisabled=typeof this.state.confirmDomain!=="string"||this.state.confirmDomain.toLowerCase().replace(/\s/g,"")!==site.domain;var deleteButtons=[_react2.default.createElement(_button2.default,{onClick:this.closeConfirmDialog},this.translate("Cancel")),_react2.default.createElement(_button2.default,{primary:true,scary:true,disabled:deleteDisabled,onClick:this._deleteSite},this.translate("Delete this Site"))];var strings={deleteSite:this.translate("Delete Site"),confirmDeleteSite:this.translate("Confirm Delete Site"),exportContentFirst:this.translate("Export Content First"),exportContent:this.translate("Export Content"),contactSupport:this.translate("Contact Support")};return _react2.default.createElement("div",{className:"main main-column",role:"main"},site&&_react2.default.createElement(_querySitePurchases2.default,{siteId:site.ID}),_react2.default.createElement(_headerCake2.default,{onClick:this._goBack},_react2.default.createElement("h1",null,strings.deleteSite)),_react2.default.createElement(_actionPanel2.default,null,_react2.default.createElement(_body2.default,null,_react2.default.createElement(_figure2.default,null,_react2.default.createElement("svg",{width:"158",height:"174",viewBox:"0 0 158 174",xmlns:"http://www.w3.org/2000/svg"},_react2.default.createElement("title",null,strings.exportContent),_react2.default.createElement("g",{transform:"translate(0 -5)",fill:"none",fillRule:"evenodd"},_react2.default.createElement("rect",{fill:"#D5E5EB",x:"57",y:"157",width:"45",height:"22",rx:"4"}),_react2.default.createElement("text",{fontFamily:"Open Sans",fontSize:"11",fontWeight:"526",fill:"#FFF"},_react2.default.createElement("tspan",{x:"69.736",y:"172"},".ZIP")),_react2.default.createElement("path",{d:"M89.5 131.5h-6v-9h-9v9h-6L79 142l10.5-10.5zm-21 13.5v3h21v-3h-21z",fill:"#D5E5EB"}),_react2.default.createElement("path",{d:"M61 118h36v36H61v-36z"}),_react2.default.createElement("path",{d:"M.03 40.992l54.486-29.92 25.18 13.238-54.62 29.734L.032 40.992z",fill:"#D5E5EB"}),_react2.default.createElement("path",{d:"M157.9 40.992l-54.484-29.92-25.18 13.238 54.62 29.734L157.9 40.992z",fill:"#D5E5EB"}),_react2.default.createElement("path",{d:"M118.9 43.846c0 21.098-17.186 38.266-38.304 38.266-21.118 0-38.303-17.168-38.303-38.266S59.478 5.58 80.596 5.58 118.9 22.748 118.9 43.846zM65.55 74.81L49.132 29.837a34.013 34.013 0 0 0-2.992 14.008c0 13.624 7.952 25.367 19.41 30.963zM101.2 53.24c1.495-4.783 2.65-8.2 2.65-11.147 0-4.23-1.54-7.175-2.864-9.48-1.71-2.82-3.378-5.21-3.378-8.072 0-3.16 2.394-6.108 5.772-6.108l.47.042c-6.114-5.594-14.278-9.052-23.256-9.052-12.012 0-22.614 6.19-28.77 15.502l2.223.042c3.59 0 9.148-.427 9.148-.427 1.88-.086 2.094 2.605.256 2.86 0 0-1.88.214-3.976.3l12.568 37.284 7.525-22.593-5.344-14.692c-1.88-.085-3.633-.298-3.633-.298-1.84-.128-1.625-2.947.214-2.86 0 0 5.685.425 9.063.425 3.633 0 9.19-.427 9.19-.427 1.838-.086 2.094 2.605.215 2.86 0 0-1.84.214-3.934.3l12.44 36.985 3.422-11.446zM92.01 76.304c-.085-.172-.17-.3-.213-.47l-10.603-29L70.85 76.86c3.12.895 6.37 1.365 9.746 1.365 4.02 0 7.865-.683 11.414-1.92zm19.024-45.44c0 3.5-.643 7.43-2.608 12.342L97.91 73.57c10.216-5.936 17.098-17.04 17.098-29.724 0-5.98-1.495-11.616-4.188-16.528a31.01 31.01 0 0 1 .214 3.546z",fill:"#A8BECE"}),_react2.default.createElement("path",{d:"M133.263 53.938v37.715L79 113.728V76.014l54.263-22.076zM24.737 53.938v37.715L79 113.728V76.014L24.737 53.938z",fill:"#D5E5EB"}),_react2.default.createElement("path",{d:"M155.74 70.355L102.527 92.48 78.125 75.12l55.24-21.407 22.374 16.642z",stroke:"#FFF",strokeWidth:"2.4",fill:"#D5E5EB"}),_react2.default.createElement("path",{d:"M2.08 70.355L55.294 92.48l24.402-17.36-54.582-21.297L2.08 70.355z",stroke:"#FFF",strokeWidth:"2.4",fill:"#D5E5EB"})))),_react2.default.createElement(_title2.default,null,strings.exportContentFirst),_react2.default.createElement("p",null,this.translate("Before deleting your site, please take the time to export your content now. "+"All your posts, pages, and settings will be packaged into a .zip file that you can use in "+"the future to resume where you left off.")),_react2.default.createElement("p",null,this.translate("Keep in mind that this content {{strong}}can not{{/strong}} be recovered in the future.",{components:{strong:_react2.default.createElement("strong",null)}}))),_react2.default.createElement(_footer2.default,null,_react2.default.createElement(_button2.default,{className:"settings-action-panel__export-button",disabled:!this.state.site,onClick:this._checkSiteLoaded,href:exportLink,target:exportTarget},strings.exportContent,_react2.default.createElement(_gridicon2.default,{icon:"external"})))),_react2.default.createElement(_actionPanel2.default,null,_react2.default.createElement(_title2.default,null,strings.deleteSite),_react2.default.createElement(_body2.default,null,this.renderNotice(),_react2.default.createElement(_figure2.default,null,_react2.default.createElement("h3",{className:"delete-site__content-list-header"},this.translate("These items will be deleted")),_react2.default.createElement("ul",{className:"delete-site__content-list"},_react2.default.createElement("li",{className:"delete-site__content-list-item"},this.translate("Posts")),_react2.default.createElement("li",{className:"delete-site__content-list-item"},this.translate("Pages")),_react2.default.createElement("li",{className:"delete-site__content-list-item"},this.translate("Media")),_react2.default.createElement("li",{className:"delete-site__content-list-item"},this.translate("Users & Authors")),_react2.default.createElement("li",{className:"delete-site__content-list-item"},this.translate("Domains")),_react2.default.createElement("li",{className:"delete-site__content-list-item"},this.translate("Purchased Upgrades")))),_react2.default.createElement("p",null,this.translate("This action {{strong}}can not{{/strong}} be undone. Deleting the site will remove all content, "+"contributors, domains, and upgrades from the site.",{components:{strong:_react2.default.createElement("strong",null)}})),_react2.default.createElement("p",null,this.translate("If you're unsure about what will be deleted or need any help, not to worry, our support team "+"is here to answer any questions you might have.")),_react2.default.createElement("p",null,_react2.default.createElement("a",{className:"settings-action-panel__body-text-link",href:"/help/contact"},strings.contactSupport))),_react2.default.createElement(_footer2.default,null,_react2.default.createElement(_button2.default,{scary:true,disabled:!this.state.site||!this.props.hasLoadedSitePurchasesFromServer,onClick:this.handleDeleteSiteClick},_react2.default.createElement(_gridicon2.default,{icon:"trash"}),strings.deleteSite)),_react2.default.createElement(_deleteSiteWarningDialog2.default,{isVisible:this.state.showWarningDialog,onClose:this.closeWarningDialog
}),_react2.default.createElement(_dialog2.default,{isVisible:this.state.showConfirmDialog,buttons:deleteButtons,className:"delete-site__confirm-dialog"},_react2.default.createElement("h1",{className:"delete-site__confirm-header"},strings.confirmDeleteSite),_react2.default.createElement("p",{className:"delete-site__confirm-paragraph"},this.translate("Please type in {{warn}}%(siteAddress)s{{/warn}} in the field below to confirm. Your site will then be gone forever.",{components:{warn:_react2.default.createElement("span",{className:"delete-site__target-domain"})},args:{siteAddress:site.domain}})),_react2.default.createElement("input",{autoCapitalize:"off",className:"delete-site__confirm-input",type:"text",valueLink:this.linkState("confirmDomain")}))))},handleDeleteSiteClick:function handleDeleteSiteClick(event){var hasActiveSubscriptions;event.preventDefault();if(!this.props.hasLoadedSitePurchasesFromServer){return}hasActiveSubscriptions=this.props.sitePurchases.filter((0,_property2.default)("active")).length>0;if(hasActiveSubscriptions){this.setState({showWarningDialog:true})}else{this.setState({showConfirmDialog:true})}},closeConfirmDialog:function closeConfirmDialog(){this.setState({showConfirmDialog:false})},closeWarningDialog:function closeWarningDialog(){this.setState({showWarningDialog:false})},_goBack:function _goBack(){var site=this.state.site;(0,_page2.default)("/settings/general/"+site.slug)},_deleteSite:function _deleteSite(){var siteDomain=this.state.site.domain;this.setState({showConfirmDialog:false});_notices2.default.success(this.translate("{{strong}}%(siteDomain)s{{/strong}} is being deleted.",{args:{siteDomain:siteDomain},components:{strong:_react2.default.createElement("strong",null)}}));_actions2.default.deleteSite(this.state.site,function(error){if(!error){_page2.default.redirect("/stats");_notices2.default.success(this.translate("{{strong}}%(siteDomain)s{{/strong}} has been deleted.",{args:{siteDomain:siteDomain},components:{strong:_react2.default.createElement("strong",null)}}))}else if(error.error==="active-subscriptions"){error.message=this.translate("You must cancel any active subscriptions prior to deleting your site.");_notices2.default.error(error.message,{button:"Manage Purchases",showDismiss:false,onClick:this.managePurchases})}else{_notices2.default.error(error.message)}}.bind(this))},_updateSite:function _updateSite(){this.setState({site:this.props.sites.getSelectedSite()})},_checkSiteLoaded:function _checkSiteLoaded(event){if(!this.state.site){event.preventDefault()}},managePurchases:function managePurchases(){(0,_page2.default)(_paths2.default.list())}});exports.default=(0,_reactRedux.connect)(function(state){return{sitePurchases:(0,_selectors.getSitePurchases)(state,(0,_selectors2.getSelectedSiteId)(state)),hasLoadedSitePurchasesFromServer:(0,_selectors.hasLoadedSitePurchasesFromServer)(state)}})(DeleteSite)},2690:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _notices=__webpack_require__(71);var _notices2=_interopRequireDefault(_notices);var _debug=__webpack_require__(4);var _debug2=_interopRequireDefault(_debug);var _formBase=__webpack_require__(1621);var _formBase2=_interopRequireDefault(_formBase);var _productsValues=__webpack_require__(80);var _productsValues2=_interopRequireDefault(_productsValues);var _protectForm=__webpack_require__(650);var _protectForm2=_interopRequireDefault(_protectForm);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _upgradeNudge=__webpack_require__(1545);var _upgradeNudge2=_interopRequireDefault(_upgradeNudge);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _externalLink=__webpack_require__(353);var _externalLink2=_interopRequireDefault(_externalLink);var _abtest=__webpack_require__(248);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=(0,_debug2.default)("calypso:my-sites:site-settings");exports.default=_react2.default.createClass({displayName:"SiteSettingsFormAnalytics",mixins:[_protectForm2.default.mixin,_formBase2.default],getInitialState:function getInitialState(){return{isCodeValid:true}},resetState:function resetState(){this.replaceState({wga:{code:null},fetchingSettings:true});debug("resetting state")},getSettingsFromSite:function getSettingsFromSite(siteInstance){var site=siteInstance||this.props.site;var settings={wga:{code:""},fetchingSettings:site.fetchingSettings};if(site.settings){debug("site settings fetched");settings.wga=site.settings.wga}return settings},isCodeValid:function isCodeValid(code){return!code||code.match(/^UA-\d+-\d+$/i)},handleCodeChange:function handleCodeChange(event){var code=event.target.value;var isCodeValid=this.isCodeValid(code);var notice=this.state.notice;if(!isCodeValid&&!notice){notice=_notices2.default.error(this.translate("Invalid Google Analytics Tracking ID."))}else if(isCodeValid&&notice){_notices2.default.removeNotice(notice);notice=null}this.setState({wga:{code:event.target.value},isCodeValid:isCodeValid,notice:notice})},isSubmitButtonDisabled:function isSubmitButtonDisabled(){return this.state.fetchingSettings||this.state.submittingForm||!this.state.isCodeValid},onClickAnalyticsInput:function onClickAnalyticsInput(){this.recordEvent("Clicked Analytics Key Field")},onKeyPressAnalyticsInput:function onKeyPressAnalyticsInput(){this.recordEventOnce("typedAnalyticsKey","Typed In Analytics Key Field")},getUpgradeLink:function getUpgradeLink(){if(!this.props.site||!this.props.site.domain){return"/plans"}var plansVariant=(0,_abtest.abtest)("contextualGoogleAnalyticsNudge");var upgradeLink=void 0;switch(plansVariant){case"settingsDisabledFeature":upgradeLink="/plans/features/google-analytics/"+this.props.site.domain;break;case"settingsDisabledPlansCompare":upgradeLink="/plans/compare/google-analytics/"+this.props.site.domain;break;case"settingsDisabledPlans":case"drake":default:upgradeLink="/plans/"+this.props.site.domain}return upgradeLink},form:function form(){var placeholderText="";if(this.state.fetchingSettings){placeholderText=this.translate("Loading")}return _react2.default.createElement("form",{id:"site-settings",onSubmit:this.submitForm,onChange:this.markChanged},_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Analytics Settings")},_react2.default.createElement(_button2.default,{primary:true,compact:true,disabled:this.isSubmitButtonDisabled(),onClick:this.submitForm},this.state.submittingForm?this.translate("Saving"):this.translate("Save Settings"))),_react2.default.createElement(_card2.default,{className:"analytics-settings"},this.renderNudge(),_react2.default.createElement("fieldset",null,_react2.default.createElement("label",{htmlFor:"wgaCode"},this.translate("Google Analytics Tracking ID",{context:"site setting"})),_react2.default.createElement("input",{name:"wgaCode",id:"wgaCode",type:"text",value:this.state.wga.code,onChange:this.handleCodeChange,placeholder:placeholderText,disabled:this.state.fetchingSettings||!this.isEnabled(),onClick:this.onClickAnalyticsInput,onKeyPress:this.onKeyPressAnalyticsInput}),_react2.default.createElement(_externalLink2.default,{icon:true,href:"https://support.google.com/analytics/answer/1032385?hl=en",target:"_blank"},this.translate("Where can I find my Tracking ID?"))),_react2.default.createElement("p",null,this.translate("Google Analytics is a free service that complements our {{a}}built-in stats{{/a}} with different insights into your traffic."+" WordPress.com stats and Google Analytics use different methods to identify and track activity on your site, so they will "+"normally show slightly different totals for your visits, views, etc.",{components:{a:_react2.default.createElement("a",{href:"/stats/"+this.props.site.domain})}})),_react2.default.createElement("p",null,this.translate("Learn more about using {{a}}Google Analytics with WordPress.com{{/a}}.",{components:{a:_react2.default.createElement("a",{href:"http://en.support.wordpress.com/google-analytics/",target:"_blank"})}}))))},isEnabled:function isEnabled(){return _productsValues2.default.isBusiness(this.props.site.plan)||_productsValues2.default.isEnterprise(this.props.site.plan)},renderNudge:function renderNudge(){if(this.isEnabled()){return}debug("Google analitics is not enabled. adding nudge ...");return _react2.default.createElement(_upgradeNudge2.default,{title:this.translate("Add Google Analytics"),message:this.translate("Upgrade to the business plan and include your own analytics tracking ID."),feature:"google-analytics",event:"google_analytics_settings",icon:"stats-alt"})},render:function render(){if(!this.props.site){return null}return this.form()}});module.exports=exports["default"]},2691:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),debug=__webpack_require__(4)("calypso:my-sites:site-settings");var formBase=__webpack_require__(1621),protectForm=__webpack_require__(650),dirtyLinkedState=__webpack_require__(1657),FormFieldset=__webpack_require__(338),FormLabel=__webpack_require__(645),FormLegend=__webpack_require__(1501),FormTextarea=__webpack_require__(1480),FormTextInput=__webpack_require__(246),FormCheckbox=__webpack_require__(1463),FormSelect=__webpack_require__(1484),FormSettingExplanation=__webpack_require__(1477),Card=__webpack_require__(145),Button=__webpack_require__(68),SectionHeader=__webpack_require__(1451);module.exports=React.createClass({displayName:"SiteSettingsFormDiscussion",mixins:[dirtyLinkedState,protectForm.mixin,formBase],discussionAttributes:["default_pingback_flag","default_ping_status","default_comment_status","require_name_email","comment_registration","close_comments_for_old_posts","close_comments_days_old","thread_comments","thread_comments_depth","page_comments","comments_per_page","default_comments_page","comment_order","comments_notify","moderation_notify","social_notifications_like","social_notifications_reblog","social_notifications_subscribe","comment_moderation","comment_whitelist","comment_max_links","moderation_keys","blacklist_keys","admin_url","wpcom_publish_comments_with_markdown","markdown_supported"],getSettingsFromSite:function getSettingsFromSite(siteInstance){var site=siteInstance||this.props.site,settings={};if(site.settings){this.discussionAttributes.map(function(attribute){settings[attribute]=site.settings[attribute]},this)}settings.fetchingSettings=site.fetchingSettings;return settings},resetState:function resetState(){var clearSettings={fetchingSettings:true};this.discussionAttributes.forEach(function(attribute){clearSettings[attribute]=""});this.replaceState(clearSettings);debug("resetting state")},defaultArticleSettings:function defaultArticleSettings(){return React.createElement(FormFieldset,null,React.createElement(FormLegend,null,this.translate("Default article settings")),React.createElement(FormLabel,null,React.createElement(FormCheckbox,{name:"default_pingback_flag",checkedLink:this.linkState("default_pingback_flag"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Attempt to Notify Checkbox")}),React.createElement("span",null,this.translate("Attempt to notify any blogs linked to from the article"))),React.createElement(FormLabel,null,React.createElement(FormCheckbox,{name:"default_ping_status",checkedLink:this.linkState("default_ping_status"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Allow Link Notifications Checkbox")}),React.createElement("span",null,this.translate("Allow link notifications from other blogs (pingbacks and trackbacks)"))),React.createElement(FormLabel,null,React.createElement(FormCheckbox,{name:"default_comment_status",checkedLink:this.linkState("default_comment_status"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Allow People to Post Comments Checkbox")}),React.createElement("span",null,this.translate("Allow people to post comments on new articles"))),React.createElement(FormSettingExplanation,null,this.translate("(These settings may be overridden for individual articles.)")))},otherCommentSettings:function otherCommentSettings(){var markdownSupported=this.state.markdown_supported;return React.createElement(FormFieldset,{className:"has-divider"},React.createElement(FormLabel,null,this.translate("Other comment settings")),React.createElement(FormLabel,null,React.createElement(FormCheckbox,{name:"require_name_email",checkedLink:this.linkState("require_name_email"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Comment Author Must Fill Checkbox")}),React.createElement("span",null,this.translate("Comment author must fill out name and e-mail"))),React.createElement(FormLabel,null,React.createElement(FormCheckbox,{name:"comment_registration",checkedLink:this.linkState("comment_registration"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Users Must Be Registered Checkbox")}),React.createElement("span",null,this.translate("Users must be registered and logged in to comment"))),React.createElement(FormLabel,null,React.createElement(FormCheckbox,{name:"close_comments_for_old_posts",checkedLink:this.linkState("close_comments_for_old_posts"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Automatically Close Days Checkbox")}),React.createElement("span",null,this.translate("Automatically close comments on articles older than {{numberOfDays /}} day","Automatically close comments on articles older than {{numberOfDays /}} days",{count:this.state.close_comments_days_old||2,components:{numberOfDays:React.createElement(FormTextInput,{name:"close_comments_days_old",type:"number",min:"0",step:"1",id:"close_comments_days_old",className:"small-text",valueLink:this.linkState("close_comments_days_old"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Automatically Close Days Field"),onKeyPress:this.recordEventOnce.bind(this,"typedAutoCloseDays","Typed in Automatically Close Days Field")})}}))),React.createElement(FormLabel,null,React.createElement(FormCheckbox,{name:"thread_comments",checkedLink:this.linkState("thread_comments"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Enable Threaded Checkbox")}),React.createElement("span",null,this.translate("Enable threaded (nested) comments up to {{number /}} levels deep",{components:{number:React.createElement(FormSelect,{className:"is-compact",name:"thread_comments_depth",valueLink:this.linkState("thread_comments_depth"),disabled:this.state.fetchingSettings,onClick:this.recordClickEventAndStop.bind(this,"Selected Comment Nesting Level")},[2,3,4,5,6,7,8,9,10].map(function(level){return React.createElement("option",{value:level,key:"comment-depth-"+level},level)}))}}))),React.createElement(FormLabel,null,React.createElement(FormCheckbox,{name:"page_comments",id:"page_comments",checkedLink:this.linkState("page_comments"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Break Comments Into Pages Checkbox")}),React.createElement("span",null,this.translate("Break comments into pages with {{numComments /}} top level comments per page and the {{firstOrLast /}} page displayed by default",{components:{numComments:React.createElement(FormTextInput,{name:"comments_per_page",type:"number",step:"1",min:"0",id:"comments_per_page",valueLink:this.linkState("comments_per_page"),className:"small-text",disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Comments Per Page Field"),onKeyPress:this.recordEventOnce.bind(this,"typedCommentsPerPage","Typed in Comments Per Page Field")}),firstOrLast:React.createElement(FormSelect,{className:"is-compact",name:"default_comments_page",valueLink:this.linkState("default_comments_page"),disabled:this.state.fetchingSettings,onClick:this.recordClickEventAndStop.bind(this,"Selected Comment Page Display Default")},React.createElement("option",{value:"newest"},this.translate("last")),React.createElement("option",{value:"oldest"},this.translate("first")))}}))),markdownSupported&&React.createElement(FormLabel,null,React.createElement(FormCheckbox,{name:"wpcom_publish_comments_with_markdown",checkedLink:this.linkState("wpcom_publish_comments_with_markdown"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Markdown for Comments Checkbox")}),React.createElement("span",null,this.translate("Enable Markdown for comments. {{a}}Learn more about markdown{{/a}}.",{components:{a:React.createElement("a",{href:"http://en.support.wordpress.com/markdown-quick-reference/",target:"_blank"})}}))),React.createElement(FormLabel,null,React.createElement("span",null,this.translate("Comments should be displayed with the {{olderOrNewer /}} comments at the top of each page",{components:{olderOrNewer:React.createElement(FormSelect,{className:"is-compact",name:"comment_order",valueLink:this.linkState("comment_order"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Selected Comment Order on Page")},React.createElement("option",{value:"asc"},this.translate("older",{textOnly:true})),React.createElement("option",{value:"desc"},this.translate("newer",{textOnly:true})))}}))))},emailMeSettings:function emailMeSettings(){return React.createElement(FormFieldset,null,React.createElement(FormLegend,null,this.translate("E-mail me whenever")),React.createElement(FormLabel,{className:"short-settings"},React.createElement(FormCheckbox,{name:"comments_notify",checkedLink:this.linkState("comments_notify"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Anyone Posts a Comment Checkbox")}),React.createElement("span",null,this.translate("Anyone posts a comment"))),React.createElement(FormLabel,{className:"short-settings"},React.createElement(FormCheckbox,{name:"moderation_notify",checkedLink:this.linkState("moderation_notify"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked a Comment is Held Checkbox")}),React.createElement("span",null,this.translate("A comment is held for moderation"))),this.emailMeLikes(),this.emailMeReblogs(),this.emailMeFollows())},emailMeLikes:function emailMeLikes(){if(this.props.site.jetpack&&!this.props.site.isModuleActive("likes")){return null}return React.createElement(FormLabel,{className:"short-settings"},React.createElement(FormCheckbox,{name:"social_notifications_like",checkedLink:this.linkState("social_notifications_like"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Someone Likes Checkbox")}),React.createElement("span",null,this.translate("Someone likes one of my posts")))},emailMeReblogs:function emailMeReblogs(){if(this.props.site.jetpack){return null}return React.createElement(FormLabel,{className:"short-settings"},React.createElement(FormCheckbox,{name:"social_notifications_reblog",checkedLink:this.linkState("social_notifications_reblog"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Someone Reblogs Checkbox")}),React.createElement("span",null,this.translate("Someone reblogs one of my posts")))},emailMeFollows:function emailMeFollows(){if(this.props.site.jetpack){return null}return React.createElement(FormLabel,{className:"short-settings"},React.createElement(FormCheckbox,{name:"social_notifications_subscribe",checkedLink:this.linkState("social_notifications_subscribe"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Someone Follows Checkbox")}),React.createElement("span",null,this.translate("Someone follows my blog")))},beforeCommentSettings:function beforeCommentSettings(){return React.createElement(FormFieldset,null,React.createElement(FormLegend,null,this.translate("Before a comment appears")),React.createElement(FormLabel,{className:"short-settings"},React.createElement(FormCheckbox,{name:"comment_moderation",checkedLink:this.linkState("comment_moderation"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Comment Manually Approved Checkbox")}),React.createElement("span",null,this.translate("Comment must be manually approved"))),React.createElement(FormLabel,{className:"short-settings"},React.createElement(FormCheckbox,{name:"comment_whitelist",checkedLink:this.linkState("comment_whitelist"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Comment Previously Approved Checkbox")}),React.createElement("span",null,this.translate("Comment author must have a previously approved comment"))))},commentModerationSettings:function commentModerationSettings(){return React.createElement(FormFieldset,{className:"has-divider"},React.createElement(FormLabel,{htmlFor:"moderation_keys"},this.translate("Comment Moderation")),React.createElement("p",null,this.translate("Hold a comment in the queue if it contains {{numberOfLinks /}} or more links. (A common characteristic of comment spam is a large number of hyperlinks.)",{components:{numberOfLinks:React.createElement(FormTextInput,{name:"comment_max_links",type:"number",step:"1",min:"0",className:"small-text",valueLink:this.linkState("comment_max_links"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Comment Queue Link Count Field"),onKeyPress:this.recordEventOnce.bind(this,"typedCommentQueue","Typed In Comment Queue Link Count Field")})}})),React.createElement("p",null,this.translate('When a comment contains any of these words in its content, name, URL, e-mail, or IP, it will be held in the {{link}}moderation queue{{/link}}. One word or IP per line. It will match inside words, so "press" will match "WordPress".',{components:{link:React.createElement("a",{href:this.state.admin_url+"edit-comments.php?comment_status=moderated",target:"_blank"})}})),React.createElement("p",null,React.createElement(FormTextarea,{name:"moderation_keys",id:"moderation_keys",valueLink:this.linkState("moderation_keys"),disabled:this.state.fetchingSettings,autoCapitalize:"none",onClick:this.recordEvent.bind(this,"Clicked Moderation Queue Field"),onKeyPress:this.recordEventOnce.bind(this,"typedModerationKeys","Typed In Moderation Queue Field")})))},commentBlacklistSettings:function commentBlacklistSettings(){return React.createElement(FormFieldset,null,React.createElement(FormLabel,{htmlFor:"blacklist_keys"},this.translate("Comment Blacklist")),React.createElement("p",null,this.translate('When a comment contains any of these words in its content, name, URL, e-mail, or IP, it will be marked as spam. One word or IP per line. It will match inside words, so "press" will match "WordPress".')),React.createElement("p",null,React.createElement(FormTextarea,{name:"blacklist_keys",id:"blacklist_keys",valueLink:this.linkState("blacklist_keys"),disabled:this.state.fetchingSettings,autoCapitalize:"none",onClick:this.recordEvent.bind(this,"Clicked Blacklist Field"),onKeyPress:this.recordEventOnce.bind(this,"typedBlacklistKeys","Typed In Blacklist Field")})))},render:function render(){return React.createElement("form",{id:"site-settings",onSubmit:this.submitForm,onChange:this.markChanged},React.createElement(SectionHeader,{label:this.translate("Discussion Settings")},React.createElement(Button,{primary:true,compact:true,disabled:this.state.fetchingSettings||this.state.submittingForm,onClick:this.submitForm},this.state.submittingForm?this.translate("Saving"):this.translate("Save Settings"))),React.createElement(Card,{className:"discussion-settings"},this.defaultArticleSettings(),this.otherCommentSettings(),this.emailMeSettings(),this.beforeCommentSettings(),this.commentModerationSettings(),this.commentBlacklistSettings()))}})},2692:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _formBase=__webpack_require__(1621);var _formBase2=_interopRequireDefault(_formBase);var _relatedContentPreview=__webpack_require__(2701);var _relatedContentPreview2=_interopRequireDefault(_relatedContentPreview);var _languageSelector=__webpack_require__(1867);var _languageSelector2=_interopRequireDefault(_languageSelector);var _disconnectJetpackButton=__webpack_require__(710);var _disconnectJetpackButton2=_interopRequireDefault(_disconnectJetpackButton);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _protectForm=__webpack_require__(650);var _protectForm2=_interopRequireDefault(_protectForm);var _notices=__webpack_require__(71);var _notices2=_interopRequireDefault(_notices);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);var _dirtyLinkedState=__webpack_require__(1657);var _dirtyLinkedState2=_interopRequireDefault(_dirtyLinkedState);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);var _formTextInput=__webpack_require__(246);var _formTextInput2=_interopRequireDefault(_formTextInput);var _formFieldset=__webpack_require__(338);var _formFieldset2=_interopRequireDefault(_formFieldset);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _formRadio=__webpack_require__(1510);var _formRadio2=_interopRequireDefault(_formRadio);var _formCheckbox=__webpack_require__(1463);var _formCheckbox2=_interopRequireDefault(_formCheckbox);var _formSettingExplanation=__webpack_require__(1477);var _formSettingExplanation2=_interopRequireDefault(_formSettingExplanation);var _timezone=__webpack_require__(2324);var _timezone2=_interopRequireDefault(_timezone);var _jetpackSyncPanel=__webpack_require__(2698);var _jetpackSyncPanel2=_interopRequireDefault(_jetpackSyncPanel);var _upgradeNudge=__webpack_require__(1545);var _upgradeNudge2=_interopRequireDefault(_upgradeNudge);var _productsValues=__webpack_require__(80);var _constants=__webpack_require__(187);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FormGeneral=_react2.default.createClass({displayName:"SiteSettingsFormGeneral",mixins:[_dirtyLinkedState2.default,_protectForm2.default.mixin,_formBase2.default],getSettingsFromSite:function getSettingsFromSite(site){site=site||this.props.site;var settings={blogname:site.name,blogdescription:site.description,fetchingSettings:site.fetchingSettings};if(site.settings){settings.lang_id=site.settings.lang_id;settings.blog_public=site.settings.blog_public;settings.admin_url=site.settings.admin_url;settings.timezone_string=site.settings.timezone_string;settings.jetpack_relatedposts_allowed=site.settings.jetpack_relatedposts_allowed;settings.jetpack_sync_non_public_post_stati=site.settings.jetpack_sync_non_public_post_stati;if(settings.jetpack_relatedposts_allowed){settings.jetpack_relatedposts_enabled=site.settings.jetpack_relatedposts_enabled?1:0;settings.jetpack_relatedposts_show_headline=site.settings.jetpack_relatedposts_show_headline;settings.jetpack_relatedposts_show_thumbnails=site.settings.jetpack_relatedposts_show_thumbnails}if(site.settings.holidaysnow){settings.holidaysnow=site.settings.holidaysnow}var gmt_offset=site.settings.gmt_offset;if(!settings.timezone_string&&typeof gmt_offset==="string"&&gmt_offset.length){settings.timezone_string="UTC"+(/\-/.test(gmt_offset)?"":"+")+gmt_offset}}return settings},componentWillMount:function componentWillMount(){this._showWarning(this.props.site)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){this._showWarning(nextProps.site)},resetState:function resetState(){this.replaceState({fetchingSettings:true,blogname:"",blogdescription:"",lang_id:"",timezone_string:"",blog_public:"",admin_url:"",jetpack_relatedposts_allowed:false,jetpack_relatedposts_enabled:false,jetpack_relatedposts_show_headline:false,jetpack_relatedposts_show_thumbnails:false,jetpack_sync_non_public_post_stati:false,holidaysnow:false})},onTimezoneSelect:function onTimezoneSelect(timezone){this.setState({timezone_string:timezone})},onRecordEvent:function onRecordEvent(eventAction){return this.recordEvent.bind(this,eventAction)},onRecordEventOnce:function onRecordEventOnce(key,eventAction){return this.recordEventOnce.bind(this,key,eventAction)},siteOptions:function siteOptions(){return _react2.default.createElement("div",null,_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,{htmlFor:"blogname"},this.translate("Site Title")),_react2.default.createElement(_formTextInput2.default,{name:"blogname",id:"blogname",type:"text",valueLink:this.linkState("blogname"),disabled:this.state.fetchingSettings,onClick:this.onRecordEvent("Clicked Site Title Field"),onKeyPress:this.onRecordEventOnce("typedTitle","Typed in Site Title Field")})),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,{htmlFor:"blogdescription"},this.translate("Site Tagline")),_react2.default.createElement(_formTextInput2.default,{name:"blogdescription",type:"text",id:"blogdescription",valueLink:this.linkState("blogdescription"),disabled:this.state.fetchingSettings,onClick:this.onRecordEvent("Clicked Site Site Tagline Field"),onKeyPress:this.onRecordEventOnce("typedTagline","Typed in Site Site Tagline Field")}),_react2.default.createElement(_formSettingExplanation2.default,null,this.translate("In a few words, explain what this site is about."))))},blogAddress:function blogAddress(){var site=this.props.site;var customAddress="",addressDescription="";if(site.jetpack){return null}if(_config2.default.isEnabled("upgrades/domain-search")){customAddress=_react2.default.createElement(_button2.default,{href:"/domains/add/"+site.slug,onClick:this.trackUpgradeClick},_react2.default.createElement(_gridicon2.default,{icon:"plus"})," ",this.translate("Add a Custom Address",{context:"Site address, domain"}));addressDescription=_react2.default.createElement(_formSettingExplanation2.default,null,this.translate("Buy a {{domainSearchLink}}custom domain{{/domainSearchLink}}, "+"{{mapDomainLink}}map{{/mapDomainLink}} a domain you already own, "+"or {{redirectLink}}redirect{{/redirectLink}} this site.",{components:{domainSearchLink:_react2.default.createElement("a",{href:"/domains/add/"+site.slug,onClick:this.trackUpgradeClick}),mapDomainLink:_react2.default.createElement("a",{href:"/domains/add/mapping/"+site.slug,onClick:this.trackUpgradeClick}),redirectLink:_react2.default.createElement("a",{href:"/domains/add/site-redirect/"+site.slug,onClick:this.trackUpgradeClick})}}))}return _react2.default.createElement(_formFieldset2.default,{className:"site-settings__has-divider"},_react2.default.createElement(_formLabel2.default,{htmlFor:"blogaddress"},this.translate("Site Address")),_react2.default.createElement("div",{className:"site-settings__blogaddress-settings"},_react2.default.createElement(_formTextInput2.default,{name:"blogaddress",type:"text",id:"blogaddress",value:this.props.site.domain,disabled:"disabled"}),customAddress),addressDescription)},trackUpgradeClick:function trackUpgradeClick(){_analytics2.default.tracks.recordEvent("calypso_upgrade_nudge_cta_click",{cta_name:"settings_site_address"})},languageOptions:function languageOptions(){if(this.props.site.jetpack){return null}return _react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,{
htmlFor:"lang_id"},this.translate("Language")),_react2.default.createElement(_languageSelector2.default,{name:"lang_id",id:"lang_id",languages:(0,_config2.default)("languages"),valueLink:this.linkState("lang_id"),disabled:this.state.fetchingSettings,onClick:this.onRecordEvent("Clicked Language Field")}),_react2.default.createElement(_formSettingExplanation2.default,null,this.translate("Language this blog is primarily written in."),"",_react2.default.createElement("a",{href:_config2.default.isEnabled("me/account")?"/me/account":"/settings/account/"},this.translate("You can also modify the interface language in your profile."))))},visibilityOptions:function visibilityOptions(){var site=this.props.site;return _react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,null,_react2.default.createElement(_formRadio2.default,{name:"blog_public",value:"1",checked:1===parseInt(this.state.blog_public,10),onChange:this.handleRadio,disabled:this.state.fetchingSettings,onClick:this.onRecordEvent("Clicked Site Visibility Radio Button")}),_react2.default.createElement("span",null,this.translate("Public")),_react2.default.createElement(_formSettingExplanation2.default,{isIndented:true},this.translate("Your site is visible to everyone, and it may be indexed by search engines."))),_react2.default.createElement(_formLabel2.default,null,_react2.default.createElement(_formRadio2.default,{name:"blog_public",value:"0",checked:0===parseInt(this.state.blog_public,10),onChange:this.handleRadio,disabled:this.state.fetchingSettings,onClick:this.onRecordEvent("Clicked Site Visibility Radio Button")}),_react2.default.createElement("span",null,this.translate("Hidden")),_react2.default.createElement(_formSettingExplanation2.default,{isIndented:true},this.translate("Your site is visible to everyone, but we ask search engines to not index your site."))),!site.jetpack&&_react2.default.createElement(_formLabel2.default,null,_react2.default.createElement(_formRadio2.default,{name:"blog_public",value:"-1",checked:-1===parseInt(this.state.blog_public,10),onChange:this.handleRadio,disabled:this.state.fetchingSettings,onClick:this.onRecordEvent("Clicked Site Visibility Radio Button")}),_react2.default.createElement("span",null,this.translate("Private")),_react2.default.createElement(_formSettingExplanation2.default,{isIndented:true},this.translate("Your site is only visible to you and users you approve."))))},relatedPostsOptions:function relatedPostsOptions(){if(!this.state.jetpack_relatedposts_allowed){return null}return _react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement("ul",{id:"settings-reading-relatedposts"},_react2.default.createElement("li",null,_react2.default.createElement(_formLabel2.default,null,_react2.default.createElement(_formRadio2.default,{name:"jetpack_relatedposts_enabled",value:"0",checked:0===parseInt(this.state.jetpack_relatedposts_enabled,10),onChange:this.handleRadio,onClick:this.onRecordEvent("Clicked Related Posts Radio Button")}),_react2.default.createElement("span",null,this.translate("Hide related content after posts")))),_react2.default.createElement("li",null,_react2.default.createElement(_formLabel2.default,null,_react2.default.createElement(_formRadio2.default,{name:"jetpack_relatedposts_enabled",value:"1",checked:1===parseInt(this.state.jetpack_relatedposts_enabled,10),onChange:this.handleRadio,onClick:this.onRecordEvent("Clicked Related Posts Radio Button")}),_react2.default.createElement("span",null,this.translate("Show related content after posts"))),_react2.default.createElement("ul",{id:"settings-reading-relatedposts-customize",className:1===parseInt(this.state.jetpack_relatedposts_enabled,10)?null:"disabled-block"},_react2.default.createElement("li",null,_react2.default.createElement(_formLabel2.default,null,_react2.default.createElement(_formCheckbox2.default,{name:"jetpack_relatedposts_show_headline",checkedLink:this.linkState("jetpack_relatedposts_show_headline")}),_react2.default.createElement("span",null,this.translate('Show a "Related" header to more clearly separate the related section from posts')))),_react2.default.createElement("li",null,_react2.default.createElement(_formLabel2.default,null,_react2.default.createElement(_formCheckbox2.default,{name:"jetpack_relatedposts_show_thumbnails",checkedLink:this.linkState("jetpack_relatedposts_show_thumbnails")}),_react2.default.createElement("span",null,this.translate("Use a large and visually striking layout"))))),_react2.default.createElement(_relatedContentPreview2.default,{enabled:1===parseInt(this.state.jetpack_relatedposts_enabled,10),showHeadline:this.state.jetpack_relatedposts_show_headline,showThumbnails:this.state.jetpack_relatedposts_show_thumbnails}))))},showPublicPostTypesCheckbox:function showPublicPostTypesCheckbox(){if(!_config2.default.isEnabled("manage/option_sync_non_public_post_stati")){return false}var site=this.props.site;if(site.jetpack&&site.versionCompare("4.1.1",">")){return false}return true},syncNonPublicPostTypes:function syncNonPublicPostTypes(){if(!this.showPublicPostTypesCheckbox()){return null}return _react2.default.createElement(_compact2.default,null,_react2.default.createElement("form",{onChange:this.markChanged},_react2.default.createElement("ul",{id:"settings-jetpack"},_react2.default.createElement("li",null,_react2.default.createElement(_formLabel2.default,null,_react2.default.createElement(_formCheckbox2.default,{name:"jetpack_sync_non_public_post_stati",checkedLink:this.linkState("jetpack_sync_non_public_post_stati")}),_react2.default.createElement("span",null,this.translate("Allow synchronization of Posts and Pages with non-public post statuses")),_react2.default.createElement(_formSettingExplanation2.default,{isIndented:true},this.translate("(e.g. drafts, scheduled, private, etc)")))))))},jetpackDisconnectOption:function jetpackDisconnectOption(){var site=this.props.site;var disconnectText=void 0;if(!site.jetpack){return null}disconnectText=this.translate("Disconnect Site",{context:"Jetpack: Action user takes to disconnect Jetpack site from .com link in general site settings"});return _react2.default.createElement(_disconnectJetpackButton2.default,{site:site,text:disconnectText,redirect:"/stats",linkDisplay:false})},holidaySnowOption:function holidaySnowOption(){var site=this.props.site,today=this.moment(),startDate=this.moment({year:today.year(),month:11,day:1}),endDate=this.moment({year:today.year(),month:0,day:4});if(site.jetpack&&site.versionCompare("4.0","<")){return null}if(today.isBefore(startDate,"day")&&today.isAfter(endDate,"day")){return null}return _react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement("legend",null,this.translate("Holiday Snow")),_react2.default.createElement("ul",null,_react2.default.createElement("li",null,_react2.default.createElement(_formLabel2.default,null,_react2.default.createElement(_formCheckbox2.default,{name:"holidaysnow",checkedLink:this.linkState("holidaysnow")}),_react2.default.createElement("span",null,this.translate("Show falling snow on my blog until January 4th."))))))},Timezone:function Timezone(){if(this.props.site.jetpack){return}return _react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,{htmlFor:"blogtimezone"},this.translate("Site Timezone")),_react2.default.createElement(_timezone2.default,{valueLink:this.linkState("timezone_string"),selectedZone:this.linkState("timezone_string").value,disabled:this.state.fetchingSettings,onSelect:this.onTimezoneSelect}),_react2.default.createElement(_formSettingExplanation2.default,null,this.translate("Choose a city in your timezone.")))},renderJetpackSyncPanel:function renderJetpackSyncPanel(){if(!_config2.default.isEnabled("jetpack/sync-panel")){return null}var site=this.props.site;if(!site.jetpack||this.props.site.versionCompare("4.2-alpha","<")){return null}return _react2.default.createElement(_jetpackSyncPanel2.default,null)},render:function render(){var site=this.props.site;if(site.jetpack&&!site.hasMinimumJetpackVersion){return this.jetpackDisconnectOption()}return _react2.default.createElement("div",{className:this.state.fetchingSettings?"is-loading":""},_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Site Profile")},_react2.default.createElement(_button2.default,{compact:true,onClick:this.submitForm,primary:true,type:"submit",disabled:this.state.fetchingSettings||this.state.submittingForm},this.state.submittingForm?this.translate("Saving"):this.translate("Save Settings"))),_react2.default.createElement(_card2.default,null,_react2.default.createElement("form",{onChange:this.markChanged},this.siteOptions(),this.blogAddress(),this.languageOptions(),this.Timezone(),this.holidaySnowOption())),_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Privacy")},_react2.default.createElement(_button2.default,{compact:true,onClick:this.submitForm,primary:true,type:"submit",disabled:this.state.fetchingSettings||this.state.submittingForm},this.state.submittingForm?this.translate("Saving"):this.translate("Save Settings"))),_react2.default.createElement(_card2.default,null,_react2.default.createElement("form",{onChange:this.markChanged},this.visibilityOptions())),!this.props.site.jetpack&&_react2.default.createElement("div",{className:"site-settings__footer-credit-container"},_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Footer Credit")}),_react2.default.createElement(_compact2.default,{className:"site-settings__footer-credit-explanation"},_react2.default.createElement("p",null,this.translate("You can customize your website by changing the footer credit in customizer.")),_react2.default.createElement("div",null,_react2.default.createElement(_button2.default,{className:"site-settings__footer-credit-change",href:"/customize/identity/"+site.slug},this.translate("Change footer credit")))),!(0,_productsValues.isBusiness)(site.plan)&&_react2.default.createElement(_upgradeNudge2.default,{className:"site-settings__footer-credit-nudge",feature:_constants.FEATURE_NO_BRANDING,title:this.translate("Remove the footer credit entirely with Business Plan"),message:this.translate("Upgrade to remove the footer credit, add Google Analytics and more"),icon:"customize"})),_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Related Posts")},_react2.default.createElement(_button2.default,{compact:true,onClick:this.submitForm,primary:true,type:"submit",disabled:this.state.fetchingSettings||this.state.submittingForm},this.state.submittingForm?this.translate("Saving"):this.translate("Save Settings"))),_react2.default.createElement(_card2.default,null,_react2.default.createElement("form",{onChange:this.markChanged},this.relatedPostsOptions())),this.props.site.jetpack?_react2.default.createElement("div",null,_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Jetpack")},this.jetpackDisconnectOption(),this.showPublicPostTypesCheckbox()?_react2.default.createElement(_button2.default,{compact:true,onClick:this.submitForm,primary:true,type:"submit",disabled:this.state.fetchingSettings||this.state.submittingForm},this.state.submittingForm?this.translate("Saving"):this.translate("Save Settings")):null),this.renderJetpackSyncPanel(),this.syncNonPublicPostTypes(),_react2.default.createElement(_compact2.default,{href:"../security/"+site.slug},this.translate("View Jetpack Monitor Settings")),_react2.default.createElement(_compact2.default,{href:"https://wordpress.com/manage/"+site.ID},this.translate("Migrate followers from another WordPress.com blog"))):null)},_showWarning:function _showWarning(site){if(!site||!site.options){return}if(site.jetpack&&!site.hasMinimumJetpackVersion){_notices2.default.warning(this.translate("Jetpack %(version)s is required to manage Settings",{args:{version:(0,_config2.default)("jetpack_min_version")}}),{button:this.translate("Update now"),href:site.options.admin_url+"plugins.php?plugin_status=upgrade"})}}});exports.default=FormGeneral;module.exports=exports["default"]},2693:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),debug=__webpack_require__(4)("calypso:my-sites:site-settings:security:monitor");var config=__webpack_require__(10),protectForm=__webpack_require__(650),Card=__webpack_require__(145),FormCheckbox=__webpack_require__(1463),FormLabel=__webpack_require__(645),formBase=__webpack_require__(1621),notices=__webpack_require__(71),dirtyLinkedState=__webpack_require__(1657),SectionHeader=__webpack_require__(1451),Button=__webpack_require__(68);module.exports=React.createClass({displayName:"SiteSettingsFormJetpackMonitor",mixins:[dirtyLinkedState,protectForm.mixin,formBase],getSettingsFromSite:function getSettingsFromSite(site){var settings={};site=site||this.props.site;settings.fetchingSettings=site.fetchingSettings;return settings},resetState:function resetState(){this.replaceState({togglingModule:false,emailNotifications:false})},getModuleStatus:function getModuleStatus(site){site=site||this.props.site;site.fetchMonitorSettings(function(error,data){if(!error){this.setState({emailNotifications:data.settings.email_notifications})}else{debug("error getting Monitor settings",error)}}.bind(this));site.verifyModulesActive(["monitor"],function(error,moduleStatus){if(!error){this.setState({enabled:moduleStatus})}else{debug("error getting module status",error)}}.bind(this))},prompt:function prompt(){return React.createElement("div",{className:"site-settings__jetpack-prompt"},React.createElement("img",{src:"/calypso/images/jetpack/illustration-jetpack-monitor.svg",width:"128",height:"128"}),React.createElement("div",{className:"site-settings__jetpack-prompt-text"},React.createElement("p",null,this.translate("Automatically monitor your website and make sure it's online.")),React.createElement("p",null,this.translate("We'll periodically check your site from our global network of servers to make sure it's online, and email you if it looks like your site is not responding for any reason."))))},saveSettings:function saveSettings(){this.setState({submitingForm:true});notices.clearNotices("notices");this.props.site.updateMonitorSettings(this.state.emailNotifications,function(error){if(error){this.handleError();notices.error(this.translate("There was a problem saving your changes. Please, try again."));return}notices.success(this.translate("Settings saved successfully!"));this.markSaved();this.setState({submittingForm:false})}.bind(this))},settings:function settings(){return React.createElement("div",null,React.createElement("p",null,this.translate("Jetpack is currently monitoring your site's uptime.")),React.createElement(FormLabel,null,React.createElement(FormCheckbox,{disabled:this.disableForm(),onClick:this.recordEvent.bind(this,"Clicked on Monitor email checkbox"),id:"jetpack_monitor_email",checkedLink:this.linkState("emailNotifications"),name:"jetpack_monitor_email"}),React.createElement("span",null,this.translate("Send notifications to your {{a}}WordPress.com email address{{/a}}.",{components:{a:React.createElement("a",{href:"/me/account",onClick:this.recordEvent.bind(this,"Clicked on Monitor Link to WordPress.com Email Address")})}}))))},handleError:function handleError(){this.setState({submittingForm:false,togglingModule:false});this.markSaved()},disableForm:function disableForm(){return this.state.fetchingSettings||this.state.submittingForm||this.props.site.fetchingModules||this.state.togglingModule},activateFormButtons:function activateFormButtons(){return React.createElement(Button,{compact:true,primary:true,onClick:this.toggleJetpackModule.bind(this,"monitor"),disabled:this.disableForm()},this.state.togglingModule?this.translate("Activating"):this.translate("Activate"))},deactivateFormButtons:function deactivateFormButtons(){return React.createElement("div",null,React.createElement(Button,{compact:true,className:"jetpack-monitor__deactivate",onClick:this.toggleJetpackModule.bind(this,"monitor")},this.state.togglingModule?this.translate("Deactivating"):this.translate("Deactivate")),React.createElement(Button,{compact:true,primary:true,onClick:this.submitForm},this.state.submittingForm?this.translate("Saving"):this.translate("Save Settings")))},render:function render(){if(!config.isEnabled("settings/security/monitor")){return null}return React.createElement("div",null,React.createElement(SectionHeader,{label:this.translate("Jetpack Monitor")},this.state.enabled?this.deactivateFormButtons():this.activateFormButtons()),React.createElement(Card,{className:"jetpack-monitor-settings"},this.state.enabled?this.settings():this.prompt()))}})},2694:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),debug=__webpack_require__(4)("calypso:my-sites:site-settings:security:protect");var formBase=__webpack_require__(1621),protectForm=__webpack_require__(650),Card=__webpack_require__(145),FormSettingExplanation=__webpack_require__(1477),FormLabel=__webpack_require__(645),FormLegend=__webpack_require__(1501),FormTextarea=__webpack_require__(1480),dirtyLinkedState=__webpack_require__(1657),SectionHeader=__webpack_require__(1451),Button=__webpack_require__(68);module.exports=React.createClass({displayName:"SiteSettingsFormJetpackProtect",mixins:[dirtyLinkedState,protectForm.mixin,formBase],getSettingsFromSite:function getSettingsFromSite(site){var settings={};site=site||this.props.site;settings.fetchingSettings=site.fetchingSettings;if(site.settings&&site.settings.jetpack_protect_whitelist){settings.whitelistString=site.settings.jetpack_protect_whitelist.local.join("\n")}return settings},resetState:function resetState(){this.replaceState({whitelistString:null,togglingModule:false,fetchingSettings:false})},getIP:function getIP(){if(window.app&&window.app.clientIp){return window.app.clientIp}return this.translate("Unknown IP address")},prompt:function prompt(){return React.createElement("div",{className:"site-settings__jetpack-prompt"},React.createElement("img",{src:"/calypso/images/jetpack/illustration-jetpack-protect.svg",width:"128",height:"128"}),React.createElement("div",{className:"site-settings__jetpack-prompt-text"},React.createElement("p",null,this.translate("Prevent brute force login attempts on your WordPress site.")),React.createElement("p",null,this.translate("Brute force attacks are one of the most common (and successful) ways that attackers gain access to your site. "+"When you activate Jetpack Protect, we'll automatically prevent malicious attempts to log into your site, but allow you to ensure you can always log in."))))},getModuleStatus:function getModuleStatus(site){site=site||this.props.site;site.verifyModulesActive(["protect"],function(error,moduleStatus){if(!error){debug("Received jetpack protect module status",this.state);this.setState({enabled:moduleStatus})}else{debug("error getting module status",error)}}.bind(this))},settings:function settings(){return React.createElement("form",{id:"protect-settings",onChange:this.markChanged,onSubmit:this.submitForm},React.createElement(FormLegend,null,this.translate("IP Address Whitelist")),React.createElement(FormLabel,null,React.createElement("p",null,this.translate("Whitelisting an IP address means that you will always be able to log in from that address. Enter one IP address or range per line.")),React.createElement("p",null,this.translate("Your current IP address is {{strong}}%(IP)s{{/strong}}.",{args:{IP:this.getIP()},components:{strong:React.createElement("strong",null)}})),React.createElement(FormTextarea,{onFocus:this.recordEvent.bind(this,"Focused on Jetpack Protect whitelist"),name:"jetpack_protect_whitelist_string",id:"jetpack_protect_whitelist_string",valueLink:this.linkState("whitelistString"),disabled:!this.state.enabled||this.disableForm(),placeholder:this.translate("Example: 12.12.12.1-12.12.12.100")})),React.createElement(FormSettingExplanation,null,this.translate("IPv4 and IPv6 are acceptable. To specify a range, enter the low value and high value separated by a dash.")))},handleError:function handleError(){this.setState({submittingForm:false});this.markSaved()},disableForm:function disableForm(){return this.state.fetchingSettings||this.state.submittingForm||this.props.site.fetchingModules||this.state.togglingModule},deactivateFormButtons:function deactivateFormButtons(){return React.createElement("div",null,React.createElement(Button,{compact:true,disabled:this.disableForm(),className:"jetpack-protect__deactivate",onClick:this.toggleJetpackModule.bind(this,"protect")},this.state.togglingModule?this.translate("Deactivating"):this.translate("Deactivate")),React.createElement(Button,{disabled:this.disableForm(),compact:true,primary:true,onClick:this.submitForm},this.state.submittingForm?this.translate("Saving"):this.translate("Save Settings")))},activateFormButtons:function activateFormButtons(){return React.createElement(Button,{onClick:this.toggleJetpackModule.bind(this,"protect"),disabled:this.disableForm(),primary:true,compact:true},this.state.togglingModule?this.translate("Activating"):this.translate("Activate"))},render:function render(){return React.createElement("div",null,React.createElement(SectionHeader,{label:this.translate("Jetpack Protect")},this.state.enabled?this.deactivateFormButtons():this.activateFormButtons()),React.createElement(Card,{className:"jetpack-protect-settings"},this.state.enabled?this.settings():this.prompt()))}})},2695:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),debug=__webpack_require__(4)("calypso:my-sites:site-settings:security:scan");var formBase=__webpack_require__(1621),protectForm=__webpack_require__(650),Card=__webpack_require__(145),FormSettingExplanation=__webpack_require__(1477),FormInput=__webpack_require__(246),FormLabel=__webpack_require__(645),FormPasswordInput=__webpack_require__(367),Dialog=__webpack_require__(148),ProgressIndicator=__webpack_require__(743),FormInputValidation=__webpack_require__(1456),notices=__webpack_require__(71),dirtyLinkedState=__webpack_require__(1657),SectionHeader=__webpack_require__(1451),Button=__webpack_require__(68);module.exports=React.createClass({displayName:"SiteSettingsFormJetpackScan",mixins:[dirtyLinkedState,protectForm.mixin,formBase],settingsTimer:false,getSshSettings:function getSshSettings(site){site=site||this.props.site;if(!this.state.sshSettingsFetched){this.setState({fetchingSsh:true});site.fetchSshCredentials(function(error,data){if(error){debug("Error fetching SSH creds",error);this.setState({needsCreds:true})}this.setSshSettings(data);this.setState({sshSettingsFetched:true})}.bind(this))}},setSshSettings:function setSshSettings(data){data=data||[];this.setState({enabled:data.active||false,hostname:data.hostname||this.props.site.slug,port:data.port||"22",username:data.username||"",passwordUsed:data.password_used||false,credentialsPending:data.check_pending||false,credentialsValid:data.is_valid||false,editing:data.is_valid?false:true,publicKeyString:data.public_key||false,lastScanned:data.last_scanned||false,fetchingSsh:false});if(this.state.credentialsPending&&this.state.enabled){this.settingsTimer=setTimeout(function(){this.setState({sshSettingsFetched:false});debug("re-checking credentials");this.getSshSettings()}.bind(this),5e3)}else{if(typeof this.settingsTimer==="number"){debug("credentials have been validated");clearTimeout(this.settingsTimer)}debug("timer disabled",this.state);if(!this.state.credentialsValid&&this.state.showValidationErrors){this.setState({showValidationErrors:false});notices.error(this.translate("We are unable to connect to your server using these credentials. Please make sure they are correct, and {{a}}contact us{{/a}} if you are still having trouble.",{components:{a:React.createElement("a",{href:"http://jetpack.me/contact-support/",target:"_blank"})}}))}}},getSettingsFromSite:function getSettingsFromSite(site){var settings={};site=site||this.props.site;settings.fetchingSettings=site.fetchingSettings;settings.sshSettingsFetched=false;return settings},resetState:function resetState(){this.replaceState({togglingModule:false,enabled:false,passwordUsed:false,editing:true,sshSettingsFetched:false})},sshConnectionError:function sshConnectionError(){if(!this.state.sshConnectionError){return null}return React.createElement("p",null,this.translate("There was a problem getting your SSH information from our server. Please refresh the page. If the problem persists, {{a}}please contact support{{/a}}.",{components:{a:React.createElement("a",{href:"http://jetpack.me/contact-support/",target:"_blank"})}}))},prompt:function prompt(){if(this.state.enabled||this.state.sshConnectionError){return null}return React.createElement("div",{className:"site-settings__jetpack-prompt"},React.createElement("img",{src:"/calypso/images/jetpack/illustration-jetpack-scan.svg",width:"128",height:"128"}),React.createElement("div",{className:"site-settings__jetpack-prompt-text"},React.createElement("p",null,this.translate("Scan your WordPress site for known security threats.")),React.createElement("p",null,this.translate("By allowing Jetpack Scan to access your site via SSH, you enable us to scan your server for security threats. As soon as we encounter potentially malicious code, we will alert you by email."))))},handleClick:function handleClick(){if(!this.disableForm()){this.setState({showValidationErrors:false})}},lastScanned:function lastScanned(){var dateObject=new Date(this.state.lastScanned);if(Object.prototype.toString.call(dateObject)!=="[object Date]"){return null}if(isNaN(dateObject.getTime())){return null}return React.createElement("p",null,this.translate("{{strong}}Last Scanned{{/strong}}: %(date)s",{args:{date:this.moment(this.state.lastScanned).calendar()},components:{strong:React.createElement("strong",null)}}))},success:function success(){return React.createElement("div",null,React.createElement("p",null,this.translate("Jetpack Scan is currently configured to scan for threats on %(host)s. If any vulnerabilities are found, you will be emailed at your {{a}}WordPress.com email address{{/a}}.",{args:{host:this.state.hostname},components:{a:React.createElement("a",{href:"/me/account",onClick:this.recordEvent.bind(this,"Clicked on Scan Link to WordPress.com Email Address")})}})),this.lastScanned())},inputErrorClass:function inputErrorClass(property){if(!this.state.showValidationErrors){return null}if(!this.state[property]){return"is-error"}return null},inputErrorMessage:function inputErrorMessage(property){if(!this.state.showValidationErrors){return null}if(!this.state[property]){return React.createElement(FormInputValidation,{isError:true,text:this.translate("This field is required.")})}return null},sshCredentialsForm:function sshCredentialsForm(){var footerContents="";if(!this.state.enabled||this.state.sshConnectionError){return null}if(this.state.enabled&&this.state.credentialsValid&&!this.state.editing){return this.success()}return React.createElement("form",{id:"jetpack-scan-settings",onChange:this.markChanged,onSubmit:this.onSubmit},React.createElement("p",null,this.translate("Please enter SSH login credentials for your web server. "+"Jetpack Scan will look for known threats and alert you in case it finds anything.")),React.createElement(FormLabel,{htmlFor:"jetpack_scan_hostname"},this.translate("Hostname",{context:"Security scan credentials parameter, e.g. example.com"})),React.createElement(FormInput,{name:"jetpack_scan_hostname",id:"jetpack_scan_hostname",valueLink:this.linkState("hostname"),onClick:this.handleClick,disabled:this.disableForm(),className:this.inputErrorClass("hostname")}),React.createElement(FormSettingExplanation,null,this.translate("The full hostname of your server. May be different from your domain name.")),this.inputErrorMessage("hostname"),React.createElement(FormLabel,{htmlFor:"jetpack_scan_port"},this.translate("Port",{context:"Security scan credentials parameter, e.g. 22"})),React.createElement(FormInput,{name:"jetpack_scan_port",id:"jetpack_scan_port",valueLink:this.linkState("port"),onClick:this.handleClick,disabled:this.disableForm()}),React.createElement(FormSettingExplanation,null,this.translate("Unless you connect to a special port, this will be '22'.")),React.createElement(FormLabel,{htmlFor:"jetpack_scan_username"},this.translate("Username",{context:"Security scan credentials parameter, e.g. someuser"})),React.createElement(FormInput,{name:"jetpack_scan_username",id:"jetpack_scan_username",valueLink:this.linkState("username"),onClick:this.handleClick,disabled:this.disableForm(),className:this.inputErrorClass("username")}),React.createElement(FormSettingExplanation,null,this.translate("User with SSH file access to your website's files.")),this.inputErrorMessage("username"),React.createElement(FormLabel,{htmlFor:"jetpack_scan_password"},this.translate("Password",{context:"Security scan credentials parameter, e.g. mystrongpass"})),React.createElement(FormPasswordInput,{name:"jetpack_scan_password",id:"jetpack_scan_password",valueLink:this.linkState("password"),disabled:this.disableForm()}),React.createElement(FormSettingExplanation,null,this.translate("Password is not required if you use public key authentication. {{a}}Get your public key string.{{/a}}",{components:{a:React.createElement("a",{onClick:this._onShowDialog,href:"#"})}})),footerContents)},toggleScan:function toggleScan(event){var enable;event.preventDefault();notices.clearNotices("notices");this.setState({togglingModule:true,showValidationErrors:false});if(this.state.enabled){this.recordEvent.bind(this,"Clicked disable Jetpack Scan button");enable=false}else{this.recordEvent.bind(this,"Clicked enable Jetpack Scan button");enable=true;this.setState({needsCreds:true})}if(this.state.needsCreds){this.setState({enabled:enable,submittingForm:false,togglingModule:false})}else{this.props.site.toggleSshScan({active:enable},this.handleResponse)}},editSettings:function editSettings(event){event.preventDefault();this.setState({editing:true})},_onShowDialog:function _onShowDialog(event){event.preventDefault();this.setState({showDialog:true})},_onCloseDialog:function _onCloseDialog(){this.setState({showDialog:false})},handleResponse:function handleResponse(error,data){this.setState({submittingForm:false,togglingModule:false});this.markSaved();if(error){debug("An error has occurred when processing SSH credentials",error);notices.error(this.translate("We could not activate Jetpack Scan for your site."))}else{this.setSshSettings(data);debug("Updated settings on server",data)}},onSubmit:function onSubmit(event){event.preventDefault();this.setState({showValidationErrors:true});if(this.validateData()){this.processData()}},onCancelButton:function onCancelButton(){this.setState({editing:false});if(!this.credentialsValid){this.toggleScan()}},validateData:function validateData(){return this.state.hostname&&this.state.username},processData:function processData(){this.setState({submittingForm:true,credentialsPending:true,credentialsValid:false});notices.clearNotices("notices");this.props.site.updateSshCredentials({hostname:this.state.hostname,port:this.state.port||"22",username:this.state.username,password:this.state.password,scanner_enabled:this.state.enabled?1:0},this.handleResponse)},publicKeyDialog:function publicKeyDialog(){var buttons=[{action:"cancel",label:this.translate("OK")}];return React.createElement(Dialog,{isVisible:this.state.showDialog,buttons:buttons,onClose:this._onCloseDialog},React.createElement("div",{className:"public-key__dialog-wrapper"},React.createElement("div",{className:"public-key__dialog-header"},React.createElement("h1",{className:"public-key__dialog-title"},this.translate("Your public key string."))),React.createElement("p",null,this.translate("Add the following string to the {{code}}~/.ssh/authorized_keys{{/code}} file on your server to enable public key authentication for the Jetpack Scan.",{
components:{code:React.createElement("code",null)}})),React.createElement("p",null,React.createElement(FormInput,{valueLink:this.linkState("publicKeyString"),selectOnFocus:"true",readOnly:"readonly"}))))},disableForm:function disableForm(){return this.state.fetchingSettings||this.state.submittingForm||this.props.site.fetchingModules||this.state.togglingModule||this.state.fetchingSsh||this.state.enabled&&this.state.credentialsPending},showActivateButton:function showActivateButton(){if(!this.state.enabled){return React.createElement(Button,{compact:true,primary:true,disabled:this.disableForm(),onClick:this.toggleScan},this.state.togglingModule?this.translate("Activating"):this.translate("Activate"))}},showDeactivateButtons:function showDeactivateButtons(){if(this.state.enabled&&this.state.credentialsValid&&!this.state.editing){return React.createElement("div",null,React.createElement(Button,{compact:true,disabled:this.disableForm(),className:"jetpack-scan__deactivate",onClick:this.toggleScan},this.state.togglingModule?this.translate("Deactivating"):this.translate("Deactivate")),React.createElement(Button,{compact:true,disabled:this.disableForm(),onClick:this.editSettings,className:"jetpack-protect__edit-settings"},this.translate("Edit Settings")))}},showSaveSettingsButtons:function showSaveSettingsButtons(){if(!this.state.credentialsPending&&this.state.editing){return React.createElement("div",null,React.createElement(Button,{className:"jetpack-scan__deactivate",compact:true,disabled:this.disableForm(),onClick:this.onCancelButton},this.translate("Cancel")),React.createElement(Button,{primary:true,compact:true,disabled:this.disableForm(),onClick:this.onSubmit},this.state.submittingForm?this.translate("Saving"):this.translate("Save Settings")))}},showLoadingIndicator:function showLoadingIndicator(){if(this.state.credentialsPending){return React.createElement("div",null,React.createElement(ProgressIndicator,{key:"update-progress",status:"processing",className:"site-settings__progress-indicator"}))}},render:function render(){return React.createElement("div",null,React.createElement(SectionHeader,{label:this.translate("Jetpack Scan")},this.showActivateButton(),this.showDeactivateButtons(),this.showSaveSettingsButtons(),this.showLoadingIndicator()),React.createElement(Card,{className:"jetpack-protect-settings"},this.sshConnectionError(),this.sshCredentialsForm(),this.publicKeyDialog(),this.prompt()))}})},2696:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SeoForm=undefined;var _keys=__webpack_require__(44);var _keys2=_interopRequireDefault(_keys);var _defineProperty2=__webpack_require__(7);var _defineProperty3=_interopRequireDefault(_defineProperty2);var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _pickBy2=__webpack_require__(347);var _pickBy3=_interopRequireDefault(_pickBy2);var _omit2=__webpack_require__(18);var _omit3=_interopRequireDefault(_omit2);var _isString2=__webpack_require__(162);var _isString3=_interopRequireDefault(_isString2);var _isEqual2=__webpack_require__(92);var _isEqual3=_interopRequireDefault(_isEqual2);var _includes2=__webpack_require__(34);var _includes3=_interopRequireDefault(_includes2);var _get2=__webpack_require__(30);var _get3=_interopRequireDefault(_get2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _immutable=__webpack_require__(108);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _externalLink=__webpack_require__(353);var _externalLink2=_interopRequireDefault(_externalLink);var _metaTitleEditor=__webpack_require__(2317);var _metaTitleEditor2=_interopRequireDefault(_metaTitleEditor);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);var _noticeAction=__webpack_require__(151);var _noticeAction2=_interopRequireDefault(_noticeAction);var _notices=__webpack_require__(71);var _notices2=_interopRequireDefault(_notices);var _protectForm=__webpack_require__(650);var _protectForm2=_interopRequireDefault(_protectForm);var _formTextInputWithAffixes=__webpack_require__(1511);var _formTextInputWithAffixes2=_interopRequireDefault(_formTextInputWithAffixes);var _formInputValidation=__webpack_require__(1456);var _formInputValidation2=_interopRequireDefault(_formInputValidation);var _formFieldset=__webpack_require__(338);var _formFieldset2=_interopRequireDefault(_formFieldset);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _formSettingExplanation=__webpack_require__(1477);var _formSettingExplanation2=_interopRequireDefault(_formSettingExplanation);var _countedTextarea=__webpack_require__(1649);var _countedTextarea2=_interopRequireDefault(_countedTextarea);var _pageViewTracker=__webpack_require__(1540);var _pageViewTracker2=_interopRequireDefault(_pageViewTracker);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _selectors=__webpack_require__(106);var _selectors2=__webpack_require__(70);var _mappings=__webpack_require__(716);var _actions=__webpack_require__(250);var _searchPreview=__webpack_require__(744);var _searchPreview2=_interopRequireDefault(_searchPreview);var _webPreview=__webpack_require__(694);var _webPreview2=_interopRequireDefault(_webPreview);var _actions2=__webpack_require__(697);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var serviceIds={google:"google-site-verification",bing:"msvalidate.01",pinterest:"p:domain_verify",yandex:"yandex-verification"};var anyHtmlTag=/<\/?[a-z][a-z0-9]*\b[^>]*>/i;function getGeneralTabUrl(slug){return"/settings/general/"+slug}function stateForSite(site){return{seoMetaDescription:(0,_get3.default)(site,"options.seo_meta_description",""),googleCode:(0,_get3.default)(site,"options.verification_services_codes.google",""),bingCode:(0,_get3.default)(site,"options.verification_services_codes.bing",""),pinterestCode:(0,_get3.default)(site,"options.verification_services_codes.pinterest",""),yandexCode:(0,_get3.default)(site,"options.verification_services_codes.yandex",""),isFetchingSettings:(0,_get3.default)(site,"fetchingSettings",false)}}function getMetaTag(){var serviceName=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var content=arguments.length<=1||arguments[1]===undefined?"":arguments[1];if(!content){return""}if((0,_includes3.default)(content,"<meta")){return content}return'<meta name="'+(0,_get3.default)(serviceIds,serviceName,"")+'" content="'+content+'" />'}function isValidCode(){var serviceName=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var content=arguments.length<=1||arguments[1]===undefined?"":arguments[1];if(!content.length){return true}content=getMetaTag(serviceName,content);return(0,_includes3.default)(content,serviceIds[serviceName])}var SeoForm=exports.SeoForm=_react2.default.createClass({displayName:"SiteSettingsFormSEO",mixins:[_protectForm2.default.mixin],getInitialState:function getInitialState(){return(0,_extends3.default)({},stateForSite(this.props.site),{seoTitleFormats:{},isRefreshingSiteData:false,dirtyFields:(0,_immutable.Set)()})},componentDidMount:function componentDidMount(){this.refreshCustomTitles()},componentWillReceiveProps:function componentWillReceiveProps(nextProps){var dirtyFields=this.state.dirtyFields;var nextState=(0,_extends3.default)({},stateForSite(nextProps.site),{seoTitleFormats:nextProps.storedTitleFormats});nextState=(0,_omit3.default)(nextState,dirtyFields.toArray());var wasRefreshingSiteData=this.state.isRefreshingSiteData;var isRefreshingSiteData=this.state.isSubmittingForm||wasRefreshingSiteData&&(0,_isEqual3.default)(this.props.storedTitleFormats,nextProps.storedTitleFormats);if(isRefreshingSiteData){nextState=(0,_omit3.default)(nextState,["seoTitleFormats"])}this.setState((0,_extends3.default)({},nextState,{isRefreshingSiteData:isRefreshingSiteData}))},handleMetaChange:function handleMetaChange(_ref){var seoMetaDescription=_ref.target.value;var dirtyFields=this.state.dirtyFields;var hasHtmlTagError=anyHtmlTag.test(seoMetaDescription);this.setState((0,_assign2.default)({hasHtmlTagError:hasHtmlTagError},!hasHtmlTagError&&{seoMetaDescription:seoMetaDescription},{dirtyFields:dirtyFields.add("seoMetaDescription")}))},handleVerificationCodeChange:function handleVerificationCodeChange(event,serviceCode){var _setState;var dirtyFields=this.state.dirtyFields;if(!this.state.hasOwnProperty(serviceCode)){return}if(event.target.value.length===1){this.setState({showPasteError:true,invalidCodes:[serviceCode.replace("Code","")]});return}this.setState((_setState={invalidCodes:[],showPasteError:false},(0,_defineProperty3.default)(_setState,serviceCode,event.target.value),(0,_defineProperty3.default)(_setState,"dirtyFields",dirtyFields.add(serviceCode)),_setState))},updateTitleFormats:function updateTitleFormats(seoTitleFormats){var dirtyFields=this.state.dirtyFields;this.setState({seoTitleFormats:seoTitleFormats,dirtyFields:dirtyFields.add("seoTitleFormats")})},submitSeoForm:function submitSeoForm(event){var _this=this;var _props=this.props;var site=_props.site;var storedTitleFormats=_props.storedTitleFormats;var trackSubmission=_props.trackSubmission;var dirtyFields=this.state.dirtyFields;if(!event.isDefaultPrevented()&&event.nativeEvent){event.preventDefault()}_notices2.default.clearNotices("notices");var verificationCodes={google:this.state.googleCode,bing:this.state.bingCode,pinterest:this.state.pinterestCode,yandex:this.state.yandexCode};var filteredCodes=(0,_pickBy3.default)(verificationCodes,_isString3.default);var invalidCodes=(0,_keys2.default)((0,_pickBy3.default)(filteredCodes,function(name,content){return!isValidCode(content,name)}));this.setState({invalidCodes:invalidCodes});if(invalidCodes.length>0){_notices2.default.error(this.translate("Invalid site verification tag entered."));return}this.setState({isSubmittingForm:true,isRefreshingSiteData:dirtyFields.has("seoTitleFormats")});var hasChanges=function hasChanges(format,type){return!(0,_isEqual3.default)(format,storedTitleFormats[type])};var updatedOptions={advanced_seo_title_formats:(0,_mappings.toApi)((0,_pickBy3.default)(this.state.seoTitleFormats,hasChanges)),seo_meta_description:this.state.seoMetaDescription,verification_services_codes:filteredCodes};site.saveSettings(updatedOptions,function(error){if(error){switch(error.error){case"invalid_ip":_notices2.default.error(_this.translate("One of your IP Addresses was invalid. Please, try again."));break;default:_notices2.default.error(_this.translate("There was a problem saving your changes. Please, try again."))}_this.setState({isSubmittingForm:false})}else{_notices2.default.success(_this.translate("Settings saved!"));_this.markSaved();_this.setState({isSubmittingForm:false});site.fetchSettings();_this.refreshCustomTitles()}});trackSubmission()},refreshCustomTitles:function refreshCustomTitles(){var _props2=this.props;var refreshSiteData=_props2.refreshSiteData;var selectedSite=_props2.selectedSite;if(selectedSite&&selectedSite.ID){refreshSiteData(selectedSite.ID)}},getVerificationError:function getVerificationError(isPasteError){return _react2.default.createElement(_formInputValidation2.default,{isError:true,text:isPasteError?this.translate("Verification code should be copied and pasted into this field."):this.translate("Invalid site verification tag.")})},showPreview:function showPreview(){this.setState({showPreview:true})},hidePreview:function hidePreview(){this.setState({showPreview:false})},render:function render(){var _this2=this;var _props$site=this.props.site;var siteDescription=_props$site.description;var _props$site$slug=_props$site.slug;var slug=_props$site$slug===undefined?"":_props$site$slug;var _props$site$settings=_props$site.settings;_props$site$settings=_props$site$settings===undefined?{}:_props$site$settings;var _props$site$settings$=_props$site$settings.blog_public;var blog_public=_props$site$settings$===undefined?1:_props$site$settings$;var siteTitle=_props$site.title;var _state=this.state;var isSubmittingForm=_state.isSubmittingForm;var isFetchingSettings=_state.isFetchingSettings;var seoMetaDescription=_state.seoMetaDescription;var _state$showPasteError=_state.showPasteError;var showPasteError=_state$showPasteError===undefined?false:_state$showPasteError;var _state$hasHtmlTagErro=_state.hasHtmlTagError;var hasHtmlTagError=_state$hasHtmlTagErro===undefined?false:_state$hasHtmlTagErro;var _state$invalidCodes=_state.invalidCodes;var invalidCodes=_state$invalidCodes===undefined?[]:_state$invalidCodes;var _state$showPreview=_state.showPreview;var showPreview=_state$showPreview===undefined?false:_state$showPreview;var _state2=this.state;var googleCode=_state2.googleCode;var bingCode=_state2.bingCode;var pinterestCode=_state2.pinterestCode;var yandexCode=_state2.yandexCode;var isSitePrivate=parseInt(blog_public,10)!==1;var isDisabled=isSitePrivate||isSubmittingForm||isFetchingSettings;var isSaveDisabled=isDisabled||isSubmittingForm||!showPasteError&&invalidCodes.length>0;var seoTitle=siteDescription.length?siteTitle+" | "+siteDescription:siteTitle;var siteUrl="https://"+slug+"/";var sitemapUrl=siteUrl+"sitemap.xml";var generalTabUrl=getGeneralTabUrl(slug);var placeholderTagContent="1234";googleCode=getMetaTag("google",googleCode||"");bingCode=getMetaTag("bing",bingCode||"");pinterestCode=getMetaTag("pinterest",pinterestCode||"");yandexCode=getMetaTag("yandex",yandexCode||"");var hasError=function hasError(service){return(0,_includes3.default)(invalidCodes,service)};var submitButton=_react2.default.createElement(_button2.default,{compact:true,onClick:this.submitSeoForm,primary:true,type:"submit",disabled:isSaveDisabled},isSubmittingForm?this.translate("Saving"):this.translate("Save Settings"));var preview=_react2.default.createElement(_searchPreview2.default,{title:seoTitle,url:siteUrl,snippet:seoMetaDescription});if(_config2.default.isEnabled("manage/advanced-seo")){preview=_react2.default.createElement(_formSettingExplanation2.default,null,_react2.default.createElement(_button2.default,{className:"preview-button",onClick:this.showPreview},this.translate("Show Previews")),_react2.default.createElement("span",{className:"preview-explanation"},this.translate("See how this will look on Google, Facebook, and Twitter.")))}return _react2.default.createElement("div",null,_react2.default.createElement(_pageViewTracker2.default,{path:"/settings/seo/:site",title:"Site Settings > SEO"}),isSitePrivate&&_react2.default.createElement(_notice2.default,{status:"is-warning",showDismiss:false,text:this.translate("SEO settings are disabled because the site visibility is not set to Public.")},_react2.default.createElement(_noticeAction2.default,{href:generalTabUrl},this.translate("View Settings"))),_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Search Engine Optimization")}),_react2.default.createElement(_card2.default,null,this.translate("{{b}}WordPress.com has great SEO{{/b}} out of the box. All of our themes are optimized "+"for search engines, so you don't have to do anything extra. However, you can tweak "+"these settings if you'd like more advanced control. Read more about what you can do "+"to {{a}}optimize your site's SEO{{/a}}.",{components:{a:_react2.default.createElement("a",{href:"https://en.blog.wordpress.com/2013/03/22/seo-on-wordpress-com/"}),b:_react2.default.createElement("strong",null)}})),_react2.default.createElement("form",{onChange:this.markChanged,className:"seo-form"},_config2.default.isEnabled("manage/advanced-seo/custom-title")&&_react2.default.createElement("div",null,_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Page Title Structure")},submitButton),_react2.default.createElement(_card2.default,null,_react2.default.createElement("p",null,this.translate("You can set the structure of page titles for different sections of your site. "+"Doing this will change the way your site title is displayed in search engine "+"results, and when shared on social media sites.")),_react2.default.createElement(_metaTitleEditor2.default,{onChange:this.updateTitleFormats}))),_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Website Meta")},submitButton),_react2.default.createElement(_card2.default,null,_react2.default.createElement("p",null,this.translate("Craft a description of your Website up to 160 characters that will be used in "+"search engine results for your front page, and when your website is shared "+"on social media sites.")),_react2.default.createElement("p",null,_react2.default.createElement(_formLabel2.default,{htmlFor:"seo_meta_description"},this.translate("Front Page Meta Description")),_react2.default.createElement(_countedTextarea2.default,{name:"seo_meta_description",type:"text",id:"seo_meta_description",value:seoMetaDescription||"",disabled:isDisabled,maxLength:"300",acceptableLength:159,onChange:this.handleMetaChange}),hasHtmlTagError&&_react2.default.createElement(_formInputValidation2.default,{isError:true,text:this.translate("HTML tags are not allowed.")})),preview),_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Site Verification Services")},submitButton),_react2.default.createElement(_card2.default,null,_react2.default.createElement("p",null,this.translate("Note that {{b}}verifying your site with these services is not necessary{{/b}} in order"+" for your site to be indexed by search engines. To use these advanced search engine tools"+" and verify your site with a service, paste the HTML Tag code below. Read the"+" {{support}}full instructions{{/support}} if you are having trouble. Supported verification services:"+" {{google}}Google Search Console{{/google}}, {{bing}}Bing Webmaster Center{{/bing}},"+" {{pinterest}}Pinterest Site Verification{{/pinterest}}, and {{yandex}}Yandex.Webmaster{{/yandex}}.",{components:{b:_react2.default.createElement("strong",null),support:_react2.default.createElement("a",{href:"https://en.support.wordpress.com/webmaster-tools/"}),google:_react2.default.createElement(_externalLink2.default,{icon:true,target:"_blank",href:"https://www.google.com/webmasters/tools/"}),bing:_react2.default.createElement(_externalLink2.default,{icon:true,target:"_blank",href:"https://www.bing.com/webmaster/"}),pinterest:_react2.default.createElement(_externalLink2.default,{icon:true,target:"_blank",href:"https://pinterest.com/website/verify/"}),yandex:_react2.default.createElement(_externalLink2.default,{icon:true,target:"_blank",href:"https://webmaster.yandex.com/sites/"})}})),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formTextInputWithAffixes2.default,{prefix:this.translate("Google"),name:"verification_code_google",type:"text",value:googleCode,id:"verification_code_google",spellCheck:"false",disabled:isDisabled,isError:hasError("google"),placeholder:getMetaTag("google",placeholderTagContent),onChange:function onChange(event){return _this2.handleVerificationCodeChange(event,"googleCode")}}),hasError("google")&&this.getVerificationError(showPasteError)),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formTextInputWithAffixes2.default,{prefix:this.translate("Bing"),name:"verification_code_bing",type:"text",value:bingCode,id:"verification_code_bing",spellCheck:"false",disabled:isDisabled,isError:hasError("bing"),placeholder:getMetaTag("bing",placeholderTagContent),onChange:function onChange(event){return _this2.handleVerificationCodeChange(event,"bingCode")}}),hasError("bing")&&this.getVerificationError(showPasteError)),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formTextInputWithAffixes2.default,{prefix:this.translate("Pinterest"),name:"verification_code_pinterest",type:"text",value:pinterestCode,id:"verification_code_pinterest",spellCheck:"false",disabled:isDisabled,isError:hasError("pinterest"),placeholder:getMetaTag("pinterest",placeholderTagContent),onChange:function onChange(event){return _this2.handleVerificationCodeChange(event,"pinterestCode")}}),hasError("pinterest")&&this.getVerificationError(showPasteError)),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formTextInputWithAffixes2.default,{prefix:this.translate("Yandex"),name:"verification_code_yandex",type:"text",value:yandexCode,id:"verification_code_yandex",spellCheck:"false",disabled:isDisabled,isError:hasError("yandex"),placeholder:getMetaTag("yandex",placeholderTagContent),onChange:function onChange(event){return _this2.handleVerificationCodeChange(event,"yandexCode")}}),hasError("yandex")&&this.getVerificationError(showPasteError)),_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,{htmlFor:"seo_sitemap"},this.translate("XML Sitemap")),_react2.default.createElement(_externalLink2.default,{className:"seo-sitemap",icon:true,href:sitemapUrl,target:"_blank"},sitemapUrl),_react2.default.createElement(_formSettingExplanation2.default,null,this.translate("Your site's sitemap is automatically sent to all major search engines for indexing."))))),_react2.default.createElement(_webPreview2.default,{showPreview:showPreview,onClose:this.hidePreview,previewUrl:siteUrl,showDeviceSwitcher:false,showExternal:false,defaultViewportDevice:"seo"}))}});var mapStateToProps=function mapStateToProps(state){return{selectedSite:(0,_selectors2.getSelectedSite)(state),storedTitleFormats:(0,_selectors.getSeoTitleFormatsForSite)((0,_selectors2.getSelectedSite)(state))}};var mapDispatchToProps={refreshSiteData:function refreshSiteData(siteId){return(0,_actions2.requestSite)(siteId)},trackSubmission:function trackSubmission(){return(0,_actions.recordTracksEvent)("calypso_seo_settings_form_submit",{})}};exports.default=(0,_reactRedux.connect)(mapStateToProps,mapDispatchToProps,undefined,{pure:false})(SeoForm)},2697:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _each=__webpack_require__(704);var _each2=_interopRequireDefault(_each);var _pick=__webpack_require__(72);var _pick2=_interopRequireDefault(_pick);var _formBase=__webpack_require__(1621);var _formBase2=_interopRequireDefault(_formBase);var _protectForm=__webpack_require__(650);var _protectForm2=_interopRequireDefault(_protectForm);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _pressThisLink=__webpack_require__(2700);var _pressThisLink2=_interopRequireDefault(_pressThisLink);var _dirtyLinkedState=__webpack_require__(1657);var _dirtyLinkedState2=_interopRequireDefault(_dirtyLinkedState);var _formSelect=__webpack_require__(1484);var _formSelect2=_interopRequireDefault(_formSelect);var _formFieldset=__webpack_require__(338);var _formFieldset2=_interopRequireDefault(_formFieldset);var _formCheckbox=__webpack_require__(1463);var _formCheckbox2=_interopRequireDefault(_formCheckbox);var _formLabel=__webpack_require__(645);var _formLabel2=_interopRequireDefault(_formLabel);var _sectionHeader=__webpack_require__(1451);var _sectionHeader2=_interopRequireDefault(_sectionHeader);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _selectors=__webpack_require__(106);var _selectors2=__webpack_require__(70);var _actions=__webpack_require__(765);var _customPostTypesFieldset=__webpack_require__(2687);var _customPostTypesFieldset2=_interopRequireDefault(_customPostTypesFieldset);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SiteSettingsFormWriting=_react2.default.createClass({displayName:"SiteSettingsFormWriting",mixins:[_dirtyLinkedState2.default,_protectForm2.default.mixin,_formBase2.default],getSettingsFromSite:function getSettingsFromSite(site){var writingAttributes=["default_category","post_categories","default_post_format","wpcom_publish_posts_with_markdown","markdown_supported"],settings={};site=site||this.props.site;if(this.isCustomPostTypesSettingsEnabled()){writingAttributes=writingAttributes.concat(["jetpack_testimonial","jetpack_portfolio"])}if(site.settings){writingAttributes.map(function(attribute){settings[attribute]=site.settings[attribute]},this)}settings.fetchingSettings=site.fetchingSettings;settings.post_categories=settings.post_categories||[];return settings},isCustomPostTypesSettingsEnabled:function isCustomPostTypesSettingsEnabled(){return _config2.default.isEnabled("manage/custom-post-types")&&this.props.jetpackVersionSupportsCustomTypes},resetState:function resetState(){this.replaceState({fetchingSettings:true,default_category:"",post_categories:[],default_post_format:""})},onSaveComplete:function onSaveComplete(){if(this.isCustomPostTypesSettingsEnabled()){this.props.requestPostTypes(this.props.site.ID)}},setCustomPostTypeSetting:function setCustomPostTypeSetting(revision){var _this=this;this.setState(revision);(0,_each2.default)(revision,function(value,key){_this.linkState(key).requestChange(value)});this.markChanged()},submitFormAndActivateCustomContentModule:function submitFormAndActivateCustomContentModule(event){this.submitForm(event);if(!this.props.site||!this.props.site.jetpack){return}if(!this.props.jetpackVersionSupportsCustomTypes){return}if(!this.state.jetpack_testimonial&&!this.state.jetpack_portfolio){return}if(!this.props.jetpackCustomTypesModuleActive){this.props.site.activateModule("custom-content-types",this.onSaveComplete)}},render:function render(){var markdownSupported=this.state.markdown_supported;return _react2.default.createElement("form",{id:"site-settings",onSubmit:this.submitFormAndActivateCustomContentModule,onChange:this.markChanged},_react2.default.createElement(_sectionHeader2.default,{label:this.translate("Writing Settings")},_react2.default.createElement(_button2.default,{compact:true,primary:true,onClick:this.submitFormAndActivateCustomContentModule,disabled:this.state.fetchingSettings||this.state.submittingForm},this.state.submittingForm?this.translate("Saving"):this.translate("Save Settings"))),_react2.default.createElement(_card2.default,{className:"site-settings"},_react2.default.createElement(_formFieldset2.default,null,_react2.default.createElement(_formLabel2.default,{htmlFor:"default_category"},this.translate("Default Post Category")),_react2.default.createElement(_formSelect2.default,{name:"default_category",id:"default_category",valueLink:this.linkState("default_category"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Selected Default Post Category")},this.state.post_categories.map(function(category){return _react2.default.createElement("option",{value:category.value,key:"post-category-"+category.value},category.name)})),_react2.default.createElement(_formLabel2.default,{htmlFor:"default_post_format"},this.translate("Default Post Format")),_react2.default.createElement(_formSelect2.default,{name:"default_post_format",id:"default_post_format",valueLink:this.linkState("default_post_format"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Selected Default Post Format")},_react2.default.createElement("option",{value:"0"},this.translate("Standard",{context:"Post format"})),_react2.default.createElement("option",{value:"aside"},this.translate("Aside",{context:"Post format"})),_react2.default.createElement("option",{value:"chat"},this.translate("Chat",{context:"Post format"})),_react2.default.createElement("option",{value:"gallery"},this.translate("Gallery",{context:"Post format"})),_react2.default.createElement("option",{value:"link"},this.translate("Link",{context:"Post format"})),_react2.default.createElement("option",{value:"image"},this.translate("Image",{context:"Post format"})),_react2.default.createElement("option",{value:"quote"},this.translate("Quote",{context:"Post format"})),_react2.default.createElement("option",{value:"status"},this.translate("Status",{context:"Post format"})),_react2.default.createElement("option",{value:"video"},this.translate("Video",{context:"Post format"})),_react2.default.createElement("option",{value:"audio"},this.translate("Audio",{context:"Post format"})))),_config2.default.isEnabled("manage/custom-post-types")&&this.props.jetpackVersionSupportsCustomTypes&&_react2.default.createElement(_customPostTypesFieldset2.default,{requestingSettings:this.state.fetchingSettings,value:(0,_pick2.default)(this.state,"jetpack_testimonial","jetpack_portfolio"),onChange:this.setCustomPostTypeSetting,recordEvent:this.recordEvent,className:"site-settings__custom-post-type-fieldset has-divider is-top-only"}),markdownSupported&&_react2.default.createElement(_formFieldset2.default,{className:"has-divider is-top-only"},_react2.default.createElement(_formLabel2.default,null,this.translate("Markdown")),_react2.default.createElement(_formLabel2.default,null,_react2.default.createElement(_formCheckbox2.default,{name:"wpcom_publish_posts_with_markdown",checkedLink:this.linkState("wpcom_publish_posts_with_markdown"),disabled:this.state.fetchingSettings,onClick:this.recordEvent.bind(this,"Clicked Markdown for Posts Checkbox")}),_react2.default.createElement("span",null,this.translate("Use markdown for posts and pages. {{a}}Learn more about markdown{{/a}}.",{components:{a:_react2.default.createElement("a",{href:"http://en.support.wordpress.com/markdown-quick-reference/",target:"_blank"})}})))),_config2.default.isEnabled("press-this")&&_react2.default.createElement(_formFieldset2.default,{className:"has-divider is-top-only"},_react2.default.createElement("div",{className:"press-this"},_react2.default.createElement(_formLabel2.default,null,this.translate("Press This",{context:"name of browser bookmarklet tool"})),_react2.default.createElement("p",null,this.translate("Press This is a bookmarklet: a little app that runs in your browser and lets you grab bits of the web.")),_react2.default.createElement("p",null,this.translate("Use Press This to clip text, images and videos from any web page. Then edit and add more straight from Press This before you save or publish it in a post on your site.")),_react2.default.createElement("p",null,this.translate("Drag-and-drop the following link to your bookmarks bar or right click it and add it to your favorites for a posting shortcut.")),_react2.default.createElement("p",{className:"pressthis"},_react2.default.createElement(_pressThisLink2.default,{site:this.props.site,onClick:this.recordEvent.bind(this,"Clicked Press This Button"),onDragStart:this.recordEvent.bind(this,"Dragged Press This Button")},_react2.default.createElement("span",{className:"noticon noticon-pinned"}),_react2.default.createElement("span",null,this.translate("Press This",{context:"name of browser bookmarklet tool"}))))))))}});exports.default=(0,_reactRedux.connect)(function(state){var siteId=(0,_selectors2.getSelectedSiteId)(state);return{jetpackCustomTypesModuleActive:false!==(0,_selectors.isJetpackModuleActive)(state,siteId,"custom-content-types"),jetpackVersionSupportsCustomTypes:false!==(0,_selectors.isJetpackMinimumVersion)(state,siteId,"4.2.0")}},{requestPostTypes:_actions.requestPostTypes},null,{pure:false})(SiteSettingsFormWriting);module.exports=exports["default"]},2698:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _get2=__webpack_require__(30);var _get3=_interopRequireDefault(_get2);var _react=__webpack_require__(1);
var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _redux=__webpack_require__(6);var _debug=__webpack_require__(4);var _debug2=_interopRequireDefault(_debug);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _notice=__webpack_require__(79);var _notice2=_interopRequireDefault(_notice);var _progressBar=__webpack_require__(1610);var _progressBar2=_interopRequireDefault(_progressBar);var _selectors=__webpack_require__(70);var _selectors2=__webpack_require__(3047);var _selectors3=_interopRequireDefault(_selectors2);var _actions=__webpack_require__(3046);var _interval=__webpack_require__(1887);var _interval2=_interopRequireDefault(_interval);var _noticeAction=__webpack_require__(151);var _noticeAction2=_interopRequireDefault(_noticeAction);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=(0,_debug2.default)("calypso:site-settings:jetpack-sync-panel");var SYNC_STATUS_ERROR_NOTICE_THRESHOLD=3;var JetpackSyncPanel=_react2.default.createClass({displayName:"JetpackSyncPanel",componentWillMount:function componentWillMount(){this.fetchSyncStatus()},fetchSyncStatus:function fetchSyncStatus(){this.props.getSyncStatus(this.props.siteId)},isErrored:function isErrored(){var syncRequestError=(0,_get3.default)(this.props,"fullSyncRequest.error");var syncStatusErrorCount=(0,_get3.default)(this.props,"syncStatus.errorCounter",0);return!!(syncRequestError||syncStatusErrorCount>=SYNC_STATUS_ERROR_NOTICE_THRESHOLD)},shouldDisableSync:function shouldDisableSync(){return!!(this.props.isFullSyncing||this.props.isPendingSyncStart)},onSyncRequestButtonClick:function onSyncRequestButtonClick(event){event.preventDefault();debug("Perform full sync button clicked");_analytics2.default.tracks.recordEvent("calypso_jetpack_sync_panel_request_button_clicked");this.props.scheduleJetpackFullysync(this.props.siteId)},onTryAgainClick:function onTryAgainClick(event){event.preventDefault();debug("Try again button clicked");_analytics2.default.tracks.recordEvent("calypso_jetpack_sync_panel_try_again_button_clicked",{errorCode:(0,_get3.default)(this.props,"fullSyncRequest.error.error",""),errorMsg:(0,_get3.default)(this.props,"fullSyncRequest.error.message","")});this.props.scheduleJetpackFullysync(this.props.siteId)},onClickDebug:function onClickDebug(){debug("Clicked check connection button");_analytics2.default.tracks.recordEvent("calypso_jetpack_sync_panel_check_connection_button_clicked",{errorCode:(0,_get3.default)(this.props,"syncStatus.error.error",""),errorMsg:(0,_get3.default)(this.props,"syncStatus.error.message","")})},renderErrorNotice:function renderErrorNotice(){var syncRequestError=(0,_get3.default)(this.props,"fullSyncRequest.error"),syncStatusErrorCount=(0,_get3.default)(this.props,"syncStatus.errorCounter",0);var errorNotice=null;if(syncStatusErrorCount>=SYNC_STATUS_ERROR_NOTICE_THRESHOLD){var adminUrl=(0,_get3.default)(this.props,"site.options.admin_url");errorNotice=_react2.default.createElement(_notice2.default,{isCompact:true,status:"is-error",className:"jetpack-sync-panel__error-notice"},this.translate("%(site)s is unresponsive.",{args:{site:(0,_get3.default)(this.props,"site.name")}}),adminUrl&&_react2.default.createElement(_noticeAction2.default,{onClick:this.onClickDebug,href:adminUrl+"admin.php?page=jetpack-debugger"},this.translate("Check connection")))}else if(syncRequestError){errorNotice=_react2.default.createElement(_notice2.default,{isCompact:true,status:"is-error",className:"jetpack-sync-panel__error-notice"},syncRequestError.message?syncRequestError.message:this.translate("There was an error scheduling a full sync."),!syncRequestError.message&&_react2.default.createElement(_noticeAction2.default,{onClick:this.onTryAgainClick},this.translate("Try again")))}return errorNotice},renderStatusNotice:function renderStatusNotice(){if(this.isErrored()){return null}var finished=(0,_get3.default)(this.props,"syncStatus.finished");var finishedTimestamp=this.moment(parseInt(finished,10)*1e3);var _props=this.props;var isPendingSyncStart=_props.isPendingSyncStart;var isFullSyncing=_props.isFullSyncing;var text="";if(isPendingSyncStart){text=this.translate("Full sync will begin shortly")}else if(isFullSyncing){text=this.translate("Full sync in progress")}else if(finishedTimestamp.isValid()){text=this.translate("Last synced %(ago)s",{args:{ago:finishedTimestamp.fromNow()}})}if(!text){return null}return _react2.default.createElement(_notice2.default,{isCompact:true,className:"jetpack-sync-panel__status-notice"},text)},renderProgressBar:function renderProgressBar(){if(!this.shouldDisableSync()||this.isErrored()){return null}return _react2.default.createElement(_progressBar2.default,{isPulsing:true,value:this.props.syncProgress||0})},render:function render(){return _react2.default.createElement(_compact2.default,{className:"jetpack-sync-panel"},_react2.default.createElement("div",{className:"jetpack-sync-panel__action-group"},_react2.default.createElement("div",{className:"jetpack-sync-panel__description"},this.translate("{{strong}}Jetpack Sync keeps your WordPress.com dashboard up to date.{{/strong}} "+"Data is sent from your site to the WordPress.com dashboard regularly to provide a faster experience. "+"If you suspect some data is missing, you can initiate a sync manually.",{components:{strong:_react2.default.createElement("strong",null)}})),_react2.default.createElement("div",{className:"jetpack-sync-panel__action"},_react2.default.createElement(_button2.default,{onClick:this.onSyncRequestButtonClick,disabled:this.shouldDisableSync()},this.translate("Perform full sync",{context:"Button"})))),this.renderErrorNotice(),this.renderStatusNotice(),this.renderProgressBar(),this.shouldDisableSync()&&_react2.default.createElement(_interval2.default,{onTick:this.fetchSyncStatus,period:_interval.EVERY_TEN_SECONDS}))}});exports.default=(0,_reactRedux.connect)(function(state){var site=(0,_selectors.getSelectedSite)(state),siteId=site.ID;return{site:site,siteId:siteId,syncStatus:_selectors3.default.getSyncStatus(state,siteId),fullSyncRequest:_selectors3.default.getFullSyncRequest(state,siteId),isPendingSyncStart:_selectors3.default.isPendingSyncStart(state,siteId),isFullSyncing:_selectors3.default.isFullSyncing(state,siteId),syncProgress:_selectors3.default.getSyncProgressPercentage(state,siteId)}},function(dispatch){return(0,_redux.bindActionCreators)({getSyncStatus:_actions.getSyncStatus,scheduleJetpackFullysync:_actions.scheduleJetpackFullysync},dispatch)})(JetpackSyncPanel);module.exports=exports["default"]},2699:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SiteSettingsComponent=undefined;var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _debug=__webpack_require__(4);var _debug2=_interopRequireDefault(_debug);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _sectionNav=__webpack_require__(1473);var _sectionNav2=_interopRequireDefault(_sectionNav);var _tabs=__webpack_require__(1471);var _tabs2=_interopRequireDefault(_tabs);var _item=__webpack_require__(1470);var _item2=_interopRequireDefault(_item);var _notices=__webpack_require__(71);var _notices2=_interopRequireDefault(_notices);var _querySitePurchases=__webpack_require__(2070);var _querySitePurchases2=_interopRequireDefault(_querySitePurchases);var _selectors=__webpack_require__(1530);var _selectors2=__webpack_require__(70);var _sectionGeneral=__webpack_require__(2705);var _sectionGeneral2=_interopRequireDefault(_sectionGeneral);var _formWriting=__webpack_require__(2697);var _formWriting2=_interopRequireDefault(_formWriting);var _sectionDiscussion=__webpack_require__(2703);var _sectionDiscussion2=_interopRequireDefault(_sectionDiscussion);var _sectionAnalytics=__webpack_require__(2702);var _sectionAnalytics2=_interopRequireDefault(_sectionAnalytics);var _sectionSeo=__webpack_require__(2708);var _sectionSeo2=_interopRequireDefault(_sectionSeo);var _sectionImport=__webpack_require__(2706);var _sectionImport2=_interopRequireDefault(_sectionImport);var _sectionExport=__webpack_require__(2704);var _sectionExport2=_interopRequireDefault(_sectionExport);var _guidedTransfer=__webpack_require__(2552);var _guidedTransfer2=_interopRequireDefault(_guidedTransfer);var _sectionSecurity=__webpack_require__(2707);var _sectionSecurity2=_interopRequireDefault(_sectionSecurity);var _sidebarNavigation=__webpack_require__(1465);var _sidebarNavigation2=_interopRequireDefault(_sidebarNavigation);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=(0,_debug2.default)("calypso:my-sites:site-settings");var SiteSettingsComponent=exports.SiteSettingsComponent=function(_Component){(0,_inherits3.default)(SiteSettingsComponent,_Component);function SiteSettingsComponent(props){(0,_classCallCheck3.default)(this,SiteSettingsComponent);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(SiteSettingsComponent).call(this,props));_this.updateSite=_this.updateSite.bind(_this);_this.state={site:_this.props.sites.getSelectedSite()};return _this}(0,_createClass3.default)(SiteSettingsComponent,[{key:"componentWillMount",value:function componentWillMount(){debug("Mounting SiteSettings React component.");this.props.sites.on("change",this.updateSite)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.props.sites.off("change",this.updateSite)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(nextProps.purchasesError){_notices2.default.error(nextProps.purchasesError)}}},{key:"getImportPath",value:function getImportPath(){var site=this.state.site;var path="/settings/import";if(site.jetpack){return site.options.admin_url+"import.php"}return[path,site.slug].join("/")}},{key:"getExportPath",value:function getExportPath(){var site=this.state.site;return site.jetpack?site.options.admin_url+"export.php":"/settings/export/"+site.slug}},{key:"getStrings",value:function getStrings(){return{general:_i18nCalypso2.default.translate("General",{context:"settings screen"}),writing:_i18nCalypso2.default.translate("Writing",{context:"settings screen"}),discussion:_i18nCalypso2.default.translate("Discussion",{context:"settings screen"}),analytics:_i18nCalypso2.default.translate("Analytics",{context:"settings screen"}),security:_i18nCalypso2.default.translate("Security",{context:"settings screen"}),seo:_i18nCalypso2.default.translate("SEO",{context:"settings screen"}),import:_i18nCalypso2.default.translate("Import",{context:"settings screen"}),export:_i18nCalypso2.default.translate("Export",{context:"settings screen"})}}},{key:"getSection",value:function getSection(){var site=this.state.site;var _props=this.props;var section=_props.section;var hostSlug=_props.hostSlug;switch(section){case"general":return _react2.default.createElement(_sectionGeneral2.default,{site:site,sitePurchases:this.props.sitePurchases,hasLoadedSitePurchasesFromServer:this.props.hasLoadedSitePurchasesFromServer});case"writing":return _react2.default.createElement(_formWriting2.default,{site:site});case"discussion":return _react2.default.createElement(_sectionDiscussion2.default,{site:site});case"security":return _react2.default.createElement(_sectionSecurity2.default,{site:site});case"analytics":return _react2.default.createElement(_sectionAnalytics2.default,{site:site});case"seo":return _react2.default.createElement(_sectionSeo2.default,{site:site});case"import":return _react2.default.createElement(_sectionImport2.default,{site:site});case"export":return _react2.default.createElement(_sectionExport2.default,{site:site});case"guidedTransfer":return _react2.default.createElement(_guidedTransfer2.default,{hostSlug:hostSlug})}}},{key:"renderSectioNav",value:function renderSectioNav(){var site=this.state.site;var section=this.props.section;var strings=this.getStrings();var selectedText=strings[section];if(!site){return _react2.default.createElement(_sectionNav2.default,null)}if(section==="guidedTransfer"){return null}return _react2.default.createElement(_sectionNav2.default,{selectedText:selectedText},_react2.default.createElement(_tabs2.default,null,_react2.default.createElement(_item2.default,{path:"/settings/general/"+site.slug,selected:section==="general"},strings.general),_react2.default.createElement(_item2.default,{path:"/settings/writing/"+site.slug,selected:section==="writing"},strings.writing),_react2.default.createElement(_item2.default,{path:"/settings/discussion/"+site.slug,selected:section==="discussion"},strings.discussion),!site.jetpack&&_config2.default.isEnabled("manage/plans")&&_react2.default.createElement(_item2.default,{path:"/settings/analytics/"+site.slug,selected:section==="analytics"},strings.analytics),!site.jetpack&&_config2.default.isEnabled("manage/seo")&&_react2.default.createElement(_item2.default,{path:"/settings/seo/"+site.slug,selected:section==="seo"},strings.seo),_config2.default.isEnabled("manage/security")&&site.jetpack&&_react2.default.createElement(_item2.default,{path:"/settings/security/"+site.slug,selected:section==="security"},strings.security),_react2.default.createElement(_item2.default,{path:this.getImportPath(),selected:section==="import",isExternalLink:!!site.jetpack},strings.import),_config2.default.isEnabled("manage/export")&&_react2.default.createElement(_item2.default,{path:this.getExportPath(),selected:section==="export",isExternalLink:!!site.jetpack},strings.export)))}},{key:"render",value:function render(){var site=this.state.site;return _react2.default.createElement("section",{className:"site-settings"},_react2.default.createElement("div",{className:"main main-column",role:"main"},_react2.default.createElement(_sidebarNavigation2.default,null),this.renderSectioNav(site),site&&_react2.default.createElement(_querySitePurchases2.default,{siteId:site.ID}),site&&this.getSection()))}},{key:"updateSite",value:function updateSite(){this.setState({site:this.props.sites.getSelectedSite()})}}]);return SiteSettingsComponent}(_react.Component);SiteSettingsComponent.propTypes={hasLoadedSitePurchasesFromServer:_react.PropTypes.bool.isRequired,purchasesError:_react.PropTypes.object,section:_react.PropTypes.string,sitePurchases:_react.PropTypes.array.isRequired,sites:_react.PropTypes.object.isRequired};SiteSettingsComponent.defaultProps={section:"general"};exports.default=(0,_reactRedux.connect)(function(state){return{hasLoadedSitePurchasesFromServer:(0,_selectors.hasLoadedSitePurchasesFromServer)(state),purchasesError:(0,_selectors.getPurchasesError)(state),sitePurchases:(0,_selectors.getSitePurchases)(state,(0,_selectors2.getSelectedSiteId)(state))}})(SiteSettingsComponent)},2700:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _paths=__webpack_require__(356);var _paths2=_interopRequireDefault(_paths);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var pressThis=function pressThis(postURL){var doc=document;var win=window;var winGetSel=win.getSelection;var docGetSel=doc.getSelection;var docSel=doc.selection;var loc=doc.location;var sel=void 0;if(winGetSel){sel=winGetSel()}else if(docGetSel){sel=docGetSel()}else{sel=docSel?docSel.createRange().text:0}var url=postURL+"?url="+encodeURIComponent(loc.href)+"&title="+encodeURIComponent(doc.title)+"&text="+encodeURIComponent(sel)+"&v=5";var redirect=function redirect(){if(!win.open(url,"t","toolbar=0,resizable=1,scrollbars=1,status=1,width=660,height=570")){loc.href=url}};if(/Firefox/.test(navigator.userAgent)){setTimeout(redirect,0)}else{redirect()}void 0};var PressThisLink=function(_React$Component){(0,_inherits3.default)(PressThisLink,_React$Component);function PressThisLink(){(0,_classCallCheck3.default)(this,PressThisLink);return(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(PressThisLink).apply(this,arguments))}(0,_createClass3.default)(PressThisLink,[{key:"pressThisWPAdmin",value:function pressThisWPAdmin(){var site=this.props.site;var adminURL=site&&site.options&&site.options.admin_url;return["javascript:var d=document,w=window,e=w.getSelection,k=d.getSelection,x=d.selection,s=(e?e():(k)?k():(x?x.createRange().text:0)),f='",adminURL,"press-this.php',l=d.location,e=encodeURIComponent,u=f+'?u='+e(l.href)+'&t='+e(d.title)+'&s='+e(s)+'&v=4';a=function(){","if(!w.open(u,'t','toolbar=0,resizable=1,scrollbars=1,status=1,width=720,height=570'))l.href=u;};if (/Firefox/.test(navigator.userAgent)) setTimeout(a, 0); else a();void(0)"].join("")}},{key:"buildPressThisLink",value:function buildPressThisLink(){var functionText=pressThis.toString();var postDomain=typeof window!=="undefined"&&window.location?window.location.protocol+"//"+window.location.hostname:"https://wordpress.com";if(window.location.port){postDomain+=":"+window.location.port}var postURL=postDomain+_paths2.default.newPost(this.props.site);return"javascript:( "+functionText+" )( '"+postURL+"' )"}},{key:"render",value:function render(){return _react2.default.createElement("a",(0,_extends3.default)({},this.props,{href:this.buildPressThisLink()}),this.props.children)}}]);return PressThisLink}(_react2.default.Component);PressThisLink.propTypes={site:_react.PropTypes.object.isRequired};exports.default=PressThisLink;module.exports=exports["default"]},2701:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),debug=__webpack_require__(4)("calypso:my-sites:site-settings");var FormLabel=__webpack_require__(645);module.exports=React.createClass({displayName:"RelatedContentPreview",componentWillMount:function componentWillMount(){debug("Mounting RelatedContent React component.")},render:function render(){return React.createElement("div",{id:"settings-reading-relatedposts-preview",className:this.props.enabled?null:"disabled-block"},React.createElement(FormLabel,null,this.translate("Preview:")),React.createElement("div",{id:"jp-relatedposts",className:"jp-relatedposts"},this.props.showHeadline?React.createElement("h3",{className:"jp-relatedposts-headline"},this.translate("Related")):null,React.createElement("div",{className:"jp-relatedposts-items jp-relatedposts-items-visual"},React.createElement("div",{className:"jp-relatedposts-post jp-relatedposts-post0 jp-relatedposts-post-thumbs","data-post-format":"image"},this.props.showThumbnails?React.createElement("a",{className:"jp-relatedposts-post-a",href:"#jetpack_relatedposts",rel:"nofollow","data-origin":"0","data-position":"0"},React.createElement("img",{className:"jp-relatedposts-post-img",src:"/calypso/images/related-posts/cat-blog.png",width:"350",alt:this.translate("Big iPhone/iPad Update Now Available",{textOnly:true,context:"Demo content for related posts"}),scale:"0"})):null,React.createElement("h4",{className:"jp-relatedposts-post-title"},React.createElement("a",{className:"jp-relatedposts-post-a",href:"#jetpack_relatedposts",rel:"nofollow","data-origin":"0","data-position":"0"},this.translate("Big iPhone/iPad Update Now Available"))),React.createElement("p",{className:"jp-relatedposts-post-context"},this.translate('In "Mobile"',{context:"topic post is located in"}))),React.createElement("div",{className:"jp-relatedposts-post jp-relatedposts-post1 jp-relatedposts-post-thumbs","data-post-id":"0","data-post-format":"image"},this.props.showThumbnails?React.createElement("a",{className:"jp-relatedposts-post-a",href:"#jetpack_relatedposts",rel:"nofollow","data-origin":"0","data-position":"0"},React.createElement("img",{className:"jp-relatedposts-post-img",src:"/calypso/images/related-posts/devices.jpg",width:"350",alt:this.translate("The WordPress for Android App Gets a Big Facelift",{textOnly:true,context:"Demo content for related posts"}),scale:"0"})):null,React.createElement("h4",{className:"jp-relatedposts-post-title"},React.createElement("a",{className:"jp-relatedposts-post-a",href:"#jetpack_relatedposts",rel:"nofollow","data-origin":"0","data-position":"0"},this.translate("The WordPress for Android App Gets a Big Facelift"))),React.createElement("p",{className:"jp-relatedposts-post-context"},this.translate('In "Mobile"',{context:"topic post is located in"}))),React.createElement("div",{className:"jp-relatedposts-post jp-relatedposts-post2 jp-relatedposts-post-thumbs","data-post-id":"0","data-post-format":"image"},this.props.showThumbnails?React.createElement("a",{className:"jp-relatedposts-post-a",href:"#jetpack_relatedposts",rel:"nofollow","data-origin":"0","data-position":"0"},React.createElement("img",{className:"jp-relatedposts-post-img",src:"/calypso/images/related-posts/mobile-wedding.jpg",width:"350",alt:this.translate("Upgrade Focus: VideoPress For Weddings",{textOnly:true,context:"Demo content for related posts"}),scale:"0"})):null,React.createElement("h4",{className:"jp-relatedposts-post-title"},React.createElement("a",{className:"jp-relatedposts-post-a",href:"#jetpack_relatedposts",rel:"nofollow","data-origin":"0","data-position":"0"},this.translate("Upgrade Focus: VideoPress For Weddings"))),React.createElement("p",{className:"jp-relatedposts-post-context"},this.translate('In "Upgrade"',{context:"topic post is located in"}))))))}})},2702:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _formAnalytics=__webpack_require__(2690);var _formAnalytics2=_interopRequireDefault(_formAnalytics);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"SiteSettingsAnalytics",render:function render(){return _react2.default.createElement(_formAnalytics2.default,{site:this.props.site})}});module.exports=exports["default"]},2703:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),debug=__webpack_require__(4)("calypso:my-sites:site-settings");var DiscussionForm=__webpack_require__(2691);module.exports=React.createClass({displayName:"SiteSettingsDiscussion",componentWillMount:function componentWillMount(){debug("Mounting SiteSettingsDiscussion React component.")},render:function render(){return React.createElement(DiscussionForm,{site:this.props.site})}})},2704:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _emptyContent=__webpack_require__(185);var _emptyContent2=_interopRequireDefault(_emptyContent);var _exporter=__webpack_require__(2546);var _exporter2=_interopRequireDefault(_exporter);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SiteSettingsExport=function(_Component){(0,_inherits3.default)(SiteSettingsExport,_Component);function SiteSettingsExport(){(0,_classCallCheck3.default)(this,SiteSettingsExport);return(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(SiteSettingsExport).apply(this,arguments))}(0,_createClass3.default)(SiteSettingsExport,[{key:"render",value:function render(){if(this.props.site.jetpack){return _react2.default.createElement(_emptyContent2.default,{illustration:"/calypso/images/drake/drake-jetpack.svg",title:_i18nCalypso2.default.translate("Want to export your site?"),line:_i18nCalypso2.default.translate("Visit your site's wp-admin for all your import and export needs."),action:_i18nCalypso2.default.translate("Export %(siteTitle)s",{args:{siteTitle:this.props.site.title}}),actionURL:this.props.site.options.admin_url+"export.php",actionTarget:"_blank"})}return _react2.default.createElement(_exporter2.default,{site:this.props.site})}}]);return SiteSettingsExport}(_react.Component);exports.default=SiteSettingsExport;module.exports=exports["default"]},2705:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),debug=__webpack_require__(4)("calypso:my-sites:site-settings");var GeneralForm=__webpack_require__(2692),DeleteSiteOptions=__webpack_require__(2688),config=__webpack_require__(10);module.exports=React.createClass({displayName:"SiteSettingsGeneral",componentWillMount:function componentWillMount(){debug("Mounting SiteSettingsGeneral React component.")},render:function render(){var site=this.props.site;return React.createElement("div",{className:"general-settings"},React.createElement(GeneralForm,{site:site}),config.isEnabled("manage/site-settings/delete-site")&&!site.jetpack&&!site.is_vip?React.createElement(DeleteSiteOptions,{site:this.props.site,sitePurchases:this.props.sitePurchases,hasLoadedSitePurchasesFromServer:this.props.hasLoadedSitePurchasesFromServer}):null)}})},2706:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _keys=__webpack_require__(44);var _keys2=_interopRequireDefault(_keys);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _compact=__webpack_require__(1450);var _compact2=_interopRequireDefault(_compact);var _emptyContent=__webpack_require__(185);var _emptyContent2=_interopRequireDefault(_emptyContent);var _store=__webpack_require__(2393);var _store2=_interopRequireDefault(_store);var _interval=__webpack_require__(1887);var _interval2=_interopRequireDefault(_interval);var _importerWordpress=__webpack_require__(2558);var _importerWordpress2=_interopRequireDefault(_importerWordpress);var _importerMedium=__webpack_require__(2557);var _importerMedium2=_interopRequireDefault(_importerMedium);var _actions=__webpack_require__(1805);var _constants=__webpack_require__(1597);var _emailVerificationGate=__webpack_require__(1698);var _emailVerificationGate2=_interopRequireDefault(_emailVerificationGate);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"SiteSettingsImport",propTypes:{site:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.bool,_react.PropTypes.shape({slug:_react.PropTypes.string.isRequired,title:_react.PropTypes.string.isRequired})])},componentDidMount:function componentDidMount(){_store2.default.on("change",this.updateState)},componentWillUnmount:function componentWillUnmount(){_store2.default.off("change",this.updateState)},getInitialState:function getInitialState(){return(0,_store.getState)()},getImports:function getImports(type){var _state=this.state;var isHydrated=_state.api.isHydrated;var importers=_state.importers;var site=this.props.site;var slug=site.slug;var title=site.title;var siteTitle=title.length?title:slug;if(!isHydrated){return[{importerState:_constants.appStates.DISABLED,type:type,siteTitle:siteTitle}]}var status=(0,_keys2.default)(importers).map(function(id){return importers[id]}).filter(function(importer){return site.ID===importer.site.ID}).filter(function(importer){return type===importer.type});if(0===status.length){return[{importerState:_constants.appStates.INACTIVE,type:type,siteTitle:siteTitle}]}return status.map(function(item){return(0,_assign2.default)({},item,{site:site,siteTitle:siteTitle})})},updateFromAPI:function updateFromAPI(){(0,_actions.fetchState)(this.props.site.ID)},updateState:function updateState(){this.setState((0,_store.getState)())},render:function render(){var site=this.props.site;var isJetpack=site.jetpack;var adminUrl=site.options.admin_url;var slug=site.slug;var siteTitle=site.title;var title=siteTitle.length?siteTitle:slug;var description=this.translate("Import another site's content into "+"{{strong}}%(title)s{{/strong}}. Once you start an "+"import, come back here to check on the progress. "+"Check out our {{a}}import guide{{/a}} "+"if you need more help.",{args:{title:title},components:{a:_react2.default.createElement("a",{href:"https://support.wordpress.com/import/"}),strong:_react2.default.createElement("strong",null)}});if(isJetpack){return _react2.default.createElement(_emptyContent2.default,{illustration:"/calypso/images/drake/drake-jetpack.svg",title:this.translate("Want to import into your site?"),line:this.translate("Visit your site's wp-admin for all your import and export needs."),action:this.translate("Import into %(title)s",{args:{title:title}}),actionURL:adminUrl+"import.php",actionTarget:"_blank"})}return _react2.default.createElement("div",{className:"section-import"},_react2.default.createElement(_emailVerificationGate2.default,null,_react2.default.createElement(_interval2.default,{onTick:this.updateFromAPI,period:_interval.EVERY_FIVE_SECONDS}),_react2.default.createElement(_compact2.default,null,_react2.default.createElement("header",null,_react2.default.createElement("h1",{className:"importer__section-title"},this.translate("Import Another Site")),_react2.default.createElement("p",{className:"importer__section-description"},description))),this.getImports(_constants.WORDPRESS).map(function(importerStatus,key){return _react2.default.createElement(_importerWordpress2.default,{key:key,site:site,importerStatus:importerStatus})}),_config2.default.isEnabled("manage/import/medium")&&this.getImports(_constants.MEDIUM).map(function(importerStatus,key){return _react2.default.createElement(_importerMedium2.default,{key:key,site:site,importerStatus:importerStatus})}),_react2.default.createElement(_compact2.default,{href:adminUrl+"import.php",target:"_blank"},this.translate("Other importers"))))}});module.exports=exports["default"]},2707:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),config=__webpack_require__(10),debug=__webpack_require__(4)("calypso:my-sites:site-settings");
var JetpackProtect=__webpack_require__(2694),JetpackMonitor=__webpack_require__(2693),JetpackScan=__webpack_require__(2695),JetpackManageErrorPage=__webpack_require__(670);module.exports=React.createClass({displayName:"SiteSettingsSecurity",componentWillMount:function componentWillMount(){debug("Mounting SiteSettingsSecurity React component.")},render:function render(){var site=this.props.site;if(!site.jetpack){return React.createElement(JetpackManageErrorPage,{action:this.translate("Manage general settings for %(site)s",{args:{site:site.name}}),actionURL:"/settings/general/"+site.slug,title:this.translate("No security configuration is required."),line:this.translate("Security management is automatic for WordPress.com sites."),illustration:"/calypso/images/drake/drake-jetpack.svg"})}if(!site.canManage()){return React.createElement(JetpackManageErrorPage,{template:"optInManage",title:this.translate("Looking to manage this site's security settings?"),section:"security-settings",site:site})}if(!site.versionCompare("3.4",">=")){return React.createElement(JetpackManageErrorPage,{template:"updateJetpack",site:site,version:"3.4"})}return React.createElement("div",null,React.createElement(JetpackProtect,{site:site}),config.isEnabled("settings/security/scan")&&React.createElement(JetpackScan,{site:site}),React.createElement(JetpackMonitor,{site:site}))}})},2708:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _formSeo=__webpack_require__(2696);var _formSeo2=_interopRequireDefault(_formSeo);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"SiteSettingsSeo",render:function render(){return _react2.default.createElement(_formSeo2.default,{site:this.props.site})}});module.exports=exports["default"]},2709:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),debug=__webpack_require__(4)("calypso:my-sites:site-settings"),page=__webpack_require__(40);var HeaderCake=__webpack_require__(1460),ActionPanel=__webpack_require__(2176),ActionPanelTitle=__webpack_require__(2177),ActionPanelBody=__webpack_require__(2173),ActionPanelFigure=__webpack_require__(2174),ActionPanelFooter=__webpack_require__(2175),Button=__webpack_require__(68),support=__webpack_require__(339);module.exports=React.createClass({displayName:"StartOver",getInitialState:function getInitialState(){return{site:this.props.sites.getSelectedSite()}},componentWillMount:function componentWillMount(){debug("Mounting StartOverPage React component.");this.props.sites.on("change",this._updateSite)},componentWillUnmount:function componentWillUnmount(){this.props.sites.off("change",this._updateSite)},render:function render(){var strings={startOver:this.translate("Start Over"),contactSupport:this.translate("Contact Support")};return React.createElement("div",{className:"main main-column",role:"main"},React.createElement(HeaderCake,{onClick:this._goBack},React.createElement("h1",null,strings.startOver)),React.createElement(ActionPanel,null,React.createElement(ActionPanelBody,null,React.createElement(ActionPanelFigure,{inlineBodyText:true},React.createElement("svg",{width:"170",height:"143",viewBox:"0 0 170 143",xmlns:"http://www.w3.org/2000/svg"},React.createElement("title",null,strings.startOver),React.createElement("g",{fill:"none",fillRule:"evenodd"},React.createElement("path",{d:"M140.857 65.44c0 31.18-25.424 56.554-56.667 56.554-31.242 0-56.666-25.373-56.666-56.553 0-31.18 25.424-56.553 56.666-56.553 31.243 0 56.667 25.373 56.667 56.554zM61.93 111.2L37.642 44.74c-2.846 6.312-4.426 13.318-4.426 20.703 0 20.136 11.762 37.49 28.712 45.76zm52.745-31.873c2.212-7.07 3.92-12.12 3.92-16.475 0-6.25-2.277-10.604-4.236-14.012-2.53-4.165-5-7.7-5-11.928 0-4.67 3.543-9.027 8.54-9.027l.696.063c-9.045-8.268-21.124-13.38-34.406-13.38-17.77 0-33.455 9.15-42.563 22.91l3.29.064c5.31 0 13.534-.63 13.534-.63 2.784-.127 3.1 3.85.38 4.228 0 0-2.783.315-5.882.442L71.54 96.684l11.134-33.39-7.908-21.712c-2.78-.127-5.374-.442-5.374-.442-2.72-.19-2.404-4.355.316-4.228 0 0 8.41.63 13.408.63 5.375 0 13.598-.63 13.598-.63 2.718-.127 3.097 3.85.316 4.228 0 0-2.72.315-5.82.442l18.404 54.66 5.06-16.915zm-13.598 34.084c-.126-.253-.253-.442-.316-.695L85.076 69.858 69.77 114.23a52.04 52.04 0 0 0 14.42 2.02c5.946 0 11.637-1.01 16.887-2.84zm28.144-67.156c0 5.174-.95 10.982-3.857 18.24l-15.56 44.876c15.116-8.773 25.298-25.184 25.298-43.93 0-8.837-2.21-17.168-6.195-24.426.19 1.642.316 3.408.316 5.24z",fill:"#A8BECE"}),React.createElement("path",{d:"M84.595 143c33.755 0 61.12-2.713 61.12-6.06 0-3.346-27.365-6.06-61.12-6.06-33.755 0-61.12 2.714-61.12 6.06 0 3.347 27.365 6.06 61.12 6.06z","fill-opacity":".37",fill:"#D5E5EB"}),React.createElement("g",{fill:"#D5E5EB"},React.createElement("path",{d:"M10.365 23.08c-.295-.844-1.212-1.765-2.06-2.062L.78 18.38c-.842-.294-.847-.773.002-1.072l7.528-2.65c.844-.3 1.767-1.218 2.066-2.067l2.65-7.527c.3-.844.777-.85 1.074 0l2.637 7.522c.295.843 1.213 1.764 2.06 2.06l7.524 2.638c.844.295.85.773 0 1.073l-7.528 2.65c-.844.298-1.766 1.217-2.066 2.067l-2.65 7.527c-.298.844-.777.85-1.074.002l-2.637-7.523zM157.512 65.034c-.147-.42-.605-.88-1.028-1.028l-2.285-.8c-.42-.148-.424-.387 0-.536l2.286-.805c.42-.148.88-.607 1.03-1.03l.806-2.286c.148-.422.386-.425.535-.002l.8 2.285c.148.42.605.88 1.03 1.028l2.283.8c.42.15.423.387 0 .537l-2.287.805c-.42.148-.88.606-1.03 1.03l-.805 2.286c-.148.42-.387.424-.535 0l-.8-2.284zM151.85 7.518l-2.02.972.97-2.024-.97-2.024 2.02.97 2.02-.97-.97 2.024.97 2.024-2.02-.972zM167.403 37.007l-2.02.97.97-2.023-.97-2.023 2.02.972 2.02-.97-.97 2.022.97 2.024-2.02-.97zM121.908 6.98c-.405-.195-1.053-.2-1.467 0l-2.975 1.43c-.406.196-.58.034-.382-.38l1.428-2.983c.196-.406.2-1.055 0-1.47L117.084.595c-.195-.406-.033-.582.382-.382l2.976 1.43c.406.196 1.054.2 1.468 0l2.976-1.43c.405-.195.58-.033.382.382l-1.43 2.982c-.193.406-.198 1.055 0 1.47l1.43 2.982c.194.405.032.58-.382.38l-2.976-1.43zM41.684 11.154c-.405-.195-1.053-.2-1.467 0l-2.976 1.43c-.404.196-.58.034-.38-.38l1.428-2.983c.194-.405.2-1.055 0-1.47l-1.43-2.982c-.193-.406-.03-.58.383-.382l2.977 1.43c.405.196 1.053.2 1.467 0l2.976-1.43c.406-.195.58-.033.382.382l-1.43 2.982c-.193.406-.197 1.056 0 1.47l1.43 2.983c.194.406.033.58-.382.382l-2.976-1.43zM152.8 30.062c-.146-.42-.604-.88-1.027-1.028l-2.285-.8c-.42-.148-.423-.387 0-.536l2.287-.805c.42-.148.88-.607 1.03-1.03l.806-2.286c.15-.42.387-.424.536 0l.8 2.284c.148.42.605.88 1.03 1.03l2.283.8c.42.147.422.385 0 .535l-2.288.805c-.42.148-.88.606-1.03 1.03l-.805 2.286c-.148.42-.387.424-.535 0l-.8-2.284zM7.708 55.51c-.148-.42-.605-.878-1.03-1.027l-2.283-.8c-.42-.148-.423-.386 0-.536l2.287-.805c.42-.148.88-.606 1.03-1.03l.805-2.286c.148-.42.387-.424.535 0l.8 2.284c.148.42.606.88 1.03 1.028l2.284.8c.42.148.423.386 0 .536l-2.287.805c-.422.147-.882.605-1.03 1.03l-.807 2.285c-.148.42-.386.424-.535 0l-.8-2.284z"}))))),React.createElement(ActionPanelTitle,null,strings.startOver),React.createElement("p",null,this.translate("If you want a site but don't want any of the posts and pages you have now, our support "+"team can delete your posts, pages, media, and comments for you.")),React.createElement("p",null,this.translate("This will keep your site and URL active, but give you a fresh start on your content "+"creation. Just contact us to have your current content cleared out.")),React.createElement("p",null,this.translate("Alternatively, you can delete all content from your site by following {{link}}the steps here{{/link}}.",{components:{link:React.createElement("a",{href:support.EMPTY_SITE,target:"_blank"})}}))),React.createElement(ActionPanelFooter,null,React.createElement(Button,{className:"settings-action-panel__support-button",href:"/help/contact"},strings.contactSupport))))},_updateSite:function _updateSite(){this.setState({site:this.props.sites.getSelectedSite()})},_goBack:function _goBack(){var site=this.state.site;page("/settings/general/"+site.slug)}})},3046:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _pick2=__webpack_require__(72);var _pick3=_interopRequireDefault(_pick2);var _debug=__webpack_require__(4);var _debug2=_interopRequireDefault(_debug);var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);var _actionTypes=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=(0,_debug2.default)("calypso:state:jetpack-sync:actions");exports.default={getSyncStatus:function getSyncStatus(siteId){return function(dispatch){debug("Getting sync status for: "+siteId);dispatch({type:_actionTypes.JETPACK_SYNC_STATUS_REQUEST,siteId:siteId});return _wp2.default.undocumented().getJetpackSyncStatus(siteId).then(function(data){dispatch({type:_actionTypes.JETPACK_SYNC_STATUS_SUCCESS,siteId:siteId,data:data})}).catch(function(error){dispatch({type:_actionTypes.JETPACK_SYNC_STATUS_ERROR,siteId:siteId,error:(0,_pick3.default)(error,["error","status","message"])})})}},scheduleJetpackFullysync:function scheduleJetpackFullysync(siteId){return function(dispatch){debug("Requesting full sync for: "+siteId);dispatch({type:_actionTypes.JETPACK_SYNC_START_REQUEST,siteId:siteId});return _wp2.default.undocumented().scheduleJetpackFullysync(siteId).then(function(data){dispatch({type:_actionTypes.JETPACK_SYNC_START_SUCCESS,siteId:siteId,data:data})}).catch(function(error){dispatch({type:_actionTypes.JETPACK_SYNC_START_ERROR,siteId:siteId,error:(0,_pick3.default)(error,["error","status","message"])})})}}};module.exports=exports["default"]},3047:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _reduce2=__webpack_require__(125);var _reduce3=_interopRequireDefault(_reduce2);var _get2=__webpack_require__(30);var _get3=_interopRequireDefault(_get2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getSyncStatus(state,siteId){return(0,_get3.default)(state,["jetpackSync","syncStatus",siteId])}function getFullSyncRequest(state,siteId){return(0,_get3.default)(state,["jetpackSync","fullSyncRequest",siteId])}function isPendingSyncStart(state,siteId){var syncStatus=getSyncStatus(state,siteId);var fullSyncRequest=getFullSyncRequest(state,siteId);var isScheduled=(0,_get3.default)(syncStatus,"is_scheduled");if(isScheduled){return true}var requestingFullSync=(0,_get3.default)(fullSyncRequest,"isRequesting")||(0,_get3.default)(fullSyncRequest,"scheduled");if(!requestingFullSync){return false}var lastRequested=(0,_get3.default)(fullSyncRequest,"lastRequested");var lastSuccessfulStatus=(0,_get3.default)(syncStatus,"lastSuccessfulStatus");if(!lastSuccessfulStatus){return true}return parseInt(lastRequested,10)>parseInt(lastSuccessfulStatus,10)}function isFullSyncing(state,siteId){var syncStatus=getSyncStatus(state,siteId);if(!syncStatus){return false}var isStarted=(0,_get3.default)(syncStatus,"started");var isFinished=(0,_get3.default)(syncStatus,"finished");return isStarted&&!isFinished}function getSyncProgressPercentage(state,siteId){var syncStatus=getSyncStatus(state,siteId),queued=(0,_get3.default)(syncStatus,"queue"),sent=(0,_get3.default)(syncStatus,"sent"),total=(0,_get3.default)(syncStatus,"total"),queuedMultiplier=.1,sentMultiplier=.9;if(isPendingSyncStart(state,siteId)||!queued||!sent||!total){return 0}var countQueued=(0,_reduce3.default)(queued,function(sum,value){return sum+=value},0);var countSent=(0,_reduce3.default)(sent,function(sum,value){return sum+=value},0);var countTotal=(0,_reduce3.default)(total,function(sum,value){return sum+=value},0);var percentQueued=countQueued/countTotal*queuedMultiplier*100;var percentSent=countSent/countTotal*sentMultiplier*100;return Math.ceil(percentQueued+percentSent)}exports.default={getSyncStatus:getSyncStatus,getFullSyncRequest:getFullSyncRequest,isPendingSyncStart:isPendingSyncStart,isFullSyncing:isFullSyncing,getSyncProgressPercentage:getSyncProgressPercentage};module.exports=exports["default"]},3054:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.receiveGuidedTransferStatus=receiveGuidedTransferStatus;exports.requestGuidedTransferStatus=requestGuidedTransferStatus;exports.saveHostDetails=saveHostDetails;var _object=__webpack_require__(2021);var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);var _actionTypes=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function receiveGuidedTransferStatus(siteId,guidedTransferStatus){return{type:_actionTypes.GUIDED_TRANSFER_STATUS_RECEIVE,siteId:siteId,guidedTransferStatus:guidedTransferStatus}}function requestGuidedTransferStatus(siteId){return function(dispatch){dispatch({type:_actionTypes.GUIDED_TRANSFER_STATUS_REQUEST,siteId:siteId});var success=function success(response){var guidedTransferStatus=(0,_object.omit)(response,"_headers");dispatch({type:_actionTypes.GUIDED_TRANSFER_STATUS_REQUEST_SUCCESS,siteId:siteId});dispatch(receiveGuidedTransferStatus(siteId,guidedTransferStatus))};var failure=function failure(error){return dispatch({type:_actionTypes.GUIDED_TRANSFER_STATUS_REQUEST_FAILURE,siteId:siteId,error:error})};return _wp2.default.undocumented().site(siteId).getGuidedTransferStatus().then(success).catch(failure)}}function saveHostDetails(siteId,data){return function(dispatch){dispatch({type:_actionTypes.GUIDED_TRANSFER_HOST_DETAILS_SAVE,siteId:siteId});var success=function success(response){dispatch({type:_actionTypes.GUIDED_TRANSFER_HOST_DETAILS_SAVE_SUCCESS,siteId:siteId});dispatch(receiveGuidedTransferStatus(siteId,(0,_object.omit)(response,"_headers")))};var failure=function failure(error){return dispatch({type:_actionTypes.GUIDED_TRANSFER_HOST_DETAILS_SAVE_FAILURE,siteId:siteId,error:error})};return _wp2.default.undocumented().site(siteId).saveGuidedTransferHostDetails(data).then(success).catch(failure)}}},3064:function(module,exports,__webpack_require__){module.exports={default:__webpack_require__(3101),__esModule:true}},3101:function(module,exports,__webpack_require__){__webpack_require__(3106);module.exports=Math.pow(2,-52)},3106:function(module,exports,__webpack_require__){var $export=__webpack_require__(53);$export($export.S,"Number",{EPSILON:Math.pow(2,-52)})},3161:function(module,exports,__webpack_require__){var eq=__webpack_require__(210);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function assignInDefaults(objValue,srcValue,key,object){if(objValue===undefined||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)){return srcValue}return objValue}module.exports=assignInDefaults},3165:function(module,exports,__webpack_require__){var baseForOwn=__webpack_require__(116);function baseInverter(object,setter,iteratee,accumulator){baseForOwn(object,function(value,key,object){setter(accumulator,iteratee(value),key,object)});return accumulator}module.exports=baseInverter},3168:function(module,exports,__webpack_require__){var baseCastPath=__webpack_require__(200),has=__webpack_require__(361),isKey=__webpack_require__(163),last=__webpack_require__(252),parent=__webpack_require__(373);function baseUnset(object,path){path=isKey(path,object)?[path+""]:baseCastPath(path);object=parent(object,path);var key=last(path);return object!=null&&has(object,key)?delete object[key]:true}module.exports=baseUnset},3170:function(module,exports,__webpack_require__){var baseMerge=__webpack_require__(401),isObject=__webpack_require__(45);function mergeDefaults(objValue,srcValue,key,object,source,stack){if(isObject(objValue)&&isObject(srcValue)){stack.set(srcValue,objValue);baseMerge(objValue,srcValue,undefined,mergeDefaults,stack)}return objValue}module.exports=mergeDefaults},3172:function(module,exports,__webpack_require__){var copyObjectWith=__webpack_require__(737),createAssigner=__webpack_require__(205),keys=__webpack_require__(94);var assignWith=createAssigner(function(object,source,srcIndex,customizer){copyObjectWith(source,keys(source),object,customizer)});module.exports=assignWith},3173:function(module,exports,__webpack_require__){var baseAssign=__webpack_require__(775),baseCreate=__webpack_require__(167);function create(prototype,properties){var result=baseCreate(prototype);return properties?baseAssign(result,properties):result}module.exports=create},3174:function(module,exports,__webpack_require__){var apply=__webpack_require__(164),assignInDefaults=__webpack_require__(3161),assignInWith=__webpack_require__(2018),rest=__webpack_require__(47);var defaults=rest(function(args){args.push(undefined,assignInDefaults);return apply(assignInWith,undefined,args)});module.exports=defaults},3175:function(module,exports,__webpack_require__){var apply=__webpack_require__(164),mergeDefaults=__webpack_require__(3170),mergeWith=__webpack_require__(739),rest=__webpack_require__(47);var defaultsDeep=rest(function(args){args.push(undefined,mergeDefaults);return apply(mergeWith,undefined,args)});module.exports=defaultsDeep},3178:function(module,exports,__webpack_require__){module.exports=__webpack_require__(2018)},3179:function(module,exports,__webpack_require__){var baseFind=__webpack_require__(384),baseForOwnRight=__webpack_require__(2016),baseIteratee=__webpack_require__(39);function findLastKey(object,predicate){return baseFind(object,baseIteratee(predicate,3),baseForOwnRight,true)}module.exports=findLastKey},3180:function(module,exports,__webpack_require__){var baseCastFunction=__webpack_require__(264),baseForRight=__webpack_require__(2239),keysIn=__webpack_require__(158);function forInRight(object,iteratee){return object==null?object:baseForRight(object,baseCastFunction(iteratee),keysIn)}module.exports=forInRight},3181:function(module,exports,__webpack_require__){var baseCastFunction=__webpack_require__(264),baseForOwnRight=__webpack_require__(2016);function forOwnRight(object,iteratee){return object&&baseForOwnRight(object,baseCastFunction(iteratee))}module.exports=forOwnRight},3182:function(module,exports,__webpack_require__){var baseFunctions=__webpack_require__(2240),keys=__webpack_require__(94);function functions(object){return object==null?[]:baseFunctions(object,keys(object))}module.exports=functions},3183:function(module,exports,__webpack_require__){var baseFunctions=__webpack_require__(2240),keysIn=__webpack_require__(158);function functionsIn(object){return object==null?[]:baseFunctions(object,keysIn(object))}module.exports=functionsIn},3185:function(module,exports,__webpack_require__){var constant=__webpack_require__(680),createInverter=__webpack_require__(2241),identity=__webpack_require__(110);var invert=createInverter(function(result,value,key){result[value]=key},constant(identity));module.exports=invert},3186:function(module,exports,__webpack_require__){var baseIteratee=__webpack_require__(39),createInverter=__webpack_require__(2241);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var invertBy=createInverter(function(result,value,key){if(hasOwnProperty.call(result,value)){result[value].push(key)}else{result[value]=[key]}},baseIteratee);module.exports=invertBy},3195:function(module,exports,__webpack_require__){var baseSet=__webpack_require__(778);function setWith(object,path,value,customizer){customizer=typeof customizer=="function"?customizer:undefined;return object==null?object:baseSet(object,path,value,customizer)}module.exports=setWith},3196:function(module,exports,__webpack_require__){var baseToPairs=__webpack_require__(779),keysIn=__webpack_require__(158);function toPairsIn(object){return baseToPairs(object,keysIn(object))}module.exports=toPairsIn},3197:function(module,exports,__webpack_require__){var baseUnset=__webpack_require__(3168);function unset(object,path){return object==null?true:baseUnset(object,path)}module.exports=unset},3199:function(module,exports,__webpack_require__){var baseValues=__webpack_require__(780),keysIn=__webpack_require__(158);function valuesIn(object){return object==null?[]:baseValues(object,keysIn(object))}module.exports=valuesIn}});