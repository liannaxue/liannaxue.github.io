webpackJsonp([9],{1442:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(router){var user=(0,_user2.default)();var isLoggedIn=!!user.get();if(_config2.default.isEnabled("manage/themes")){if(isLoggedIn){router("/design/:tier(free|premium)?",_controller3.multiSite,_controller2.makeNavigation,_controller.makeLayout);router("/design/:tier(free|premium)?/:site_id",_controller2.siteSelection,_controller3.singleSite,_controller2.makeNavigation,_controller.makeLayout);router("/design/:tier(free|premium)?/filter/:filter",_controller2.siteSelection,_controller3.multiSite,_controller2.makeNavigation,_controller.makeLayout);router("/design/:tier(free|premium)?/filter/:filter/:site_id",_controller2.siteSelection,_controller3.singleSite,_controller2.makeNavigation,_controller.makeLayout)}else{router("/design/:tier(free|premium)?",_controller3.loggedOut,_controller.makeLayout);router("/design/:tier(free|premium)?/filter/:filter",_controller3.loggedOut,_controller.makeLayout)}}};var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _user=__webpack_require__(37);var _user2=_interopRequireDefault(_user);var _controller=__webpack_require__(381);var _controller2=__webpack_require__(655);var _controller3=__webpack_require__(2748);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=exports["default"]},1459:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isPlansWordingEnabled=exports.isPlanFeaturesEnabled=undefined;var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _keys=__webpack_require__(44);var _keys2=_interopRequireDefault(_keys);var _invoke2=__webpack_require__(677);var _invoke3=_interopRequireDefault(_invoke2);var _includes2=__webpack_require__(34);var _includes3=_interopRequireDefault(_includes2);var _get2=__webpack_require__(30);var _get3=_interopRequireDefault(_get2);var _find2=__webpack_require__(33);var _find3=_interopRequireDefault(_find2);exports.isFreePlan=isFreePlan;exports.getPlan=getPlan;exports.getValidFeatureKeys=getValidFeatureKeys;exports.isValidFeatureKey=isValidFeatureKey;exports.getFeatureByKey=getFeatureByKey;exports.getFeatureTitle=getFeatureTitle;exports.getSitePlanSlug=getSitePlanSlug;exports.canUpgradeToPlan=canUpgradeToPlan;exports.getUpgradePlanSlugFromPath=getUpgradePlanSlugFromPath;exports.getPlanPath=getPlanPath;exports.planHasFeature=planHasFeature;exports.hasFeature=hasFeature;exports.addCurrentPlanToCartAndRedirect=addCurrentPlanToCartAndRedirect;exports.getCurrentPlan=getCurrentPlan;exports.getCurrentTrialPeriodInDays=getCurrentTrialPeriodInDays;exports.getDayOfTrial=getDayOfTrial;exports.getDaysUntilUserFacingExpiry=getDaysUntilUserFacingExpiry;exports.getDaysUntilExpiry=getDaysUntilExpiry;exports.isInGracePeriod=isInGracePeriod;exports.shouldFetchSitePlans=shouldFetchSitePlans;exports.filterPlansBySiteAndProps=filterPlansBySiteAndProps;exports.plansLink=plansLink;exports.applyTestFiltersToPlansList=applyTestFiltersToPlansList;var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _moment=__webpack_require__(2);var _moment2=_interopRequireDefault(_moment);var _debug=__webpack_require__(4);var _debug2=_interopRequireDefault(_debug);var _config=__webpack_require__(10);var _actions=__webpack_require__(646);var _cartValues=__webpack_require__(184);var _productsValues=__webpack_require__(80);var _constants=__webpack_require__(187);var _assembler=__webpack_require__(360);var _sitesList=__webpack_require__(55);var _sitesList2=_interopRequireDefault(_sitesList);var _abtest=__webpack_require__(248);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var sitesList=(0,_sitesList2.default)();var debug=(0,_debug2.default)("calypso:plans");var isPersonalPlanEnabled=(0,_config.isEnabled)("plans/personal-plan");function isFreePlan(plan){return plan===_constants.PLAN_FREE||plan===_constants.PLAN_JETPACK_FREE}function getPlan(plan){return _constants.plansList[plan]}function getValidFeatureKeys(){return(0,_keys2.default)(_constants.featuresList)}function isValidFeatureKey(feature){return!!_constants.featuresList[feature]}function getFeatureByKey(feature){return _constants.featuresList[feature]}function getFeatureTitle(feature){return(0,_invoke3.default)(_constants.featuresList,[feature,"getTitle"])}function getSitePlanSlug(siteID){var site=void 0;if(siteID){site=sitesList.getSite(siteID)}else{site=sitesList.getSelectedSite()}return(0,_get3.default)(site,"plan.product_slug")}function canUpgradeToPlan(planKey){var site=arguments.length<=1||arguments[1]===undefined?sitesList.getSelectedSite():arguments[1];var plan=(0,_get3.default)(site,["plan","expired"],false)?_constants.PLAN_FREE:(0,_get3.default)(site,["plan","product_slug"],_constants.PLAN_FREE);return(0,_get3.default)(_constants.plansList,[planKey,"availableFor"],function(){return false})(plan)}function getUpgradePlanSlugFromPath(path,siteID){var site=siteID?sitesList.getSite(siteID):sitesList.getSelectedSite();return(0,_find3.default)((0,_keys2.default)(_constants.plansList),function(planKey){return(planKey===path||getPlanPath(planKey)===path)&&canUpgradeToPlan(planKey,site)})}function getPlanPath(plan){return(0,_get3.default)(_constants.plansList,[plan,"getPathSlug"],function(){return undefined})()}function planHasFeature(plan,feature){return(0,_includes3.default)((0,_get3.default)(_constants.featuresList,[feature,"plans"]),plan)}function hasFeature(feature,siteID){return planHasFeature(getSitePlanSlug(siteID),feature)}function addCurrentPlanToCartAndRedirect(sitePlans,selectedSite){(0,_actions.addItem)(_cartValues.cartItems.planItem(getCurrentPlan(sitePlans.data).productSlug));(0,_page2.default)("/checkout/"+selectedSite.slug)}function getCurrentPlan(plans){var currentPlan=(0,_find3.default)(plans,{currentPlan:true});if(currentPlan){debug("current plan: %o",currentPlan);return currentPlan}var site=sitesList.getSelectedSite();var plan=(0,_assembler.createSitePlanObject)(site.plan);debug("current plan: %o",plan);return plan}function getCurrentTrialPeriodInDays(plan){var expiryMoment=plan.expiryMoment;var subscribedDayMoment=plan.subscribedDayMoment;var userFacingExpiryMoment=plan.userFacingExpiryMoment;if(isInGracePeriod(plan)){return expiryMoment.diff(userFacingExpiryMoment,"days")}return userFacingExpiryMoment.diff(subscribedDayMoment,"days")}function getDayOfTrial(plan){var subscribedDayMoment=plan.subscribedDayMoment;return(0,_moment2.default)().startOf("day").diff(subscribedDayMoment,"days")+1}function getDaysUntilUserFacingExpiry(plan){var userFacingExpiryMoment=plan.userFacingExpiryMoment;return userFacingExpiryMoment.diff((0,_moment2.default)().startOf("day"),"days")}function getDaysUntilExpiry(plan){var expiryMoment=plan.expiryMoment;return expiryMoment.diff((0,_moment2.default)().startOf("day"),"days")}function isInGracePeriod(plan){return getDaysUntilUserFacingExpiry(plan)<=0}function shouldFetchSitePlans(sitePlans,selectedSite){return!sitePlans.hasLoadedFromServer&&!sitePlans.isRequesting&&selectedSite}function filterPlansBySiteAndProps(plans,site,hideFreePlan,intervalType,showJetpackFreePlan){var hasPersonalPlan=site&&site.plan.product_slug===_constants.PLAN_PERSONAL;return plans.filter(function(plan){if(site&&site.jetpack){if("monthly"===intervalType){if(showJetpackFreePlan){return(0,_productsValues.isJetpackPlan)(plan)&&(0,_productsValues.isMonthly)(plan)}return(0,_productsValues.isJetpackPlan)(plan)&&!(0,_productsValues.isFreeJetpackPlan)(plan)&&(0,_productsValues.isMonthly)(plan)}if(showJetpackFreePlan){return(0,_productsValues.isJetpackPlan)(plan)&&!(0,_productsValues.isMonthly)(plan)}return(0,_productsValues.isJetpackPlan)(plan)&&!(0,_productsValues.isFreeJetpackPlan)(plan)&&!(0,_productsValues.isMonthly)(plan)}if(hideFreePlan&&_constants.PLAN_FREE===plan.product_slug){return false}if(plan.product_slug===_constants.PLAN_PERSONAL&&!(hasPersonalPlan||isPersonalPlanEnabled)){return false}return!(0,_productsValues.isJetpackPlan)(plan)})}var isPlanFeaturesEnabled=exports.isPlanFeaturesEnabled=function isPlanFeaturesEnabled(){return(0,_config.isEnabled)("manage/plan-features")};var isPlansWordingEnabled=exports.isPlansWordingEnabled=function isPlansWordingEnabled(){return(0,_abtest.abtest)("plansWording")==="targetedWording"};function plansLink(url,site,intervalType){if("monthly"===intervalType){url+="/monthly"}if(site){url+="/"+site.slug}return url}function applyTestFiltersToPlansList(planName){var filteredPlanConstantObj=(0,_extends3.default)({},_constants.plansList[planName]);var filteredPlanFeaturesConstantList=_constants.plansList[planName].getFeatures();var removeDisabledFeatures=function removeDisabledFeatures(){};var updatePlanDescriptions=function updatePlanDescriptions(){if(isPlansWordingEnabled()&&(0,_includes3.default)(_constants.allWpcomPlans,planName)){filteredPlanConstantObj.getDescription=_constants.plansList[planName].getTargetedDescription}};var updatePlanFeatures=function updatePlanFeatures(){};removeDisabledFeatures();updatePlanDescriptions();updatePlanFeatures();filteredPlanConstantObj.getFeatures=function(){return filteredPlanFeaturesConstantList};return filteredPlanConstantObj}},1468:function(module,exports){var core=module.exports={version:"1.2.6"};if(typeof __e=="number")__e=core},1469:function(module,exports,__webpack_require__){var store=__webpack_require__(1773)("wks"),uid=__webpack_require__(1584),Symbol=__webpack_require__(1489).Symbol;module.exports=function(name){return store[name]||(store[name]=Symbol&&Symbol[name]||(Symbol||uid)("Symbol."+name))}},1475:function(module,exports){var $Object=Object;module.exports={create:$Object.create,getProto:$Object.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:$Object.getOwnPropertyDescriptor,setDesc:$Object.defineProperty,setDescs:$Object.defineProperties,getKeys:$Object.keys,getNames:$Object.getOwnPropertyNames,getSymbols:$Object.getOwnPropertySymbols,each:[].forEach}},1485:function(module,exports,__webpack_require__){var global=__webpack_require__(1489),core=__webpack_require__(1468),hide=__webpack_require__(1500),redefine=__webpack_require__(1531),ctx=__webpack_require__(1549),PROTOTYPE="prototype";var $export=function(type,name,source){var IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,target=IS_GLOBAL?global:IS_STATIC?global[name]||(global[name]={}):(global[name]||{})[PROTOTYPE],exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports[PROTOTYPE]||(exports[PROTOTYPE]={}),key,own,out,exp;if(IS_GLOBAL)source=name;for(key in source){own=!IS_FORCED&&target&&key in target;out=(own?target:source)[key];exp=IS_BIND&&own?ctx(out,global):IS_PROTO&&typeof out=="function"?ctx(Function.call,out):out;if(target&&!own)redefine(target,key,out);if(exports[key]!=out)hide(exports,key,exp);if(IS_PROTO&&expProto[key]!=out)expProto[key]=out}};global.core=core;$export.F=1;$export.G=2;$export.S=4;$export.P=8;$export.B=16;$export.W=32;module.exports=$export},1489:function(module,exports){var global=module.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global},1498:function(module,exports,__webpack_require__){"use strict";var url=__webpack_require__(62),pick=__webpack_require__(72);module.exports=function(uri,search){var parsedUrl=url.parse(uri,true);if(search){parsedUrl.query.s=search}else{delete parsedUrl.query.s}parsedUrl=pick(parsedUrl,"pathname","hash","query");return url.format(parsedUrl).replace(/\%20/g,"+")}},1500:function(module,exports,__webpack_require__){var $=__webpack_require__(1475),createDesc=__webpack_require__(1645);module.exports=__webpack_require__(1579)?function(object,key,value){return $.setDesc(object,key,createDesc(1,value))}:function(object,key,value){object[key]=value;return object}},1508:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof2=__webpack_require__(31);var _typeof3=_interopRequireDefault(_typeof2);exports.fetchThemes=fetchThemes;exports.fetchNextPage=fetchNextPage;exports.query=query;exports.incrementThemesPage=incrementThemesPage;exports.fetchCurrentTheme=fetchCurrentTheme;exports.fetchThemeDetails=fetchThemeDetails;exports.receiveThemeDetails=receiveThemeDetails;exports.receiveThemeDetailsFailure=receiveThemeDetailsFailure;exports.receiveServerError=receiveServerError;exports.receiveThemes=receiveThemes;exports.activate=activate;exports.activated=activated;exports.clearActivated=clearActivated;exports.purchase=purchase;exports.setBackPath=setBackPath;var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _conforms=__webpack_require__(1637);var _conforms2=_interopRequireDefault(_conforms);var _defer=__webpack_require__(341);var _defer2=_interopRequireDefault(_defer);var _debug=__webpack_require__(4);var _debug2=_interopRequireDefault(_debug);var _property=__webpack_require__(153);var _property2=_interopRequireDefault(_property);var _actionTypes=__webpack_require__(3);var _selectors=__webpack_require__(1539);var _actions=__webpack_require__(250);var _selectors2=__webpack_require__(1600);var _selectors3=__webpack_require__(1577);var _selectors4=__webpack_require__(1601);var _wp=__webpack_require__(22);var _wp2=_interopRequireDefault(_wp);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=(0,_debug2.default)("calypso:themes:actions");function fetchThemes(site){return function(dispatch,getState){var queryParams=(0,_selectors3.getQueryParams)(getState());var startTime=(new Date).getTime();debug("Query params",queryParams);_wp2.default.undocumented().themes(site,queryParams).then(function(themes){var responseTime=(new Date).getTime()-startTime;dispatch(receiveThemes(themes,site,queryParams,responseTime))}).catch(function(error){return receiveServerError(error)})}}function fetchNextPage(site){return function(dispatch){dispatch(incrementThemesPage(site));dispatch(fetchThemes(site))}}function query(params){return{type:_actionTypes.THEMES_QUERY,params:params}}function incrementThemesPage(site){return{type:_actionTypes.THEMES_INCREMENT_PAGE,site:site}}function fetchCurrentTheme(siteId){return function(dispatch){dispatch({type:_actionTypes.THEME_REQUEST_CURRENT,siteId:siteId});_wp2.default.undocumented().activeTheme(siteId).then(function(theme){debug("Received current theme",theme);dispatch({type:_actionTypes.THEME_RECEIVE_CURRENT,siteId:siteId,themeId:theme.id,themeName:theme.name,themeCost:theme.cost})}).catch(function(error){dispatch({type:_actionTypes.THEME_REQUEST_CURRENT_FAILURE,siteId:siteId,error:error})})}}function fetchThemeDetails(id,site){return function(dispatch){_wp2.default.undocumented().themeDetails(id,site).then(function(themeDetails){debug("Received theme details",themeDetails);dispatch(receiveThemeDetails(themeDetails))}).catch(function(error){dispatch(receiveThemeDetailsFailure(id,error))})}}function receiveThemeDetails(theme){return{type:_actionTypes.THEME_DETAILS_RECEIVE,themeId:theme.id,themeName:theme.name,themeAuthor:theme.author,themePrice:theme.price,themeScreenshot:theme.screenshot,themeScreenshots:theme.screenshots,themeDescription:theme.description,themeDescriptionLong:theme.description_long,themeSupportDocumentation:theme.support_documentation||undefined,themeDownload:theme.download_uri||undefined,themeTaxonomies:theme.taxonomies,themeStylesheet:theme.stylesheet,themeDemoUri:theme.demo_uri,themeActive:theme.active,themePurchased:theme.purchased}}function receiveThemeDetailsFailure(id,error){debug("Received error for theme "+id+":",error);return{type:_actionTypes.THEME_DETAILS_RECEIVE_FAILURE,themeId:id,error:error}}function receiveServerError(error){return{type:_actionTypes.THEMES_RECEIVE_SERVER_ERROR,error:error}}var isFirstPageOfSearch=(0,_conforms2.default)({search:function search(a){return undefined!==a},page:function page(a){return a===1}});function receiveThemes(data,site,queryParams,responseTime){return function(dispatch,getState){var themeAction={type:_actionTypes.THEMES_RECEIVE,siteId:site.ID,isJetpack:!!site.jetpack,wasJetpack:(0,_selectors2.isJetpack)(getState()),themes:data.themes,found:data.found,queryParams:queryParams};var trackShowcaseSearch=(0,_actions.recordTracksEvent)("calypso_themeshowcase_search",{search_term:queryParams.search||null,tier:queryParams.tier,response_time_in_ms:responseTime,result_count:data.found,results_first_page:data.themes.map((0,_property2.default)("id"))});var action=isFirstPageOfSearch(queryParams)?(0,_actions.withAnalytics)(trackShowcaseSearch,themeAction):themeAction;dispatch(action)}}function activate(theme,site){var source=arguments.length<=2||arguments[2]===undefined?"unknown":arguments[2];return function(dispatch){dispatch({type:_actionTypes.THEME_ACTIVATE,theme:theme,site:site});_wp2.default.undocumented().activateTheme(theme,site.ID).then(function(){dispatch(activated(theme,site,source))}).catch(function(error){dispatch(receiveServerError(error))})}}function activated(theme,site){var source=arguments.length<=2||arguments[2]===undefined?"unknown":arguments[2];var purchased=arguments.length<=3||arguments[3]===undefined?false:arguments[3];return function(dispatch,getState){var previousTheme=(0,_selectors.getCurrentTheme)(getState(),site.ID);var queryParams=getState().themes.themesList.get("query");if((typeof theme==="undefined"?"undefined":(0,_typeof3.default)(theme))!=="object"){theme=(0,_selectors4.getThemeById)(getState(),theme)}var action={type:_actionTypes.THEME_ACTIVATED,theme:theme,site:site,siteId:site.ID};var trackThemeActivation=(0,_actions.recordTracksEvent)("calypso_themeshowcase_theme_activate",{theme:theme.id,previous_theme:previousTheme.id,source:source,purchased:purchased,search_term:queryParams.get("search")||null});dispatch((0,_actions.withAnalytics)(trackThemeActivation,action))}}function clearActivated(){return{type:_actionTypes.THEME_CLEAR_ACTIVATED}}function purchase(theme,site){var source=arguments.length<=2||arguments[2]===undefined?"unknown":arguments[2];var CartActions=__webpack_require__(646);var themeItem=__webpack_require__(658).themeItem;return function(dispatch){CartActions.addItem(themeItem(theme.id,source));(0,_defer2.default)(function(){(0,_page2.default)("/checkout/"+site.slug);dispatch({type:_actionTypes.THEME_PURCHASE,id:theme.id,site:site})})}}function setBackPath(path){return{type:_actionTypes.THEME_BACK_PATH_SET,path:path}}},1531:function(module,exports,__webpack_require__){var global=__webpack_require__(1489),hide=__webpack_require__(1500),SRC=__webpack_require__(1584)("src"),TO_STRING="toString",$toString=Function[TO_STRING],TPL=(""+$toString).split(TO_STRING);__webpack_require__(1468).inspectSource=function(it){return $toString.call(it)};(module.exports=function(O,key,val,safe){if(typeof val=="function"){val.hasOwnProperty(SRC)||hide(val,SRC,O[key]?""+O[key]:TPL.join(String(key)));val.hasOwnProperty("name")||hide(val,"name",key)}if(O===global){O[key]=val}else{if(!safe)delete O[key];hide(O,key,val)}})(Function.prototype,TO_STRING,function toString(){return typeof this=="function"&&this[SRC]||$toString.call(this)})},1539:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCurrentTheme=getCurrentTheme;exports.isActivating=isActivating;exports.hasActivated=hasActivated;exports.isRequestingCurrentTheme=isRequestingCurrentTheme;function getCurrentTheme(state,siteId){return state.themes.currentTheme.get("currentThemes").get(siteId)}function isActivating(state){return state.themes.currentTheme.get("isActivating")}function hasActivated(state){return state.themes.currentTheme.get("hasActivated")}function isRequestingCurrentTheme(state,siteId){return!!state.themes.currentTheme.get("requesting").get(siteId)}},1540:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageViewTracker=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _flowRight=__webpack_require__(156);var _flowRight2=_interopRequireDefault(_flowRight);var _noop=__webpack_require__(36);var _noop2=_interopRequireDefault(_noop);var _reactRedux=__webpack_require__(21);var _actions=__webpack_require__(250);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PageViewTracker=exports.PageViewTracker=_react2.default.createClass({displayName:"PageViewTracker",getInitialState:function getInitialState(){return{timer:null}},componentDidMount:function componentDidMount(){this.queuePageView()},componentWillUnmount:function componentWillUnmount(){clearTimeout(this.state.timer)},queuePageView:function queuePageView(){var _props=this.props;var _props$delay=_props.delay;var delay=_props$delay===undefined?0:_props$delay;var path=_props.path;var _props$recorder=_props.recorder;var recorder=_props$recorder===undefined?_noop2.default:_props$recorder;var title=_props.title;if(this.state.timer){return}if(!delay){return recorder(path,title)}this.setState({timer:setTimeout(function(){return recorder(path,title)},delay)})},render:function render(){return null}});PageViewTracker.propTypes={delay:_react.PropTypes.number,path:_react.PropTypes.string.isRequired,recorder:_react.PropTypes.func,title:_react.PropTypes.string.isRequired};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{recorder:(0,_flowRight2.default)(dispatch,_actions.recordPageView)}};exports.default=(0,_reactRedux.connect)(null,mapDispatchToProps)(PageViewTracker)},1545:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _toConsumableArray2=__webpack_require__(46);var _toConsumableArray3=_interopRequireDefault(_toConsumableArray2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _noop=__webpack_require__(36);var _noop2=_interopRequireDefault(_noop);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);var _sitesList=__webpack_require__(55);var _sitesList2=_interopRequireDefault(_sitesList);var _plans=__webpack_require__(1459);var _productsValues=__webpack_require__(80);var _trackComponentView=__webpack_require__(668);var _trackComponentView2=_interopRequireDefault(_trackComponentView);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var sites=(0,_sitesList2.default)();exports.default=_react2.default.createClass({displayName:"UpgradeNudge",propTypes:{onClick:_react2.default.PropTypes.func,className:_react2.default.PropTypes.string,message:_react2.default.PropTypes.string,icon:_react2.default.PropTypes.string,event:_react2.default.PropTypes.string,href:_react2.default.PropTypes.string,jetpack:_react2.default.PropTypes.bool,compact:_react2.default.PropTypes.bool,feature:_react2.default.PropTypes.oneOf([false].concat((0,_toConsumableArray3.default)((0,_plans.getValidFeatureKeys)()))),shouldDisplay:_react2.default.PropTypes.func},getDefaultProps:function getDefaultProps(){return{onClick:_noop2.default,message:"And get your own domain address.",icon:"star",event:null,jetpack:false,feature:false,compact:false,shouldDisplay:null}},handleClick:function handleClick(){if(this.props.event||this.props.feature){_analytics2.default.tracks.recordEvent("calypso_upgrade_nudge_cta_click",{cta_name:this.props.event,cta_feature:this.props.feature})}this.props.onClick()},shouldDisplay:function shouldDisplay(site){var _props=this.props;var feature=_props.feature;var jetpack=_props.jetpack;var shouldDisplay=_props.shouldDisplay;if(shouldDisplay){return shouldDisplay()}if(!site){return false}if(feature&&(0,_plans.hasFeature)(feature,site.ID)){return false}if(!feature&&!(0,_productsValues.isFreePlan)(site.plan)){return false}if(feature==="no-adverts"&&site.options.wordads){return false}if(!jetpack&&site.jetpack||jetpack&&!site.jetpack){return false}return true},render:function render(){var classes=(0,_classnames2.default)(this.props.className,"upgrade-nudge");var site=sites.getSelectedSite();var href=this.props.href;if(!this.shouldDisplay(site)){return null}if(!this.props.href&&site){if(this.props.feature){href="/plans/"+site.slug+"?feature="+this.props.feature}else{href="/plans/"+site.slug}}if(this.props.compact){return _react2.default.createElement(_button2.default,{className:classes,onClick:this.handleClick,href:href},_react2.default.createElement(_gridicon2.default,{className:"upgrade-nudge__icon",icon:this.props.icon}),_react2.default.createElement("div",{className:"upgrade-nudge__info"},_react2.default.createElement("span",{className:"upgrade-nudge__title"},this.props.title||this.translate("Upgrade to Premium")),_react2.default.createElement("span",{className:"upgrade-nudge__message"},this.props.message)))}return _react2.default.createElement(_card2.default,{compact:true,className:classes,onClick:this.handleClick,href:href},_react2.default.createElement(_gridicon2.default,{className:"upgrade-nudge__icon",icon:this.props.icon,size:18}),_react2.default.createElement("div",{className:"upgrade-nudge__info"},_react2.default.createElement("span",{className:"upgrade-nudge__title"},this.props.title||this.translate("Upgrade to Premium")),_react2.default.createElement("span",{className:"upgrade-nudge__message"},this.props.message)),(this.props.event||this.props.feature)&&_react2.default.createElement(_trackComponentView2.default,{eventName:"calypso_upgrade_nudge_impression",eventProperties:{cta_name:this.props.event,cta_feature:this.props.feature}}))}});module.exports=exports["default"]},1549:function(module,exports,__webpack_require__){var aFunction=__webpack_require__(2037);module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},1550:function(module,exports){module.exports={}},1569:function(module,exports,__webpack_require__){"use strict";var throttle=__webpack_require__(656),SCROLL_CHECK_RATE_IN_MS=400;module.exports=function(nextPageMethod){return{componentDidMount:function componentDidMount(){this.checkScrollPositionHandler=throttle(this.checkScrollPosition.bind(this,{triggeredByScroll:true}),SCROLL_CHECK_RATE_IN_MS);window.addEventListener("scroll",this.checkScrollPositionHandler);this.checkScrollPosition({triggeredByScroll:false})},componentDidUpdate:function componentDidUpdate(){this.checkScrollPosition({triggeredByScroll:false})},componentWillUnmount:function componentWillUnmount(){window.removeEventListener("scroll",this.checkScrollPositionHandler)},checkScrollPosition:function checkScrollPosition(options){var scrollPosition=window.pageYOffset,documentHeight=document.body.scrollHeight,viewportHeight=window.innerHeight,scrollOffset=2*viewportHeight,triggeredByScroll=options.triggeredByScroll,self=this;if(scrollPosition>=documentHeight-viewportHeight-scrollOffset){if(scrollPosition>viewportHeight){triggeredByScroll=true}setTimeout(function(){self[nextPageMethod]({triggeredByScroll:triggeredByScroll})},0)}}}}},1577:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isFetchingNextPage=isFetchingNextPage;exports.isLastPage=isLastPage;exports.getThemesList=getThemesList;exports.getQueryParams=getQueryParams;exports.isFetchError=isFetchError;function isFetchingNextPage(state){return state.themes.themesList.getIn(["queryState","isFetchingNextPage"])}function isLastPage(state){return state.themes.themesList.getIn(["queryState","isLastPage"])}function getThemesList(state){return state.themes.themesList.get("list")}function getQueryParams(state){return state.themes.themesList.get("query").toObject()}function isFetchError(state){return state.themes.themesList.getIn(["queryState","error"])}},1578:function(module,exports){module.exports=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it}},1579:function(module,exports,__webpack_require__){module.exports=!__webpack_require__(1580)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},1580:function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return true}}},1581:function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},1582:function(module,exports,__webpack_require__){var def=__webpack_require__(1475).setDesc,has=__webpack_require__(1581),TAG=__webpack_require__(1469)("toStringTag");module.exports=function(it,tag,stat){if(it&&!has(it=stat?it:it.prototype,TAG))def(it,TAG,{configurable:true,value:tag})}},1583:function(module,exports,__webpack_require__){var IObject=__webpack_require__(2041),defined=__webpack_require__(1578);module.exports=function(it){return IObject(defined(it))}},1584:function(module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(key===undefined?"":key,")_",(++id+px).toString(36))}},1600:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isJetpack=isJetpack;exports.getParams=getParams;exports.hasSiteChanged=hasSiteChanged;exports.hasParams=hasParams;function isJetpack(state){return!!state.themes.themesLastQuery.get("isJetpack")}function getParams(state){return state.themes.themesLastQuery.get("lastParams")||{}}function hasSiteChanged(state){return state.themes.themesLastQuery.get("previousSiteId")!==state.themes.themesLastQuery.get("currentSiteId")}function hasParams(state){return!!state.themes.themesLastQuery.get("lastParams")}},1601:function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getThemes=getThemes;exports.getThemeById=getThemeById;function getThemes(state){return state.themes.themes.get("themes").toJS()}function getThemeById(state,id){var theme=state.themes.themes.getIn(["themes",id]);return theme?theme.toJS():undefined}},1613:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _mixin=__webpack_require__(105);var _mixin2=_interopRequireDefault(_mixin);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _noop=__webpack_require__(36);var _noop2=_interopRequireDefault(_noop);var _site=__webpack_require__(344);var _site2=_interopRequireDefault(_site);var _placeholder=__webpack_require__(689);var _placeholder2=_interopRequireDefault(_placeholder);var _siteSelector=__webpack_require__(263);var _siteSelector2=_interopRequireDefault(_siteSelector);var _sitesList=__webpack_require__(55);var _sitesList2=_interopRequireDefault(_sitesList);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var sites=(0,_sitesList2.default)();exports.default=_react2.default.createClass({displayName:"SitesDropdown",mixins:[_mixin2.default],propTypes:{selected:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.number,_react2.default.PropTypes.string]),showAllSites:_react2.default.PropTypes.bool,onClose:_react2.default.PropTypes.func,
onSiteSelect:_react2.default.PropTypes.func,filter:_react2.default.PropTypes.func,isPlaceholder:_react2.default.PropTypes.bool},getDefaultProps:function getDefaultProps(){return{showAllSites:false,onClose:_noop2.default,onSiteSelect:_noop2.default,isPlaceholder:false}},getInitialState:function getInitialState(){var primary=sites.getPrimary();return{selected:this.props.selected||primary&&primary.slug}},getSelectedSite:function getSelectedSite(){return sites.getSite(this.state.selected)},selectSite:function selectSite(siteSlug){this.props.onSiteSelect(siteSlug);this.setState({selected:siteSlug,open:false})},toggleOpen:function toggleOpen(){this.setState({open:!this.state.open})},render:function render(){return _react2.default.createElement("div",{className:(0,_classnames2.default)("sites-dropdown",{"is-open":this.state.open})},_react2.default.createElement("div",{className:"sites-dropdown__wrapper"},_react2.default.createElement("div",{className:"sites-dropdown__selected",onClick:this.toggleOpen},this.props.isPlaceholder?_react2.default.createElement(_placeholder2.default,null):_react2.default.createElement(_site2.default,{site:this.getSelectedSite(),indicator:false}),_react2.default.createElement(_gridicon2.default,{icon:"chevron-down"})),this.state.open&&_react2.default.createElement(_siteSelector2.default,{sites:sites,autoFocus:true,onClose:this.props.onClose,onSiteSelect:this.selectSite,selected:this.state.selected,hideSelected:true,filter:this.props.filter})))}});module.exports=exports["default"]},1636:function(module,exports,__webpack_require__){var keys=__webpack_require__(94);function baseConforms(source){var props=keys(source),length=props.length;return function(object){if(object==null){return!length}var index=length;while(index--){var key=props[index],predicate=source[key],value=object[key];if(value===undefined&&!(key in Object(object))||!predicate(value)){return false}}return true}}module.exports=baseConforms},1637:function(module,exports,__webpack_require__){var baseClone=__webpack_require__(126),baseConforms=__webpack_require__(1636);function conforms(source){return baseConforms(baseClone(source,true))}module.exports=conforms},1639:function(module,exports,__webpack_require__){var isObject=__webpack_require__(1643);module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},1640:function(module,exports,__webpack_require__){var cof=__webpack_require__(1641),TAG=__webpack_require__(1469)("toStringTag"),ARG=cof(function(){return arguments}())=="Arguments";module.exports=function(it){var O,T,B;return it===undefined?"Undefined":it===null?"Null":typeof(T=(O=Object(it))[TAG])=="string"?T:ARG?cof(O):(B=cof(O))=="Object"&&typeof O.callee=="function"?"Arguments":B}},1641:function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},1642:function(module,exports,__webpack_require__){var ctx=__webpack_require__(1549),call=__webpack_require__(1768),isArrayIter=__webpack_require__(1767),anObject=__webpack_require__(1639),toLength=__webpack_require__(1776),getIterFn=__webpack_require__(1778);module.exports=function(iterable,entries,fn,that){var iterFn=getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0,length,step,iterator;if(typeof iterFn!="function")throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn))for(length=toLength(iterable.length);length>index;index++){entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index])}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;){call(iterator,f,step.value,entries)}}},1643:function(module,exports){module.exports=function(it){return typeof it==="object"?it!==null:typeof it==="function"}},1644:function(module,exports,__webpack_require__){"use strict";var LIBRARY=__webpack_require__(1771),$export=__webpack_require__(1485),redefine=__webpack_require__(1531),hide=__webpack_require__(1500),has=__webpack_require__(1581),Iterators=__webpack_require__(1550),$iterCreate=__webpack_require__(2043),setToStringTag=__webpack_require__(1582),getProto=__webpack_require__(1475).getProto,ITERATOR=__webpack_require__(1469)("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values";var returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function keys(){return new Constructor(this,kind)};case VALUES:return function values(){return new Constructor(this,kind)}}return function entries(){return new Constructor(this,kind)}};var TAG=NAME+" Iterator",DEF_VALUES=DEFAULT==VALUES,VALUES_BUG=false,proto=Base.prototype,$native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),methods,key;if($native){var IteratorPrototype=getProto($default.call(new Base));setToStringTag(IteratorPrototype,TAG,true);if(!LIBRARY&&has(proto,FF_ITERATOR))hide(IteratorPrototype,ITERATOR,returnThis);if(DEF_VALUES&&$native.name!==VALUES){VALUES_BUG=true;$default=function values(){return $native.call(this)}}}if((!LIBRARY||FORCED)&&(BUGGY||VALUES_BUG||!proto[ITERATOR])){hide(proto,ITERATOR,$default)}Iterators[NAME]=$default;Iterators[TAG]=returnThis;if(DEFAULT){methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:!DEF_VALUES?$default:getMethod("entries")};if(FORCED)for(key in methods){if(!(key in proto))redefine(proto,key,methods[key])}else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods)}return methods}},1645:function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value}}},1646:function(module,exports,__webpack_require__){"use strict";var $at=__webpack_require__(2048)(true);__webpack_require__(1644)(String,"String",function(iterated){this._t=String(iterated);this._i=0},function(){var O=this._t,index=this._i,point;if(index>=O.length)return{value:undefined,done:true};point=$at(O,index);this._i+=point.length;return{value:point,done:false}})},1650:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _noop=__webpack_require__(36);var _noop2=_interopRequireDefault(_noop);var _isEmpty=__webpack_require__(81);var _isEmpty2=_interopRequireDefault(_isEmpty);var _isEqual=__webpack_require__(92);var _isEqual2=_interopRequireDefault(_isEqual);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _moreButton=__webpack_require__(1707);var _moreButton2=_interopRequireDefault(_moreButton);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);var _trackInteractions=__webpack_require__(1711);var _trackInteractions2=_interopRequireDefault(_trackInteractions);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Theme=_react2.default.createClass({displayName:"Theme",propTypes:{theme:_react2.default.PropTypes.shape({id:_react2.default.PropTypes.string.isRequired,name:_react2.default.PropTypes.string.isRequired,screenshot:_react2.default.PropTypes.string,price:_react2.default.PropTypes.string,purchased:_react2.default.PropTypes.bool,active:_react2.default.PropTypes.bool,author:_react2.default.PropTypes.string,author_uri:_react2.default.PropTypes.string,demo_uri:_react2.default.PropTypes.string,stylesheet:_react2.default.PropTypes.string}),isPlaceholder:_react2.default.PropTypes.bool,screenshotClickUrl:_react2.default.PropTypes.string,onScreenshotClick:_react2.default.PropTypes.func,onMoreButtonClick:_react2.default.PropTypes.func,buttonContents:_react2.default.PropTypes.objectOf(_react2.default.PropTypes.shape({label:_react2.default.PropTypes.string,header:_react2.default.PropTypes.string,action:_react2.default.PropTypes.func,getUrl:_react2.default.PropTypes.func})),index:_react2.default.PropTypes.number,actionLabel:_react2.default.PropTypes.string},shouldComponentUpdate:function shouldComponentUpdate(nextProps){return!(0,_isEqual2.default)(nextProps.theme,this.props.theme)},getDefaultProps:function getDefaultProps(){return{isPlaceholder:false,buttonContents:{},onMoreButtonClick:_noop2.default,actionLabel:""}},onScreenshotClick:function onScreenshotClick(){this.props.onScreenshotClick(this.props.theme,this.props.index)},renderPlaceholder:function renderPlaceholder(){return _react2.default.createElement(_card2.default,{className:"theme is-placeholder"},_react2.default.createElement("div",{className:"theme__content"}))},renderHover:function renderHover(){if(this.props.screenshotClickUrl||this.props.onScreenshotClick){return _react2.default.createElement("a",{className:"theme__active-focus",href:this.props.screenshotClickUrl,onClick:this.onScreenshotClick},_react2.default.createElement("span",null,this.props.actionLabel))}},render:function render(){var _props$theme=this.props.theme;var name=_props$theme.name;var active=_props$theme.active;var price=_props$theme.price;var purchased=_props$theme.purchased;var screenshot=_props$theme.screenshot;var themeClass=(0,_classnames2.default)("theme",{"is-active":active,"is-actionable":!!(this.props.screenshotClickUrl||this.props.onScreenshotClick)});var screenshotID=this.props.index===0?"theme__firstscreenshot":null;if(this.props.isPlaceholder){return this.renderPlaceholder()}var screenshotWidth=window&&window.devicePixelRatio>1?680:340;return _react2.default.createElement(_card2.default,{className:themeClass},_react2.default.createElement("div",{className:"theme__content"},this.renderHover(),_react2.default.createElement("a",{href:this.props.screenshotClickUrl},screenshot?_react2.default.createElement("img",{className:"theme__img",src:screenshot+"?w="+screenshotWidth,onClick:this.onScreenshotClick,id:screenshotID}):_react2.default.createElement("div",{className:"theme__no-screenshot"},_react2.default.createElement(_gridicon2.default,{icon:"themes",size:48}))),_react2.default.createElement("div",{className:"theme__info"},_react2.default.createElement("h2",null,name),active&&_react2.default.createElement("span",{className:"theme__active-label"},this.translate("Active",{context:"singular noun, the currently active theme"})),price&&!purchased&&_react2.default.createElement("span",{className:"price"},price),!(0,_isEmpty2.default)(this.props.buttonContents)?_react2.default.createElement(_trackInteractions2.default,{fields:"theme.id"},_react2.default.createElement(_moreButton2.default,{index:this.props.index,theme:this.props.theme,onClick:this.props.onMoreButtonClick,options:this.props.buttonContents})):null)))}});exports.default=Theme;module.exports=exports["default"]},1666:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.help=exports.support=exports.info=exports.separator=exports.signup=exports.preview=exports.tryandcustomize=exports.customize=exports.activate=exports.purchase=undefined;var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);exports.bindOptionToDispatch=bindOptionToDispatch;exports.bindOptionsToDispatch=bindOptionsToDispatch;exports.bindOptionsToSite=bindOptionsToSite;var _redux=__webpack_require__(6);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _mapValues=__webpack_require__(84);var _mapValues2=_interopRequireDefault(_mapValues);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _actions=__webpack_require__(1508);var _helpers=__webpack_require__(348);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var purchase=exports.purchase=_config2.default.isEnabled("upgrades/checkout")?{label:_i18nCalypso2.default.translate("Purchase",{context:"verb"}),header:_i18nCalypso2.default.translate("Purchase on:",{context:"verb",comment:"label for selecting a site for which to purchase a theme"}),action:_actions.purchase,hideForTheme:function hideForTheme(theme){return!theme.price||theme.active||theme.purchased}}:{};var activate=exports.activate={label:_i18nCalypso2.default.translate("Activate"),header:_i18nCalypso2.default.translate("Activate on:",{comment:"label for selecting a site on which to activate a theme"}),action:_actions.activate,hideForTheme:function hideForTheme(theme){return theme.active||theme.price&&!theme.purchased}};var customize=exports.customize={label:_i18nCalypso2.default.translate("Customize"),header:_i18nCalypso2.default.translate("Customize on:",{comment:"label in the dialog for selecting a site for which to customize a theme"}),icon:"customize",getUrl:function getUrl(theme,site){return(0,_helpers.getCustomizeUrl)(theme,site)},hideForSite:function hideForSite(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref$isCustomizable=_ref.isCustomizable;var isCustomizable=_ref$isCustomizable===undefined?false:_ref$isCustomizable;return!isCustomizable},hideForTheme:function hideForTheme(theme){return!theme.active}};var tryandcustomize=exports.tryandcustomize={label:_i18nCalypso2.default.translate("Try & Customize"),header:_i18nCalypso2.default.translate("Try & Customize on:",{comment:"label in the dialog for opening the Customizer with the theme in preview"}),getUrl:function getUrl(theme,site){return(0,_helpers.getCustomizeUrl)(theme,site)},hideForSite:function hideForSite(){var _ref2=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref2$isCustomizable=_ref2.isCustomizable;var isCustomizable=_ref2$isCustomizable===undefined?false:_ref2$isCustomizable;return!isCustomizable},hideForTheme:function hideForTheme(theme){return theme.active}};var preview=exports.preview={label:_i18nCalypso2.default.translate("Live demo",{comment:"label for previewing the theme demo website"}),hideForSite:function hideForSite(){var _ref3=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref3$isJetpack=_ref3.isJetpack;var isJetpack=_ref3$isJetpack===undefined?false:_ref3$isJetpack;return isJetpack},hideForTheme:function hideForTheme(theme){return theme.active}};var signup=exports.signup={label:_i18nCalypso2.default.translate("Pick this design",{comment:"when signing up for a WordPress.com account with a selected theme"}),getUrl:function getUrl(theme){return(0,_helpers.getSignupUrl)(theme)}};var separator=exports.separator={separator:true};var info=exports.info={label:_i18nCalypso2.default.translate("Info",{comment:"label for displaying the theme info sheet"}),icon:"info",getUrl:function getUrl(theme,site){return(0,_helpers.getDetailsUrl)(theme,site)}};var support=exports.support={label:_i18nCalypso2.default.translate("Setup"),icon:"help",getUrl:function getUrl(theme,site){return(0,_helpers.getSupportUrl)(theme,site)},hideForSite:function hideForSite(){var _ref4=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref4$isJetpack=_ref4.isJetpack;var isJetpack=_ref4$isJetpack===undefined?false:_ref4$isJetpack;return isJetpack},hideForTheme:function hideForTheme(theme){return!(0,_helpers.isPremium)(theme)}};var help=exports.help={label:_i18nCalypso2.default.translate("Support"),getUrl:function getUrl(theme,site){return(0,_helpers.getHelpUrl)(theme,site)},hideForSite:function hideForSite(){var _ref5=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var _ref5$isJetpack=_ref5.isJetpack;var isJetpack=_ref5$isJetpack===undefined?false:_ref5$isJetpack;return isJetpack}};function bindOptionToDispatch(option,source){return function(dispatch){return(0,_assign2.default)({},option,option.action?{action:(0,_redux.bindActionCreators)(function(theme,site){return option.action(theme,site,source)},dispatch)}:{})}}function bindOptionsToDispatch(options,source){return function(dispatch){return(0,_mapValues2.default)(options,function(option){return bindOptionToDispatch(option,source)(dispatch)})}}function bindOptionToSite(option,site){return(0,_assign2.default)({},option,option.action?{action:function action(theme){return option.action(theme,site)}}:{},option.getUrl?{getUrl:function getUrl(theme){return option.getUrl(theme,site)}}:{})}function bindOptionsToSite(options,site){return(0,_mapValues2.default)(options,function(option){return bindOptionToSite(option,site)})}},1707:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _isFunction=__webpack_require__(85);var _isFunction2=_interopRequireDefault(_isFunction);var _map=__webpack_require__(50);var _map2=_interopRequireDefault(_map);var _menu=__webpack_require__(1481);var _menu2=_interopRequireDefault(_menu);var _menuItem=__webpack_require__(1462);var _menuItem2=_interopRequireDefault(_menuItem);var _url=__webpack_require__(109);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ThemeMoreButton=function(_React$Component){(0,_inherits3.default)(ThemeMoreButton,_React$Component);function ThemeMoreButton(props){(0,_classCallCheck3.default)(this,ThemeMoreButton);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(ThemeMoreButton).call(this,props));_this.state={showPopover:false};_this.togglePopover=_this.togglePopover.bind(_this);_this.closePopover=_this.closePopover.bind(_this);_this.onClick=_this.onClick.bind(_this);return _this}(0,_createClass3.default)(ThemeMoreButton,[{key:"togglePopover",value:function togglePopover(){this.setState({showPopover:!this.state.showPopover});!this.state.showPopover&&this.props.onClick(this.props.theme.id,this.props.index)}},{key:"closePopover",value:function closePopover(action){this.setState({showPopover:false});(0,_isFunction2.default)(action)&&action(this.props.theme)}},{key:"focus",value:function focus(event){event.target.focus()}},{key:"onClick",value:function onClick(action){return this.closePopover.bind(this,action)}},{key:"render",value:function render(){var classes=(0,_classnames2.default)("theme__more-button",{"is-active":this.props.theme.active},{"is-open":this.state.showPopover});return _react2.default.createElement("span",{className:classes},_react2.default.createElement("button",{ref:"more",onClick:this.togglePopover},_react2.default.createElement("span",{className:"noticon noticon-ellipsis"})),_react2.default.createElement(_menu2.default,{context:this.refs&&this.refs.more,isVisible:this.state.showPopover,onClose:this.closePopover,position:"top left"},(0,_map2.default)(this.props.options,function(option,key){if(option.separator){return _react2.default.createElement("hr",{key:key,className:"popover__hr"})}if(option.getUrl){var url=option.getUrl(this.props.theme);return _react2.default.createElement("a",{className:"theme__more-button-menu-item popover__menu-item",onMouseOver:this.focus,onClick:this.onClick(option.action),key:option.label,href:url,target:(0,_url.isOutsideCalypso)(url)?"_blank":null},option.label)}if(option.action){return _react2.default.createElement(_menuItem2.default,{key:option.label,action:option.action},option.label)}return null}.bind(this))))}}]);return ThemeMoreButton}(_react2.default.Component);ThemeMoreButton.propTypes={theme:_react2.default.PropTypes.object,index:_react2.default.PropTypes.number,options:_react2.default.PropTypes.objectOf(_react2.default.PropTypes.shape({label:_react2.default.PropTypes.string,header:_react2.default.PropTypes.string,action:_react2.default.PropTypes.func,getUrl:_react2.default.PropTypes.func})).isRequired,active:_react2.default.PropTypes.bool};exports.default=ThemeMoreButton;module.exports=exports["default"]},1711:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _noop2=__webpack_require__(36);var _noop3=_interopRequireDefault(_noop2);var _isFunction2=__webpack_require__(85);var _isFunction3=_interopRequireDefault(_isFunction2);var _constant2=__webpack_require__(680);var _constant3=_interopRequireDefault(_constant2);var _storeShape=__webpack_require__(378);var _storeShape2=_interopRequireDefault(_storeShape);var _react=__webpack_require__(1);var _deepPick=__webpack_require__(1713);var _deepPick2=_interopRequireDefault(_deepPick);var _actionTypes=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var stringShape=_react.PropTypes.oneOfType([_react.PropTypes.string,_react.PropTypes.arrayOf(_react.PropTypes.string)]);var TrackInteractions=function(_Component){(0,_inherits3.default)(TrackInteractions,_Component);function TrackInteractions(props,context){(0,_classCallCheck3.default)(this,TrackInteractions);var _this=(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(TrackInteractions).call(this,props,context));_this.track=function(child){var action=_this.mapPropsToAction(child.props);_this.dispatch((0,_extends3.default)({type:_actionTypes.COMPONENT_INTERACTION_TRACKED,eventType:"click",component:child.type.name},action))};var store=props.store||context.store;_this.dispatch=store?store.dispatch:_noop3.default;return _this}(0,_createClass3.default)(TrackInteractions,[{key:"mapPropsToAction",value:function mapPropsToAction(props){var _props=this.props;var fields=_props.fields;var mapPropsToAction=_props.mapPropsToAction;return fields?(0,_deepPick2.default)(props,fields):mapPropsToAction(props)}},{key:"render",value:function render(){var _this2=this;var child=_react.Children.only(this.props.children);var props=(0,_extends3.default)({},child.props,{onClick:function onClick(event){if((0,_isFunction3.default)(child.props.onClick)){child.props.onClick.call(child,event)}_this2.track(child)}});return(0,_react.cloneElement)(child,props)}}]);return TrackInteractions}(_react.Component);TrackInteractions.propTypes={children:_react.PropTypes.element.isRequired,mapPropsToAction:_react.PropTypes.func,fields:stringShape};TrackInteractions.defaultProps={mapPropsToAction:(0,_constant3.default)({})};TrackInteractions.contextTypes={store:_storeShape2.default};exports.default=TrackInteractions;module.exports=exports["default"]},1712:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactHelmet=__webpack_require__(2029);var _reactHelmet2=_interopRequireDefault(_reactHelmet);var _debug=__webpack_require__(4);var _debug2=_interopRequireDefault(_debug);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var debug=(0,_debug2.default)("calypso:layout:head");var Head=function Head(_ref){var title=_ref.title;var description=_ref.description;var canonicalUrl=_ref.canonicalUrl;var type=_ref.type;var siteName=_ref.siteName;var image=_ref.image;var children=_ref.children;return _react2.default.createElement("div",null,_react2.default.createElement(_reactHelmet2.default,{title:title,meta:[description?{name:"description",property:"og:description",content:description}:{},title?{property:"og:title",content:title}:{},canonicalUrl?{property:"og:url",content:canonicalUrl}:{},type?{property:"og:type",content:type}:{},siteName?{property:"og:site_name",content:siteName}:{},image?{property:"og:image",content:image}:{}],link:[canonicalUrl?{rel:"canonical",href:canonicalUrl}:{}],onChangeClientState:debug}),children)};Head.displayName="Head";Head.propTypes={title:_react2.default.PropTypes.string,description:_react2.default.PropTypes.string,canonicalUrl:_react2.default.PropTypes.string,type:_react2.default.PropTypes.string,siteName:_react2.default.PropTypes.string,image:_react2.default.PropTypes.string,children:_react2.default.PropTypes.node};Head.defaultProps={site_name:"WordPress.com"};exports.default=Head;module.exports=exports["default"]},1713:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _transform2=__webpack_require__(682);var _transform3=_interopRequireDefault(_transform2);var _get2=__webpack_require__(30);var _get3=_interopRequireDefault(_get2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var arrayOf=function arrayOf(x){return Array.isArray(x)?x:[x]};exports.default=function(obj,keys){return(0,_transform3.default)(arrayOf(keys),function(acc,key){acc[key]=(0,_get3.default)(obj,key)},{})};module.exports=exports["default"]},1730:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _noop=__webpack_require__(36);var _noop2=_interopRequireDefault(_noop);var _webPreview=__webpack_require__(694);var _webPreview2=_interopRequireDefault(_webPreview);var _button=__webpack_require__(68);var _button2=_interopRequireDefault(_button);var _helpers=__webpack_require__(348);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"ThemePreview",propTypes:{theme:_react2.default.PropTypes.object,showPreview:_react2.default.PropTypes.bool,showExternal:_react2.default.PropTypes.bool,onClose:_react2.default.PropTypes.func,primaryButtonLabel:_react2.default.PropTypes.string.isRequired,onPrimaryButtonClick:_react2.default.PropTypes.func,getPrimaryButtonHref:_react2.default.PropTypes.func,secondaryButtonLabel:_react2.default.PropTypes.string,onSecondaryButtonClick:_react2.default.PropTypes.func,getSecondaryButtonHref:_react2.default.PropTypes.func},getDefaultProps:function getDefaultProps(){return{onPrimaryButtonClick:_noop2.default,getPrimaryButtonHref:function getPrimaryButtonHref(){return null},onSecondaryButtonClick:_noop2.default,getSecondaryButtonHref:function getSecondaryButtonHref(){return null}}},onPrimaryButtonClick:function onPrimaryButtonClick(){this.props.onPrimaryButtonClick(this.props.theme);this.props.onClose()},onSecondaryButtonClick:function onSecondaryButtonClick(){this.props.onSecondaryButtonClick(this.props.theme);this.props.onClose()},renderSecondaryButton:function renderSecondaryButton(){if(!this.props.secondaryButtonLabel){return}var buttonHref=this.props.getSecondaryButtonHref?this.props.getSecondaryButtonHref(this.props.theme):null;return _react2.default.createElement(_button2.default,{onClick:this.onSecondaryButtonClick,href:buttonHref},this.props.secondaryButtonLabel)},render:function render(){var previewUrl=(0,_helpers.getPreviewUrl)(this.props.theme);var buttonHref=this.props.getPrimaryButtonHref?this.props.getPrimaryButtonHref(this.props.theme):null;return _react2.default.createElement(_webPreview2.default,{showPreview:this.props.showPreview,showExternal:this.props.showExternal,onClose:this.props.onClose,previewUrl:previewUrl,externalUrl:this.props.theme.demo_uri},this.renderSecondaryButton(),_react2.default.createElement(_button2.default,{primary:true,onClick:this.onPrimaryButtonClick,href:buttonHref},this.props.primaryButtonLabel))}});module.exports=exports["default"]},1764:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(1475),hide=__webpack_require__(1500),redefineAll=__webpack_require__(1772),ctx=__webpack_require__(1549),strictNew=__webpack_require__(1774),defined=__webpack_require__(1578),forOf=__webpack_require__(1642),$iterDefine=__webpack_require__(1644),step=__webpack_require__(1770),ID=__webpack_require__(1584)("id"),$has=__webpack_require__(1581),isObject=__webpack_require__(1643),setSpecies=__webpack_require__(2047),DESCRIPTORS=__webpack_require__(1579),isExtensible=Object.isExtensible||isObject,SIZE=DESCRIPTORS?"_s":"size",id=0;var fastKey=function(it,create){if(!isObject(it))return typeof it=="symbol"?it:(typeof it=="string"?"S":"P")+it;if(!$has(it,ID)){if(!isExtensible(it))return"F";if(!create)return"E";hide(it,ID,++id)}return"O"+it[ID]};var getEntry=function(that,key){var index=fastKey(key),entry;if(index!=="F")return that._i[index];for(entry=that._f;entry;entry=entry.n){if(entry.k==key)return entry}};module.exports={getConstructor:function(wrapper,NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){strictNew(that,C,NAME);that._i=$.create(null);that._f=undefined;that._l=undefined;that[SIZE]=0;if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that)});redefineAll(C.prototype,{clear:function clear(){for(var that=this,data=that._i,entry=that._f;entry;entry=entry.n){entry.r=true;if(entry.p)entry.p=entry.p.n=undefined;delete data[entry.i]}that._f=that._l=undefined;that[SIZE]=0},delete:function(key){var that=this,entry=getEntry(that,key);if(entry){var next=entry.n,prev=entry.p;delete that._i[entry.i];entry.r=true;if(prev)prev.n=next;if(next)next.p=prev;if(that._f==entry)that._f=next;if(that._l==entry)that._l=prev;that[SIZE]--}return!!entry},forEach:function forEach(callbackfn){var f=ctx(callbackfn,arguments.length>1?arguments[1]:undefined,3),entry;while(entry=entry?entry.n:this._f){f(entry.v,entry.k,this);while(entry&&entry.r)entry=entry.p}},has:function has(key){return!!getEntry(this,key)}});if(DESCRIPTORS)$.setDesc(C.prototype,"size",{get:function(){return defined(this[SIZE])}});return C},def:function(that,key,value){var entry=getEntry(that,key),prev,index;if(entry){entry.v=value}else{that._l=entry={i:index=fastKey(key,true),k:key,v:value,p:prev=that._l,n:undefined,r:false};if(!that._f)that._f=entry;if(prev)prev.n=entry;that[SIZE]++;if(index!=="F")that._i[index]=entry}return that},getEntry:getEntry,setStrong:function(C,NAME,IS_MAP){$iterDefine(C,NAME,function(iterated,kind){this._t=iterated;this._k=kind;this._l=undefined},function(){var that=this,kind=that._k,entry=that._l;while(entry&&entry.r)entry=entry.p;if(!that._t||!(that._l=entry=entry?entry.n:that._t._f)){that._t=undefined;return step(1)}if(kind=="keys")return step(0,entry.k);if(kind=="values")return step(0,entry.v);return step(0,[entry.k,entry.v])},IS_MAP?"entries":"values",!IS_MAP,true);setSpecies(NAME)}}},1765:function(module,exports,__webpack_require__){var forOf=__webpack_require__(1642),classof=__webpack_require__(1640);module.exports=function(NAME){return function toJSON(){if(classof(this)!=NAME)throw TypeError(NAME+"#toJSON isn't generic");var arr=[];forOf(this,false,arr.push,arr);return arr}}},1766:function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(1489),$export=__webpack_require__(1485),redefine=__webpack_require__(1531),redefineAll=__webpack_require__(1772),forOf=__webpack_require__(1642),strictNew=__webpack_require__(1774),isObject=__webpack_require__(1643),fails=__webpack_require__(1580),$iterDetect=__webpack_require__(1769),setToStringTag=__webpack_require__(1582);
module.exports=function(NAME,wrapper,methods,common,IS_MAP,IS_WEAK){var Base=global[NAME],C=Base,ADDER=IS_MAP?"set":"add",proto=C&&C.prototype,O={};var fixMethod=function(KEY){var fn=proto[KEY];redefine(proto,KEY,KEY=="delete"?function(a){return IS_WEAK&&!isObject(a)?false:fn.call(this,a===0?0:a)}:KEY=="has"?function has(a){return IS_WEAK&&!isObject(a)?false:fn.call(this,a===0?0:a)}:KEY=="get"?function get(a){return IS_WEAK&&!isObject(a)?undefined:fn.call(this,a===0?0:a)}:KEY=="add"?function add(a){fn.call(this,a===0?0:a);return this}:function set(a,b){fn.call(this,a===0?0:a,b);return this})};if(typeof C!="function"||!(IS_WEAK||proto.forEach&&!fails(function(){(new C).entries().next()}))){C=common.getConstructor(wrapper,NAME,IS_MAP,ADDER);redefineAll(C.prototype,methods)}else{var instance=new C,HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance,THROWS_ON_PRIMITIVES=fails(function(){instance.has(1)}),ACCEPT_ITERABLES=$iterDetect(function(iter){new C(iter)}),BUGGY_ZERO;if(!ACCEPT_ITERABLES){C=wrapper(function(target,iterable){strictNew(target,C,NAME);var that=new Base;if(iterable!=undefined)forOf(iterable,IS_MAP,that[ADDER],that);return that});C.prototype=proto;proto.constructor=C}IS_WEAK||instance.forEach(function(val,key){BUGGY_ZERO=1/key===-Infinity});if(THROWS_ON_PRIMITIVES||BUGGY_ZERO){fixMethod("delete");fixMethod("has");IS_MAP&&fixMethod("get")}if(BUGGY_ZERO||HASNT_CHAINING)fixMethod(ADDER);if(IS_WEAK&&proto.clear)delete proto.clear}setToStringTag(C,NAME);O[NAME]=C;$export($export.G+$export.W+$export.F*(C!=Base),O);if(!IS_WEAK)common.setStrong(C,NAME,IS_MAP);return C}},1767:function(module,exports,__webpack_require__){var Iterators=__webpack_require__(1550),ITERATOR=__webpack_require__(1469)("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return it!==undefined&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},1768:function(module,exports,__webpack_require__){var anObject=__webpack_require__(1639);module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];if(ret!==undefined)anObject(ret.call(iterator));throw e}}},1769:function(module,exports,__webpack_require__){var ITERATOR=__webpack_require__(1469)("iterator"),SAFE_CLOSING=false;try{var riter=[7][ITERATOR]();riter["return"]=function(){SAFE_CLOSING=true};Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return false;var safe=false;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){safe=true};arr[ITERATOR]=function(){return iter};exec(arr)}catch(e){}return safe}},1770:function(module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},1771:function(module,exports){module.exports=false},1772:function(module,exports,__webpack_require__){var redefine=__webpack_require__(1531);module.exports=function(target,src){for(var key in src)redefine(target,key,src[key]);return target}},1773:function(module,exports,__webpack_require__){var global=__webpack_require__(1489),SHARED="__core-js_shared__",store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},1774:function(module,exports){module.exports=function(it,Constructor,name){if(!(it instanceof Constructor))throw TypeError(name+": use the 'new' operator!");return it}},1775:function(module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},1776:function(module,exports,__webpack_require__){var toInteger=__webpack_require__(1775),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},1777:function(module,exports,__webpack_require__){var defined=__webpack_require__(1578);module.exports=function(it){return Object(defined(it))}},1778:function(module,exports,__webpack_require__){var classof=__webpack_require__(1640),ITERATOR=__webpack_require__(1469)("iterator"),Iterators=__webpack_require__(1550);module.exports=__webpack_require__(1468).getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},1779:function(module,exports,__webpack_require__){"use strict";var classof=__webpack_require__(1640),test={};test[__webpack_require__(1469)("toStringTag")]="z";if(test+""!="[object z]"){__webpack_require__(1531)(Object.prototype,"toString",function toString(){return"[object "+classof(this)+"]"},true)}},1780:function(module,exports,__webpack_require__){__webpack_require__(2050);var global=__webpack_require__(1489),hide=__webpack_require__(1500),Iterators=__webpack_require__(1550),ITERATOR=__webpack_require__(1469)("iterator"),NL=global.NodeList,HTC=global.HTMLCollection,NLProto=NL&&NL.prototype,HTCProto=HTC&&HTC.prototype,ArrayValues=Iterators.NodeList=Iterators.HTMLCollection=Iterators.Array;if(NLProto&&!NLProto[ITERATOR])hide(NLProto,ITERATOR,ArrayValues);if(HTCProto&&!HTCProto[ITERATOR])hide(HTCProto,ITERATOR,ArrayValues)},1800:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ThemesList=undefined;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _times=__webpack_require__(653);var _times2=_interopRequireDefault(_times);var _isEqual=__webpack_require__(92);var _isEqual2=_interopRequireDefault(_isEqual);var _i18nCalypso=__webpack_require__(13);var _theme=__webpack_require__(1650);var _theme2=_interopRequireDefault(_theme);var _emptyContent=__webpack_require__(185);var _emptyContent2=_interopRequireDefault(_emptyContent);var _infiniteScroll=__webpack_require__(1569);var _infiniteScroll2=_interopRequireDefault(_infiniteScroll);var _constants=__webpack_require__(714);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ThemesList=exports.ThemesList=_react2.default.createClass({displayName:"ThemesList",mixins:[(0,_infiniteScroll2.default)("fetchNextPage")],propTypes:{themes:_react2.default.PropTypes.array.isRequired,emptyContent:_react2.default.PropTypes.element,loading:_react2.default.PropTypes.bool.isRequired,fetchNextPage:_react2.default.PropTypes.func.isRequired,getButtonOptions:_react2.default.PropTypes.func,onScreenshotClick:_react2.default.PropTypes.func.isRequired,onMoreButtonClick:_react2.default.PropTypes.func,getActionLabel:_react2.default.PropTypes.func,translate:_react2.default.PropTypes.func},fetchNextPage:function fetchNextPage(options){this.props.fetchNextPage(options)},getDefaultProps:function getDefaultProps(){return{loading:false,themes:[],fetchNextPage:function fetchNextPage(){},optionsGenerator:function optionsGenerator(){return[]},getActionLabel:function getActionLabel(){return""}}},shouldComponentUpdate:function shouldComponentUpdate(nextProps){return this.props.loading!==nextProps.loading||!(0,_isEqual2.default)(this.props.themes,nextProps.themes)},renderTheme:function renderTheme(theme,index){return _react2.default.createElement(_theme2.default,{key:"theme-"+theme.id,buttonContents:this.props.getButtonOptions(theme),screenshotClickUrl:this.props.getScreenshotUrl&&this.props.getScreenshotUrl(theme),onScreenshotClick:this.props.onScreenshotClick,onMoreButtonClick:this.props.onMoreButtonClick,actionLabel:this.props.getActionLabel(theme),index:index,theme:theme})},renderLoadingPlaceholders:function renderLoadingPlaceholders(){return(0,_times2.default)(_constants.PER_PAGE,function(i){return _react2.default.createElement(_theme2.default,{key:"placeholder-"+i,theme:{id:"placeholder-"+i,name:"Loading"},isPlaceholder:true})})},renderTrailingItems:function renderTrailingItems(){var NUM_SPACERS=8;return(0,_times2.default)(NUM_SPACERS,function(i){return _react2.default.createElement("div",{className:"themes-list--spacer",key:"themes-list--spacer-"+i})})},renderEmpty:function renderEmpty(){return this.props.emptyContent||_react2.default.createElement(_emptyContent2.default,{title:this.props.translate("Sorry, no themes found."),line:this.props.translate("Try a different search or more filters?")})},render:function render(){if(!this.props.loading&&this.props.themes.length===0){return this.renderEmpty()}return _react2.default.createElement("div",{className:"themes-list"},this.props.themes.map(this.renderTheme),this.props.loading&&this.renderLoadingPlaceholders(),this.renderTrailingItems())}});exports.default=(0,_i18nCalypso.localize)(ThemesList)},1853:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _getPrototypeOf=__webpack_require__(23);var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=__webpack_require__(8);var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=__webpack_require__(9);var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=__webpack_require__(26);var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=__webpack_require__(25);var _inherits3=_interopRequireDefault(_inherits2);var _react=__webpack_require__(1);var _reactRedux=__webpack_require__(21);var _actions=__webpack_require__(1508);var _selectors=__webpack_require__(1539);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var QueryCurrentTheme=function(_Component){(0,_inherits3.default)(QueryCurrentTheme,_Component);function QueryCurrentTheme(){(0,_classCallCheck3.default)(this,QueryCurrentTheme);return(0,_possibleConstructorReturn3.default)(this,(0,_getPrototypeOf2.default)(QueryCurrentTheme).apply(this,arguments))}(0,_createClass3.default)(QueryCurrentTheme,[{key:"componentDidMount",value:function componentDidMount(){var _props=this.props;var requestingCurrentTheme=_props.requestingCurrentTheme;var siteId=_props.siteId;this.refresh(requestingCurrentTheme,siteId)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(nextProps.siteId===this.props.siteId){return}var requestingCurrentTheme=nextProps.requestingCurrentTheme;var siteId=nextProps.siteId;this.refresh(requestingCurrentTheme,siteId)}},{key:"refresh",value:function refresh(requestingCurrentTheme,siteId){if(!requestingCurrentTheme){this.props.fetchCurrentTheme(siteId)}}},{key:"render",value:function render(){return null}}]);return QueryCurrentTheme}(_react.Component);QueryCurrentTheme.propTypes={siteId:_react.PropTypes.number.isRequired,requestingCurrentTheme:_react.PropTypes.bool,fetchCurrentTheme:_react.PropTypes.func};exports.default=(0,_reactRedux.connect)(function(state,props){return{requestingCurrentTheme:(0,_selectors.isRequestingCurrentTheme)(state,props.site&&props.site.ID)}},{fetchCurrentTheme:_actions.fetchCurrentTheme})(QueryCurrentTheme);module.exports=exports["default"]},1875:function(module,exports,__webpack_require__){"use strict";var React=__webpack_require__(1),classnames=__webpack_require__(11),includes=__webpack_require__(34);var Dialog=__webpack_require__(148),Button=__webpack_require__(68),SitesDropdown=__webpack_require__(1613),sitesList=__webpack_require__(55)();var SiteSelectorModal=React.createClass({displayName:"SiteSelectorModal",propTypes:{children:React.PropTypes.node,filter:React.PropTypes.func,hide:React.PropTypes.func.isRequired,isVisible:React.PropTypes.bool.isRequired,mainAction:React.PropTypes.func.isRequired,getMainUrl:React.PropTypes.func,mainActionLabel:React.PropTypes.string.isRequired,className:React.PropTypes.string},getInitialState:function getInitialState(){var primarySite=sitesList.getPrimary();var filteredSites=sitesList.getVisible();if(this.props.filter){filteredSites=filteredSites.filter(this.props.filter)}return{site:includes(filteredSites,primarySite)?primarySite:filteredSites[0]}},setSite:function setSite(slug){var site=sitesList.getSite(slug);this.setState({site:site})},onClose:function onClose(action){if("mainAction"===action){this.props.mainAction(this.state.site)}this.props.hide()},onButtonClick:function onButtonClick(){this.props.mainAction(this.state.site)},getMainLink:function getMainLink(){var url=this.props.getMainUrl&&this.props.getMainUrl(this.state.site);return url?React.createElement(Button,{primary:true,href:url,onClick:this.onButtonClick},this.props.mainActionLabel):{action:"mainAction",label:this.props.mainActionLabel,isPrimary:true}},render:function render(){var mainLink=this.getMainLink(),buttons=[{action:"back",label:this.translate("Back")},mainLink],classNames=classnames("site-selector-modal",this.props.className);return React.createElement(Dialog,{className:classNames,isVisible:this.props.isVisible,buttons:buttons,onClose:this.onClose},React.createElement("div",{className:"site-selector-modal__content"},this.props.children),React.createElement(SitesDropdown,{onSiteSelect:this.setSite,selected:this.state.site.slug,filter:this.props.filter}))}});module.exports=SiteSelectorModal},1954:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _dialog=__webpack_require__(148);var _dialog2=_interopRequireDefault(_dialog);var _pulsingDot=__webpack_require__(380);var _pulsingDot2=_interopRequireDefault(_pulsingDot);var _helpers=__webpack_require__(348);var _selectors=__webpack_require__(1539);var _actions=__webpack_require__(1508);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ThanksModal=_react2.default.createClass({displayName:"ThanksModal",trackClick:_helpers.trackClick.bind(null,"current theme"),propTypes:{source:_react2.default.PropTypes.oneOf(["details","list"]).isRequired,isActivating:_react2.default.PropTypes.bool.isRequired,hasActivated:_react2.default.PropTypes.bool.isRequired,currentTheme:_react2.default.PropTypes.shape({name:_react2.default.PropTypes.string,id:_react2.default.PropTypes.string}),clearActivated:_react2.default.PropTypes.func.isRequired},onCloseModal:function onCloseModal(){this.props.clearActivated();this.setState({show:false})},visitSite:function visitSite(){this.trackClick("visit site");(0,_page2.default)(this.props.site.URL)},goBack:function goBack(){this.trackClick("go back");this.onCloseModal()},onLinkClick:function onLinkClick(link){var _this=this;return function(){_this.onCloseModal();_this.trackClick(link,"click")}},renderWpcomInfo:function renderWpcomInfo(){var features=this.translate("Discover this theme's {{a}}awesome features.{{/a}}",{components:{a:_react2.default.createElement("a",{href:(0,_helpers.getDetailsUrl)(this.props.currentTheme,this.props.site),onClick:this.onLinkClick("features")})}});var customize=this.translate("{{a}}Customize{{/a}} this design.",{components:{a:_react2.default.createElement("a",{href:(0,_helpers.getCustomizeUrl)(this.props.currentTheme,this.props.site),onClick:this.onLinkClick("customize")})}});return _react2.default.createElement("ul",null,_react2.default.createElement("li",null,this.props.source==="list"?features:customize),_react2.default.createElement("li",null,this.translate("Have questions? Stop by our {{a}}support forums.{{/a}}",{components:{a:_react2.default.createElement("a",{href:(0,_helpers.getForumUrl)(this.props.currentTheme),onClick:this.onLinkClick("support")})}})))},renderWporgThemeInfo:function renderWporgThemeInfo(themeUri){if(themeUri){return _react2.default.createElement("li",null,this.translate("Learn more about this {{a}}awesome theme{{/a}}.",{components:{a:_react2.default.createElement("a",{href:themeUri,onClick:this.onLinkClick("org theme")})}}))}},renderWporgAuthorInfo:function renderWporgAuthorInfo(authorUri){if(authorUri){return _react2.default.createElement("li",null,this.translate("Have questions? {{a}}Contact the theme author.{{/a}}",{components:{a:_react2.default.createElement("a",{href:authorUri,onClick:this.onLinkClick("org author")})}}))}},renderWporgForumInfo:function renderWporgForumInfo(){return _react2.default.createElement("li",null,this.translate("If you need support, visit the WordPress.org {{a}}Themes forum{{/a}}.",{components:{a:_react2.default.createElement("a",{href:"https://wordpress.org/support/forum/themes-and-templates",onClick:this.onLinkClick("org forum")})}}))},renderJetpackInfo:function renderJetpackInfo(){var _props$currentTheme=this.props.currentTheme;var themeUri=_props$currentTheme.theme_uri;var authorUri=_props$currentTheme.author_uri;return _react2.default.createElement("ul",null,themeUri?this.renderWporgThemeInfo(themeUri):null,authorUri?this.renderWporgAuthorInfo(authorUri):null,!themeUri||!authorUri?this.renderWporgForumInfo():null)},renderContent:function renderContent(){var _props$currentTheme2=this.props.currentTheme;var themeName=_props$currentTheme2.name;var themeAuthor=_props$currentTheme2.author;return _react2.default.createElement("div",null,_react2.default.createElement("h1",null,this.translate("Thanks for choosing {{br/}} %(themeName)s {{br/}} by %(themeAuthor)s",{args:{themeName:themeName,themeAuthor:themeAuthor},components:{br:_react2.default.createElement("br",null)}})),_react2.default.createElement("ul",null,this.props.site.jetpack?this.renderJetpackInfo():this.renderWpcomInfo()))},renderLoading:function renderLoading(){return _react2.default.createElement("div",null,_react2.default.createElement(_pulsingDot2.default,{active:true}))},render:function render(){var buttons=[{action:"back",label:this.translate("Back to themes"),onClick:this.goBack},{action:"visitSite",label:this.translate("Visit site"),isPrimary:true,onClick:this.visitSite}];return _react2.default.createElement(_dialog2.default,{className:"themes-thanks-modal",isVisible:this.props.isActivating||this.props.hasActivated,buttons:buttons,onClose:this.onCloseModal},this.props.hasActivated?this.renderContent():this.renderLoading())}});exports.default=(0,_reactRedux.connect)(function(state,props){return{isActivating:(0,_selectors.isActivating)(state),hasActivated:(0,_selectors.hasActivated)(state),currentTheme:(0,_selectors.getCurrentTheme)(state,props.site?props.site.ID:null)}},{clearActivated:_actions.clearActivated})(ThanksModal);module.exports=exports["default"]},1955:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _i18nCalypso=__webpack_require__(13);var _pickBy=__webpack_require__(347);var _pickBy2=_interopRequireDefault(_pickBy);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _themePreview=__webpack_require__(1730);var _themePreview2=_interopRequireDefault(_themePreview);var _themesSelection=__webpack_require__(2760);var _themesSelection2=_interopRequireDefault(_themesSelection);var _pageViewTracker=__webpack_require__(1540);var _pageViewTracker2=_interopRequireDefault(_pageViewTracker);var _selectors=__webpack_require__(1577);var _helpers=__webpack_require__(348);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var optionShape=_react.PropTypes.shape({label:_react.PropTypes.string,header:_react.PropTypes.string,getUrl:_react.PropTypes.func,action:_react.PropTypes.func});var ThemeShowcase=_react2.default.createClass({displayName:"ThemeShowcase",propTypes:{options:_react.PropTypes.objectOf(optionShape),defaultOption:optionShape,secondaryOption:optionShape,getScreenshotOption:_react.PropTypes.func},getDefaultProps:function getDefaultProps(){return{selectedSite:false}},getInitialState:function getInitialState(){return{showPreview:false,previewingTheme:null}},togglePreview:function togglePreview(theme){this.setState({showPreview:!this.state.showPreview,previewingTheme:theme})},onPrimaryPreviewButtonClick:function onPrimaryPreviewButtonClick(theme){var option=this.getPrimaryOption();this.setState({showPreview:false},function(){option.action&&option.action(theme)})},onSecondaryPreviewButtonClick:function onSecondaryPreviewButtonClick(theme){var secondaryOption=this.props.secondaryOption;this.setState({showPreview:false},function(){secondaryOption&&secondaryOption.action?secondaryOption.action(theme):null})},getPrimaryOption:function getPrimaryOption(){if(!this.state.showPreview){return this.props.defaultOption}var translate=this.props.translate;var _props$options=this.props.options;var purchase=_props$options.purchase;var activate=_props$options.activate;var price=this.state.previewingTheme.price;var primaryOption=this.props.defaultOption;if(price&&purchase){primaryOption=purchase;primaryOption.label=translate("Pick this design")}else if(activate){primaryOption=activate;primaryOption.label=translate("Activate this design")}return primaryOption},render:function render(){var _this=this;var _props=this.props;var options=_props.options;var getScreenshotOption=_props.getScreenshotOption;var secondaryOption=_props.secondaryOption;var primaryOption=this.getPrimaryOption();if(options.preview&&!options.preview.action){options.preview.action=function(theme){return _this.togglePreview(theme)}}return _react2.default.createElement(_main2.default,{className:"themes"},_react2.default.createElement(_pageViewTracker2.default,{path:this.props.analyticsPath,title:this.props.analyticsPageTitle}),this.props.children,this.state.showPreview&&_react2.default.createElement(_themePreview2.default,{showPreview:this.state.showPreview,theme:this.state.previewingTheme,onClose:this.togglePreview,primaryButtonLabel:primaryOption.label,getPrimaryButtonHref:primaryOption.getUrl,onPrimaryButtonClick:this.onPrimaryPreviewButtonClick,secondaryButtonLabel:secondaryOption?secondaryOption.label:null,getSecondaryButtonHref:secondaryOption?secondaryOption.getUrl:null,onSecondaryButtonClick:this.onSecondaryPreviewButtonClick}),_react2.default.createElement(_themesSelection2.default,{search:this.props.search,siteId:this.props.siteId,selectedSite:this.props.selectedSite,getScreenshotUrl:function getScreenshotUrl(theme){if(!getScreenshotOption(theme).getUrl){return null}return getScreenshotOption(theme).getUrl(theme)},onScreenshotClick:function onScreenshotClick(theme){if(!getScreenshotOption(theme).action){return}getScreenshotOption(theme).action(theme)},getActionLabel:function getActionLabel(theme){return getScreenshotOption(theme).label},getOptions:function getOptions(theme){return(0,_pickBy2.default)((0,_helpers.addTracking)(options),function(option){return!(option.hideForTheme&&option.hideForTheme(theme))})},trackScrollPage:this.props.trackScrollPage,tier:this.props.tier,filter:this.props.filter,queryParams:this.props.queryParams,themesList:this.props.themesList}))}});exports.default=(0,_reactRedux.connect)(function(state){return{queryParams:(0,_selectors.getQueryParams)(state),themesList:(0,_selectors.getThemesList)(state)}})((0,_i18nCalypso.localize)(ThemeShowcase));module.exports=exports["default"]},1956:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _defer=__webpack_require__(341);var _defer2=_interopRequireDefault(_defer);var _omit=__webpack_require__(18);var _omit2=_interopRequireDefault(_omit);var _mapValues=__webpack_require__(84);var _mapValues2=_interopRequireDefault(_mapValues);var _theme=__webpack_require__(1650);var _theme2=_interopRequireDefault(_theme);var _siteSelectorModal=__webpack_require__(1875);var _siteSelectorModal2=_interopRequireDefault(_siteSelectorModal);var _helpers=__webpack_require__(348);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ThemesSiteSelectorModal=_react2.default.createClass({displayName:"ThemesSiteSelectorModal",propTypes:{options:_react2.default.PropTypes.objectOf(_react2.default.PropTypes.shape({label:_react2.default.PropTypes.string,header:_react2.default.PropTypes.string,action:_react2.default.PropTypes.func})),selectedSite:_react2.default.PropTypes.object,sourcePath:_react.PropTypes.string.isRequired},getInitialState:function getInitialState(){return{selectedTheme:null,selectedOption:null}},trackAndCallAction:function trackAndCallAction(site){var action=this.state.selectedOption.action;var theme=this.state.selectedTheme;(0,_helpers.trackClick)("site selector",this.props.name);(0,_page2.default)(this.props.sourcePath+"/"+site.slug);if(action){(0,_defer2.default)(function(){action(theme,site)})}},showSiteSelectorModal:function showSiteSelectorModal(option,theme){this.setState({selectedTheme:theme,selectedOption:option})},hideSiteSelectorModal:function hideSiteSelectorModal(){this.showSiteSelectorModal(null,null)},wrapOption:function wrapOption(option){var _this=this;return(0,_assign2.default)({},option,option.action||option.getUrl&&option.header?{action:function action(theme){return _this.showSiteSelectorModal(option,theme)}}:{},option.getUrl&&option.header?{getUrl:null}:{})},render:function render(){var children=_react2.default.cloneElement(this.props.children,(0,_assign2.default)({},(0,_omit2.default)(this.props,["children","options","defaultOption"]),{options:(0,_mapValues2.default)(this.props.options,this.wrapOption),defaultOption:this.wrapOption(this.props.defaultOption),secondaryOption:this.props.secondaryOption?this.wrapOption(this.props.secondaryOption):null}));var _state=this.state;var selectedOption=_state.selectedOption;var selectedTheme=_state.selectedTheme;return _react2.default.createElement("div",null,children,selectedOption&&_react2.default.createElement(_siteSelectorModal2.default,{className:"themes__site-selector-modal",isVisible:true,filter:function filter(site){return!site.jetpack},hide:this.hideSiteSelectorModal,mainAction:this.trackAndCallAction,mainActionLabel:selectedOption.label,getMainUrl:selectedOption.getUrl?function(site){return selectedOption.getUrl(selectedTheme,site)}:null},_react2.default.createElement(_theme2.default,{isActionable:false,theme:selectedTheme}),_react2.default.createElement("h1",null,selectedOption.header)))}});exports.default=ThemesSiteSelectorModal;module.exports=exports["default"]},2011:function(module,exports,__webpack_require__){var pSlice=Array.prototype.slice;var objectKeys=__webpack_require__(2013);var isArguments=__webpack_require__(2012);var deepEqual=module.exports=function(actual,expected,opts){if(!opts)opts={};if(actual===expected){return true}else if(actual instanceof Date&&expected instanceof Date){return actual.getTime()===expected.getTime()}else if(!actual||!expected||typeof actual!="object"&&typeof expected!="object"){return opts.strict?actual===expected:actual==expected}else{return objEquiv(actual,expected,opts)}};function isUndefinedOrNull(value){return value===null||value===undefined}function isBuffer(x){if(!x||typeof x!=="object"||typeof x.length!=="number")return false;if(typeof x.copy!=="function"||typeof x.slice!=="function"){return false}if(x.length>0&&typeof x[0]!=="number")return false;return true}function objEquiv(a,b,opts){var i,key;if(isUndefinedOrNull(a)||isUndefinedOrNull(b))return false;if(a.prototype!==b.prototype)return false;if(isArguments(a)){if(!isArguments(b)){return false}a=pSlice.call(a);b=pSlice.call(b);return deepEqual(a,b,opts)}if(isBuffer(a)){if(!isBuffer(b)){return false}if(a.length!==b.length)return false;for(i=0;i<a.length;i++){if(a[i]!==b[i])return false}return true}try{var ka=objectKeys(a),kb=objectKeys(b)}catch(e){return false}if(ka.length!=kb.length)return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!=kb[i])return false}for(i=ka.length-1;i>=0;i--){key=ka[i];if(!deepEqual(a[key],b[key],opts))return false}return typeof a===typeof b}},2012:function(module,exports){var supportsArgumentsClass=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";exports=module.exports=supportsArgumentsClass?supported:unsupported;exports.supported=supported;function supported(object){return Object.prototype.toString.call(object)=="[object Arguments]"}exports.unsupported=unsupported;function unsupported(object){return object&&typeof object=="object"&&typeof object.length=="number"&&Object.prototype.hasOwnProperty.call(object,"callee")&&!Object.prototype.propertyIsEnumerable.call(object,"callee")||false}},2013:function(module,exports){exports=module.exports=typeof Object.keys==="function"?Object.keys:shim;exports.shim=shim;function shim(obj){var keys=[];for(var key in obj)keys.push(key);return keys}},2019:function(module,exports,__webpack_require__){var baseCastFunction=__webpack_require__(264),baseFor=__webpack_require__(385),keysIn=__webpack_require__(158);function forIn(object,iteratee){return object==null?object:baseFor(object,baseCastFunction(iteratee),keysIn)}module.exports=forIn},2026:function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}else{return Array.from(arr)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactSideEffect=__webpack_require__(2059);var _reactSideEffect2=_interopRequireDefault(_reactSideEffect);var _deepEqual=__webpack_require__(2011);var _deepEqual2=_interopRequireDefault(_deepEqual);var _HelmetConstantsJs=__webpack_require__(2027);var _PlainComponent=__webpack_require__(2028);var _PlainComponent2=_interopRequireDefault(_PlainComponent);var HELMET_ATTRIBUTE="data-react-helmet";var encodeSpecialCharacters=function encodeSpecialCharacters(str){return String(str).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")};var getInnermostProperty=function getInnermostProperty(propsList,property){var _iteratorNormalCompletion=true;
var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=[].concat(_toConsumableArray(propsList)).reverse()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var props=_step.value;if(props[property]){return props[property]}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]){_iterator["return"]()}}finally{if(_didIteratorError){throw _iteratorError}}}return null};var getTitleFromPropsList=function getTitleFromPropsList(propsList){var innermostTitle=getInnermostProperty(propsList,"title");var innermostTemplate=getInnermostProperty(propsList,"titleTemplate");if(innermostTemplate&&innermostTitle){return innermostTemplate.replace(/\%s/g,innermostTitle)}return innermostTitle||""};var getOnChangeClientState=function getOnChangeClientState(propsList){return getInnermostProperty(propsList,"onChangeClientState")||function(){}};var getBaseTagFromPropsList=function getBaseTagFromPropsList(validTags,propsList){return propsList.filter(function(props){return!Object.is(typeof props[_HelmetConstantsJs.TAG_NAMES.BASE],"undefined")}).map(function(props){return props[_HelmetConstantsJs.TAG_NAMES.BASE]}).reverse().reduce(function(innermostBaseTag,tag){if(!innermostBaseTag.length){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=Object.keys(tag)[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var attributeKey=_step2.value;var lowerCaseAttributeKey=attributeKey.toLowerCase();if(!Object.is(validTags.indexOf(lowerCaseAttributeKey),-1)){return innermostBaseTag.concat(tag)}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]){_iterator2["return"]()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}return innermostBaseTag},[])};var getTagsFromPropsList=function getTagsFromPropsList(tagName,validTags,propsList){var approvedSeenTags=new Map;var tagList=propsList.filter(function(props){return!Object.is(typeof props[tagName],"undefined")}).map(function(props){return props[tagName]}).reverse().reduce(function(approvedTags,instanceTags){var instanceSeenTags=new Map;instanceTags.filter(function(tag){var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=Object.keys(tag)[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var attributeKey=_step3.value;var lowerCaseAttributeKey=attributeKey.toLowerCase();var value=tag[attributeKey].toLowerCase();if(Object.is(validTags.indexOf(lowerCaseAttributeKey),-1)){return false}if(!approvedSeenTags.has(lowerCaseAttributeKey)){approvedSeenTags.set(lowerCaseAttributeKey,new Set)}if(!instanceSeenTags.has(lowerCaseAttributeKey)){instanceSeenTags.set(lowerCaseAttributeKey,new Set)}if(!approvedSeenTags.get(lowerCaseAttributeKey).has(value)){instanceSeenTags.get(lowerCaseAttributeKey).add(value);return true}return false}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]){_iterator3["return"]()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}).reverse().forEach(function(tag){return approvedTags.push(tag)});var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=instanceSeenTags.keys()[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var attributeKey=_step4.value;var tagUnion=new Set([].concat(_toConsumableArray(approvedSeenTags.get(attributeKey)),_toConsumableArray(instanceSeenTags.get(attributeKey))));approvedSeenTags.set(attributeKey,tagUnion)}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4["return"]){_iterator4["return"]()}}finally{if(_didIteratorError4){throw _iteratorError4}}}instanceSeenTags.clear();return approvedTags},[]).reverse();return tagList};var updateTitle=function updateTitle(title){document.title=title||document.title};var updateTags=function updateTags(type,tags){var headElement=document.head||document.querySelector("head");var existingTags=headElement.querySelectorAll(type+"["+HELMET_ATTRIBUTE+"]");Array.forEach(existingTags,function(tag){return tag.parentNode.removeChild(tag)});if(tags&&tags.length){tags.reverse().forEach(function(tag){var newElement=document.createElement(type);for(var attribute in tag){if(tag.hasOwnProperty(attribute)){newElement.setAttribute(attribute,tag[attribute])}}newElement.setAttribute(HELMET_ATTRIBUTE,"true");headElement.insertBefore(newElement,headElement.firstChild)})}};var generateTitleAsString=function generateTitleAsString(type,title){var stringifiedMarkup="<"+type+" "+HELMET_ATTRIBUTE+'="true">'+encodeSpecialCharacters(title)+"</"+type+">";return stringifiedMarkup};var generateTagsAsString=function generateTagsAsString(type,tags){var stringifiedMarkup=tags.map(function(tag){var attributeHtml=Object.keys(tag).map(function(attribute){var encodedValue=encodeSpecialCharacters(tag[attribute]);return attribute+'="'+encodedValue+'"'}).join(" ");return"<"+type+" "+HELMET_ATTRIBUTE+'="true" '+attributeHtml+(Object.is(type,_HelmetConstantsJs.TAG_NAMES.SCRIPT)?"></"+type+">":"/>")}).join("");return stringifiedMarkup};var generateTitleAsReactComponent=function generateTitleAsReactComponent(type,title){var component=[_react2["default"].createElement(_HelmetConstantsJs.TAG_NAMES.TITLE,_defineProperty({key:title},HELMET_ATTRIBUTE,true),title)];return component};var generateTagsAsReactComponent=function generateTagsAsReactComponent(type,tags){var component=[].concat(_toConsumableArray(tags)).map(function(tag,i){var mappedTag=_defineProperty({key:i},HELMET_ATTRIBUTE,true);Object.keys(tag).forEach(function(attribute){var mappedAttribute=_HelmetConstantsJs.REACT_TAG_MAP[attribute]||attribute;mappedTag[mappedAttribute]=tag[attribute]});return _react2["default"].createElement(type,mappedTag)});return component};var Helmet=function Helmet(Component){var HelmetWrapper=function(_React$Component){_inherits(HelmetWrapper,_React$Component);function HelmetWrapper(){_classCallCheck(this,HelmetWrapper);_get(Object.getPrototypeOf(HelmetWrapper.prototype),"constructor",this).apply(this,arguments)}_createClass(HelmetWrapper,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps){return!(0,_deepEqual2["default"])(this.props,nextProps)}},{key:"render",value:function render(){return _react2["default"].createElement(Component,this.props)}}],[{key:"propTypes",value:{title:_react2["default"].PropTypes.string,onChangeClientState:_react2["default"].PropTypes.func,titleTemplate:_react2["default"].PropTypes.string,base:_react2["default"].PropTypes.object,meta:_react2["default"].PropTypes.arrayOf(_react2["default"].PropTypes.object),link:_react2["default"].PropTypes.arrayOf(_react2["default"].PropTypes.object),script:_react2["default"].PropTypes.arrayOf(_react2["default"].PropTypes.object)},enumerable:true},{key:"peek",value:Component.peek,enumerable:true},{key:"rewind",value:Component.rewind,enumerable:true},{key:"canUseDOM",set:function set(canUseDOM){Component.canUseDOM=canUseDOM}}]);return HelmetWrapper}(_react2["default"].Component);return HelmetWrapper};var reducePropsToState=function reducePropsToState(propsList){return{title:getTitleFromPropsList(propsList),onChangeClientState:getOnChangeClientState(propsList),baseTag:getBaseTagFromPropsList([_HelmetConstantsJs.TAG_PROPERTIES.HREF],propsList),metaTags:getTagsFromPropsList(_HelmetConstantsJs.TAG_NAMES.META,[_HelmetConstantsJs.TAG_PROPERTIES.NAME,_HelmetConstantsJs.TAG_PROPERTIES.CHARSET,_HelmetConstantsJs.TAG_PROPERTIES.HTTPEQUIV,_HelmetConstantsJs.TAG_PROPERTIES.PROPERTY],propsList),linkTags:getTagsFromPropsList(_HelmetConstantsJs.TAG_NAMES.LINK,[_HelmetConstantsJs.TAG_PROPERTIES.REL,_HelmetConstantsJs.TAG_PROPERTIES.HREF],propsList),scriptTags:getTagsFromPropsList(_HelmetConstantsJs.TAG_NAMES.SCRIPT,[_HelmetConstantsJs.TAG_PROPERTIES.SRC],propsList)}};var handleClientStateChange=function handleClientStateChange(newState){var title=newState.title;var baseTag=newState.baseTag;var metaTags=newState.metaTags;var linkTags=newState.linkTags;var scriptTags=newState.scriptTags;var onChangeClientState=newState.onChangeClientState;updateTitle(title);updateTags(_HelmetConstantsJs.TAG_NAMES.SCRIPT,scriptTags);updateTags(_HelmetConstantsJs.TAG_NAMES.LINK,linkTags);updateTags(_HelmetConstantsJs.TAG_NAMES.META,metaTags);updateTags(_HelmetConstantsJs.TAG_NAMES.BASE,baseTag);onChangeClientState(newState)};var getMethodsForTag=function getMethodsForTag(type,tags){return{toComponent:type===_HelmetConstantsJs.TAG_NAMES.TITLE?function(){return generateTitleAsReactComponent(type,tags)}:function(){return generateTagsAsReactComponent(type,tags)},toString:type===_HelmetConstantsJs.TAG_NAMES.TITLE?function(){return generateTitleAsString(type,tags)}:function(){return generateTagsAsString(type,tags)}}};var mapStateOnServer=function mapStateOnServer(_ref){var title=_ref.title;var baseTag=_ref.baseTag;var metaTags=_ref.metaTags;var linkTags=_ref.linkTags;var scriptTags=_ref.scriptTags;return{title:getMethodsForTag(_HelmetConstantsJs.TAG_NAMES.TITLE,title),base:getMethodsForTag(_HelmetConstantsJs.TAG_NAMES.BASE,baseTag),meta:getMethodsForTag(_HelmetConstantsJs.TAG_NAMES.META,metaTags),link:getMethodsForTag(_HelmetConstantsJs.TAG_NAMES.LINK,linkTags),script:getMethodsForTag(_HelmetConstantsJs.TAG_NAMES.SCRIPT,scriptTags)}};var SideEffect=(0,_reactSideEffect2["default"])(reducePropsToState,handleClientStateChange,mapStateOnServer);exports["default"]=Helmet(SideEffect(_PlainComponent2["default"]));module.exports=exports["default"]},2027:function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});var TAG_NAMES={TITLE:"title",BASE:"base",META:"meta",LINK:"link",SCRIPT:"script"};exports.TAG_NAMES=TAG_NAMES;var TAG_PROPERTIES={NAME:"name",CHARSET:"charset",HTTPEQUIV:"http-equiv",REL:"rel",HREF:"href",PROPERTY:"property",SRC:"src"};exports.TAG_PROPERTIES=TAG_PROPERTIES;var REACT_TAG_MAP={charset:"charSet","http-equiv":"httpEquiv"};exports.REACT_TAG_MAP=REACT_TAG_MAP},2028:function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;_again=false;if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;desc=parent=undefined;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var PlainComponent=function(_React$Component){_inherits(PlainComponent,_React$Component);function PlainComponent(){_classCallCheck(this,PlainComponent);_get(Object.getPrototypeOf(PlainComponent.prototype),"constructor",this).apply(this,arguments)}_createClass(PlainComponent,[{key:"render",value:function render(){return null}}]);return PlainComponent}(_react2["default"].Component);exports["default"]=PlainComponent;module.exports=exports["default"]},2029:function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:true});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}__webpack_require__(2030);__webpack_require__(2031);__webpack_require__(2032);__webpack_require__(2033);__webpack_require__(2034);__webpack_require__(2035);__webpack_require__(2036);var _Helmet=__webpack_require__(2026);var _Helmet2=_interopRequireDefault(_Helmet);exports["default"]=_Helmet2["default"];module.exports=exports["default"]},2030:function(module,exports,__webpack_require__){__webpack_require__(2058);module.exports=__webpack_require__(1468).Array.forEach},2031:function(module,exports,__webpack_require__){__webpack_require__(1646);__webpack_require__(2049);module.exports=__webpack_require__(1468).Array.from},2032:function(module,exports,__webpack_require__){__webpack_require__(1779);__webpack_require__(1646);__webpack_require__(1780);__webpack_require__(2051);__webpack_require__(2056);module.exports=__webpack_require__(1468).Map},2033:function(module,exports,__webpack_require__){__webpack_require__(2055);module.exports=__webpack_require__(1468).Object.getOwnPropertySymbols},2034:function(module,exports,__webpack_require__){__webpack_require__(2052);module.exports=__webpack_require__(1468).Object.is},2035:function(module,exports,__webpack_require__){__webpack_require__(2053);module.exports=__webpack_require__(1468).Object.keys},2036:function(module,exports,__webpack_require__){__webpack_require__(1779);__webpack_require__(1646);__webpack_require__(1780);__webpack_require__(2054);__webpack_require__(2057);module.exports=__webpack_require__(1468).Set},2037:function(module,exports){module.exports=function(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it}},2038:function(module,exports,__webpack_require__){var UNSCOPABLES=__webpack_require__(1469)("unscopables"),ArrayProto=Array.prototype;if(ArrayProto[UNSCOPABLES]==undefined)__webpack_require__(1500)(ArrayProto,UNSCOPABLES,{});module.exports=function(key){ArrayProto[UNSCOPABLES][key]=true}},2039:function(module,exports,__webpack_require__){var $=__webpack_require__(1475);module.exports=function(it){var keys=$.getKeys(it),getSymbols=$.getSymbols;if(getSymbols){var symbols=getSymbols(it),isEnum=$.isEnum,i=0,key;while(symbols.length>i)if(isEnum.call(it,key=symbols[i++]))keys.push(key)}return keys}},2040:function(module,exports,__webpack_require__){var toIObject=__webpack_require__(1583),getNames=__webpack_require__(1475).getNames,toString={}.toString;var windowNames=typeof window=="object"&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function(it){try{return getNames(it)}catch(e){return windowNames.slice()}};module.exports.get=function getOwnPropertyNames(it){if(windowNames&&toString.call(it)=="[object Window]")return getWindowNames(it);return getNames(toIObject(it))}},2041:function(module,exports,__webpack_require__){var cof=__webpack_require__(1641);module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return cof(it)=="String"?it.split(""):Object(it)}},2042:function(module,exports,__webpack_require__){var cof=__webpack_require__(1641);module.exports=Array.isArray||function(arg){return cof(arg)=="Array"}},2043:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(1475),descriptor=__webpack_require__(1645),setToStringTag=__webpack_require__(1582),IteratorPrototype={};__webpack_require__(1500)(IteratorPrototype,__webpack_require__(1469)("iterator"),function(){return this});module.exports=function(Constructor,NAME,next){Constructor.prototype=$.create(IteratorPrototype,{next:descriptor(1,next)});setToStringTag(Constructor,NAME+" Iterator")}},2044:function(module,exports,__webpack_require__){var $=__webpack_require__(1475),toIObject=__webpack_require__(1583);module.exports=function(object,el){var O=toIObject(object),keys=$.getKeys(O),length=keys.length,index=0,key;while(length>index)if(O[key=keys[index++]]===el)return key}},2045:function(module,exports,__webpack_require__){var $export=__webpack_require__(1485),core=__webpack_require__(1468),fails=__webpack_require__(1580);module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn);$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},2046:function(module,exports){module.exports=Object.is||function is(x,y){return x===y?x!==0||1/x===1/y:x!=x&&y!=y}},2047:function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(1489),$=__webpack_require__(1475),DESCRIPTORS=__webpack_require__(1579),SPECIES=__webpack_require__(1469)("species");module.exports=function(KEY){var C=global[KEY];if(DESCRIPTORS&&C&&!C[SPECIES])$.setDesc(C,SPECIES,{configurable:true,get:function(){return this}})}},2048:function(module,exports,__webpack_require__){var toInteger=__webpack_require__(1775),defined=__webpack_require__(1578);module.exports=function(TO_STRING){return function(that,pos){var s=String(defined(that)),i=toInteger(pos),l=s.length,a,b;if(i<0||i>=l)return TO_STRING?"":undefined;a=s.charCodeAt(i);return a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536}}},2049:function(module,exports,__webpack_require__){"use strict";var ctx=__webpack_require__(1549),$export=__webpack_require__(1485),toObject=__webpack_require__(1777),call=__webpack_require__(1768),isArrayIter=__webpack_require__(1767),toLength=__webpack_require__(1776),getIterFn=__webpack_require__(1778);$export($export.S+$export.F*!__webpack_require__(1769)(function(iter){Array.from(iter)}),"Array",{from:function from(arrayLike){var O=toObject(arrayLike),C=typeof this=="function"?this:Array,$$=arguments,$$len=$$.length,mapfn=$$len>1?$$[1]:undefined,mapping=mapfn!==undefined,index=0,iterFn=getIterFn(O),length,result,step,iterator;if(mapping)mapfn=ctx(mapfn,$$len>2?$$[2]:undefined,2);if(iterFn!=undefined&&!(C==Array&&isArrayIter(iterFn))){for(iterator=iterFn.call(O),result=new C;!(step=iterator.next()).done;index++){result[index]=mapping?call(iterator,mapfn,[step.value,index],true):step.value}}else{length=toLength(O.length);for(result=new C(length);length>index;index++){result[index]=mapping?mapfn(O[index],index):O[index]}}result.length=index;return result}})},2050:function(module,exports,__webpack_require__){"use strict";var addToUnscopables=__webpack_require__(2038),step=__webpack_require__(1770),Iterators=__webpack_require__(1550),toIObject=__webpack_require__(1583);module.exports=__webpack_require__(1644)(Array,"Array",function(iterated,kind){this._t=toIObject(iterated);this._i=0;this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;if(!O||index>=O.length){this._t=undefined;return step(1)}if(kind=="keys")return step(0,index);if(kind=="values")return step(0,O[index]);return step(0,[index,O[index]])},"values");Iterators.Arguments=Iterators.Array;addToUnscopables("keys");addToUnscopables("values");addToUnscopables("entries")},2051:function(module,exports,__webpack_require__){"use strict";var strong=__webpack_require__(1764);__webpack_require__(1766)("Map",function(get){return function Map(){return get(this,arguments.length>0?arguments[0]:undefined)}},{get:function get(key){var entry=strong.getEntry(this,key);return entry&&entry.v},set:function set(key,value){return strong.def(this,key===0?0:key,value)}},strong,true)},2052:function(module,exports,__webpack_require__){var $export=__webpack_require__(1485);$export($export.S,"Object",{is:__webpack_require__(2046)})},2053:function(module,exports,__webpack_require__){var toObject=__webpack_require__(1777);__webpack_require__(2045)("keys",function($keys){return function keys(it){return $keys(toObject(it))}})},2054:function(module,exports,__webpack_require__){"use strict";var strong=__webpack_require__(1764);__webpack_require__(1766)("Set",function(get){return function Set(){return get(this,arguments.length>0?arguments[0]:undefined)}},{add:function add(value){return strong.def(this,value=value===0?0:value,value)}},strong)},2055:function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(1475),global=__webpack_require__(1489),has=__webpack_require__(1581),DESCRIPTORS=__webpack_require__(1579),$export=__webpack_require__(1485),redefine=__webpack_require__(1531),$fails=__webpack_require__(1580),shared=__webpack_require__(1773),setToStringTag=__webpack_require__(1582),uid=__webpack_require__(1584),wks=__webpack_require__(1469),keyOf=__webpack_require__(2044),$names=__webpack_require__(2040),enumKeys=__webpack_require__(2039),isArray=__webpack_require__(2042),anObject=__webpack_require__(1639),toIObject=__webpack_require__(1583),createDesc=__webpack_require__(1645),getDesc=$.getDesc,setDesc=$.setDesc,_create=$.create,getNames=$names.get,$Symbol=global.Symbol,$JSON=global.JSON,_stringify=$JSON&&$JSON.stringify,setter=false,HIDDEN=wks("_hidden"),isEnum=$.isEnum,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),useNative=typeof $Symbol=="function",ObjectProto=Object.prototype;var setSymbolDesc=DESCRIPTORS&&$fails(function(){return _create(setDesc({},"a",{get:function(){return setDesc(this,"a",{value:7}).a}})).a!=7})?function(it,key,D){var protoDesc=getDesc(ObjectProto,key);if(protoDesc)delete ObjectProto[key];setDesc(it,key,D);if(protoDesc&&it!==ObjectProto)setDesc(ObjectProto,key,protoDesc)}:setDesc;var wrap=function(tag){var sym=AllSymbols[tag]=_create($Symbol.prototype);sym._k=tag;DESCRIPTORS&&setter&&setSymbolDesc(ObjectProto,tag,{configurable:true,set:function(value){if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDesc(this,tag,createDesc(1,value))}});return sym};var isSymbol=function(it){return typeof it=="symbol"};var $defineProperty=function defineProperty(it,key,D){if(D&&has(AllSymbols,key)){if(!D.enumerable){if(!has(it,HIDDEN))setDesc(it,HIDDEN,createDesc(1,{}));it[HIDDEN][key]=true}else{if(has(it,HIDDEN)&&it[HIDDEN][key])it[HIDDEN][key]=false;D=_create(D,{enumerable:createDesc(0,false)})}return setSymbolDesc(it,key,D)}return setDesc(it,key,D)};var $defineProperties=function defineProperties(it,P){anObject(it);var keys=enumKeys(P=toIObject(P)),i=0,l=keys.length,key;while(l>i)$defineProperty(it,key=keys[i++],P[key]);return it};var $create=function create(it,P){return P===undefined?_create(it):$defineProperties(_create(it),P)};var $propertyIsEnumerable=function propertyIsEnumerable(key){var E=isEnum.call(this,key);return E||!has(this,key)||!has(AllSymbols,key)||has(this,HIDDEN)&&this[HIDDEN][key]?E:true};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(it,key){var D=getDesc(it=toIObject(it),key);if(D&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key]))D.enumerable=true;return D};var $getOwnPropertyNames=function getOwnPropertyNames(it){var names=getNames(toIObject(it)),result=[],i=0,key;while(names.length>i)if(!has(AllSymbols,key=names[i++])&&key!=HIDDEN)result.push(key);return result};var $getOwnPropertySymbols=function getOwnPropertySymbols(it){var names=getNames(toIObject(it)),result=[],i=0,key;while(names.length>i)if(has(AllSymbols,key=names[i++]))result.push(AllSymbols[key]);return result};var $stringify=function stringify(it){if(it===undefined||isSymbol(it))return;var args=[it],i=1,$$=arguments,replacer,$replacer;while($$.length>i)args.push($$[i++]);replacer=args[1];if(typeof replacer=="function")$replacer=replacer;if($replacer||!isArray(replacer))replacer=function(key,value){if($replacer)value=$replacer.call(this,key,value);if(!isSymbol(value))return value};args[1]=replacer;return _stringify.apply($JSON,args)};var buggyJSON=$fails(function(){var S=$Symbol();return _stringify([S])!="[null]"||_stringify({a:S})!="{}"||_stringify(Object(S))!="{}"});if(!useNative){$Symbol=function Symbol(){if(isSymbol(this))throw TypeError("Symbol is not a constructor");return wrap(uid(arguments.length>0?arguments[0]:undefined))};redefine($Symbol.prototype,"toString",function toString(){return this._k});isSymbol=function(it){return it instanceof $Symbol};$.create=$create;$.isEnum=$propertyIsEnumerable;$.getDesc=$getOwnPropertyDescriptor;$.setDesc=$defineProperty;$.setDescs=$defineProperties;$.getNames=$names.get=$getOwnPropertyNames;$.getSymbols=$getOwnPropertySymbols;if(DESCRIPTORS&&!__webpack_require__(1771)){redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,true)}}var symbolStatics={for:function(key){return has(SymbolRegistry,key+="")?SymbolRegistry[key]:SymbolRegistry[key]=$Symbol(key)},keyFor:function keyFor(key){return keyOf(SymbolRegistry,key)},useSetter:function(){setter=true},useSimple:function(){setter=false}};$.each.call(("hasInstance,isConcatSpreadable,iterator,match,replace,search,"+"species,split,toPrimitive,toStringTag,unscopables").split(","),function(it){var sym=wks(it);symbolStatics[it]=useNative?sym:wrap(sym)});setter=true;$export($export.G+$export.W,{Symbol:$Symbol});$export($export.S,"Symbol",symbolStatics);$export($export.S+$export.F*!useNative,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});$JSON&&$export($export.S+$export.F*(!useNative||buggyJSON),"JSON",{stringify:$stringify});setToStringTag($Symbol,"Symbol");setToStringTag(Math,"Math",true);setToStringTag(global.JSON,"JSON",true)},2056:function(module,exports,__webpack_require__){var $export=__webpack_require__(1485);$export($export.P,"Map",{toJSON:__webpack_require__(1765)("Map")})},2057:function(module,exports,__webpack_require__){var $export=__webpack_require__(1485);$export($export.P,"Set",{toJSON:__webpack_require__(1765)("Set")})},2058:function(module,exports,__webpack_require__){var $=__webpack_require__(1475),$export=__webpack_require__(1485),$ctx=__webpack_require__(1549),$Array=__webpack_require__(1468).Array||Array,statics={};var setStatics=function(keys,length){$.each.call(keys.split(","),function(key){if(length==undefined&&key in $Array)statics[key]=$Array[key];else if(key in[])statics[key]=$ctx(Function.call,[][key],length)})};setStatics("pop,reverse,shift,keys,values,entries",1);setStatics("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3);setStatics("join,slice,concat,push,splice,unshift,sort,lastIndexOf,"+"reduce,reduceRight,copyWithin,fill");$export($export.S,"Array",statics)},2059:function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _fbjsLibExecutionEnvironment=__webpack_require__(2060);var _fbjsLibExecutionEnvironment2=_interopRequireDefault(_fbjsLibExecutionEnvironment);var _fbjsLibShallowEqual=__webpack_require__(2061);var _fbjsLibShallowEqual2=_interopRequireDefault(_fbjsLibShallowEqual);module.exports=function withSideEffect(reducePropsToState,handleStateChangeOnClient,mapStateOnServer){if(typeof reducePropsToState!=="function"){throw new Error("Expected reducePropsToState to be a function.")}if(typeof handleStateChangeOnClient!=="function"){throw new Error("Expected handleStateChangeOnClient to be a function.")}if(typeof mapStateOnServer!=="undefined"&&typeof mapStateOnServer!=="function"){throw new Error("Expected mapStateOnServer to either be undefined or a function.")}function getDisplayName(WrappedComponent){return WrappedComponent.displayName||WrappedComponent.name||"Component"}return function wrap(WrappedComponent){if(typeof WrappedComponent!=="function"){throw new Error("Expected WrappedComponent to be a React component.")}var mountedInstances=[];var state=undefined;function emitChange(){state=reducePropsToState(mountedInstances.map(function(instance){return instance.props}));if(SideEffect.canUseDOM){handleStateChangeOnClient(state)}else if(mapStateOnServer){state=mapStateOnServer(state)}}var SideEffect=function(_Component){_inherits(SideEffect,_Component);function SideEffect(){_classCallCheck(this,SideEffect);_Component.apply(this,arguments)}SideEffect.peek=function peek(){return state};SideEffect.rewind=function rewind(){if(SideEffect.canUseDOM){throw new Error("You may ony call rewind() on the server. Call peek() to read the current state.")}var recordedState=state;state=undefined;mountedInstances=[];return recordedState};SideEffect.prototype.shouldComponentUpdate=function shouldComponentUpdate(nextProps){return!_fbjsLibShallowEqual2["default"](nextProps,this.props)};SideEffect.prototype.componentWillMount=function componentWillMount(){mountedInstances.push(this);emitChange()};SideEffect.prototype.componentDidUpdate=function componentDidUpdate(){emitChange()};SideEffect.prototype.componentWillUnmount=function componentWillUnmount(){var index=mountedInstances.indexOf(this);mountedInstances.splice(index,1);emitChange()};SideEffect.prototype.render=function render(){return _react2["default"].createElement(WrappedComponent,this.props)};_createClass(SideEffect,null,[{key:"displayName",value:"SideEffect("+getDisplayName(WrappedComponent)+")",enumerable:true},{key:"canUseDOM",value:_fbjsLibExecutionEnvironment2["default"].canUseDOM,enumerable:true}]);return SideEffect}(_react.Component);return SideEffect}}},2060:function(module,exports){"use strict";var canUseDOM=!!(typeof window!=="undefined"&&window.document&&window.document.createElement);var ExecutionEnvironment={canUseDOM:canUseDOM,canUseWorkers:typeof Worker!=="undefined",canUseEventListeners:canUseDOM&&!!(window.addEventListener||window.attachEvent),canUseViewport:canUseDOM&&!!window.screen,isInWorker:!canUseDOM};module.exports=ExecutionEnvironment},2061:function(module,exports){"use strict";var hasOwnProperty=Object.prototype.hasOwnProperty;function shallowEqual(objA,objB){if(objA===objB){return true}if(typeof objA!=="object"||objA===null||typeof objB!=="object"||objB===null){return false}var keysA=Object.keys(objA);var keysB=Object.keys(objB);if(keysA.length!==keysB.length){return false}var bHasOwnProperty=hasOwnProperty.bind(objB);
for(var i=0;i<keysA.length;i++){if(!bHasOwnProperty(keysA[i])||objA[keysA[i]]!==objB[keysA[i]]){return false}}return true}module.exports=shallowEqual},2292:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _omit=__webpack_require__(18);var _omit2=_interopRequireDefault(_omit);var _once=__webpack_require__(406);var _once2=_interopRequireDefault(_once);var _filter=__webpack_require__(69);var _filter2=_interopRequireDefault(_filter);var _reactRedux=__webpack_require__(21);var _constants=__webpack_require__(714);var _actions=__webpack_require__(1508);var _selectors=__webpack_require__(1600);var _selectors2=__webpack_require__(1577);var _selectors3=__webpack_require__(1601);var _actions2=__webpack_require__(189);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ThemesListFetcher=_react2.default.createClass({displayName:"ThemesListFetcher",propTypes:{children:_react2.default.PropTypes.element.isRequired,site:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired,isMultisite:_react2.default.PropTypes.bool,search:_react2.default.PropTypes.string,tier:_react2.default.PropTypes.string,filter:_react2.default.PropTypes.string,onRealScroll:_react2.default.PropTypes.func,onLastPage:_react2.default.PropTypes.func,themes:_react2.default.PropTypes.array.isRequired,lastPage:_react2.default.PropTypes.bool.isRequired,loading:_react2.default.PropTypes.bool.isRequired,lastQuery:_react2.default.PropTypes.shape({hasSiteChanged:_react2.default.PropTypes.bool.isRequired,isJetpack:_react2.default.PropTypes.bool.isRequired}).isRequired,query:_react2.default.PropTypes.func.isRequired,fetchNextPage:_react2.default.PropTypes.func.isRequired,error:_react2.default.PropTypes.bool},componentDidMount:function componentDidMount(){this.refresh(this.props)},componentWillReceiveProps:function componentWillReceiveProps(nextProps){if(nextProps.error&&nextProps.error!==this.props.error){this.props.errorNotice(this.translate("There was a problem fetching the themes"))}if(nextProps.filter!==this.props.filter||nextProps.tier!==this.props.tier||nextProps.search!==this.props.search&&(!nextProps.lastQuery.isJetpack||nextProps.lastQuery.hasSiteChanged)){this.refresh(nextProps)}},refresh:function refresh(props){if(this.props.site||this.props.isMultisite){this.queryThemes(props)}},queryThemes:function queryThemes(props){var onLastPage=props.onLastPage;var site=props.site;var search=props.search;this.onLastPage=onLastPage?(0,_once2.default)(onLastPage):null;var tier=_config2.default.isEnabled("upgrades/premium-themes")?props.tier:"free";this.props.query({search:search,tier:tier,filter:props.filter,page:0,perPage:_constants.PER_PAGE});this.props.fetchNextPage(site)},fetchNextPage:function fetchNextPage(options){if(this.props.loading||this.props.lastPage){return}var _props=this.props;var _props$site=_props.site;var site=_props$site===undefined?false:_props$site;var _props$onRealScroll=_props.onRealScroll;var onRealScroll=_props$onRealScroll===undefined?function(){return null}:_props$onRealScroll;if(options.triggeredByScroll){onRealScroll()}this.props.fetchNextPage(site)},render:function render(){var props=(0,_omit2.default)(this.props,"children");return _react2.default.cloneElement(this.props.children,(0,_assign2.default)({},props,{fetchNextPage:this.fetchNextPage}))}});function getFilteredThemes(state,search){var allThemes=(0,_selectors2.getThemesList)(state).map(_selectors3.getThemeById.bind(null,state));if(!(0,_selectors.isJetpack)(state)||!search){return allThemes}return(0,_filter2.default)(allThemes,function(theme){return matches(theme,search)})}function matches(theme,rawSearch){var search=rawSearch.toLowerCase().trim();return["name","tags","description","author"].some(function(field){return theme[field]&&join(theme[field]).toLowerCase().replace("-"," ").indexOf(search)>=0})}function join(value){return Array.isArray(value)?value.join(" "):value}exports.default=(0,_reactRedux.connect)(function(state,props){return{themes:getFilteredThemes(state,props.search),lastPage:(0,_selectors2.isLastPage)(state),loading:(0,_selectors2.isFetchingNextPage)(state),lastQuery:{hasSiteChanged:(0,_selectors.hasSiteChanged)(state),isJetpack:(0,_selectors.isJetpack)(state)},error:(0,_selectors2.isFetchError)(state)}},{query:_actions.query,fetchNextPage:_actions.fetchNextPage,errorNotice:_actions2.errorNotice})(ThemesListFetcher);module.exports=exports["default"]},2322:function(module,exports,__webpack_require__){"use strict";var ReactDom=__webpack_require__(43),React=__webpack_require__(1),throttle=__webpack_require__(656),classNames=__webpack_require__(11);var viewport=__webpack_require__(93);module.exports=React.createClass({displayName:"StickyPanel",getInitialState:function getInitialState(){return{isSticky:false,spacerHeight:0,blockWidth:0}},componentDidMount:function componentDidMount(){this.threshold=ReactDom.findDOMNode(this).offsetTop;this.throttleOnResize=throttle(this.onWindowResize,200);window.addEventListener("scroll",this.onWindowScroll);window.addEventListener("resize",this.throttleOnResize);this.updateIsSticky()},componentWillUnmount:function componentWillUnmount(){window.removeEventListener("scroll",this.onWindowScroll);window.removeEventListener("resize",this.throttleOnResize);window.cancelAnimationFrame(this.rafHandle)},onWindowScroll:function onWindowScroll(){this.rafHandle=window.requestAnimationFrame(this.updateIsSticky)},onWindowResize:function onWindowResize(){this.setState({spacerHeight:this.state.isSticky?ReactDom.findDOMNode(this).clientHeight:0,blockWidth:this.state.isSticky?ReactDom.findDOMNode(this).clientWidth:0})},updateIsSticky:function updateIsSticky(){var isSticky=window.pageYOffset>this.threshold;if(viewport.isMobile()){return this.setState({isSticky:false})}if(isSticky!==this.state.isSticky){this.setState({isSticky:isSticky,spacerHeight:isSticky?ReactDom.findDOMNode(this).clientHeight:0,blockWidth:isSticky?ReactDom.findDOMNode(this).clientWidth:0})}},getBlockStyle:function getBlockStyle(){var offset;if(this.state.isSticky){offset=document.getElementById("content").getBoundingClientRect().top;return{top:offset+window.pageYOffset,width:this.state.blockWidth}}},render:function render(){var classes=classNames("sticky-panel",this.props.className,{"is-sticky":this.state.isSticky});return React.createElement("div",{className:classes},React.createElement("div",{className:"sticky-panel__content",style:this.getBlockStyle()},this.props.children),React.createElement("div",{className:"sticky-panel__spacer",style:{height:this.state.spacerHeight}}))}})},2748:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.singleSite=singleSite;exports.multiSite=multiSite;exports.loggedOut=loggedOut;var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _i18nCalypso=__webpack_require__(13);var _i18nCalypso2=_interopRequireDefault(_i18nCalypso);var _omit=__webpack_require__(18);var _omit2=_interopRequireDefault(_omit);var _singleSite=__webpack_require__(2756);var _singleSite2=_interopRequireDefault(_singleSite);var _multiSite=__webpack_require__(2755);var _multiSite2=_interopRequireDefault(_multiSite);var _loggedOut=__webpack_require__(2754);var _loggedOut2=_interopRequireDefault(_loggedOut);var _trackScrollPage=__webpack_require__(701);var _trackScrollPage2=_interopRequireDefault(_trackScrollPage);var _helpers=__webpack_require__(348);var _documentHead=__webpack_require__(660);var _documentHead2=_interopRequireDefault(_documentHead);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function makeElement(ThemesComponent,Head,store,props){return _react2.default.createElement(Head,{title:props.title,description:props.description,type:"website",canonicalUrl:props.canonicalUrl,image:props.image,tier:props.tier||"all"},_react2.default.createElement(_documentHead2.default,{title:props.title}),_react2.default.createElement(ThemesComponent,(0,_omit2.default)(props,["title"])))}function getProps(context){var _context$params=context.params;var tier=_context$params.tier;var filter=_context$params.filter;var siteId=_context$params.site_id;var _getAnalyticsData=(0,_helpers.getAnalyticsData)(context.path,tier,siteId);var basePath=_getAnalyticsData.basePath;var analyticsPageTitle=_getAnalyticsData.analyticsPageTitle;var boundTrackScrollPage=function boundTrackScrollPage(){(0,_trackScrollPage2.default)(basePath,analyticsPageTitle,"Themes")};return{title:_i18nCalypso2.default.translate("Themes",{textOnly:true}),tier:tier,filter:filter,analyticsPageTitle:analyticsPageTitle,analyticsPath:basePath,search:context.query.s,trackScrollPage:boundTrackScrollPage}}function singleSite(context,next){var Head=__webpack_require__(1712);var siteId=context.params.site_id;var props=getProps(context);props.key=siteId;props.siteId=siteId;if(typeof window!=="undefined"){window.scrollTo(0,0)}context.primary=makeElement(_singleSite2.default,Head,context.store,props);next()}function multiSite(context,next){var Head=__webpack_require__(1712);var props=getProps(context);if(typeof window!=="undefined"){window.scrollTo(0,0)}context.primary=makeElement(_multiSite2.default,Head,context.store,props);next()}function loggedOut(context,next){var Head=__webpack_require__(2751);var props=getProps(context);context.primary=makeElement(_loggedOut2.default,Head,context.store,props);next()}},2749:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _url=__webpack_require__(109);var _gridicon=__webpack_require__(28);var _gridicon2=_interopRequireDefault(_gridicon);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"CurrentThemeButton",propTypes:{name:_react.PropTypes.string.isRequired,label:_react.PropTypes.string.isRequired,icon:_react.PropTypes.string.isRequired,href:_react.PropTypes.string,onClick:_react.PropTypes.func},render:function render(){return _react2.default.createElement("a",{role:"button",className:(0,_classnames2.default)("current-theme__button","current-theme__"+this.props.name,{disabled:!this.props.href}),onClick:this.props.onClick.bind(null,this.props.name),href:this.props.href,target:(0,_url.isOutsideCalypso)(this.props.href)?"_blank":null},_react2.default.createElement(_gridicon2.default,{icon:this.props.icon,size:18}),_react2.default.createElement("span",{className:"current-theme__button-label"},this.props.label))}});module.exports=exports["default"]},2750:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _keys=__webpack_require__(44);var _keys2=_interopRequireDefault(_keys);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _classnames=__webpack_require__(11);var _classnames2=_interopRequireDefault(_classnames);var _reactRedux=__webpack_require__(21);var _map=__webpack_require__(50);var _map2=_interopRequireDefault(_map);var _pickBy=__webpack_require__(347);var _pickBy2=_interopRequireDefault(_pickBy);var _card=__webpack_require__(145);var _card2=_interopRequireDefault(_card);var _button=__webpack_require__(2749);var _button2=_interopRequireDefault(_button);var _themeOptions=__webpack_require__(1666);var _helpers=__webpack_require__(348);var _selectors=__webpack_require__(106);var _selectors2=__webpack_require__(121);var _selectors3=__webpack_require__(1539);var _queryCurrentTheme=__webpack_require__(1853);var _queryCurrentTheme2=_interopRequireDefault(_queryCurrentTheme);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CurrentTheme=_react2.default.createClass({displayName:"CurrentTheme",propTypes:{options:_react.PropTypes.objectOf(_react.PropTypes.shape({label:_react.PropTypes.string.isRequired,icon:_react.PropTypes.string.isRequired,getUrl:_react.PropTypes.func.isRequired})),site:_react.PropTypes.oneOfType([_react.PropTypes.object,_react.PropTypes.bool]).isRequired,isCustomizable:_react.PropTypes.bool.isRequired,isJetpack:_react.PropTypes.bool.isRequired,currentTheme:_react.PropTypes.object},trackClick:_helpers.trackClick.bind(null,"current theme"),render:function render(){var _this=this;var _props=this.props;var currentTheme=_props.currentTheme;var site=_props.site;var placeholderText=_react2.default.createElement("span",{className:"current-theme__placeholder"},"loading...");var text=currentTheme&&currentTheme.name?currentTheme.name:placeholderText;return _react2.default.createElement(_card2.default,{className:"current-theme"},site&&_react2.default.createElement(_queryCurrentTheme2.default,{siteId:site.ID}),_react2.default.createElement("div",{className:"current-theme__current"},_react2.default.createElement("span",{className:"current-theme__label"},this.translate("Current Theme")),_react2.default.createElement("span",{className:"current-theme__name"},text)),_react2.default.createElement("div",{className:(0,_classnames2.default)("current-theme__actions",{"two-buttons":(0,_keys2.default)(this.props.options).length===2})},(0,_map2.default)(this.props.options,function(option,name){return _react2.default.createElement(_button2.default,{key:name,name:name,label:option.label,icon:option.icon,href:currentTheme&&option.getUrl(currentTheme),onClick:_this.trackClick})})))}});var mergeProps=function mergeProps(stateProps,dispatchProps,ownProps){var site=ownProps.site;var theme=(0,_assign2.default)({},stateProps.currentTheme,{active:true});var filteredOptions=(0,_pickBy2.default)(dispatchProps,function(option){return!(option.hideForSite&&option.hideForSite(stateProps))&&!(option.hideForTheme&&option.hideForTheme(theme))});return(0,_assign2.default)({},ownProps,stateProps,{options:(0,_themeOptions.bindOptionsToSite)(filteredOptions,site)})};exports.default=(0,_reactRedux.connect)(function(state,props){var selectedSite=props.site;return{isJetpack:selectedSite&&(0,_selectors.isJetpackSite)(state,selectedSite.ID),isCustomizable:selectedSite&&(0,_selectors2.canCurrentUser)(state,selectedSite.ID,"edit_theme_options"),currentTheme:selectedSite&&(0,_selectors3.getCurrentTheme)(state,selectedSite.ID)}},(0,_themeOptions.bindOptionsToDispatch)({customize:_themeOptions.customize,info:_themeOptions.info,support:_themeOptions.support},"current theme"),mergeProps)(CurrentTheme);module.exports=exports["default"]},2751:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _head=__webpack_require__(1712);var _head2=_interopRequireDefault(_head);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ThemesHead=function ThemesHead(_ref){var title=_ref.title;var description=_ref.description;var canonicalUrl=_ref.canonicalUrl;var type=_ref.type;var image=_ref.image;var tier=_ref.tier;var children=_ref.children;return _react2.default.createElement(_head2.default,{title:title?title:get("title",tier),description:description?description:get("description",tier),canonicalUrl:canonicalUrl?canonicalUrl:get("canonicalUrl",tier),type:type?type:"website",siteName:"WordPress.com",image:image?image:{}},children)};ThemesHead.propTypes={title:_react2.default.PropTypes.string,tier:_react2.default.PropTypes.string};var themesMeta={all:{title:"WordPress Themes WordPress.com",description:"Beautiful, responsive, free and premium WordPress themes for your photography site, portfolio, magazine, business website, or blog.",canonicalUrl:"https://wordpress.com/design"},free:{title:"Free WordPress Themes WordPress.com",description:"Discover Free WordPress Themes on the WordPress.com Theme Showcase.",canonicalUrl:"https://wordpress.com/design/free"},premium:{title:"Premium WordPress Themes WordPress.com",description:"Discover Premium WordPress Themes on the WordPress.com Theme Showcase.",canonicalUrl:"https://wordpress.com/design/premium"}};function get(key,tier){return tier in themesMeta&&key in themesMeta[tier]?themesMeta[tier][key]:""}exports.default=ThemesHead;module.exports=exports["default"]},2752:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _noop=__webpack_require__(36);var _noop2=_interopRequireDefault(_noop);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _sidebarNavigation=__webpack_require__(1465);var _sidebarNavigation2=_interopRequireDefault(_sidebarNavigation);var _jetpackManageErrorPage=__webpack_require__(670);var _jetpackManageErrorPage2=_interopRequireDefault(_jetpackManageErrorPage);var _themesList=__webpack_require__(1800);var _themesList2=_interopRequireDefault(_themesList);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"JetpackManageDisabledMessage",propTypes:{site:_react.PropTypes.shape({getRemoteManagementURL:_react.PropTypes.func.isRequired,options:_react.PropTypes.shape({admin_url:_react.PropTypes.string.isRequired}).isRequired}).isRequired},clickOnActivate:function clickOnActivate(){_analytics2.default.ga.recordEvent("Jetpack","Activate manage","Site",this.props.site?this.props.site.ID:null)},renderMockThemes:function renderMockThemes(){var exampleThemesData=[{name:"Dyad",slug:"dyad"},{name:"Independent Publisher",slug:"independent-publisher"},{name:"Sela",slug:"sela"},{name:"Hemingway Rewritten",slug:"hemingway-rewritten"},{name:"Twenty Sixteen",slug:"twentysixteen"},{name:"Penscratch",slug:"penscratch"},{name:"Edin",slug:"edin"},{name:"Publication",slug:"publication"},{name:"Harmonic",slug:"harmonic"}];var themes=exampleThemesData.map(function(theme){return{id:theme.slug,name:theme.name,screenshot:"https://i1.wp.com/s0.wp.com/wp-content/themes/pub/"+theme.slug+"/screenshot.png?w=660"}});return _react2.default.createElement(_themesList2.default,{themes:themes,getButtonOptions:_noop2.default,onScreenshotClick:_noop2.default,onMoreButtonClick:_noop2.default})},render:function render(){return _react2.default.createElement(_main2.default,{className:"themes"},_react2.default.createElement(_sidebarNavigation2.default,null),_react2.default.createElement(_jetpackManageErrorPage2.default,{template:"optInManage",title:this.translate("Looking to manage this site's themes?"),site:this.props.site,section:"themes",secondaryAction:this.translate("Open Site Theme Browser"),secondaryActionURL:this.props.site.options.admin_url+"themes.php",secondaryActionTarget:"_blank",actionCallback:this.clickOnActivate,featureExample:this.renderMockThemes()}))}});module.exports=exports["default"]},2753:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _sidebarNavigation=__webpack_require__(1465);var _sidebarNavigation2=_interopRequireDefault(_sidebarNavigation);var _jetpackManageErrorPage=__webpack_require__(670);var _jetpackManageErrorPage2=_interopRequireDefault(_jetpackManageErrorPage);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=_react2.default.createClass({displayName:"jetpack-upgrade-message",propTypes:{site:_react.PropTypes.object},render:function render(){return _react2.default.createElement(_main2.default,{className:"themes"},_react2.default.createElement(_sidebarNavigation2.default,null),_react2.default.createElement(_jetpackManageErrorPage2.default,{template:"updateJetpack",site:this.props.site,version:"3.7",secondaryAction:this.translate("Open Site Theme Browser"),secondaryActionURL:this.props.site.options.admin_url+"themes.php",secondaryActionTarget:"_blank"}))}});module.exports=exports["default"]},2754:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _reactRedux=__webpack_require__(21);var _themeShowcase=__webpack_require__(1955);var _themeShowcase2=_interopRequireDefault(_themeShowcase);var _themeOptions=__webpack_require__(1666);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mergeProps=function mergeProps(stateProps,dispatchProps,ownProps){return(0,_assign2.default)({},ownProps,stateProps,{options:dispatchProps,defaultOption:dispatchProps.signup,getScreenshotOption:function getScreenshotOption(){return dispatchProps.info}})};exports.default=(0,_reactRedux.connect)(null,(0,_themeOptions.bindOptionsToDispatch)({signup:_themeOptions.signup,preview:_themeOptions.preview,separator:_themeOptions.separator,info:_themeOptions.info,support:_themeOptions.support,help:_themeOptions.help},"showcase"),mergeProps)(_themeShowcase2.default);module.exports=exports["default"]},2755:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _sidebarNavigation=__webpack_require__(1465);var _sidebarNavigation2=_interopRequireDefault(_sidebarNavigation);var _themesSiteSelectorModal=__webpack_require__(1956);var _themesSiteSelectorModal2=_interopRequireDefault(_themesSiteSelectorModal);var _themeOptions=__webpack_require__(1666);var _themeShowcase=__webpack_require__(1955);var _themeShowcase2=_interopRequireDefault(_themeShowcase);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ThemesMultiSite=function ThemesMultiSite(props){return _react2.default.createElement(_themesSiteSelectorModal2.default,(0,_extends3.default)({},props,{sourcePath:"/design"}),_react2.default.createElement(_themeShowcase2.default,props,_react2.default.createElement(_sidebarNavigation2.default,null)))};var mergeProps=function mergeProps(stateProps,dispatchProps,ownProps){return(0,_assign2.default)({},ownProps,stateProps,{options:dispatchProps,defaultOption:dispatchProps.activate,secondaryOption:dispatchProps.tryandcustomize,getScreenshotOption:function getScreenshotOption(){return dispatchProps.info}})};exports.default=(0,_reactRedux.connect)(null,(0,_themeOptions.bindOptionsToDispatch)({preview:_themeOptions.preview,purchase:_themeOptions.purchase,activate:_themeOptions.activate,tryandcustomize:_themeOptions.tryandcustomize,separator:_themeOptions.separator,info:_themeOptions.info,support:_themeOptions.support,help:_themeOptions.help},"showcase"),mergeProps)(ThemesMultiSite);module.exports=exports["default"]},2756:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _assign=__webpack_require__(5);var _assign2=_interopRequireDefault(_assign);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactRedux=__webpack_require__(21);var _i18nCalypso=__webpack_require__(13);var _pickBy=__webpack_require__(347);var _pickBy2=_interopRequireDefault(_pickBy);var _main=__webpack_require__(147);var _main2=_interopRequireDefault(_main);var _currentTheme=__webpack_require__(2750);var _currentTheme2=_interopRequireDefault(_currentTheme);var _sidebarNavigation=__webpack_require__(1465);var _sidebarNavigation2=_interopRequireDefault(_sidebarNavigation);var _thanksModal=__webpack_require__(1954);var _thanksModal2=_interopRequireDefault(_thanksModal);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _emptyContent=__webpack_require__(185);var _emptyContent2=_interopRequireDefault(_emptyContent);var _jetpackUpgradeMessage=__webpack_require__(2753);var _jetpackUpgradeMessage2=_interopRequireDefault(_jetpackUpgradeMessage);var _jetpackManageDisabledMessage=__webpack_require__(2752);var _jetpackManageDisabledMessage2=_interopRequireDefault(_jetpackManageDisabledMessage);var _themeOptions=__webpack_require__(1666);var _sitesList=__webpack_require__(55);var _sitesList2=_interopRequireDefault(_sitesList);var _constants=__webpack_require__(187);var _upgradeNudge=__webpack_require__(1545);var _upgradeNudge2=_interopRequireDefault(_upgradeNudge);var _selectors=__webpack_require__(70);var _selectors2=__webpack_require__(106);var _selectors3=__webpack_require__(121);var _pageViewTracker=__webpack_require__(1540);var _pageViewTracker2=_interopRequireDefault(_pageViewTracker);var _themeShowcase=__webpack_require__(1955);var _themeShowcase2=_interopRequireDefault(_themeShowcase);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var sites=(0,_sitesList2.default)();var JetpackThemeReferrerPage=(0,_i18nCalypso.localize)(function(_ref){var translate=_ref.translate;var site=_ref.site;var analyticsPath=_ref.analyticsPath;var analyticsPageTitle=_ref.analyticsPageTitle;return _react2.default.createElement(_main2.default,{className:"themes"},_react2.default.createElement(_pageViewTracker2.default,{path:analyticsPath,title:analyticsPageTitle}),_react2.default.createElement(_sidebarNavigation2.default,null),_react2.default.createElement(_currentTheme2.default,{site:site,canCustomize:site&&site.isCustomizable()}),_react2.default.createElement(_emptyContent2.default,{title:translate("Changing Themes?"),line:translate("Use your site theme browser to manage themes."),action:translate("Open Site Theme Browser"),actionURL:site.options.admin_url+"themes.php",actionTarget:"_blank",illustration:"/calypso/images/drake/drake-jetpack.svg"}))});var ThemesSingleSite=function ThemesSingleSite(props){var site=sites.getSelectedSite();var analyticsPath=props.analyticsPath;var analyticsPageTitle=props.analyticsPageTitle;var isJetpack=props.isJetpack;var translate=props.translate;var jetpackEnabled=_config2.default.isEnabled("manage/themes-jetpack");if(!site){return _react2.default.createElement(_main2.default,{className:"themes"})}if(isJetpack){if(!jetpackEnabled){return _react2.default.createElement(JetpackThemeReferrerPage,{site:site,analyticsPath:analyticsPath,analyticsPageTitle:analyticsPageTitle})}if(!site.hasJetpackThemes){return _react2.default.createElement(_jetpackUpgradeMessage2.default,{site:site})}if(!site.canManage()){return _react2.default.createElement(_jetpackManageDisabledMessage2.default,{site:site})}}return _react2.default.createElement(_themeShowcase2.default,props,_react2.default.createElement(_sidebarNavigation2.default,null),_react2.default.createElement(_thanksModal2.default,{site:site,source:"list"}),_react2.default.createElement(_currentTheme2.default,{site:site,canCustomize:site&&site.isCustomizable()}),_react2.default.createElement(_upgradeNudge2.default,{title:translate("Get Custom Design with Premium"),message:translate("Customize your theme using premium fonts, color palettes, and the CSS editor."),feature:_constants.FEATURE_ADVANCED_DESIGN,event:"themes_custom_design"}))};var mergeProps=function mergeProps(stateProps,dispatchProps,ownProps){var site=stateProps.selectedSite;var options=dispatchProps;var filteredOptions=(0,_pickBy2.default)(options,function(option){return!(option.hideForSite&&option.hideForSite(stateProps))});var boundOptions=(0,_themeOptions.bindOptionsToSite)(filteredOptions,site);return(0,_assign2.default)({},ownProps,stateProps,{options:boundOptions,defaultOption:boundOptions.activate,secondaryOption:boundOptions.tryandcustomize,getScreenshotOption:function getScreenshotOption(theme){return theme.active?boundOptions.customize:boundOptions.info}})};exports.default=(0,_reactRedux.connect)(function(state){var selectedSite=(0,_selectors.getSelectedSite)(state);return{selectedSite:selectedSite,isJetpack:selectedSite&&(0,_selectors2.isJetpackSite)(state,selectedSite.ID),isCustomizable:selectedSite&&(0,_selectors3.canCurrentUser)(state,selectedSite.ID,"edit_theme_options")}},(0,_themeOptions.bindOptionsToDispatch)({customize:_themeOptions.customize,preview:_themeOptions.preview,purchase:_themeOptions.purchase,activate:_themeOptions.activate,tryandcustomize:_themeOptions.tryandcustomize,separator:_themeOptions.separator,info:_themeOptions.info,support:_themeOptions.support,help:_themeOptions.help},"showcase"),mergeProps)((0,_i18nCalypso.localize)(ThemesSingleSite));module.exports=exports["default"]},2757:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFilter=getFilter;exports.sortFilterTerms=sortFilterTerms;exports.getSortedFilterTerms=getSortedFilterTerms;exports.stripFilters=stripFilters;var _forIn=__webpack_require__(2019);var _forIn2=_interopRequireDefault(_forIn);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var FILTER_REGEX_STRING="(\\w+)\\:\\s*([\\w-]+)";var FILTER_REGEX_GLOBAL=new RegExp(FILTER_REGEX_STRING,"g");var FILTER_REGEX_SINGLE=new RegExp("^"+FILTER_REGEX_STRING+"$");var FILTER_TAXONOMY_GROUP=1;var FILTER_TERM_GROUP=2;var taxonomies={color:["black","blue","brown","dark","gray","green","light","orange","pink","purple","red","silver","tan","white","yellow"],column:["four-columns","left-sidebar","one-column","right-sidebar","three-columns","two-columns"],feature:["accessibility-ready","author-bio","blog-excerpts","breadcrumb-navigation","classic-menu","custom-background","custom-colors","custom-header","custom-menu","editor-style","featured-content-with-pages","featured-image-header","featured-images","flexible-header","front-page-post-form","full-width-template","infinite-scroll","microformats","multiple-menus","one-page","post-formats","post-slider","rtl-language-support","site-logo","sticky-post","testimonials","theme-options","threaded-comments","translation-ready","video","wordads"],layout:["fixed-layout","fluid-layout","responsive-layout"],subject:["announcement","art","artwork","blog","business","cartoon","collaboration","craft","design","education","fashion","food","gaming","holiday","hotel","journal","lifestream","magazine","major-league-baseball","mlb","music","nature","news","outdoors","partner","photoblogging","photography","portfolio","productivity","real-estate","school","scrapbooking","seasonal","sports","travel","tumblelog","video","wedding"],style:["abstract","artistic","bright","clean","colorful","conservative","contemporary","curved","dark","earthy","elegant","faded","flamboyant","flowery","formal","funny","futuristic","geometric","glamorous","grungy","hand-drawn","handcrafted","humorous","industrial","light","metallic","minimal","modern","natural","paper-made","playful","professional","retro","simple","sophisticated","tech","textured","traditional","urban","vibrant","whimsical"]};var termTable=void 0;function getTermTable(){if(!termTable){termTable={};(0,_forIn2.default)(taxonomies,function(terms,taxonomy){terms.forEach(function(term){termTable[term]=taxonomy})})}return termTable}function splitFilter(filter,group){var match=filter.match(FILTER_REGEX_SINGLE);if(match){return match[group];
}return""}function getTerm(filter){return splitFilter(filter,FILTER_TERM_GROUP)}function getTaxonomy(filter){return splitFilter(filter,FILTER_TAXONOMY_GROUP)}function getFilter(term){var terms=getTermTable();if(terms[term]){return terms[term]+":"+term}return""}function filterIsValid(filter){return getTermTable()[getTerm(filter)]===getTaxonomy(filter)}function sortFilterTerms(terms){return terms.map(getFilter).filter(filterIsValid).sort().map(getTerm)}function getSortedFilterTerms(input){var matches=input.match(FILTER_REGEX_GLOBAL);if(matches){var terms=matches.filter(filterIsValid).map(getTerm);return sortFilterTerms(terms).join(",")}return""}function stripFilters(input){return input.replace(FILTER_REGEX_GLOBAL,"").trim()}},2758:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _find=__webpack_require__(33);var _find2=_interopRequireDefault(_find);var _debounce=__webpack_require__(343);var _debounce2=_interopRequireDefault(_debounce);var _search=__webpack_require__(651);var _search2=_interopRequireDefault(_search);var _selectDropdown=__webpack_require__(2759);var _selectDropdown2=_interopRequireDefault(_selectDropdown);var _sectionNav=__webpack_require__(1473);var _sectionNav2=_interopRequireDefault(_sectionNav);var _tabs=__webpack_require__(1471);var _tabs2=_interopRequireDefault(_tabs);var _item=__webpack_require__(1470);var _item2=_interopRequireDefault(_item);var _helpers=__webpack_require__(348);var _config=__webpack_require__(10);var _config2=_interopRequireDefault(_config);var _viewport=__webpack_require__(93);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ThemesSearchCard=_react2.default.createClass({displayName:"ThemesSearchCard",propTypes:{tier:_react2.default.PropTypes.string,select:_react2.default.PropTypes.func.isRequired,site:_react2.default.PropTypes.oneOfType([_react2.default.PropTypes.object,_react2.default.PropTypes.bool]).isRequired,onSearch:_react2.default.PropTypes.func.isRequired,search:_react2.default.PropTypes.string},trackClick:_helpers.trackClick.bind(null,"search bar"),componentWillMount:function componentWillMount(){var _this=this;this.onResize=(0,_debounce2.default)(function(){_this.setState({isMobile:(0,_viewport.isMobile)()})},250)},componentDidMount:function componentDidMount(){window.addEventListener("resize",this.onResize)},componentWillUnmount:function componentWillUnmount(){window.removeEventListener("resize",this.onResize)},getInitialState:function getInitialState(){return{isMobile:(0,_viewport.isMobile)()}},getDefaultProps:function getDefaultProps(){return{tier:"all"}},getSelectedTierFormatted:function getSelectedTierFormatted(tiers){var tier=(0,_find2.default)(tiers,{value:this.props.tier});return tier?_react2.default.createElement("span",null,tier.label):null},getTierNavItems:function getTierNavItems(tiers){var _this2=this;return tiers.map(function(_ref){var value=_ref.value;var label=_ref.label;return _react2.default.createElement(_item2.default,{key:"tier-"+value,selected:value===_this2.props.tier,onClick:_this2.props.select.bind(null,{value:value})},label)})},onMore:function onMore(){this.trackClick("more")},renderMobile:function renderMobile(tiers){var isJetpack=this.props.site&&this.props.site.jetpack;var isPremiumThemesEnabled=_config2.default.isEnabled("upgrades/premium-themes");var selectedTiers=isPremiumThemesEnabled?tiers:[tiers.find(function(tier){return tier.value==="free"})];return _react2.default.createElement("div",{className:"themes__search-card","data-tip-target":"themes-search-card"},_react2.default.createElement(_sectionNav2.default,{selectedText:this.getSelectedTierFormatted(tiers)},_react2.default.createElement(_tabs2.default,null,!isJetpack&&this.getTierNavItems(selectedTiers),isPremiumThemesEnabled&&_react2.default.createElement("hr",{className:"section-nav__hr"}),isPremiumThemesEnabled&&_react2.default.createElement(_item2.default,{path:(0,_helpers.getExternalThemesUrl)(this.props.site),onClick:this.onMore,isExternalLink:true},this.translate("More")+" ")),_react2.default.createElement(_search2.default,{pinned:true,fitsContainer:true,onSearch:this.props.onSearch,initialValue:this.props.search,ref:"url-search",placeholder:this.translate("Search themes"),analyticsGroup:"Themes",delaySearch:true})))},render:function render(){var isJetpack=this.props.site&&this.props.site.jetpack;var isPremiumThemesEnabled=_config2.default.isEnabled("upgrades/premium-themes");var tiers=[{value:"all",label:this.translate("All")},{value:"free",label:this.translate("Free")},{value:"premium",label:this.translate("Premium")}];if(this.state.isMobile){return this.renderMobile(tiers)}return _react2.default.createElement("div",{className:"themes__search-card","data-tip-target":"themes-search-card"},_react2.default.createElement(_search2.default,{onSearch:this.props.onSearch,initialValue:this.props.search,ref:"url-search",placeholder:this.translate("What kind of theme are you looking for?"),analyticsGroup:"Themes",delaySearch:true}),isPremiumThemesEnabled&&!isJetpack&&_react2.default.createElement(_selectDropdown2.default,{tier:this.props.tier,options:tiers,onSelect:this.props.select}),isPremiumThemesEnabled&&_react2.default.createElement("a",{className:"button more",href:(0,_helpers.getExternalThemesUrl)(this.props.site),target:"_blank",onClick:this.onMore},this.translate("More")))}});exports.default=ThemesSearchCard;module.exports=exports["default"]},2759:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _extends2=__webpack_require__(19);var _extends3=_interopRequireDefault(_extends2);var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _reactDom=__webpack_require__(43);var _reactDom2=_interopRequireDefault(_reactDom);var _selectDropdown=__webpack_require__(1566);var _selectDropdown2=_interopRequireDefault(_selectDropdown);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var WIDTH_CORRECTION=2.5;var ThemesSelectDropdown=_react2.default.createClass({displayName:"ThemesSelectDropdown",propTypes:{tier:_react2.default.PropTypes.string.isRequired,options:_react2.default.PropTypes.array.isRequired,onSelect:_react2.default.PropTypes.func.isRequired},getInitialState:function getInitialState(){return{style:null}},componentDidMount:function componentDidMount(){this.setState({style:{width:this.getMaxHiddenWidth()}})},getMaxHiddenWidth:function getMaxHiddenWidth(){var hiddenList=_reactDom2.default.findDOMNode(this).querySelector("ul");var maxWidth=hiddenList.getBoundingClientRect().width;return maxWidth+WIDTH_CORRECTION+"px"},render:function render(){return _react2.default.createElement(_selectDropdown2.default,(0,_extends3.default)({style:this.state.style,initialSelected:this.props.tier,tipTarget:"themes-tier-dropdown"},this.props))}});exports.default=ThemesSelectDropdown;module.exports=exports["default"]},2760:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _react=__webpack_require__(1);var _react2=_interopRequireDefault(_react);var _page=__webpack_require__(40);var _page2=_interopRequireDefault(_page);var _helpers=__webpack_require__(348);var _themesSearchCard=__webpack_require__(2758);var _themesSearchCard2=_interopRequireDefault(_themesSearchCard);var _themesListFetcher=__webpack_require__(2292);var _themesListFetcher2=_interopRequireDefault(_themesListFetcher);var _themesList=__webpack_require__(1800);var _themesList2=_interopRequireDefault(_themesList);var _stickyPanel=__webpack_require__(2322);var _stickyPanel2=_interopRequireDefault(_stickyPanel);var _analytics=__webpack_require__(16);var _analytics2=_interopRequireDefault(_analytics);var _buildUrl=__webpack_require__(1498);var _buildUrl2=_interopRequireDefault(_buildUrl);var _themeFilters=__webpack_require__(2757);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ThemesSelection=_react2.default.createClass({displayName:"ThemesSelection",propTypes:{selectedSite:_react.PropTypes.oneOfType([_react.PropTypes.object,_react.PropTypes.bool]).isRequired,siteId:_react.PropTypes.string,search:_react.PropTypes.string,onScreenshotClick:_react.PropTypes.func,getOptions:_react2.default.PropTypes.func,queryParams:_react.PropTypes.object.isRequired,themesList:_react.PropTypes.array.isRequired,getActionLabel:_react2.default.PropTypes.func,tier:_react2.default.PropTypes.string},getDefaultProps:function getDefaultProps(){return{search:""}},doSearch:function doSearch(searchBoxContent){var filter=(0,_themeFilters.getSortedFilterTerms)(searchBoxContent);var searchString=(0,_themeFilters.stripFilters)(searchBoxContent);this.updateUrl(this.props.tier||"all",filter,searchString)},prependFilterKeys:function prependFilterKeys(){var filter=this.props.filter;if(filter){return filter.split(",").map(_themeFilters.getFilter).join(" ")+" "}return""},onMoreButtonClick:function onMoreButtonClick(theme,resultsRank){this.recordSearchResultsClick(theme,resultsRank)},recordSearchResultsClick:function recordSearchResultsClick(theme,resultsRank){var _props=this.props;var queryParams=_props.queryParams;var themesList=_props.themesList;_analytics2.default.tracks.recordEvent("calypso_themeshowcase_theme_click",{search_term:queryParams.search,theme:theme,results_rank:resultsRank+1,results:themesList,page_number:queryParams.page})},trackScrollPage:function trackScrollPage(){_analytics2.default.tracks.recordEvent("calypso_themeshowcase_scroll");this.props.trackScrollPage()},trackLastPage:function trackLastPage(){_analytics2.default.ga.recordEvent("Themes","Reached Last Page");_analytics2.default.tracks.recordEvent("calypso_themeshowcase_last_page_scroll")},onTierSelect:function onTierSelect(_ref){var tier=_ref.value;(0,_helpers.trackClick)("search bar filter",tier);this.updateUrl(tier,this.props.filter)},updateUrl:function updateUrl(tier,filter){var searchString=arguments.length<=2||arguments[2]===undefined?this.props.search:arguments[2];var siteId=this.props.siteId?"/"+this.props.siteId:"";var tierSection=tier==="all"?"":"/"+tier;var filterSection=filter?"/filter/"+filter:"";var url="/design"+tierSection+filterSection+siteId;(0,_page2.default)((0,_buildUrl2.default)(url,searchString))},onScreenshotClick:function onScreenshotClick(theme,resultsRank){(0,_helpers.trackClick)("theme","screenshot");if(!theme.active){this.recordSearchResultsClick(theme,resultsRank)}this.props.onScreenshotClick&&this.props.onScreenshotClick(theme)},render:function render(){var site=this.props.selectedSite;return _react2.default.createElement("div",{className:"themes__selection"},_react2.default.createElement(_stickyPanel2.default,null,_react2.default.createElement(_themesSearchCard2.default,{site:site,onSearch:this.doSearch,search:this.prependFilterKeys()+this.props.search,tier:this.props.tier,select:this.onTierSelect})),_react2.default.createElement(_themesListFetcher2.default,{site:site,isMultisite:!this.props.siteId,search:this.props.search,tier:this.props.tier,filter:this.props.filter,onRealScroll:this.trackScrollPage,onLastPage:this.trackLastPage},_react2.default.createElement(_themesList2.default,{getButtonOptions:this.props.getOptions,onMoreButtonClick:this.onMoreButtonClick,onScreenshotClick:this.onScreenshotClick,getScreenshotUrl:this.props.getScreenshotUrl,getActionLabel:this.props.getActionLabel})))}});exports.default=ThemesSelection;module.exports=exports["default"]}});